var xN=Object.defineProperty;var gN=(e,t,r)=>t in e?xN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var V0=(e,t,r)=>gN(e,typeof t!="symbol"?t+"":t,r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();function fN(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ej={exports:{}},Vc={},tj={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var el=Symbol.for("react.element"),mN=Symbol.for("react.portal"),yN=Symbol.for("react.fragment"),vN=Symbol.for("react.strict_mode"),bN=Symbol.for("react.profiler"),jN=Symbol.for("react.provider"),SN=Symbol.for("react.context"),wN=Symbol.for("react.forward_ref"),kN=Symbol.for("react.suspense"),CN=Symbol.for("react.memo"),NN=Symbol.for("react.lazy"),H0=Symbol.iterator;function _N(e){return e===null||typeof e!="object"?null:(e=H0&&e[H0]||e["@@iterator"],typeof e=="function"?e:null)}var nj={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rj=Object.assign,sj={};function di(e,t,r){this.props=e,this.context=t,this.refs=sj,this.updater=r||nj}di.prototype.isReactComponent={};di.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};di.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function aj(){}aj.prototype=di.prototype;function og(e,t,r){this.props=e,this.context=t,this.refs=sj,this.updater=r||nj}var lg=og.prototype=new aj;lg.constructor=og;rj(lg,di.prototype);lg.isPureReactComponent=!0;var K0=Array.isArray,ij=Object.prototype.hasOwnProperty,dg={current:null},oj={key:!0,ref:!0,__self:!0,__source:!0};function lj(e,t,r){var a,i={},o=null,d=null;if(t!=null)for(a in t.ref!==void 0&&(d=t.ref),t.key!==void 0&&(o=""+t.key),t)ij.call(t,a)&&!oj.hasOwnProperty(a)&&(i[a]=t[a]);var u=arguments.length-2;if(u===1)i.children=r;else if(1<u){for(var h=Array(u),m=0;m<u;m++)h[m]=arguments[m+2];i.children=h}if(e&&e.defaultProps)for(a in u=e.defaultProps,u)i[a]===void 0&&(i[a]=u[a]);return{$$typeof:el,type:e,key:o,ref:d,props:i,_owner:dg.current}}function AN(e,t){return{$$typeof:el,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function cg(e){return typeof e=="object"&&e!==null&&e.$$typeof===el}function RN(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var J0=/\/+/g;function dh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?RN(""+e.key):t.toString(36)}function Yd(e,t,r,a,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var d=!1;if(e===null)d=!0;else switch(o){case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case el:case mN:d=!0}}if(d)return d=e,i=i(d),e=a===""?"."+dh(d,0):a,K0(i)?(r="",e!=null&&(r=e.replace(J0,"$&/")+"/"),Yd(i,t,r,"",function(m){return m})):i!=null&&(cg(i)&&(i=AN(i,r+(!i.key||d&&d.key===i.key?"":(""+i.key).replace(J0,"$&/")+"/")+e)),t.push(i)),1;if(d=0,a=a===""?".":a+":",K0(e))for(var u=0;u<e.length;u++){o=e[u];var h=a+dh(o,u);d+=Yd(o,t,r,h,i)}else if(h=_N(e),typeof h=="function")for(e=h.call(e),u=0;!(o=e.next()).done;)o=o.value,h=a+dh(o,u++),d+=Yd(o,t,r,h,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return d}function wd(e,t,r){if(e==null)return e;var a=[],i=0;return Yd(e,a,"","",function(o){return t.call(r,o,i++)}),a}function BN(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var yt={current:null},Qd={transition:null},TN={ReactCurrentDispatcher:yt,ReactCurrentBatchConfig:Qd,ReactCurrentOwner:dg};function dj(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:wd,forEach:function(e,t,r){wd(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return wd(e,function(){t++}),t},toArray:function(e){return wd(e,function(t){return t})||[]},only:function(e){if(!cg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};oe.Component=di;oe.Fragment=yN;oe.Profiler=bN;oe.PureComponent=og;oe.StrictMode=vN;oe.Suspense=kN;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TN;oe.act=dj;oe.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=rj({},e.props),i=e.key,o=e.ref,d=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,d=dg.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(h in t)ij.call(t,h)&&!oj.hasOwnProperty(h)&&(a[h]=t[h]===void 0&&u!==void 0?u[h]:t[h])}var h=arguments.length-2;if(h===1)a.children=r;else if(1<h){u=Array(h);for(var m=0;m<h;m++)u[m]=arguments[m+2];a.children=u}return{$$typeof:el,type:e.type,key:i,ref:o,props:a,_owner:d}};oe.createContext=function(e){return e={$$typeof:SN,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:jN,_context:e},e.Consumer=e};oe.createElement=lj;oe.createFactory=function(e){var t=lj.bind(null,e);return t.type=e,t};oe.createRef=function(){return{current:null}};oe.forwardRef=function(e){return{$$typeof:wN,render:e}};oe.isValidElement=cg;oe.lazy=function(e){return{$$typeof:NN,_payload:{_status:-1,_result:e},_init:BN}};oe.memo=function(e,t){return{$$typeof:CN,type:e,compare:t===void 0?null:t}};oe.startTransition=function(e){var t=Qd.transition;Qd.transition={};try{e()}finally{Qd.transition=t}};oe.unstable_act=dj;oe.useCallback=function(e,t){return yt.current.useCallback(e,t)};oe.useContext=function(e){return yt.current.useContext(e)};oe.useDebugValue=function(){};oe.useDeferredValue=function(e){return yt.current.useDeferredValue(e)};oe.useEffect=function(e,t){return yt.current.useEffect(e,t)};oe.useId=function(){return yt.current.useId()};oe.useImperativeHandle=function(e,t,r){return yt.current.useImperativeHandle(e,t,r)};oe.useInsertionEffect=function(e,t){return yt.current.useInsertionEffect(e,t)};oe.useLayoutEffect=function(e,t){return yt.current.useLayoutEffect(e,t)};oe.useMemo=function(e,t){return yt.current.useMemo(e,t)};oe.useReducer=function(e,t,r){return yt.current.useReducer(e,t,r)};oe.useRef=function(e){return yt.current.useRef(e)};oe.useState=function(e){return yt.current.useState(e)};oe.useSyncExternalStore=function(e,t,r){return yt.current.useSyncExternalStore(e,t,r)};oe.useTransition=function(){return yt.current.useTransition()};oe.version="18.3.1";tj.exports=oe;var x=tj.exports;const vo=fN(x);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zN=x,LN=Symbol.for("react.element"),EN=Symbol.for("react.fragment"),FN=Object.prototype.hasOwnProperty,DN=zN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,PN={key:!0,ref:!0,__self:!0,__source:!0};function cj(e,t,r){var a,i={},o=null,d=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(d=t.ref);for(a in t)FN.call(t,a)&&!PN.hasOwnProperty(a)&&(i[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)i[a]===void 0&&(i[a]=t[a]);return{$$typeof:LN,type:e,key:o,ref:d,props:i,_owner:DN.current}}Vc.Fragment=EN;Vc.jsx=cj;Vc.jsxs=cj;ej.exports=Vc;var n=ej.exports,Qh={},pj={exports:{}},$t={},uj={exports:{}},hj={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t($,X){var te=$.length;$.push(X);e:for(;0<te;){var ce=te-1>>>1,G=$[ce];if(0<i(G,X))$[ce]=X,$[te]=G,te=ce;else break e}}function r($){return $.length===0?null:$[0]}function a($){if($.length===0)return null;var X=$[0],te=$.pop();if(te!==X){$[0]=te;e:for(var ce=0,G=$.length,an=G>>>1;ce<an;){var Ve=2*(ce+1)-1,Fn=$[Ve],on=Ve+1,Zr=$[on];if(0>i(Fn,te))on<G&&0>i(Zr,Fn)?($[ce]=Zr,$[on]=te,ce=on):($[ce]=Fn,$[Ve]=te,ce=Ve);else if(on<G&&0>i(Zr,te))$[ce]=Zr,$[on]=te,ce=on;else break e}}return X}function i($,X){var te=$.sortIndex-X.sortIndex;return te!==0?te:$.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var d=Date,u=d.now();e.unstable_now=function(){return d.now()-u}}var h=[],m=[],f=1,b=null,v=3,T=!1,N=!1,R=!1,F=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _($){for(var X=r(m);X!==null;){if(X.callback===null)a(m);else if(X.startTime<=$)a(m),X.sortIndex=X.expirationTime,t(h,X);else break;X=r(m)}}function z($){if(R=!1,_($),!N)if(r(h)!==null)N=!0,Be(I);else{var X=r(m);X!==null&&Ut(z,X.startTime-$)}}function I($,X){N=!1,R&&(R=!1,C(K),K=-1),T=!0;var te=v;try{for(_(X),b=r(h);b!==null&&(!(b.expirationTime>X)||$&&!Re());){var ce=b.callback;if(typeof ce=="function"){b.callback=null,v=b.priorityLevel;var G=ce(b.expirationTime<=X);X=e.unstable_now(),typeof G=="function"?b.callback=G:b===r(h)&&a(h),_(X)}else a(h);b=r(h)}if(b!==null)var an=!0;else{var Ve=r(m);Ve!==null&&Ut(z,Ve.startTime-X),an=!1}return an}finally{b=null,v=te,T=!1}}var M=!1,W=null,K=-1,xe=5,re=-1;function Re(){return!(e.unstable_now()-re<xe)}function De(){if(W!==null){var $=e.unstable_now();re=$;var X=!0;try{X=W(!0,$)}finally{X?Qe():(M=!1,W=null)}}else M=!1}var Qe;if(typeof j=="function")Qe=function(){j(De)};else if(typeof MessageChannel<"u"){var Ue=new MessageChannel,Rt=Ue.port2;Ue.port1.onmessage=De,Qe=function(){Rt.postMessage(null)}}else Qe=function(){F(De,0)};function Be($){W=$,M||(M=!0,Qe())}function Ut($,X){K=F(function(){$(e.unstable_now())},X)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_continueExecution=function(){N||T||(N=!0,Be(I))},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):xe=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return r(h)},e.unstable_next=function($){switch(v){case 1:case 2:case 3:var X=3;break;default:X=v}var te=v;v=X;try{return $()}finally{v=te}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($,X){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var te=v;v=$;try{return X()}finally{v=te}},e.unstable_scheduleCallback=function($,X,te){var ce=e.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ce+te:ce):te=ce,$){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=te+G,$={id:f++,callback:X,priorityLevel:$,startTime:te,expirationTime:G,sortIndex:-1},te>ce?($.sortIndex=te,t(m,$),r(h)===null&&$===r(m)&&(R?(C(K),K=-1):R=!0,Ut(z,te-ce))):($.sortIndex=G,t(h,$),N||T||(N=!0,Be(I))),$},e.unstable_shouldYield=Re,e.unstable_wrapCallback=function($){var X=v;return function(){var te=v;v=X;try{return $.apply(this,arguments)}finally{v=te}}}})(hj);uj.exports=hj;var IN=uj.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ON=x,Mt=IN;function U(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xj=new Set,Do={};function ea(e,t){ei(e,t),ei(e+"Capture",t)}function ei(e,t){for(Do[e]=t,e=0;e<t.length;e++)xj.add(t[e])}var or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xh=Object.prototype.hasOwnProperty,WN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Y0={},Q0={};function MN(e){return Xh.call(Q0,e)?!0:Xh.call(Y0,e)?!1:WN.test(e)?Q0[e]=!0:(Y0[e]=!0,!1)}function $N(e,t,r,a){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function qN(e,t,r,a){if(t===null||typeof t>"u"||$N(e,t,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function vt(e,t,r,a,i,o,d){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=d}var rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){rt[e]=new vt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];rt[t]=new vt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){rt[e]=new vt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){rt[e]=new vt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){rt[e]=new vt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){rt[e]=new vt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){rt[e]=new vt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){rt[e]=new vt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){rt[e]=new vt(e,5,!1,e.toLowerCase(),null,!1,!1)});var pg=/[\-:]([a-z])/g;function ug(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(pg,ug);rt[t]=new vt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(pg,ug);rt[t]=new vt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(pg,ug);rt[t]=new vt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){rt[e]=new vt(e,1,!1,e.toLowerCase(),null,!1,!1)});rt.xlinkHref=new vt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){rt[e]=new vt(e,1,!1,e.toLowerCase(),null,!0,!0)});function hg(e,t,r,a){var i=rt.hasOwnProperty(t)?rt[t]:null;(i!==null?i.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(qN(t,r,i,a)&&(r=null),a||i===null?MN(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,a=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,a?e.setAttributeNS(a,t,r):e.setAttribute(t,r))))}var pr=ON.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,kd=Symbol.for("react.element"),Da=Symbol.for("react.portal"),Pa=Symbol.for("react.fragment"),xg=Symbol.for("react.strict_mode"),Gh=Symbol.for("react.profiler"),gj=Symbol.for("react.provider"),fj=Symbol.for("react.context"),gg=Symbol.for("react.forward_ref"),Zh=Symbol.for("react.suspense"),ex=Symbol.for("react.suspense_list"),fg=Symbol.for("react.memo"),Lr=Symbol.for("react.lazy"),mj=Symbol.for("react.offscreen"),X0=Symbol.iterator;function io(e){return e===null||typeof e!="object"?null:(e=X0&&e[X0]||e["@@iterator"],typeof e=="function"?e:null)}var Ae=Object.assign,ch;function bo(e){if(ch===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);ch=t&&t[1]||""}return`
`+ch+e}var ph=!1;function uh(e,t){if(!e||ph)return"";ph=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(m){var a=m}Reflect.construct(e,[],t)}else{try{t.call()}catch(m){a=m}e.call(t.prototype)}else{try{throw Error()}catch(m){a=m}e()}}catch(m){if(m&&a&&typeof m.stack=="string"){for(var i=m.stack.split(`
`),o=a.stack.split(`
`),d=i.length-1,u=o.length-1;1<=d&&0<=u&&i[d]!==o[u];)u--;for(;1<=d&&0<=u;d--,u--)if(i[d]!==o[u]){if(d!==1||u!==1)do if(d--,u--,0>u||i[d]!==o[u]){var h=`
`+i[d].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),h}while(1<=d&&0<=u);break}}}finally{ph=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?bo(e):""}function UN(e){switch(e.tag){case 5:return bo(e.type);case 16:return bo("Lazy");case 13:return bo("Suspense");case 19:return bo("SuspenseList");case 0:case 2:case 15:return e=uh(e.type,!1),e;case 11:return e=uh(e.type.render,!1),e;case 1:return e=uh(e.type,!0),e;default:return""}}function tx(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Pa:return"Fragment";case Da:return"Portal";case Gh:return"Profiler";case xg:return"StrictMode";case Zh:return"Suspense";case ex:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case fj:return(e.displayName||"Context")+".Consumer";case gj:return(e._context.displayName||"Context")+".Provider";case gg:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case fg:return t=e.displayName||null,t!==null?t:tx(e.type)||"Memo";case Lr:t=e._payload,e=e._init;try{return tx(e(t))}catch{}}return null}function VN(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tx(t);case 8:return t===xg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Jr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function yj(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function HN(e){var t=yj(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(d){a=""+d,o.call(this,d)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(d){a=""+d},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Cd(e){e._valueTracker||(e._valueTracker=HN(e))}function vj(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),a="";return e&&(a=yj(e)?e.checked?"true":"false":e.value),e=a,e!==r?(t.setValue(e),!0):!1}function xc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function nx(e,t){var r=t.checked;return Ae({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function G0(e,t){var r=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;r=Jr(t.value!=null?t.value:r),e._wrapperState={initialChecked:a,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function bj(e,t){t=t.checked,t!=null&&hg(e,"checked",t,!1)}function rx(e,t){bj(e,t);var r=Jr(t.value),a=t.type;if(r!=null)a==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?sx(e,t.type,r):t.hasOwnProperty("defaultValue")&&sx(e,t.type,Jr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Z0(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function sx(e,t,r){(t!=="number"||xc(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var jo=Array.isArray;function Ja(e,t,r,a){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&a&&(e[r].defaultSelected=!0)}else{for(r=""+Jr(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,a&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function ax(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(U(91));return Ae({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function e1(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(U(92));if(jo(r)){if(1<r.length)throw Error(U(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Jr(r)}}function jj(e,t){var r=Jr(t.value),a=Jr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),a!=null&&(e.defaultValue=""+a)}function t1(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Sj(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ix(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Sj(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Nd,wj=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,a,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,a,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Nd=Nd||document.createElement("div"),Nd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Nd.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Po(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var No={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},KN=["Webkit","ms","Moz","O"];Object.keys(No).forEach(function(e){KN.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),No[t]=No[e]})});function kj(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||No.hasOwnProperty(e)&&No[e]?(""+t).trim():t+"px"}function Cj(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var a=r.indexOf("--")===0,i=kj(r,t[r],a);r==="float"&&(r="cssFloat"),a?e.setProperty(r,i):e[r]=i}}var JN=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ox(e,t){if(t){if(JN[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(U(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(U(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(U(61))}if(t.style!=null&&typeof t.style!="object")throw Error(U(62))}}function lx(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dx=null;function mg(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var cx=null,Ya=null,Qa=null;function n1(e){if(e=rl(e)){if(typeof cx!="function")throw Error(U(280));var t=e.stateNode;t&&(t=Qc(t),cx(e.stateNode,e.type,t))}}function Nj(e){Ya?Qa?Qa.push(e):Qa=[e]:Ya=e}function _j(){if(Ya){var e=Ya,t=Qa;if(Qa=Ya=null,n1(e),t)for(e=0;e<t.length;e++)n1(t[e])}}function Aj(e,t){return e(t)}function Rj(){}var hh=!1;function Bj(e,t,r){if(hh)return e(t,r);hh=!0;try{return Aj(e,t,r)}finally{hh=!1,(Ya!==null||Qa!==null)&&(Rj(),_j())}}function Io(e,t){var r=e.stateNode;if(r===null)return null;var a=Qc(r);if(a===null)return null;r=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(U(231,t,typeof r));return r}var px=!1;if(or)try{var oo={};Object.defineProperty(oo,"passive",{get:function(){px=!0}}),window.addEventListener("test",oo,oo),window.removeEventListener("test",oo,oo)}catch{px=!1}function YN(e,t,r,a,i,o,d,u,h){var m=Array.prototype.slice.call(arguments,3);try{t.apply(r,m)}catch(f){this.onError(f)}}var _o=!1,gc=null,fc=!1,ux=null,QN={onError:function(e){_o=!0,gc=e}};function XN(e,t,r,a,i,o,d,u,h){_o=!1,gc=null,YN.apply(QN,arguments)}function GN(e,t,r,a,i,o,d,u,h){if(XN.apply(this,arguments),_o){if(_o){var m=gc;_o=!1,gc=null}else throw Error(U(198));fc||(fc=!0,ux=m)}}function ta(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Tj(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function r1(e){if(ta(e)!==e)throw Error(U(188))}function ZN(e){var t=e.alternate;if(!t){if(t=ta(e),t===null)throw Error(U(188));return t!==e?null:e}for(var r=e,a=t;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(a=i.return,a!==null){r=a;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return r1(i),e;if(o===a)return r1(i),t;o=o.sibling}throw Error(U(188))}if(r.return!==a.return)r=i,a=o;else{for(var d=!1,u=i.child;u;){if(u===r){d=!0,r=i,a=o;break}if(u===a){d=!0,a=i,r=o;break}u=u.sibling}if(!d){for(u=o.child;u;){if(u===r){d=!0,r=o,a=i;break}if(u===a){d=!0,a=o,r=i;break}u=u.sibling}if(!d)throw Error(U(189))}}if(r.alternate!==a)throw Error(U(190))}if(r.tag!==3)throw Error(U(188));return r.stateNode.current===r?e:t}function zj(e){return e=ZN(e),e!==null?Lj(e):null}function Lj(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Lj(e);if(t!==null)return t;e=e.sibling}return null}var Ej=Mt.unstable_scheduleCallback,s1=Mt.unstable_cancelCallback,e_=Mt.unstable_shouldYield,t_=Mt.unstable_requestPaint,Ee=Mt.unstable_now,n_=Mt.unstable_getCurrentPriorityLevel,yg=Mt.unstable_ImmediatePriority,Fj=Mt.unstable_UserBlockingPriority,mc=Mt.unstable_NormalPriority,r_=Mt.unstable_LowPriority,Dj=Mt.unstable_IdlePriority,Hc=null,Tn=null;function s_(e){if(Tn&&typeof Tn.onCommitFiberRoot=="function")try{Tn.onCommitFiberRoot(Hc,e,void 0,(e.current.flags&128)===128)}catch{}}var yn=Math.clz32?Math.clz32:o_,a_=Math.log,i_=Math.LN2;function o_(e){return e>>>=0,e===0?32:31-(a_(e)/i_|0)|0}var _d=64,Ad=4194304;function So(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function yc(e,t){var r=e.pendingLanes;if(r===0)return 0;var a=0,i=e.suspendedLanes,o=e.pingedLanes,d=r&268435455;if(d!==0){var u=d&~i;u!==0?a=So(u):(o&=d,o!==0&&(a=So(o)))}else d=r&~i,d!==0?a=So(d):o!==0&&(a=So(o));if(a===0)return 0;if(t!==0&&t!==a&&!(t&i)&&(i=a&-a,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(a&4&&(a|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)r=31-yn(t),i=1<<r,a|=e[r],t&=~i;return a}function l_(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function d_(e,t){for(var r=e.suspendedLanes,a=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var d=31-yn(o),u=1<<d,h=i[d];h===-1?(!(u&r)||u&a)&&(i[d]=l_(u,t)):h<=t&&(e.expiredLanes|=u),o&=~u}}function hx(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Pj(){var e=_d;return _d<<=1,!(_d&4194240)&&(_d=64),e}function xh(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function tl(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-yn(t),e[t]=r}function c_(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-yn(r),o=1<<i;t[i]=0,a[i]=-1,e[i]=-1,r&=~o}}function vg(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var a=31-yn(r),i=1<<a;i&t|e[a]&t&&(e[a]|=t),r&=~i}}var fe=0;function Ij(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Oj,bg,Wj,Mj,$j,xx=!1,Rd=[],Or=null,Wr=null,Mr=null,Oo=new Map,Wo=new Map,Fr=[],p_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function a1(e,t){switch(e){case"focusin":case"focusout":Or=null;break;case"dragenter":case"dragleave":Wr=null;break;case"mouseover":case"mouseout":Mr=null;break;case"pointerover":case"pointerout":Oo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wo.delete(t.pointerId)}}function lo(e,t,r,a,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:a,nativeEvent:o,targetContainers:[i]},t!==null&&(t=rl(t),t!==null&&bg(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function u_(e,t,r,a,i){switch(t){case"focusin":return Or=lo(Or,e,t,r,a,i),!0;case"dragenter":return Wr=lo(Wr,e,t,r,a,i),!0;case"mouseover":return Mr=lo(Mr,e,t,r,a,i),!0;case"pointerover":var o=i.pointerId;return Oo.set(o,lo(Oo.get(o)||null,e,t,r,a,i)),!0;case"gotpointercapture":return o=i.pointerId,Wo.set(o,lo(Wo.get(o)||null,e,t,r,a,i)),!0}return!1}function qj(e){var t=Ws(e.target);if(t!==null){var r=ta(t);if(r!==null){if(t=r.tag,t===13){if(t=Tj(r),t!==null){e.blockedOn=t,$j(e.priority,function(){Wj(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xd(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=gx(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var a=new r.constructor(r.type,r);dx=a,r.target.dispatchEvent(a),dx=null}else return t=rl(r),t!==null&&bg(t),e.blockedOn=r,!1;t.shift()}return!0}function i1(e,t,r){Xd(e)&&r.delete(t)}function h_(){xx=!1,Or!==null&&Xd(Or)&&(Or=null),Wr!==null&&Xd(Wr)&&(Wr=null),Mr!==null&&Xd(Mr)&&(Mr=null),Oo.forEach(i1),Wo.forEach(i1)}function co(e,t){e.blockedOn===t&&(e.blockedOn=null,xx||(xx=!0,Mt.unstable_scheduleCallback(Mt.unstable_NormalPriority,h_)))}function Mo(e){function t(i){return co(i,e)}if(0<Rd.length){co(Rd[0],e);for(var r=1;r<Rd.length;r++){var a=Rd[r];a.blockedOn===e&&(a.blockedOn=null)}}for(Or!==null&&co(Or,e),Wr!==null&&co(Wr,e),Mr!==null&&co(Mr,e),Oo.forEach(t),Wo.forEach(t),r=0;r<Fr.length;r++)a=Fr[r],a.blockedOn===e&&(a.blockedOn=null);for(;0<Fr.length&&(r=Fr[0],r.blockedOn===null);)qj(r),r.blockedOn===null&&Fr.shift()}var Xa=pr.ReactCurrentBatchConfig,vc=!0;function x_(e,t,r,a){var i=fe,o=Xa.transition;Xa.transition=null;try{fe=1,jg(e,t,r,a)}finally{fe=i,Xa.transition=o}}function g_(e,t,r,a){var i=fe,o=Xa.transition;Xa.transition=null;try{fe=4,jg(e,t,r,a)}finally{fe=i,Xa.transition=o}}function jg(e,t,r,a){if(vc){var i=gx(e,t,r,a);if(i===null)kh(e,t,a,bc,r),a1(e,a);else if(u_(i,e,t,r,a))a.stopPropagation();else if(a1(e,a),t&4&&-1<p_.indexOf(e)){for(;i!==null;){var o=rl(i);if(o!==null&&Oj(o),o=gx(e,t,r,a),o===null&&kh(e,t,a,bc,r),o===i)break;i=o}i!==null&&a.stopPropagation()}else kh(e,t,a,null,r)}}var bc=null;function gx(e,t,r,a){if(bc=null,e=mg(a),e=Ws(e),e!==null)if(t=ta(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Tj(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return bc=e,null}function Uj(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(n_()){case yg:return 1;case Fj:return 4;case mc:case r_:return 16;case Dj:return 536870912;default:return 16}default:return 16}}var Pr=null,Sg=null,Gd=null;function Vj(){if(Gd)return Gd;var e,t=Sg,r=t.length,a,i="value"in Pr?Pr.value:Pr.textContent,o=i.length;for(e=0;e<r&&t[e]===i[e];e++);var d=r-e;for(a=1;a<=d&&t[r-a]===i[o-a];a++);return Gd=i.slice(e,1<a?1-a:void 0)}function Zd(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Bd(){return!0}function o1(){return!1}function qt(e){function t(r,a,i,o,d){this._reactName=r,this._targetInst=i,this.type=a,this.nativeEvent=o,this.target=d,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(r=e[u],this[u]=r?r(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Bd:o1,this.isPropagationStopped=o1,this}return Ae(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Bd)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Bd)},persist:function(){},isPersistent:Bd}),t}var ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wg=qt(ci),nl=Ae({},ci,{view:0,detail:0}),f_=qt(nl),gh,fh,po,Kc=Ae({},nl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==po&&(po&&e.type==="mousemove"?(gh=e.screenX-po.screenX,fh=e.screenY-po.screenY):fh=gh=0,po=e),gh)},movementY:function(e){return"movementY"in e?e.movementY:fh}}),l1=qt(Kc),m_=Ae({},Kc,{dataTransfer:0}),y_=qt(m_),v_=Ae({},nl,{relatedTarget:0}),mh=qt(v_),b_=Ae({},ci,{animationName:0,elapsedTime:0,pseudoElement:0}),j_=qt(b_),S_=Ae({},ci,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),w_=qt(S_),k_=Ae({},ci,{data:0}),d1=qt(k_),C_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},N_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},__={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function A_(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=__[e])?!!t[e]:!1}function kg(){return A_}var R_=Ae({},nl,{key:function(e){if(e.key){var t=C_[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Zd(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?N_[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kg,charCode:function(e){return e.type==="keypress"?Zd(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Zd(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),B_=qt(R_),T_=Ae({},Kc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),c1=qt(T_),z_=Ae({},nl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kg}),L_=qt(z_),E_=Ae({},ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),F_=qt(E_),D_=Ae({},Kc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),P_=qt(D_),I_=[9,13,27,32],Cg=or&&"CompositionEvent"in window,Ao=null;or&&"documentMode"in document&&(Ao=document.documentMode);var O_=or&&"TextEvent"in window&&!Ao,Hj=or&&(!Cg||Ao&&8<Ao&&11>=Ao),p1=" ",u1=!1;function Kj(e,t){switch(e){case"keyup":return I_.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jj(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ia=!1;function W_(e,t){switch(e){case"compositionend":return Jj(t);case"keypress":return t.which!==32?null:(u1=!0,p1);case"textInput":return e=t.data,e===p1&&u1?null:e;default:return null}}function M_(e,t){if(Ia)return e==="compositionend"||!Cg&&Kj(e,t)?(e=Vj(),Gd=Sg=Pr=null,Ia=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Hj&&t.locale!=="ko"?null:t.data;default:return null}}var $_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function h1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!$_[e.type]:t==="textarea"}function Yj(e,t,r,a){Nj(a),t=jc(t,"onChange"),0<t.length&&(r=new wg("onChange","change",null,r,a),e.push({event:r,listeners:t}))}var Ro=null,$o=null;function q_(e){iS(e,0)}function Jc(e){var t=Ma(e);if(vj(t))return e}function U_(e,t){if(e==="change")return t}var Qj=!1;if(or){var yh;if(or){var vh="oninput"in document;if(!vh){var x1=document.createElement("div");x1.setAttribute("oninput","return;"),vh=typeof x1.oninput=="function"}yh=vh}else yh=!1;Qj=yh&&(!document.documentMode||9<document.documentMode)}function g1(){Ro&&(Ro.detachEvent("onpropertychange",Xj),$o=Ro=null)}function Xj(e){if(e.propertyName==="value"&&Jc($o)){var t=[];Yj(t,$o,e,mg(e)),Bj(q_,t)}}function V_(e,t,r){e==="focusin"?(g1(),Ro=t,$o=r,Ro.attachEvent("onpropertychange",Xj)):e==="focusout"&&g1()}function H_(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Jc($o)}function K_(e,t){if(e==="click")return Jc(t)}function J_(e,t){if(e==="input"||e==="change")return Jc(t)}function Y_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var bn=typeof Object.is=="function"?Object.is:Y_;function qo(e,t){if(bn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var i=r[a];if(!Xh.call(t,i)||!bn(e[i],t[i]))return!1}return!0}function f1(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function m1(e,t){var r=f1(e);e=0;for(var a;r;){if(r.nodeType===3){if(a=e+r.textContent.length,e<=t&&a>=t)return{node:r,offset:t-e};e=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=f1(r)}}function Gj(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Gj(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Zj(){for(var e=window,t=xc();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=xc(e.document)}return t}function Ng(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Q_(e){var t=Zj(),r=e.focusedElem,a=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Gj(r.ownerDocument.documentElement,r)){if(a!==null&&Ng(r)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,o=Math.min(a.start,i);a=a.end===void 0?o:Math.min(a.end,i),!e.extend&&o>a&&(i=a,a=o,o=i),i=m1(r,o);var d=m1(r,a);i&&d&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==d.node||e.focusOffset!==d.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>a?(e.addRange(t),e.extend(d.node,d.offset)):(t.setEnd(d.node,d.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var X_=or&&"documentMode"in document&&11>=document.documentMode,Oa=null,fx=null,Bo=null,mx=!1;function y1(e,t,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;mx||Oa==null||Oa!==xc(a)||(a=Oa,"selectionStart"in a&&Ng(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Bo&&qo(Bo,a)||(Bo=a,a=jc(fx,"onSelect"),0<a.length&&(t=new wg("onSelect","select",null,t,r),e.push({event:t,listeners:a}),t.target=Oa)))}function Td(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Wa={animationend:Td("Animation","AnimationEnd"),animationiteration:Td("Animation","AnimationIteration"),animationstart:Td("Animation","AnimationStart"),transitionend:Td("Transition","TransitionEnd")},bh={},eS={};or&&(eS=document.createElement("div").style,"AnimationEvent"in window||(delete Wa.animationend.animation,delete Wa.animationiteration.animation,delete Wa.animationstart.animation),"TransitionEvent"in window||delete Wa.transitionend.transition);function Yc(e){if(bh[e])return bh[e];if(!Wa[e])return e;var t=Wa[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in eS)return bh[e]=t[r];return e}var tS=Yc("animationend"),nS=Yc("animationiteration"),rS=Yc("animationstart"),sS=Yc("transitionend"),aS=new Map,v1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qr(e,t){aS.set(e,t),ea(t,[e])}for(var jh=0;jh<v1.length;jh++){var Sh=v1[jh],G_=Sh.toLowerCase(),Z_=Sh[0].toUpperCase()+Sh.slice(1);Qr(G_,"on"+Z_)}Qr(tS,"onAnimationEnd");Qr(nS,"onAnimationIteration");Qr(rS,"onAnimationStart");Qr("dblclick","onDoubleClick");Qr("focusin","onFocus");Qr("focusout","onBlur");Qr(sS,"onTransitionEnd");ei("onMouseEnter",["mouseout","mouseover"]);ei("onMouseLeave",["mouseout","mouseover"]);ei("onPointerEnter",["pointerout","pointerover"]);ei("onPointerLeave",["pointerout","pointerover"]);ea("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ea("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ea("onBeforeInput",["compositionend","keypress","textInput","paste"]);ea("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ea("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ea("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eA=new Set("cancel close invalid load scroll toggle".split(" ").concat(wo));function b1(e,t,r){var a=e.type||"unknown-event";e.currentTarget=r,GN(a,t,void 0,e),e.currentTarget=null}function iS(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var a=e[r],i=a.event;a=a.listeners;e:{var o=void 0;if(t)for(var d=a.length-1;0<=d;d--){var u=a[d],h=u.instance,m=u.currentTarget;if(u=u.listener,h!==o&&i.isPropagationStopped())break e;b1(i,u,m),o=h}else for(d=0;d<a.length;d++){if(u=a[d],h=u.instance,m=u.currentTarget,u=u.listener,h!==o&&i.isPropagationStopped())break e;b1(i,u,m),o=h}}}if(fc)throw e=ux,fc=!1,ux=null,e}function be(e,t){var r=t[Sx];r===void 0&&(r=t[Sx]=new Set);var a=e+"__bubble";r.has(a)||(oS(t,e,2,!1),r.add(a))}function wh(e,t,r){var a=0;t&&(a|=4),oS(r,e,a,t)}var zd="_reactListening"+Math.random().toString(36).slice(2);function Uo(e){if(!e[zd]){e[zd]=!0,xj.forEach(function(r){r!=="selectionchange"&&(eA.has(r)||wh(r,!1,e),wh(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[zd]||(t[zd]=!0,wh("selectionchange",!1,t))}}function oS(e,t,r,a){switch(Uj(t)){case 1:var i=x_;break;case 4:i=g_;break;default:i=jg}r=i.bind(null,t,r,e),i=void 0,!px||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),a?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function kh(e,t,r,a,i){var o=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var d=a.tag;if(d===3||d===4){var u=a.stateNode.containerInfo;if(u===i||u.nodeType===8&&u.parentNode===i)break;if(d===4)for(d=a.return;d!==null;){var h=d.tag;if((h===3||h===4)&&(h=d.stateNode.containerInfo,h===i||h.nodeType===8&&h.parentNode===i))return;d=d.return}for(;u!==null;){if(d=Ws(u),d===null)return;if(h=d.tag,h===5||h===6){a=o=d;continue e}u=u.parentNode}}a=a.return}Bj(function(){var m=o,f=mg(r),b=[];e:{var v=aS.get(e);if(v!==void 0){var T=wg,N=e;switch(e){case"keypress":if(Zd(r)===0)break e;case"keydown":case"keyup":T=B_;break;case"focusin":N="focus",T=mh;break;case"focusout":N="blur",T=mh;break;case"beforeblur":case"afterblur":T=mh;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=l1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=y_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=L_;break;case tS:case nS:case rS:T=j_;break;case sS:T=F_;break;case"scroll":T=f_;break;case"wheel":T=P_;break;case"copy":case"cut":case"paste":T=w_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=c1}var R=(t&4)!==0,F=!R&&e==="scroll",C=R?v!==null?v+"Capture":null:v;R=[];for(var j=m,_;j!==null;){_=j;var z=_.stateNode;if(_.tag===5&&z!==null&&(_=z,C!==null&&(z=Io(j,C),z!=null&&R.push(Vo(j,z,_)))),F)break;j=j.return}0<R.length&&(v=new T(v,N,null,r,f),b.push({event:v,listeners:R}))}}if(!(t&7)){e:{if(v=e==="mouseover"||e==="pointerover",T=e==="mouseout"||e==="pointerout",v&&r!==dx&&(N=r.relatedTarget||r.fromElement)&&(Ws(N)||N[lr]))break e;if((T||v)&&(v=f.window===f?f:(v=f.ownerDocument)?v.defaultView||v.parentWindow:window,T?(N=r.relatedTarget||r.toElement,T=m,N=N?Ws(N):null,N!==null&&(F=ta(N),N!==F||N.tag!==5&&N.tag!==6)&&(N=null)):(T=null,N=m),T!==N)){if(R=l1,z="onMouseLeave",C="onMouseEnter",j="mouse",(e==="pointerout"||e==="pointerover")&&(R=c1,z="onPointerLeave",C="onPointerEnter",j="pointer"),F=T==null?v:Ma(T),_=N==null?v:Ma(N),v=new R(z,j+"leave",T,r,f),v.target=F,v.relatedTarget=_,z=null,Ws(f)===m&&(R=new R(C,j+"enter",N,r,f),R.target=_,R.relatedTarget=F,z=R),F=z,T&&N)t:{for(R=T,C=N,j=0,_=R;_;_=Ta(_))j++;for(_=0,z=C;z;z=Ta(z))_++;for(;0<j-_;)R=Ta(R),j--;for(;0<_-j;)C=Ta(C),_--;for(;j--;){if(R===C||C!==null&&R===C.alternate)break t;R=Ta(R),C=Ta(C)}R=null}else R=null;T!==null&&j1(b,v,T,R,!1),N!==null&&F!==null&&j1(b,F,N,R,!0)}}e:{if(v=m?Ma(m):window,T=v.nodeName&&v.nodeName.toLowerCase(),T==="select"||T==="input"&&v.type==="file")var I=U_;else if(h1(v))if(Qj)I=J_;else{I=H_;var M=V_}else(T=v.nodeName)&&T.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(I=K_);if(I&&(I=I(e,m))){Yj(b,I,r,f);break e}M&&M(e,v,m),e==="focusout"&&(M=v._wrapperState)&&M.controlled&&v.type==="number"&&sx(v,"number",v.value)}switch(M=m?Ma(m):window,e){case"focusin":(h1(M)||M.contentEditable==="true")&&(Oa=M,fx=m,Bo=null);break;case"focusout":Bo=fx=Oa=null;break;case"mousedown":mx=!0;break;case"contextmenu":case"mouseup":case"dragend":mx=!1,y1(b,r,f);break;case"selectionchange":if(X_)break;case"keydown":case"keyup":y1(b,r,f)}var W;if(Cg)e:{switch(e){case"compositionstart":var K="onCompositionStart";break e;case"compositionend":K="onCompositionEnd";break e;case"compositionupdate":K="onCompositionUpdate";break e}K=void 0}else Ia?Kj(e,r)&&(K="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(K="onCompositionStart");K&&(Hj&&r.locale!=="ko"&&(Ia||K!=="onCompositionStart"?K==="onCompositionEnd"&&Ia&&(W=Vj()):(Pr=f,Sg="value"in Pr?Pr.value:Pr.textContent,Ia=!0)),M=jc(m,K),0<M.length&&(K=new d1(K,e,null,r,f),b.push({event:K,listeners:M}),W?K.data=W:(W=Jj(r),W!==null&&(K.data=W)))),(W=O_?W_(e,r):M_(e,r))&&(m=jc(m,"onBeforeInput"),0<m.length&&(f=new d1("onBeforeInput","beforeinput",null,r,f),b.push({event:f,listeners:m}),f.data=W))}iS(b,t)})}function Vo(e,t,r){return{instance:e,listener:t,currentTarget:r}}function jc(e,t){for(var r=t+"Capture",a=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Io(e,r),o!=null&&a.unshift(Vo(e,o,i)),o=Io(e,t),o!=null&&a.push(Vo(e,o,i))),e=e.return}return a}function Ta(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function j1(e,t,r,a,i){for(var o=t._reactName,d=[];r!==null&&r!==a;){var u=r,h=u.alternate,m=u.stateNode;if(h!==null&&h===a)break;u.tag===5&&m!==null&&(u=m,i?(h=Io(r,o),h!=null&&d.unshift(Vo(r,h,u))):i||(h=Io(r,o),h!=null&&d.push(Vo(r,h,u)))),r=r.return}d.length!==0&&e.push({event:t,listeners:d})}var tA=/\r\n?/g,nA=/\u0000|\uFFFD/g;function S1(e){return(typeof e=="string"?e:""+e).replace(tA,`
`).replace(nA,"")}function Ld(e,t,r){if(t=S1(t),S1(e)!==t&&r)throw Error(U(425))}function Sc(){}var yx=null,vx=null;function bx(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var jx=typeof setTimeout=="function"?setTimeout:void 0,rA=typeof clearTimeout=="function"?clearTimeout:void 0,w1=typeof Promise=="function"?Promise:void 0,sA=typeof queueMicrotask=="function"?queueMicrotask:typeof w1<"u"?function(e){return w1.resolve(null).then(e).catch(aA)}:jx;function aA(e){setTimeout(function(){throw e})}function Ch(e,t){var r=t,a=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(a===0){e.removeChild(i),Mo(t);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=i}while(r);Mo(t)}function $r(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function k1(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var pi=Math.random().toString(36).slice(2),Rn="__reactFiber$"+pi,Ho="__reactProps$"+pi,lr="__reactContainer$"+pi,Sx="__reactEvents$"+pi,iA="__reactListeners$"+pi,oA="__reactHandles$"+pi;function Ws(e){var t=e[Rn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[lr]||r[Rn]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=k1(e);e!==null;){if(r=e[Rn])return r;e=k1(e)}return t}e=r,r=e.parentNode}return null}function rl(e){return e=e[Rn]||e[lr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ma(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(U(33))}function Qc(e){return e[Ho]||null}var wx=[],$a=-1;function Xr(e){return{current:e}}function je(e){0>$a||(e.current=wx[$a],wx[$a]=null,$a--)}function ve(e,t){$a++,wx[$a]=e.current,e.current=t}var Yr={},pt=Xr(Yr),kt=Xr(!1),Js=Yr;function ti(e,t){var r=e.type.contextTypes;if(!r)return Yr;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in r)i[o]=t[o];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ct(e){return e=e.childContextTypes,e!=null}function wc(){je(kt),je(pt)}function C1(e,t,r){if(pt.current!==Yr)throw Error(U(168));ve(pt,t),ve(kt,r)}function lS(e,t,r){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var i in a)if(!(i in t))throw Error(U(108,VN(e)||"Unknown",i));return Ae({},r,a)}function kc(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Yr,Js=pt.current,ve(pt,e),ve(kt,kt.current),!0}function N1(e,t,r){var a=e.stateNode;if(!a)throw Error(U(169));r?(e=lS(e,t,Js),a.__reactInternalMemoizedMergedChildContext=e,je(kt),je(pt),ve(pt,e)):je(kt),ve(kt,r)}var nr=null,Xc=!1,Nh=!1;function dS(e){nr===null?nr=[e]:nr.push(e)}function lA(e){Xc=!0,dS(e)}function Gr(){if(!Nh&&nr!==null){Nh=!0;var e=0,t=fe;try{var r=nr;for(fe=1;e<r.length;e++){var a=r[e];do a=a(!0);while(a!==null)}nr=null,Xc=!1}catch(i){throw nr!==null&&(nr=nr.slice(e+1)),Ej(yg,Gr),i}finally{fe=t,Nh=!1}}return null}var qa=[],Ua=0,Cc=null,Nc=0,Gt=[],Zt=0,Ys=null,sr=1,ar="";function Is(e,t){qa[Ua++]=Nc,qa[Ua++]=Cc,Cc=e,Nc=t}function cS(e,t,r){Gt[Zt++]=sr,Gt[Zt++]=ar,Gt[Zt++]=Ys,Ys=e;var a=sr;e=ar;var i=32-yn(a)-1;a&=~(1<<i),r+=1;var o=32-yn(t)+i;if(30<o){var d=i-i%5;o=(a&(1<<d)-1).toString(32),a>>=d,i-=d,sr=1<<32-yn(t)+i|r<<i|a,ar=o+e}else sr=1<<o|r<<i|a,ar=e}function _g(e){e.return!==null&&(Is(e,1),cS(e,1,0))}function Ag(e){for(;e===Cc;)Cc=qa[--Ua],qa[Ua]=null,Nc=qa[--Ua],qa[Ua]=null;for(;e===Ys;)Ys=Gt[--Zt],Gt[Zt]=null,ar=Gt[--Zt],Gt[Zt]=null,sr=Gt[--Zt],Gt[Zt]=null}var Wt=null,Ot=null,Ce=!1,mn=null;function pS(e,t){var r=tn(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function _1(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Wt=e,Ot=$r(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Wt=e,Ot=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Ys!==null?{id:sr,overflow:ar}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=tn(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Wt=e,Ot=null,!0):!1;default:return!1}}function kx(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Cx(e){if(Ce){var t=Ot;if(t){var r=t;if(!_1(e,t)){if(kx(e))throw Error(U(418));t=$r(r.nextSibling);var a=Wt;t&&_1(e,t)?pS(a,r):(e.flags=e.flags&-4097|2,Ce=!1,Wt=e)}}else{if(kx(e))throw Error(U(418));e.flags=e.flags&-4097|2,Ce=!1,Wt=e}}}function A1(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Wt=e}function Ed(e){if(e!==Wt)return!1;if(!Ce)return A1(e),Ce=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!bx(e.type,e.memoizedProps)),t&&(t=Ot)){if(kx(e))throw uS(),Error(U(418));for(;t;)pS(e,t),t=$r(t.nextSibling)}if(A1(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(U(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ot=$r(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ot=null}}else Ot=Wt?$r(e.stateNode.nextSibling):null;return!0}function uS(){for(var e=Ot;e;)e=$r(e.nextSibling)}function ni(){Ot=Wt=null,Ce=!1}function Rg(e){mn===null?mn=[e]:mn.push(e)}var dA=pr.ReactCurrentBatchConfig;function uo(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(U(309));var a=r.stateNode}if(!a)throw Error(U(147,e));var i=a,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(d){var u=i.refs;d===null?delete u[o]:u[o]=d},t._stringRef=o,t)}if(typeof e!="string")throw Error(U(284));if(!r._owner)throw Error(U(290,e))}return e}function Fd(e,t){throw e=Object.prototype.toString.call(t),Error(U(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function R1(e){var t=e._init;return t(e._payload)}function hS(e){function t(C,j){if(e){var _=C.deletions;_===null?(C.deletions=[j],C.flags|=16):_.push(j)}}function r(C,j){if(!e)return null;for(;j!==null;)t(C,j),j=j.sibling;return null}function a(C,j){for(C=new Map;j!==null;)j.key!==null?C.set(j.key,j):C.set(j.index,j),j=j.sibling;return C}function i(C,j){return C=Hr(C,j),C.index=0,C.sibling=null,C}function o(C,j,_){return C.index=_,e?(_=C.alternate,_!==null?(_=_.index,_<j?(C.flags|=2,j):_):(C.flags|=2,j)):(C.flags|=1048576,j)}function d(C){return e&&C.alternate===null&&(C.flags|=2),C}function u(C,j,_,z){return j===null||j.tag!==6?(j=Lh(_,C.mode,z),j.return=C,j):(j=i(j,_),j.return=C,j)}function h(C,j,_,z){var I=_.type;return I===Pa?f(C,j,_.props.children,z,_.key):j!==null&&(j.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Lr&&R1(I)===j.type)?(z=i(j,_.props),z.ref=uo(C,j,_),z.return=C,z):(z=ic(_.type,_.key,_.props,null,C.mode,z),z.ref=uo(C,j,_),z.return=C,z)}function m(C,j,_,z){return j===null||j.tag!==4||j.stateNode.containerInfo!==_.containerInfo||j.stateNode.implementation!==_.implementation?(j=Eh(_,C.mode,z),j.return=C,j):(j=i(j,_.children||[]),j.return=C,j)}function f(C,j,_,z,I){return j===null||j.tag!==7?(j=Vs(_,C.mode,z,I),j.return=C,j):(j=i(j,_),j.return=C,j)}function b(C,j,_){if(typeof j=="string"&&j!==""||typeof j=="number")return j=Lh(""+j,C.mode,_),j.return=C,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case kd:return _=ic(j.type,j.key,j.props,null,C.mode,_),_.ref=uo(C,null,j),_.return=C,_;case Da:return j=Eh(j,C.mode,_),j.return=C,j;case Lr:var z=j._init;return b(C,z(j._payload),_)}if(jo(j)||io(j))return j=Vs(j,C.mode,_,null),j.return=C,j;Fd(C,j)}return null}function v(C,j,_,z){var I=j!==null?j.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return I!==null?null:u(C,j,""+_,z);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case kd:return _.key===I?h(C,j,_,z):null;case Da:return _.key===I?m(C,j,_,z):null;case Lr:return I=_._init,v(C,j,I(_._payload),z)}if(jo(_)||io(_))return I!==null?null:f(C,j,_,z,null);Fd(C,_)}return null}function T(C,j,_,z,I){if(typeof z=="string"&&z!==""||typeof z=="number")return C=C.get(_)||null,u(j,C,""+z,I);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case kd:return C=C.get(z.key===null?_:z.key)||null,h(j,C,z,I);case Da:return C=C.get(z.key===null?_:z.key)||null,m(j,C,z,I);case Lr:var M=z._init;return T(C,j,_,M(z._payload),I)}if(jo(z)||io(z))return C=C.get(_)||null,f(j,C,z,I,null);Fd(j,z)}return null}function N(C,j,_,z){for(var I=null,M=null,W=j,K=j=0,xe=null;W!==null&&K<_.length;K++){W.index>K?(xe=W,W=null):xe=W.sibling;var re=v(C,W,_[K],z);if(re===null){W===null&&(W=xe);break}e&&W&&re.alternate===null&&t(C,W),j=o(re,j,K),M===null?I=re:M.sibling=re,M=re,W=xe}if(K===_.length)return r(C,W),Ce&&Is(C,K),I;if(W===null){for(;K<_.length;K++)W=b(C,_[K],z),W!==null&&(j=o(W,j,K),M===null?I=W:M.sibling=W,M=W);return Ce&&Is(C,K),I}for(W=a(C,W);K<_.length;K++)xe=T(W,C,K,_[K],z),xe!==null&&(e&&xe.alternate!==null&&W.delete(xe.key===null?K:xe.key),j=o(xe,j,K),M===null?I=xe:M.sibling=xe,M=xe);return e&&W.forEach(function(Re){return t(C,Re)}),Ce&&Is(C,K),I}function R(C,j,_,z){var I=io(_);if(typeof I!="function")throw Error(U(150));if(_=I.call(_),_==null)throw Error(U(151));for(var M=I=null,W=j,K=j=0,xe=null,re=_.next();W!==null&&!re.done;K++,re=_.next()){W.index>K?(xe=W,W=null):xe=W.sibling;var Re=v(C,W,re.value,z);if(Re===null){W===null&&(W=xe);break}e&&W&&Re.alternate===null&&t(C,W),j=o(Re,j,K),M===null?I=Re:M.sibling=Re,M=Re,W=xe}if(re.done)return r(C,W),Ce&&Is(C,K),I;if(W===null){for(;!re.done;K++,re=_.next())re=b(C,re.value,z),re!==null&&(j=o(re,j,K),M===null?I=re:M.sibling=re,M=re);return Ce&&Is(C,K),I}for(W=a(C,W);!re.done;K++,re=_.next())re=T(W,C,K,re.value,z),re!==null&&(e&&re.alternate!==null&&W.delete(re.key===null?K:re.key),j=o(re,j,K),M===null?I=re:M.sibling=re,M=re);return e&&W.forEach(function(De){return t(C,De)}),Ce&&Is(C,K),I}function F(C,j,_,z){if(typeof _=="object"&&_!==null&&_.type===Pa&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case kd:e:{for(var I=_.key,M=j;M!==null;){if(M.key===I){if(I=_.type,I===Pa){if(M.tag===7){r(C,M.sibling),j=i(M,_.props.children),j.return=C,C=j;break e}}else if(M.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Lr&&R1(I)===M.type){r(C,M.sibling),j=i(M,_.props),j.ref=uo(C,M,_),j.return=C,C=j;break e}r(C,M);break}else t(C,M);M=M.sibling}_.type===Pa?(j=Vs(_.props.children,C.mode,z,_.key),j.return=C,C=j):(z=ic(_.type,_.key,_.props,null,C.mode,z),z.ref=uo(C,j,_),z.return=C,C=z)}return d(C);case Da:e:{for(M=_.key;j!==null;){if(j.key===M)if(j.tag===4&&j.stateNode.containerInfo===_.containerInfo&&j.stateNode.implementation===_.implementation){r(C,j.sibling),j=i(j,_.children||[]),j.return=C,C=j;break e}else{r(C,j);break}else t(C,j);j=j.sibling}j=Eh(_,C.mode,z),j.return=C,C=j}return d(C);case Lr:return M=_._init,F(C,j,M(_._payload),z)}if(jo(_))return N(C,j,_,z);if(io(_))return R(C,j,_,z);Fd(C,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,j!==null&&j.tag===6?(r(C,j.sibling),j=i(j,_),j.return=C,C=j):(r(C,j),j=Lh(_,C.mode,z),j.return=C,C=j),d(C)):r(C,j)}return F}var ri=hS(!0),xS=hS(!1),_c=Xr(null),Ac=null,Va=null,Bg=null;function Tg(){Bg=Va=Ac=null}function zg(e){var t=_c.current;je(_c),e._currentValue=t}function Nx(e,t,r){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===r)break;e=e.return}}function Ga(e,t){Ac=e,Bg=Va=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(wt=!0),e.firstContext=null)}function rn(e){var t=e._currentValue;if(Bg!==e)if(e={context:e,memoizedValue:t,next:null},Va===null){if(Ac===null)throw Error(U(308));Va=e,Ac.dependencies={lanes:0,firstContext:e}}else Va=Va.next=e;return t}var Ms=null;function Lg(e){Ms===null?Ms=[e]:Ms.push(e)}function gS(e,t,r,a){var i=t.interleaved;return i===null?(r.next=r,Lg(t)):(r.next=i.next,i.next=r),t.interleaved=r,dr(e,a)}function dr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Er=!1;function Eg(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fS(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ir(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function qr(e,t,r){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,he&2){var i=a.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),a.pending=t,dr(e,r)}return i=a.interleaved,i===null?(t.next=t,Lg(a)):(t.next=i.next,i.next=t),a.interleaved=t,dr(e,r)}function ec(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,vg(e,r)}}function B1(e,t){var r=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var d={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?i=o=d:o=o.next=d,r=r.next}while(r!==null);o===null?i=o=t:o=o.next=t}else i=o=t;r={baseState:a.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:a.shared,effects:a.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Rc(e,t,r,a){var i=e.updateQueue;Er=!1;var o=i.firstBaseUpdate,d=i.lastBaseUpdate,u=i.shared.pending;if(u!==null){i.shared.pending=null;var h=u,m=h.next;h.next=null,d===null?o=m:d.next=m,d=h;var f=e.alternate;f!==null&&(f=f.updateQueue,u=f.lastBaseUpdate,u!==d&&(u===null?f.firstBaseUpdate=m:u.next=m,f.lastBaseUpdate=h))}if(o!==null){var b=i.baseState;d=0,f=m=h=null,u=o;do{var v=u.lane,T=u.eventTime;if((a&v)===v){f!==null&&(f=f.next={eventTime:T,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var N=e,R=u;switch(v=t,T=r,R.tag){case 1:if(N=R.payload,typeof N=="function"){b=N.call(T,b,v);break e}b=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=R.payload,v=typeof N=="function"?N.call(T,b,v):N,v==null)break e;b=Ae({},b,v);break e;case 2:Er=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,v=i.effects,v===null?i.effects=[u]:v.push(u))}else T={eventTime:T,lane:v,tag:u.tag,payload:u.payload,callback:u.callback,next:null},f===null?(m=f=T,h=b):f=f.next=T,d|=v;if(u=u.next,u===null){if(u=i.shared.pending,u===null)break;v=u,u=v.next,v.next=null,i.lastBaseUpdate=v,i.shared.pending=null}}while(!0);if(f===null&&(h=b),i.baseState=h,i.firstBaseUpdate=m,i.lastBaseUpdate=f,t=i.shared.interleaved,t!==null){i=t;do d|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);Xs|=d,e.lanes=d,e.memoizedState=b}}function T1(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],i=a.callback;if(i!==null){if(a.callback=null,a=r,typeof i!="function")throw Error(U(191,i));i.call(a)}}}var sl={},zn=Xr(sl),Ko=Xr(sl),Jo=Xr(sl);function $s(e){if(e===sl)throw Error(U(174));return e}function Fg(e,t){switch(ve(Jo,t),ve(Ko,e),ve(zn,sl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ix(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ix(t,e)}je(zn),ve(zn,t)}function si(){je(zn),je(Ko),je(Jo)}function mS(e){$s(Jo.current);var t=$s(zn.current),r=ix(t,e.type);t!==r&&(ve(Ko,e),ve(zn,r))}function Dg(e){Ko.current===e&&(je(zn),je(Ko))}var Ne=Xr(0);function Bc(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var _h=[];function Pg(){for(var e=0;e<_h.length;e++)_h[e]._workInProgressVersionPrimary=null;_h.length=0}var tc=pr.ReactCurrentDispatcher,Ah=pr.ReactCurrentBatchConfig,Qs=0,_e=null,$e=null,Je=null,Tc=!1,To=!1,Yo=0,cA=0;function it(){throw Error(U(321))}function Ig(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!bn(e[r],t[r]))return!1;return!0}function Og(e,t,r,a,i,o){if(Qs=o,_e=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,tc.current=e===null||e.memoizedState===null?xA:gA,e=r(a,i),To){o=0;do{if(To=!1,Yo=0,25<=o)throw Error(U(301));o+=1,Je=$e=null,t.updateQueue=null,tc.current=fA,e=r(a,i)}while(To)}if(tc.current=zc,t=$e!==null&&$e.next!==null,Qs=0,Je=$e=_e=null,Tc=!1,t)throw Error(U(300));return e}function Wg(){var e=Yo!==0;return Yo=0,e}function An(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?_e.memoizedState=Je=e:Je=Je.next=e,Je}function sn(){if($e===null){var e=_e.alternate;e=e!==null?e.memoizedState:null}else e=$e.next;var t=Je===null?_e.memoizedState:Je.next;if(t!==null)Je=t,$e=e;else{if(e===null)throw Error(U(310));$e=e,e={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},Je===null?_e.memoizedState=Je=e:Je=Je.next=e}return Je}function Qo(e,t){return typeof t=="function"?t(e):t}function Rh(e){var t=sn(),r=t.queue;if(r===null)throw Error(U(311));r.lastRenderedReducer=e;var a=$e,i=a.baseQueue,o=r.pending;if(o!==null){if(i!==null){var d=i.next;i.next=o.next,o.next=d}a.baseQueue=i=o,r.pending=null}if(i!==null){o=i.next,a=a.baseState;var u=d=null,h=null,m=o;do{var f=m.lane;if((Qs&f)===f)h!==null&&(h=h.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),a=m.hasEagerState?m.eagerState:e(a,m.action);else{var b={lane:f,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};h===null?(u=h=b,d=a):h=h.next=b,_e.lanes|=f,Xs|=f}m=m.next}while(m!==null&&m!==o);h===null?d=a:h.next=u,bn(a,t.memoizedState)||(wt=!0),t.memoizedState=a,t.baseState=d,t.baseQueue=h,r.lastRenderedState=a}if(e=r.interleaved,e!==null){i=e;do o=i.lane,_e.lanes|=o,Xs|=o,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Bh(e){var t=sn(),r=t.queue;if(r===null)throw Error(U(311));r.lastRenderedReducer=e;var a=r.dispatch,i=r.pending,o=t.memoizedState;if(i!==null){r.pending=null;var d=i=i.next;do o=e(o,d.action),d=d.next;while(d!==i);bn(o,t.memoizedState)||(wt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,a]}function yS(){}function vS(e,t){var r=_e,a=sn(),i=t(),o=!bn(a.memoizedState,i);if(o&&(a.memoizedState=i,wt=!0),a=a.queue,Mg(SS.bind(null,r,a,e),[e]),a.getSnapshot!==t||o||Je!==null&&Je.memoizedState.tag&1){if(r.flags|=2048,Xo(9,jS.bind(null,r,a,i,t),void 0,null),Ye===null)throw Error(U(349));Qs&30||bS(r,t,i)}return i}function bS(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=_e.updateQueue,t===null?(t={lastEffect:null,stores:null},_e.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function jS(e,t,r,a){t.value=r,t.getSnapshot=a,wS(t)&&kS(e)}function SS(e,t,r){return r(function(){wS(t)&&kS(e)})}function wS(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!bn(e,r)}catch{return!0}}function kS(e){var t=dr(e,1);t!==null&&vn(t,e,1,-1)}function z1(e){var t=An();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qo,lastRenderedState:e},t.queue=e,e=e.dispatch=hA.bind(null,_e,e),[t.memoizedState,e]}function Xo(e,t,r,a){return e={tag:e,create:t,destroy:r,deps:a,next:null},t=_e.updateQueue,t===null?(t={lastEffect:null,stores:null},_e.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(a=r.next,r.next=e,e.next=a,t.lastEffect=e)),e}function CS(){return sn().memoizedState}function nc(e,t,r,a){var i=An();_e.flags|=e,i.memoizedState=Xo(1|t,r,void 0,a===void 0?null:a)}function Gc(e,t,r,a){var i=sn();a=a===void 0?null:a;var o=void 0;if($e!==null){var d=$e.memoizedState;if(o=d.destroy,a!==null&&Ig(a,d.deps)){i.memoizedState=Xo(t,r,o,a);return}}_e.flags|=e,i.memoizedState=Xo(1|t,r,o,a)}function L1(e,t){return nc(8390656,8,e,t)}function Mg(e,t){return Gc(2048,8,e,t)}function NS(e,t){return Gc(4,2,e,t)}function _S(e,t){return Gc(4,4,e,t)}function AS(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function RS(e,t,r){return r=r!=null?r.concat([e]):null,Gc(4,4,AS.bind(null,t,e),r)}function $g(){}function BS(e,t){var r=sn();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&Ig(t,a[1])?a[0]:(r.memoizedState=[e,t],e)}function TS(e,t){var r=sn();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&Ig(t,a[1])?a[0]:(e=e(),r.memoizedState=[e,t],e)}function zS(e,t,r){return Qs&21?(bn(r,t)||(r=Pj(),_e.lanes|=r,Xs|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,wt=!0),e.memoizedState=r)}function pA(e,t){var r=fe;fe=r!==0&&4>r?r:4,e(!0);var a=Ah.transition;Ah.transition={};try{e(!1),t()}finally{fe=r,Ah.transition=a}}function LS(){return sn().memoizedState}function uA(e,t,r){var a=Vr(e);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},ES(e))FS(t,r);else if(r=gS(e,t,r,a),r!==null){var i=mt();vn(r,e,a,i),DS(r,t,a)}}function hA(e,t,r){var a=Vr(e),i={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(ES(e))FS(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var d=t.lastRenderedState,u=o(d,r);if(i.hasEagerState=!0,i.eagerState=u,bn(u,d)){var h=t.interleaved;h===null?(i.next=i,Lg(t)):(i.next=h.next,h.next=i),t.interleaved=i;return}}catch{}finally{}r=gS(e,t,i,a),r!==null&&(i=mt(),vn(r,e,a,i),DS(r,t,a))}}function ES(e){var t=e.alternate;return e===_e||t!==null&&t===_e}function FS(e,t){To=Tc=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function DS(e,t,r){if(r&4194240){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,vg(e,r)}}var zc={readContext:rn,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useInsertionEffect:it,useLayoutEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useMutableSource:it,useSyncExternalStore:it,useId:it,unstable_isNewReconciler:!1},xA={readContext:rn,useCallback:function(e,t){return An().memoizedState=[e,t===void 0?null:t],e},useContext:rn,useEffect:L1,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,nc(4194308,4,AS.bind(null,t,e),r)},useLayoutEffect:function(e,t){return nc(4194308,4,e,t)},useInsertionEffect:function(e,t){return nc(4,2,e,t)},useMemo:function(e,t){var r=An();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var a=An();return t=r!==void 0?r(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=uA.bind(null,_e,e),[a.memoizedState,e]},useRef:function(e){var t=An();return e={current:e},t.memoizedState=e},useState:z1,useDebugValue:$g,useDeferredValue:function(e){return An().memoizedState=e},useTransition:function(){var e=z1(!1),t=e[0];return e=pA.bind(null,e[1]),An().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var a=_e,i=An();if(Ce){if(r===void 0)throw Error(U(407));r=r()}else{if(r=t(),Ye===null)throw Error(U(349));Qs&30||bS(a,t,r)}i.memoizedState=r;var o={value:r,getSnapshot:t};return i.queue=o,L1(SS.bind(null,a,o,e),[e]),a.flags|=2048,Xo(9,jS.bind(null,a,o,r,t),void 0,null),r},useId:function(){var e=An(),t=Ye.identifierPrefix;if(Ce){var r=ar,a=sr;r=(a&~(1<<32-yn(a)-1)).toString(32)+r,t=":"+t+"R"+r,r=Yo++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=cA++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},gA={readContext:rn,useCallback:BS,useContext:rn,useEffect:Mg,useImperativeHandle:RS,useInsertionEffect:NS,useLayoutEffect:_S,useMemo:TS,useReducer:Rh,useRef:CS,useState:function(){return Rh(Qo)},useDebugValue:$g,useDeferredValue:function(e){var t=sn();return zS(t,$e.memoizedState,e)},useTransition:function(){var e=Rh(Qo)[0],t=sn().memoizedState;return[e,t]},useMutableSource:yS,useSyncExternalStore:vS,useId:LS,unstable_isNewReconciler:!1},fA={readContext:rn,useCallback:BS,useContext:rn,useEffect:Mg,useImperativeHandle:RS,useInsertionEffect:NS,useLayoutEffect:_S,useMemo:TS,useReducer:Bh,useRef:CS,useState:function(){return Bh(Qo)},useDebugValue:$g,useDeferredValue:function(e){var t=sn();return $e===null?t.memoizedState=e:zS(t,$e.memoizedState,e)},useTransition:function(){var e=Bh(Qo)[0],t=sn().memoizedState;return[e,t]},useMutableSource:yS,useSyncExternalStore:vS,useId:LS,unstable_isNewReconciler:!1};function xn(e,t){if(e&&e.defaultProps){t=Ae({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function _x(e,t,r,a){t=e.memoizedState,r=r(a,t),r=r==null?t:Ae({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Zc={isMounted:function(e){return(e=e._reactInternals)?ta(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var a=mt(),i=Vr(e),o=ir(a,i);o.payload=t,r!=null&&(o.callback=r),t=qr(e,o,i),t!==null&&(vn(t,e,i,a),ec(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var a=mt(),i=Vr(e),o=ir(a,i);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=qr(e,o,i),t!==null&&(vn(t,e,i,a),ec(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=mt(),a=Vr(e),i=ir(r,a);i.tag=2,t!=null&&(i.callback=t),t=qr(e,i,a),t!==null&&(vn(t,e,a,r),ec(t,e,a))}};function E1(e,t,r,a,i,o,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,o,d):t.prototype&&t.prototype.isPureReactComponent?!qo(r,a)||!qo(i,o):!0}function PS(e,t,r){var a=!1,i=Yr,o=t.contextType;return typeof o=="object"&&o!==null?o=rn(o):(i=Ct(t)?Js:pt.current,a=t.contextTypes,o=(a=a!=null)?ti(e,i):Yr),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Zc,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function F1(e,t,r,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,a),t.state!==e&&Zc.enqueueReplaceState(t,t.state,null)}function Ax(e,t,r,a){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},Eg(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=rn(o):(o=Ct(t)?Js:pt.current,i.context=ti(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(_x(e,t,o,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Zc.enqueueReplaceState(i,i.state,null),Rc(e,r,i,a),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function ai(e,t){try{var r="",a=t;do r+=UN(a),a=a.return;while(a);var i=r}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function Th(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Rx(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var mA=typeof WeakMap=="function"?WeakMap:Map;function IS(e,t,r){r=ir(-1,r),r.tag=3,r.payload={element:null};var a=t.value;return r.callback=function(){Ec||(Ec=!0,Ox=a),Rx(e,t)},r}function OS(e,t,r){r=ir(-1,r),r.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var i=t.value;r.payload=function(){return a(i)},r.callback=function(){Rx(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){Rx(e,t),typeof a!="function"&&(Ur===null?Ur=new Set([this]):Ur.add(this));var d=t.stack;this.componentDidCatch(t.value,{componentStack:d!==null?d:""})}),r}function D1(e,t,r){var a=e.pingCache;if(a===null){a=e.pingCache=new mA;var i=new Set;a.set(t,i)}else i=a.get(t),i===void 0&&(i=new Set,a.set(t,i));i.has(r)||(i.add(r),e=TA.bind(null,e,t,r),t.then(e,e))}function P1(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function I1(e,t,r,a,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ir(-1,1),t.tag=2,qr(r,t,1))),r.lanes|=1),e)}var yA=pr.ReactCurrentOwner,wt=!1;function ft(e,t,r,a){t.child=e===null?xS(t,null,r,a):ri(t,e.child,r,a)}function O1(e,t,r,a,i){r=r.render;var o=t.ref;return Ga(t,i),a=Og(e,t,r,a,o,i),r=Wg(),e!==null&&!wt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,cr(e,t,i)):(Ce&&r&&_g(t),t.flags|=1,ft(e,t,a,i),t.child)}function W1(e,t,r,a,i){if(e===null){var o=r.type;return typeof o=="function"&&!Qg(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,WS(e,t,o,a,i)):(e=ic(r.type,null,a,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var d=o.memoizedProps;if(r=r.compare,r=r!==null?r:qo,r(d,a)&&e.ref===t.ref)return cr(e,t,i)}return t.flags|=1,e=Hr(o,a),e.ref=t.ref,e.return=t,t.child=e}function WS(e,t,r,a,i){if(e!==null){var o=e.memoizedProps;if(qo(o,a)&&e.ref===t.ref)if(wt=!1,t.pendingProps=a=o,(e.lanes&i)!==0)e.flags&131072&&(wt=!0);else return t.lanes=e.lanes,cr(e,t,i)}return Bx(e,t,r,a,i)}function MS(e,t,r){var a=t.pendingProps,i=a.children,o=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ve(Ka,It),It|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ve(Ka,It),It|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=o!==null?o.baseLanes:r,ve(Ka,It),It|=a}else o!==null?(a=o.baseLanes|r,t.memoizedState=null):a=r,ve(Ka,It),It|=a;return ft(e,t,i,r),t.child}function $S(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Bx(e,t,r,a,i){var o=Ct(r)?Js:pt.current;return o=ti(t,o),Ga(t,i),r=Og(e,t,r,a,o,i),a=Wg(),e!==null&&!wt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,cr(e,t,i)):(Ce&&a&&_g(t),t.flags|=1,ft(e,t,r,i),t.child)}function M1(e,t,r,a,i){if(Ct(r)){var o=!0;kc(t)}else o=!1;if(Ga(t,i),t.stateNode===null)rc(e,t),PS(t,r,a),Ax(t,r,a,i),a=!0;else if(e===null){var d=t.stateNode,u=t.memoizedProps;d.props=u;var h=d.context,m=r.contextType;typeof m=="object"&&m!==null?m=rn(m):(m=Ct(r)?Js:pt.current,m=ti(t,m));var f=r.getDerivedStateFromProps,b=typeof f=="function"||typeof d.getSnapshotBeforeUpdate=="function";b||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(u!==a||h!==m)&&F1(t,d,a,m),Er=!1;var v=t.memoizedState;d.state=v,Rc(t,a,d,i),h=t.memoizedState,u!==a||v!==h||kt.current||Er?(typeof f=="function"&&(_x(t,r,f,a),h=t.memoizedState),(u=Er||E1(t,r,u,a,v,h,m))?(b||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=h),d.props=a,d.state=h,d.context=m,a=u):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{d=t.stateNode,fS(e,t),u=t.memoizedProps,m=t.type===t.elementType?u:xn(t.type,u),d.props=m,b=t.pendingProps,v=d.context,h=r.contextType,typeof h=="object"&&h!==null?h=rn(h):(h=Ct(r)?Js:pt.current,h=ti(t,h));var T=r.getDerivedStateFromProps;(f=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(u!==b||v!==h)&&F1(t,d,a,h),Er=!1,v=t.memoizedState,d.state=v,Rc(t,a,d,i);var N=t.memoizedState;u!==b||v!==N||kt.current||Er?(typeof T=="function"&&(_x(t,r,T,a),N=t.memoizedState),(m=Er||E1(t,r,m,a,v,N,h)||!1)?(f||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(a,N,h),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(a,N,h)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||u===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=N),d.props=a,d.state=N,d.context=h,a=m):(typeof d.componentDidUpdate!="function"||u===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),a=!1)}return Tx(e,t,r,a,o,i)}function Tx(e,t,r,a,i,o){$S(e,t);var d=(t.flags&128)!==0;if(!a&&!d)return i&&N1(t,r,!1),cr(e,t,o);a=t.stateNode,yA.current=t;var u=d&&typeof r.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&d?(t.child=ri(t,e.child,null,o),t.child=ri(t,null,u,o)):ft(e,t,u,o),t.memoizedState=a.state,i&&N1(t,r,!0),t.child}function qS(e){var t=e.stateNode;t.pendingContext?C1(e,t.pendingContext,t.pendingContext!==t.context):t.context&&C1(e,t.context,!1),Fg(e,t.containerInfo)}function $1(e,t,r,a,i){return ni(),Rg(i),t.flags|=256,ft(e,t,r,a),t.child}var zx={dehydrated:null,treeContext:null,retryLane:0};function Lx(e){return{baseLanes:e,cachePool:null,transitions:null}}function US(e,t,r){var a=t.pendingProps,i=Ne.current,o=!1,d=(t.flags&128)!==0,u;if((u=d)||(u=e!==null&&e.memoizedState===null?!1:(i&2)!==0),u?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ve(Ne,i&1),e===null)return Cx(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(d=a.children,e=a.fallback,o?(a=t.mode,o=t.child,d={mode:"hidden",children:d},!(a&1)&&o!==null?(o.childLanes=0,o.pendingProps=d):o=np(d,a,0,null),e=Vs(e,a,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Lx(r),t.memoizedState=zx,e):qg(t,d));if(i=e.memoizedState,i!==null&&(u=i.dehydrated,u!==null))return vA(e,t,d,a,u,i,r);if(o){o=a.fallback,d=t.mode,i=e.child,u=i.sibling;var h={mode:"hidden",children:a.children};return!(d&1)&&t.child!==i?(a=t.child,a.childLanes=0,a.pendingProps=h,t.deletions=null):(a=Hr(i,h),a.subtreeFlags=i.subtreeFlags&14680064),u!==null?o=Hr(u,o):(o=Vs(o,d,r,null),o.flags|=2),o.return=t,a.return=t,a.sibling=o,t.child=a,a=o,o=t.child,d=e.child.memoizedState,d=d===null?Lx(r):{baseLanes:d.baseLanes|r,cachePool:null,transitions:d.transitions},o.memoizedState=d,o.childLanes=e.childLanes&~r,t.memoizedState=zx,a}return o=e.child,e=o.sibling,a=Hr(o,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=r),a.return=t,a.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function qg(e,t){return t=np({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Dd(e,t,r,a){return a!==null&&Rg(a),ri(t,e.child,null,r),e=qg(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function vA(e,t,r,a,i,o,d){if(r)return t.flags&256?(t.flags&=-257,a=Th(Error(U(422))),Dd(e,t,d,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=a.fallback,i=t.mode,a=np({mode:"visible",children:a.children},i,0,null),o=Vs(o,i,d,null),o.flags|=2,a.return=t,o.return=t,a.sibling=o,t.child=a,t.mode&1&&ri(t,e.child,null,d),t.child.memoizedState=Lx(d),t.memoizedState=zx,o);if(!(t.mode&1))return Dd(e,t,d,null);if(i.data==="$!"){if(a=i.nextSibling&&i.nextSibling.dataset,a)var u=a.dgst;return a=u,o=Error(U(419)),a=Th(o,a,void 0),Dd(e,t,d,a)}if(u=(d&e.childLanes)!==0,wt||u){if(a=Ye,a!==null){switch(d&-d){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(a.suspendedLanes|d)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,dr(e,i),vn(a,e,i,-1))}return Yg(),a=Th(Error(U(421))),Dd(e,t,d,a)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=zA.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Ot=$r(i.nextSibling),Wt=t,Ce=!0,mn=null,e!==null&&(Gt[Zt++]=sr,Gt[Zt++]=ar,Gt[Zt++]=Ys,sr=e.id,ar=e.overflow,Ys=t),t=qg(t,a.children),t.flags|=4096,t)}function q1(e,t,r){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),Nx(e.return,t,r)}function zh(e,t,r,a,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=a,o.tail=r,o.tailMode=i)}function VS(e,t,r){var a=t.pendingProps,i=a.revealOrder,o=a.tail;if(ft(e,t,a.children,r),a=Ne.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&q1(e,r,t);else if(e.tag===19)q1(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(ve(Ne,a),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&Bc(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),zh(t,!1,i,r,o);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Bc(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}zh(t,!0,r,null,o);break;case"together":zh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function rc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function cr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Xs|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(U(153));if(t.child!==null){for(e=t.child,r=Hr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Hr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function bA(e,t,r){switch(t.tag){case 3:qS(t),ni();break;case 5:mS(t);break;case 1:Ct(t.type)&&kc(t);break;case 4:Fg(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,i=t.memoizedProps.value;ve(_c,a._currentValue),a._currentValue=i;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(ve(Ne,Ne.current&1),t.flags|=128,null):r&t.child.childLanes?US(e,t,r):(ve(Ne,Ne.current&1),e=cr(e,t,r),e!==null?e.sibling:null);ve(Ne,Ne.current&1);break;case 19:if(a=(r&t.childLanes)!==0,e.flags&128){if(a)return VS(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ve(Ne,Ne.current),a)break;return null;case 22:case 23:return t.lanes=0,MS(e,t,r)}return cr(e,t,r)}var HS,Ex,KS,JS;HS=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Ex=function(){};KS=function(e,t,r,a){var i=e.memoizedProps;if(i!==a){e=t.stateNode,$s(zn.current);var o=null;switch(r){case"input":i=nx(e,i),a=nx(e,a),o=[];break;case"select":i=Ae({},i,{value:void 0}),a=Ae({},a,{value:void 0}),o=[];break;case"textarea":i=ax(e,i),a=ax(e,a),o=[];break;default:typeof i.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Sc)}ox(r,a);var d;r=null;for(m in i)if(!a.hasOwnProperty(m)&&i.hasOwnProperty(m)&&i[m]!=null)if(m==="style"){var u=i[m];for(d in u)u.hasOwnProperty(d)&&(r||(r={}),r[d]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(Do.hasOwnProperty(m)?o||(o=[]):(o=o||[]).push(m,null));for(m in a){var h=a[m];if(u=i!=null?i[m]:void 0,a.hasOwnProperty(m)&&h!==u&&(h!=null||u!=null))if(m==="style")if(u){for(d in u)!u.hasOwnProperty(d)||h&&h.hasOwnProperty(d)||(r||(r={}),r[d]="");for(d in h)h.hasOwnProperty(d)&&u[d]!==h[d]&&(r||(r={}),r[d]=h[d])}else r||(o||(o=[]),o.push(m,r)),r=h;else m==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,u=u?u.__html:void 0,h!=null&&u!==h&&(o=o||[]).push(m,h)):m==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(m,""+h):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(Do.hasOwnProperty(m)?(h!=null&&m==="onScroll"&&be("scroll",e),o||u===h||(o=[])):(o=o||[]).push(m,h))}r&&(o=o||[]).push("style",r);var m=o;(t.updateQueue=m)&&(t.flags|=4)}};JS=function(e,t,r,a){r!==a&&(t.flags|=4)};function ho(e,t){if(!Ce)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function ot(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,a=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,a|=i.subtreeFlags&14680064,a|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,a|=i.subtreeFlags,a|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=a,e.childLanes=r,t}function jA(e,t,r){var a=t.pendingProps;switch(Ag(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(t),null;case 1:return Ct(t.type)&&wc(),ot(t),null;case 3:return a=t.stateNode,si(),je(kt),je(pt),Pg(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Ed(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,mn!==null&&($x(mn),mn=null))),Ex(e,t),ot(t),null;case 5:Dg(t);var i=$s(Jo.current);if(r=t.type,e!==null&&t.stateNode!=null)KS(e,t,r,a,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(U(166));return ot(t),null}if(e=$s(zn.current),Ed(t)){a=t.stateNode,r=t.type;var o=t.memoizedProps;switch(a[Rn]=t,a[Ho]=o,e=(t.mode&1)!==0,r){case"dialog":be("cancel",a),be("close",a);break;case"iframe":case"object":case"embed":be("load",a);break;case"video":case"audio":for(i=0;i<wo.length;i++)be(wo[i],a);break;case"source":be("error",a);break;case"img":case"image":case"link":be("error",a),be("load",a);break;case"details":be("toggle",a);break;case"input":G0(a,o),be("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!o.multiple},be("invalid",a);break;case"textarea":e1(a,o),be("invalid",a)}ox(r,o),i=null;for(var d in o)if(o.hasOwnProperty(d)){var u=o[d];d==="children"?typeof u=="string"?a.textContent!==u&&(o.suppressHydrationWarning!==!0&&Ld(a.textContent,u,e),i=["children",u]):typeof u=="number"&&a.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&Ld(a.textContent,u,e),i=["children",""+u]):Do.hasOwnProperty(d)&&u!=null&&d==="onScroll"&&be("scroll",a)}switch(r){case"input":Cd(a),Z0(a,o,!0);break;case"textarea":Cd(a),t1(a);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(a.onclick=Sc)}a=i,t.updateQueue=a,a!==null&&(t.flags|=4)}else{d=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Sj(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=d.createElement(r,{is:a.is}):(e=d.createElement(r),r==="select"&&(d=e,a.multiple?d.multiple=!0:a.size&&(d.size=a.size))):e=d.createElementNS(e,r),e[Rn]=t,e[Ho]=a,HS(e,t,!1,!1),t.stateNode=e;e:{switch(d=lx(r,a),r){case"dialog":be("cancel",e),be("close",e),i=a;break;case"iframe":case"object":case"embed":be("load",e),i=a;break;case"video":case"audio":for(i=0;i<wo.length;i++)be(wo[i],e);i=a;break;case"source":be("error",e),i=a;break;case"img":case"image":case"link":be("error",e),be("load",e),i=a;break;case"details":be("toggle",e),i=a;break;case"input":G0(e,a),i=nx(e,a),be("invalid",e);break;case"option":i=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},i=Ae({},a,{value:void 0}),be("invalid",e);break;case"textarea":e1(e,a),i=ax(e,a),be("invalid",e);break;default:i=a}ox(r,i),u=i;for(o in u)if(u.hasOwnProperty(o)){var h=u[o];o==="style"?Cj(e,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&wj(e,h)):o==="children"?typeof h=="string"?(r!=="textarea"||h!=="")&&Po(e,h):typeof h=="number"&&Po(e,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Do.hasOwnProperty(o)?h!=null&&o==="onScroll"&&be("scroll",e):h!=null&&hg(e,o,h,d))}switch(r){case"input":Cd(e),Z0(e,a,!1);break;case"textarea":Cd(e),t1(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Jr(a.value));break;case"select":e.multiple=!!a.multiple,o=a.value,o!=null?Ja(e,!!a.multiple,o,!1):a.defaultValue!=null&&Ja(e,!!a.multiple,a.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Sc)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ot(t),null;case 6:if(e&&t.stateNode!=null)JS(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(U(166));if(r=$s(Jo.current),$s(zn.current),Ed(t)){if(a=t.stateNode,r=t.memoizedProps,a[Rn]=t,(o=a.nodeValue!==r)&&(e=Wt,e!==null))switch(e.tag){case 3:Ld(a.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ld(a.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[Rn]=t,t.stateNode=a}return ot(t),null;case 13:if(je(Ne),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ce&&Ot!==null&&t.mode&1&&!(t.flags&128))uS(),ni(),t.flags|=98560,o=!1;else if(o=Ed(t),a!==null&&a.dehydrated!==null){if(e===null){if(!o)throw Error(U(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(U(317));o[Rn]=t}else ni(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ot(t),o=!1}else mn!==null&&($x(mn),mn=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||Ne.current&1?qe===0&&(qe=3):Yg())),t.updateQueue!==null&&(t.flags|=4),ot(t),null);case 4:return si(),Ex(e,t),e===null&&Uo(t.stateNode.containerInfo),ot(t),null;case 10:return zg(t.type._context),ot(t),null;case 17:return Ct(t.type)&&wc(),ot(t),null;case 19:if(je(Ne),o=t.memoizedState,o===null)return ot(t),null;if(a=(t.flags&128)!==0,d=o.rendering,d===null)if(a)ho(o,!1);else{if(qe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(d=Bc(e),d!==null){for(t.flags|=128,ho(o,!1),a=d.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=r,r=t.child;r!==null;)o=r,e=a,o.flags&=14680066,d=o.alternate,d===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=d.childLanes,o.lanes=d.lanes,o.child=d.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=d.memoizedProps,o.memoizedState=d.memoizedState,o.updateQueue=d.updateQueue,o.type=d.type,e=d.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ve(Ne,Ne.current&1|2),t.child}e=e.sibling}o.tail!==null&&Ee()>ii&&(t.flags|=128,a=!0,ho(o,!1),t.lanes=4194304)}else{if(!a)if(e=Bc(d),e!==null){if(t.flags|=128,a=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ho(o,!0),o.tail===null&&o.tailMode==="hidden"&&!d.alternate&&!Ce)return ot(t),null}else 2*Ee()-o.renderingStartTime>ii&&r!==1073741824&&(t.flags|=128,a=!0,ho(o,!1),t.lanes=4194304);o.isBackwards?(d.sibling=t.child,t.child=d):(r=o.last,r!==null?r.sibling=d:t.child=d,o.last=d)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ee(),t.sibling=null,r=Ne.current,ve(Ne,a?r&1|2:r&1),t):(ot(t),null);case 22:case 23:return Jg(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?It&1073741824&&(ot(t),t.subtreeFlags&6&&(t.flags|=8192)):ot(t),null;case 24:return null;case 25:return null}throw Error(U(156,t.tag))}function SA(e,t){switch(Ag(t),t.tag){case 1:return Ct(t.type)&&wc(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return si(),je(kt),je(pt),Pg(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Dg(t),null;case 13:if(je(Ne),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(U(340));ni()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return je(Ne),null;case 4:return si(),null;case 10:return zg(t.type._context),null;case 22:case 23:return Jg(),null;case 24:return null;default:return null}}var Pd=!1,dt=!1,wA=typeof WeakSet=="function"?WeakSet:Set,J=null;function Ha(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){Le(e,t,a)}else r.current=null}function Fx(e,t,r){try{r()}catch(a){Le(e,t,a)}}var U1=!1;function kA(e,t){if(yx=vc,e=Zj(),Ng(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var i=a.anchorOffset,o=a.focusNode;a=a.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var d=0,u=-1,h=-1,m=0,f=0,b=e,v=null;t:for(;;){for(var T;b!==r||i!==0&&b.nodeType!==3||(u=d+i),b!==o||a!==0&&b.nodeType!==3||(h=d+a),b.nodeType===3&&(d+=b.nodeValue.length),(T=b.firstChild)!==null;)v=b,b=T;for(;;){if(b===e)break t;if(v===r&&++m===i&&(u=d),v===o&&++f===a&&(h=d),(T=b.nextSibling)!==null)break;b=v,v=b.parentNode}b=T}r=u===-1||h===-1?null:{start:u,end:h}}else r=null}r=r||{start:0,end:0}}else r=null;for(vx={focusedElem:e,selectionRange:r},vc=!1,J=t;J!==null;)if(t=J,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,J=e;else for(;J!==null;){t=J;try{var N=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var R=N.memoizedProps,F=N.memoizedState,C=t.stateNode,j=C.getSnapshotBeforeUpdate(t.elementType===t.type?R:xn(t.type,R),F);C.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(z){Le(t,t.return,z)}if(e=t.sibling,e!==null){e.return=t.return,J=e;break}J=t.return}return N=U1,U1=!1,N}function zo(e,t,r){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var i=a=a.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&Fx(t,r,o)}i=i.next}while(i!==a)}}function ep(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var a=r.create;r.destroy=a()}r=r.next}while(r!==t)}}function Dx(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function YS(e){var t=e.alternate;t!==null&&(e.alternate=null,YS(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Rn],delete t[Ho],delete t[Sx],delete t[iA],delete t[oA])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function QS(e){return e.tag===5||e.tag===3||e.tag===4}function V1(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||QS(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Px(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Sc));else if(a!==4&&(e=e.child,e!==null))for(Px(e,t,r),e=e.sibling;e!==null;)Px(e,t,r),e=e.sibling}function Ix(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Ix(e,t,r),e=e.sibling;e!==null;)Ix(e,t,r),e=e.sibling}var tt=null,gn=!1;function Br(e,t,r){for(r=r.child;r!==null;)XS(e,t,r),r=r.sibling}function XS(e,t,r){if(Tn&&typeof Tn.onCommitFiberUnmount=="function")try{Tn.onCommitFiberUnmount(Hc,r)}catch{}switch(r.tag){case 5:dt||Ha(r,t);case 6:var a=tt,i=gn;tt=null,Br(e,t,r),tt=a,gn=i,tt!==null&&(gn?(e=tt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):tt.removeChild(r.stateNode));break;case 18:tt!==null&&(gn?(e=tt,r=r.stateNode,e.nodeType===8?Ch(e.parentNode,r):e.nodeType===1&&Ch(e,r),Mo(e)):Ch(tt,r.stateNode));break;case 4:a=tt,i=gn,tt=r.stateNode.containerInfo,gn=!0,Br(e,t,r),tt=a,gn=i;break;case 0:case 11:case 14:case 15:if(!dt&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){i=a=a.next;do{var o=i,d=o.destroy;o=o.tag,d!==void 0&&(o&2||o&4)&&Fx(r,t,d),i=i.next}while(i!==a)}Br(e,t,r);break;case 1:if(!dt&&(Ha(r,t),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(u){Le(r,t,u)}Br(e,t,r);break;case 21:Br(e,t,r);break;case 22:r.mode&1?(dt=(a=dt)||r.memoizedState!==null,Br(e,t,r),dt=a):Br(e,t,r);break;default:Br(e,t,r)}}function H1(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new wA),t.forEach(function(a){var i=LA.bind(null,e,a);r.has(a)||(r.add(a),a.then(i,i))})}}function hn(e,t){var r=t.deletions;if(r!==null)for(var a=0;a<r.length;a++){var i=r[a];try{var o=e,d=t,u=d;e:for(;u!==null;){switch(u.tag){case 5:tt=u.stateNode,gn=!1;break e;case 3:tt=u.stateNode.containerInfo,gn=!0;break e;case 4:tt=u.stateNode.containerInfo,gn=!0;break e}u=u.return}if(tt===null)throw Error(U(160));XS(o,d,i),tt=null,gn=!1;var h=i.alternate;h!==null&&(h.return=null),i.return=null}catch(m){Le(i,t,m)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)GS(t,e),t=t.sibling}function GS(e,t){var r=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(hn(t,e),Nn(e),a&4){try{zo(3,e,e.return),ep(3,e)}catch(R){Le(e,e.return,R)}try{zo(5,e,e.return)}catch(R){Le(e,e.return,R)}}break;case 1:hn(t,e),Nn(e),a&512&&r!==null&&Ha(r,r.return);break;case 5:if(hn(t,e),Nn(e),a&512&&r!==null&&Ha(r,r.return),e.flags&32){var i=e.stateNode;try{Po(i,"")}catch(R){Le(e,e.return,R)}}if(a&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,d=r!==null?r.memoizedProps:o,u=e.type,h=e.updateQueue;if(e.updateQueue=null,h!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&bj(i,o),lx(u,d);var m=lx(u,o);for(d=0;d<h.length;d+=2){var f=h[d],b=h[d+1];f==="style"?Cj(i,b):f==="dangerouslySetInnerHTML"?wj(i,b):f==="children"?Po(i,b):hg(i,f,b,m)}switch(u){case"input":rx(i,o);break;case"textarea":jj(i,o);break;case"select":var v=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var T=o.value;T!=null?Ja(i,!!o.multiple,T,!1):v!==!!o.multiple&&(o.defaultValue!=null?Ja(i,!!o.multiple,o.defaultValue,!0):Ja(i,!!o.multiple,o.multiple?[]:"",!1))}i[Ho]=o}catch(R){Le(e,e.return,R)}}break;case 6:if(hn(t,e),Nn(e),a&4){if(e.stateNode===null)throw Error(U(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(R){Le(e,e.return,R)}}break;case 3:if(hn(t,e),Nn(e),a&4&&r!==null&&r.memoizedState.isDehydrated)try{Mo(t.containerInfo)}catch(R){Le(e,e.return,R)}break;case 4:hn(t,e),Nn(e);break;case 13:hn(t,e),Nn(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Hg=Ee())),a&4&&H1(e);break;case 22:if(f=r!==null&&r.memoizedState!==null,e.mode&1?(dt=(m=dt)||f,hn(t,e),dt=m):hn(t,e),Nn(e),a&8192){if(m=e.memoizedState!==null,(e.stateNode.isHidden=m)&&!f&&e.mode&1)for(J=e,f=e.child;f!==null;){for(b=J=f;J!==null;){switch(v=J,T=v.child,v.tag){case 0:case 11:case 14:case 15:zo(4,v,v.return);break;case 1:Ha(v,v.return);var N=v.stateNode;if(typeof N.componentWillUnmount=="function"){a=v,r=v.return;try{t=a,N.props=t.memoizedProps,N.state=t.memoizedState,N.componentWillUnmount()}catch(R){Le(a,r,R)}}break;case 5:Ha(v,v.return);break;case 22:if(v.memoizedState!==null){J1(b);continue}}T!==null?(T.return=v,J=T):J1(b)}f=f.sibling}e:for(f=null,b=e;;){if(b.tag===5){if(f===null){f=b;try{i=b.stateNode,m?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=b.stateNode,h=b.memoizedProps.style,d=h!=null&&h.hasOwnProperty("display")?h.display:null,u.style.display=kj("display",d))}catch(R){Le(e,e.return,R)}}}else if(b.tag===6){if(f===null)try{b.stateNode.nodeValue=m?"":b.memoizedProps}catch(R){Le(e,e.return,R)}}else if((b.tag!==22&&b.tag!==23||b.memoizedState===null||b===e)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===e)break e;for(;b.sibling===null;){if(b.return===null||b.return===e)break e;f===b&&(f=null),b=b.return}f===b&&(f=null),b.sibling.return=b.return,b=b.sibling}}break;case 19:hn(t,e),Nn(e),a&4&&H1(e);break;case 21:break;default:hn(t,e),Nn(e)}}function Nn(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(QS(r)){var a=r;break e}r=r.return}throw Error(U(160))}switch(a.tag){case 5:var i=a.stateNode;a.flags&32&&(Po(i,""),a.flags&=-33);var o=V1(e);Ix(e,o,i);break;case 3:case 4:var d=a.stateNode.containerInfo,u=V1(e);Px(e,u,d);break;default:throw Error(U(161))}}catch(h){Le(e,e.return,h)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function CA(e,t,r){J=e,ZS(e)}function ZS(e,t,r){for(var a=(e.mode&1)!==0;J!==null;){var i=J,o=i.child;if(i.tag===22&&a){var d=i.memoizedState!==null||Pd;if(!d){var u=i.alternate,h=u!==null&&u.memoizedState!==null||dt;u=Pd;var m=dt;if(Pd=d,(dt=h)&&!m)for(J=i;J!==null;)d=J,h=d.child,d.tag===22&&d.memoizedState!==null?Y1(i):h!==null?(h.return=d,J=h):Y1(i);for(;o!==null;)J=o,ZS(o),o=o.sibling;J=i,Pd=u,dt=m}K1(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,J=o):K1(e)}}function K1(e){for(;J!==null;){var t=J;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:dt||ep(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!dt)if(r===null)a.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:xn(t.type,r.memoizedProps);a.componentDidUpdate(i,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&T1(t,o,a);break;case 3:var d=t.updateQueue;if(d!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}T1(t,d,r)}break;case 5:var u=t.stateNode;if(r===null&&t.flags&4){r=u;var h=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&r.focus();break;case"img":h.src&&(r.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var m=t.alternate;if(m!==null){var f=m.memoizedState;if(f!==null){var b=f.dehydrated;b!==null&&Mo(b)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}dt||t.flags&512&&Dx(t)}catch(v){Le(t,t.return,v)}}if(t===e){J=null;break}if(r=t.sibling,r!==null){r.return=t.return,J=r;break}J=t.return}}function J1(e){for(;J!==null;){var t=J;if(t===e){J=null;break}var r=t.sibling;if(r!==null){r.return=t.return,J=r;break}J=t.return}}function Y1(e){for(;J!==null;){var t=J;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ep(4,t)}catch(h){Le(t,r,h)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var i=t.return;try{a.componentDidMount()}catch(h){Le(t,i,h)}}var o=t.return;try{Dx(t)}catch(h){Le(t,o,h)}break;case 5:var d=t.return;try{Dx(t)}catch(h){Le(t,d,h)}}}catch(h){Le(t,t.return,h)}if(t===e){J=null;break}var u=t.sibling;if(u!==null){u.return=t.return,J=u;break}J=t.return}}var NA=Math.ceil,Lc=pr.ReactCurrentDispatcher,Ug=pr.ReactCurrentOwner,nn=pr.ReactCurrentBatchConfig,he=0,Ye=null,Oe=null,nt=0,It=0,Ka=Xr(0),qe=0,Go=null,Xs=0,tp=0,Vg=0,Lo=null,St=null,Hg=0,ii=1/0,tr=null,Ec=!1,Ox=null,Ur=null,Id=!1,Ir=null,Fc=0,Eo=0,Wx=null,sc=-1,ac=0;function mt(){return he&6?Ee():sc!==-1?sc:sc=Ee()}function Vr(e){return e.mode&1?he&2&&nt!==0?nt&-nt:dA.transition!==null?(ac===0&&(ac=Pj()),ac):(e=fe,e!==0||(e=window.event,e=e===void 0?16:Uj(e.type)),e):1}function vn(e,t,r,a){if(50<Eo)throw Eo=0,Wx=null,Error(U(185));tl(e,r,a),(!(he&2)||e!==Ye)&&(e===Ye&&(!(he&2)&&(tp|=r),qe===4&&Dr(e,nt)),Nt(e,a),r===1&&he===0&&!(t.mode&1)&&(ii=Ee()+500,Xc&&Gr()))}function Nt(e,t){var r=e.callbackNode;d_(e,t);var a=yc(e,e===Ye?nt:0);if(a===0)r!==null&&s1(r),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(r!=null&&s1(r),t===1)e.tag===0?lA(Q1.bind(null,e)):dS(Q1.bind(null,e)),sA(function(){!(he&6)&&Gr()}),r=null;else{switch(Ij(a)){case 1:r=yg;break;case 4:r=Fj;break;case 16:r=mc;break;case 536870912:r=Dj;break;default:r=mc}r=ow(r,ew.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ew(e,t){if(sc=-1,ac=0,he&6)throw Error(U(327));var r=e.callbackNode;if(Za()&&e.callbackNode!==r)return null;var a=yc(e,e===Ye?nt:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=Dc(e,a);else{t=a;var i=he;he|=2;var o=nw();(Ye!==e||nt!==t)&&(tr=null,ii=Ee()+500,Us(e,t));do try{RA();break}catch(u){tw(e,u)}while(!0);Tg(),Lc.current=o,he=i,Oe!==null?t=0:(Ye=null,nt=0,t=qe)}if(t!==0){if(t===2&&(i=hx(e),i!==0&&(a=i,t=Mx(e,i))),t===1)throw r=Go,Us(e,0),Dr(e,a),Nt(e,Ee()),r;if(t===6)Dr(e,a);else{if(i=e.current.alternate,!(a&30)&&!_A(i)&&(t=Dc(e,a),t===2&&(o=hx(e),o!==0&&(a=o,t=Mx(e,o))),t===1))throw r=Go,Us(e,0),Dr(e,a),Nt(e,Ee()),r;switch(e.finishedWork=i,e.finishedLanes=a,t){case 0:case 1:throw Error(U(345));case 2:Os(e,St,tr);break;case 3:if(Dr(e,a),(a&130023424)===a&&(t=Hg+500-Ee(),10<t)){if(yc(e,0)!==0)break;if(i=e.suspendedLanes,(i&a)!==a){mt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=jx(Os.bind(null,e,St,tr),t);break}Os(e,St,tr);break;case 4:if(Dr(e,a),(a&4194240)===a)break;for(t=e.eventTimes,i=-1;0<a;){var d=31-yn(a);o=1<<d,d=t[d],d>i&&(i=d),a&=~o}if(a=i,a=Ee()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*NA(a/1960))-a,10<a){e.timeoutHandle=jx(Os.bind(null,e,St,tr),a);break}Os(e,St,tr);break;case 5:Os(e,St,tr);break;default:throw Error(U(329))}}}return Nt(e,Ee()),e.callbackNode===r?ew.bind(null,e):null}function Mx(e,t){var r=Lo;return e.current.memoizedState.isDehydrated&&(Us(e,t).flags|=256),e=Dc(e,t),e!==2&&(t=St,St=r,t!==null&&$x(t)),e}function $x(e){St===null?St=e:St.push.apply(St,e)}function _A(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var i=r[a],o=i.getSnapshot;i=i.value;try{if(!bn(o(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Dr(e,t){for(t&=~Vg,t&=~tp,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-yn(t),a=1<<r;e[r]=-1,t&=~a}}function Q1(e){if(he&6)throw Error(U(327));Za();var t=yc(e,0);if(!(t&1))return Nt(e,Ee()),null;var r=Dc(e,t);if(e.tag!==0&&r===2){var a=hx(e);a!==0&&(t=a,r=Mx(e,a))}if(r===1)throw r=Go,Us(e,0),Dr(e,t),Nt(e,Ee()),r;if(r===6)throw Error(U(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Os(e,St,tr),Nt(e,Ee()),null}function Kg(e,t){var r=he;he|=1;try{return e(t)}finally{he=r,he===0&&(ii=Ee()+500,Xc&&Gr())}}function Gs(e){Ir!==null&&Ir.tag===0&&!(he&6)&&Za();var t=he;he|=1;var r=nn.transition,a=fe;try{if(nn.transition=null,fe=1,e)return e()}finally{fe=a,nn.transition=r,he=t,!(he&6)&&Gr()}}function Jg(){It=Ka.current,je(Ka)}function Us(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,rA(r)),Oe!==null)for(r=Oe.return;r!==null;){var a=r;switch(Ag(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&wc();break;case 3:si(),je(kt),je(pt),Pg();break;case 5:Dg(a);break;case 4:si();break;case 13:je(Ne);break;case 19:je(Ne);break;case 10:zg(a.type._context);break;case 22:case 23:Jg()}r=r.return}if(Ye=e,Oe=e=Hr(e.current,null),nt=It=t,qe=0,Go=null,Vg=tp=Xs=0,St=Lo=null,Ms!==null){for(t=0;t<Ms.length;t++)if(r=Ms[t],a=r.interleaved,a!==null){r.interleaved=null;var i=a.next,o=r.pending;if(o!==null){var d=o.next;o.next=i,a.next=d}r.pending=a}Ms=null}return e}function tw(e,t){do{var r=Oe;try{if(Tg(),tc.current=zc,Tc){for(var a=_e.memoizedState;a!==null;){var i=a.queue;i!==null&&(i.pending=null),a=a.next}Tc=!1}if(Qs=0,Je=$e=_e=null,To=!1,Yo=0,Ug.current=null,r===null||r.return===null){qe=1,Go=t,Oe=null;break}e:{var o=e,d=r.return,u=r,h=t;if(t=nt,u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var m=h,f=u,b=f.tag;if(!(f.mode&1)&&(b===0||b===11||b===15)){var v=f.alternate;v?(f.updateQueue=v.updateQueue,f.memoizedState=v.memoizedState,f.lanes=v.lanes):(f.updateQueue=null,f.memoizedState=null)}var T=P1(d);if(T!==null){T.flags&=-257,I1(T,d,u,o,t),T.mode&1&&D1(o,m,t),t=T,h=m;var N=t.updateQueue;if(N===null){var R=new Set;R.add(h),t.updateQueue=R}else N.add(h);break e}else{if(!(t&1)){D1(o,m,t),Yg();break e}h=Error(U(426))}}else if(Ce&&u.mode&1){var F=P1(d);if(F!==null){!(F.flags&65536)&&(F.flags|=256),I1(F,d,u,o,t),Rg(ai(h,u));break e}}o=h=ai(h,u),qe!==4&&(qe=2),Lo===null?Lo=[o]:Lo.push(o),o=d;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var C=IS(o,h,t);B1(o,C);break e;case 1:u=h;var j=o.type,_=o.stateNode;if(!(o.flags&128)&&(typeof j.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Ur===null||!Ur.has(_)))){o.flags|=65536,t&=-t,o.lanes|=t;var z=OS(o,u,t);B1(o,z);break e}}o=o.return}while(o!==null)}sw(r)}catch(I){t=I,Oe===r&&r!==null&&(Oe=r=r.return);continue}break}while(!0)}function nw(){var e=Lc.current;return Lc.current=zc,e===null?zc:e}function Yg(){(qe===0||qe===3||qe===2)&&(qe=4),Ye===null||!(Xs&268435455)&&!(tp&268435455)||Dr(Ye,nt)}function Dc(e,t){var r=he;he|=2;var a=nw();(Ye!==e||nt!==t)&&(tr=null,Us(e,t));do try{AA();break}catch(i){tw(e,i)}while(!0);if(Tg(),he=r,Lc.current=a,Oe!==null)throw Error(U(261));return Ye=null,nt=0,qe}function AA(){for(;Oe!==null;)rw(Oe)}function RA(){for(;Oe!==null&&!e_();)rw(Oe)}function rw(e){var t=iw(e.alternate,e,It);e.memoizedProps=e.pendingProps,t===null?sw(e):Oe=t,Ug.current=null}function sw(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=SA(r,t),r!==null){r.flags&=32767,Oe=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{qe=6,Oe=null;return}}else if(r=jA(r,t,It),r!==null){Oe=r;return}if(t=t.sibling,t!==null){Oe=t;return}Oe=t=e}while(t!==null);qe===0&&(qe=5)}function Os(e,t,r){var a=fe,i=nn.transition;try{nn.transition=null,fe=1,BA(e,t,r,a)}finally{nn.transition=i,fe=a}return null}function BA(e,t,r,a){do Za();while(Ir!==null);if(he&6)throw Error(U(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(U(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(c_(e,o),e===Ye&&(Oe=Ye=null,nt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Id||(Id=!0,ow(mc,function(){return Za(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=nn.transition,nn.transition=null;var d=fe;fe=1;var u=he;he|=4,Ug.current=null,kA(e,r),GS(r,e),Q_(vx),vc=!!yx,vx=yx=null,e.current=r,CA(r),t_(),he=u,fe=d,nn.transition=o}else e.current=r;if(Id&&(Id=!1,Ir=e,Fc=i),o=e.pendingLanes,o===0&&(Ur=null),s_(r.stateNode),Nt(e,Ee()),t!==null)for(a=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],a(i.value,{componentStack:i.stack,digest:i.digest});if(Ec)throw Ec=!1,e=Ox,Ox=null,e;return Fc&1&&e.tag!==0&&Za(),o=e.pendingLanes,o&1?e===Wx?Eo++:(Eo=0,Wx=e):Eo=0,Gr(),null}function Za(){if(Ir!==null){var e=Ij(Fc),t=nn.transition,r=fe;try{if(nn.transition=null,fe=16>e?16:e,Ir===null)var a=!1;else{if(e=Ir,Ir=null,Fc=0,he&6)throw Error(U(331));var i=he;for(he|=4,J=e.current;J!==null;){var o=J,d=o.child;if(J.flags&16){var u=o.deletions;if(u!==null){for(var h=0;h<u.length;h++){var m=u[h];for(J=m;J!==null;){var f=J;switch(f.tag){case 0:case 11:case 15:zo(8,f,o)}var b=f.child;if(b!==null)b.return=f,J=b;else for(;J!==null;){f=J;var v=f.sibling,T=f.return;if(YS(f),f===m){J=null;break}if(v!==null){v.return=T,J=v;break}J=T}}}var N=o.alternate;if(N!==null){var R=N.child;if(R!==null){N.child=null;do{var F=R.sibling;R.sibling=null,R=F}while(R!==null)}}J=o}}if(o.subtreeFlags&2064&&d!==null)d.return=o,J=d;else e:for(;J!==null;){if(o=J,o.flags&2048)switch(o.tag){case 0:case 11:case 15:zo(9,o,o.return)}var C=o.sibling;if(C!==null){C.return=o.return,J=C;break e}J=o.return}}var j=e.current;for(J=j;J!==null;){d=J;var _=d.child;if(d.subtreeFlags&2064&&_!==null)_.return=d,J=_;else e:for(d=j;J!==null;){if(u=J,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:ep(9,u)}}catch(I){Le(u,u.return,I)}if(u===d){J=null;break e}var z=u.sibling;if(z!==null){z.return=u.return,J=z;break e}J=u.return}}if(he=i,Gr(),Tn&&typeof Tn.onPostCommitFiberRoot=="function")try{Tn.onPostCommitFiberRoot(Hc,e)}catch{}a=!0}return a}finally{fe=r,nn.transition=t}}return!1}function X1(e,t,r){t=ai(r,t),t=IS(e,t,1),e=qr(e,t,1),t=mt(),e!==null&&(tl(e,1,t),Nt(e,t))}function Le(e,t,r){if(e.tag===3)X1(e,e,r);else for(;t!==null;){if(t.tag===3){X1(t,e,r);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Ur===null||!Ur.has(a))){e=ai(r,e),e=OS(t,e,1),t=qr(t,e,1),e=mt(),t!==null&&(tl(t,1,e),Nt(t,e));break}}t=t.return}}function TA(e,t,r){var a=e.pingCache;a!==null&&a.delete(t),t=mt(),e.pingedLanes|=e.suspendedLanes&r,Ye===e&&(nt&r)===r&&(qe===4||qe===3&&(nt&130023424)===nt&&500>Ee()-Hg?Us(e,0):Vg|=r),Nt(e,t)}function aw(e,t){t===0&&(e.mode&1?(t=Ad,Ad<<=1,!(Ad&130023424)&&(Ad=4194304)):t=1);var r=mt();e=dr(e,t),e!==null&&(tl(e,t,r),Nt(e,r))}function zA(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),aw(e,r)}function LA(e,t){var r=0;switch(e.tag){case 13:var a=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(U(314))}a!==null&&a.delete(t),aw(e,r)}var iw;iw=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||kt.current)wt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return wt=!1,bA(e,t,r);wt=!!(e.flags&131072)}else wt=!1,Ce&&t.flags&1048576&&cS(t,Nc,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;rc(e,t),e=t.pendingProps;var i=ti(t,pt.current);Ga(t,r),i=Og(null,t,a,e,i,r);var o=Wg();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ct(a)?(o=!0,kc(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Eg(t),i.updater=Zc,t.stateNode=i,i._reactInternals=t,Ax(t,a,e,r),t=Tx(null,t,a,!0,o,r)):(t.tag=0,Ce&&o&&_g(t),ft(null,t,i,r),t=t.child),t;case 16:a=t.elementType;e:{switch(rc(e,t),e=t.pendingProps,i=a._init,a=i(a._payload),t.type=a,i=t.tag=FA(a),e=xn(a,e),i){case 0:t=Bx(null,t,a,e,r);break e;case 1:t=M1(null,t,a,e,r);break e;case 11:t=O1(null,t,a,e,r);break e;case 14:t=W1(null,t,a,xn(a.type,e),r);break e}throw Error(U(306,a,""))}return t;case 0:return a=t.type,i=t.pendingProps,i=t.elementType===a?i:xn(a,i),Bx(e,t,a,i,r);case 1:return a=t.type,i=t.pendingProps,i=t.elementType===a?i:xn(a,i),M1(e,t,a,i,r);case 3:e:{if(qS(t),e===null)throw Error(U(387));a=t.pendingProps,o=t.memoizedState,i=o.element,fS(e,t),Rc(t,a,null,r);var d=t.memoizedState;if(a=d.element,o.isDehydrated)if(o={element:a,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=ai(Error(U(423)),t),t=$1(e,t,a,r,i);break e}else if(a!==i){i=ai(Error(U(424)),t),t=$1(e,t,a,r,i);break e}else for(Ot=$r(t.stateNode.containerInfo.firstChild),Wt=t,Ce=!0,mn=null,r=xS(t,null,a,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ni(),a===i){t=cr(e,t,r);break e}ft(e,t,a,r)}t=t.child}return t;case 5:return mS(t),e===null&&Cx(t),a=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,d=i.children,bx(a,i)?d=null:o!==null&&bx(a,o)&&(t.flags|=32),$S(e,t),ft(e,t,d,r),t.child;case 6:return e===null&&Cx(t),null;case 13:return US(e,t,r);case 4:return Fg(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=ri(t,null,a,r):ft(e,t,a,r),t.child;case 11:return a=t.type,i=t.pendingProps,i=t.elementType===a?i:xn(a,i),O1(e,t,a,i,r);case 7:return ft(e,t,t.pendingProps,r),t.child;case 8:return ft(e,t,t.pendingProps.children,r),t.child;case 12:return ft(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(a=t.type._context,i=t.pendingProps,o=t.memoizedProps,d=i.value,ve(_c,a._currentValue),a._currentValue=d,o!==null)if(bn(o.value,d)){if(o.children===i.children&&!kt.current){t=cr(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var u=o.dependencies;if(u!==null){d=o.child;for(var h=u.firstContext;h!==null;){if(h.context===a){if(o.tag===1){h=ir(-1,r&-r),h.tag=2;var m=o.updateQueue;if(m!==null){m=m.shared;var f=m.pending;f===null?h.next=h:(h.next=f.next,f.next=h),m.pending=h}}o.lanes|=r,h=o.alternate,h!==null&&(h.lanes|=r),Nx(o.return,r,t),u.lanes|=r;break}h=h.next}}else if(o.tag===10)d=o.type===t.type?null:o.child;else if(o.tag===18){if(d=o.return,d===null)throw Error(U(341));d.lanes|=r,u=d.alternate,u!==null&&(u.lanes|=r),Nx(d,r,t),d=o.sibling}else d=o.child;if(d!==null)d.return=o;else for(d=o;d!==null;){if(d===t){d=null;break}if(o=d.sibling,o!==null){o.return=d.return,d=o;break}d=d.return}o=d}ft(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,a=t.pendingProps.children,Ga(t,r),i=rn(i),a=a(i),t.flags|=1,ft(e,t,a,r),t.child;case 14:return a=t.type,i=xn(a,t.pendingProps),i=xn(a.type,i),W1(e,t,a,i,r);case 15:return WS(e,t,t.type,t.pendingProps,r);case 17:return a=t.type,i=t.pendingProps,i=t.elementType===a?i:xn(a,i),rc(e,t),t.tag=1,Ct(a)?(e=!0,kc(t)):e=!1,Ga(t,r),PS(t,a,i),Ax(t,a,i,r),Tx(null,t,a,!0,e,r);case 19:return VS(e,t,r);case 22:return MS(e,t,r)}throw Error(U(156,t.tag))};function ow(e,t){return Ej(e,t)}function EA(e,t,r,a){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tn(e,t,r,a){return new EA(e,t,r,a)}function Qg(e){return e=e.prototype,!(!e||!e.isReactComponent)}function FA(e){if(typeof e=="function")return Qg(e)?1:0;if(e!=null){if(e=e.$$typeof,e===gg)return 11;if(e===fg)return 14}return 2}function Hr(e,t){var r=e.alternate;return r===null?(r=tn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ic(e,t,r,a,i,o){var d=2;if(a=e,typeof e=="function")Qg(e)&&(d=1);else if(typeof e=="string")d=5;else e:switch(e){case Pa:return Vs(r.children,i,o,t);case xg:d=8,i|=8;break;case Gh:return e=tn(12,r,t,i|2),e.elementType=Gh,e.lanes=o,e;case Zh:return e=tn(13,r,t,i),e.elementType=Zh,e.lanes=o,e;case ex:return e=tn(19,r,t,i),e.elementType=ex,e.lanes=o,e;case mj:return np(r,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case gj:d=10;break e;case fj:d=9;break e;case gg:d=11;break e;case fg:d=14;break e;case Lr:d=16,a=null;break e}throw Error(U(130,e==null?e:typeof e,""))}return t=tn(d,r,t,i),t.elementType=e,t.type=a,t.lanes=o,t}function Vs(e,t,r,a){return e=tn(7,e,a,t),e.lanes=r,e}function np(e,t,r,a){return e=tn(22,e,a,t),e.elementType=mj,e.lanes=r,e.stateNode={isHidden:!1},e}function Lh(e,t,r){return e=tn(6,e,null,t),e.lanes=r,e}function Eh(e,t,r){return t=tn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function DA(e,t,r,a,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xh(0),this.expirationTimes=xh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xh(0),this.identifierPrefix=a,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Xg(e,t,r,a,i,o,d,u,h){return e=new DA(e,t,r,u,h),t===1?(t=1,o===!0&&(t|=8)):t=0,o=tn(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Eg(o),e}function PA(e,t,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Da,key:a==null?null:""+a,children:e,containerInfo:t,implementation:r}}function lw(e){if(!e)return Yr;e=e._reactInternals;e:{if(ta(e)!==e||e.tag!==1)throw Error(U(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ct(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(U(171))}if(e.tag===1){var r=e.type;if(Ct(r))return lS(e,r,t)}return t}function dw(e,t,r,a,i,o,d,u,h){return e=Xg(r,a,!0,e,i,o,d,u,h),e.context=lw(null),r=e.current,a=mt(),i=Vr(r),o=ir(a,i),o.callback=t??null,qr(r,o,i),e.current.lanes=i,tl(e,i,a),Nt(e,a),e}function rp(e,t,r,a){var i=t.current,o=mt(),d=Vr(i);return r=lw(r),t.context===null?t.context=r:t.pendingContext=r,t=ir(o,d),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=qr(i,t,d),e!==null&&(vn(e,i,d,o),ec(e,i,d)),d}function Pc(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function G1(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Gg(e,t){G1(e,t),(e=e.alternate)&&G1(e,t)}function IA(){return null}var cw=typeof reportError=="function"?reportError:function(e){console.error(e)};function Zg(e){this._internalRoot=e}sp.prototype.render=Zg.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(U(409));rp(e,t,null,null)};sp.prototype.unmount=Zg.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Gs(function(){rp(null,e,null,null)}),t[lr]=null}};function sp(e){this._internalRoot=e}sp.prototype.unstable_scheduleHydration=function(e){if(e){var t=Mj();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Fr.length&&t!==0&&t<Fr[r].priority;r++);Fr.splice(r,0,e),r===0&&qj(e)}};function ef(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ap(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Z1(){}function OA(e,t,r,a,i){if(i){if(typeof a=="function"){var o=a;a=function(){var m=Pc(d);o.call(m)}}var d=dw(t,a,e,0,null,!1,!1,"",Z1);return e._reactRootContainer=d,e[lr]=d.current,Uo(e.nodeType===8?e.parentNode:e),Gs(),d}for(;i=e.lastChild;)e.removeChild(i);if(typeof a=="function"){var u=a;a=function(){var m=Pc(h);u.call(m)}}var h=Xg(e,0,!1,null,null,!1,!1,"",Z1);return e._reactRootContainer=h,e[lr]=h.current,Uo(e.nodeType===8?e.parentNode:e),Gs(function(){rp(t,h,r,a)}),h}function ip(e,t,r,a,i){var o=r._reactRootContainer;if(o){var d=o;if(typeof i=="function"){var u=i;i=function(){var h=Pc(d);u.call(h)}}rp(t,d,e,i)}else d=OA(r,t,e,i,a);return Pc(d)}Oj=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=So(t.pendingLanes);r!==0&&(vg(t,r|1),Nt(t,Ee()),!(he&6)&&(ii=Ee()+500,Gr()))}break;case 13:Gs(function(){var a=dr(e,1);if(a!==null){var i=mt();vn(a,e,1,i)}}),Gg(e,1)}};bg=function(e){if(e.tag===13){var t=dr(e,134217728);if(t!==null){var r=mt();vn(t,e,134217728,r)}Gg(e,134217728)}};Wj=function(e){if(e.tag===13){var t=Vr(e),r=dr(e,t);if(r!==null){var a=mt();vn(r,e,t,a)}Gg(e,t)}};Mj=function(){return fe};$j=function(e,t){var r=fe;try{return fe=e,t()}finally{fe=r}};cx=function(e,t,r){switch(t){case"input":if(rx(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var a=r[t];if(a!==e&&a.form===e.form){var i=Qc(a);if(!i)throw Error(U(90));vj(a),rx(a,i)}}}break;case"textarea":jj(e,r);break;case"select":t=r.value,t!=null&&Ja(e,!!r.multiple,t,!1)}};Aj=Kg;Rj=Gs;var WA={usingClientEntryPoint:!1,Events:[rl,Ma,Qc,Nj,_j,Kg]},xo={findFiberByHostInstance:Ws,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},MA={bundleType:xo.bundleType,version:xo.version,rendererPackageName:xo.rendererPackageName,rendererConfig:xo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=zj(e),e===null?null:e.stateNode},findFiberByHostInstance:xo.findFiberByHostInstance||IA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Od=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Od.isDisabled&&Od.supportsFiber)try{Hc=Od.inject(MA),Tn=Od}catch{}}$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WA;$t.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ef(t))throw Error(U(200));return PA(e,t,null,r)};$t.createRoot=function(e,t){if(!ef(e))throw Error(U(299));var r=!1,a="",i=cw;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Xg(e,1,!1,null,null,r,!1,a,i),e[lr]=t.current,Uo(e.nodeType===8?e.parentNode:e),new Zg(t)};$t.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(U(188)):(e=Object.keys(e).join(","),Error(U(268,e)));return e=zj(t),e=e===null?null:e.stateNode,e};$t.flushSync=function(e){return Gs(e)};$t.hydrate=function(e,t,r){if(!ap(t))throw Error(U(200));return ip(null,e,t,!0,r)};$t.hydrateRoot=function(e,t,r){if(!ef(e))throw Error(U(405));var a=r!=null&&r.hydratedSources||null,i=!1,o="",d=cw;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(d=r.onRecoverableError)),t=dw(t,null,e,1,r??null,i,!1,o,d),e[lr]=t.current,Uo(e),a)for(e=0;e<a.length;e++)r=a[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new sp(t)};$t.render=function(e,t,r){if(!ap(t))throw Error(U(200));return ip(null,e,t,!1,r)};$t.unmountComponentAtNode=function(e){if(!ap(e))throw Error(U(40));return e._reactRootContainer?(Gs(function(){ip(null,null,e,!1,function(){e._reactRootContainer=null,e[lr]=null})}),!0):!1};$t.unstable_batchedUpdates=Kg;$t.unstable_renderSubtreeIntoContainer=function(e,t,r,a){if(!ap(r))throw Error(U(200));if(e==null||e._reactInternals===void 0)throw Error(U(38));return ip(e,t,r,!1,a)};$t.version="18.3.1-next-f1338f8080-20240426";function pw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pw)}catch(e){console.error(e)}}pw(),pj.exports=$t;var $A=pj.exports,eb=$A;Qh.createRoot=eb.createRoot,Qh.hydrateRoot=eb.hydrateRoot;function qA(){if(console&&console.warn){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];Hs(t[0])&&(t[0]=`react-i18next:: ${t[0]}`),console.warn(...t)}}const tb={};function qx(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];Hs(t[0])&&tb[t[0]]||(Hs(t[0])&&(tb[t[0]]=new Date),qA(...t))}const uw=(e,t)=>()=>{if(e.isInitialized)t();else{const r=()=>{setTimeout(()=>{e.off("initialized",r)},0),t()};e.on("initialized",r)}},nb=(e,t,r)=>{e.loadNamespaces(t,uw(e,r))},rb=(e,t,r,a)=>{Hs(r)&&(r=[r]),r.forEach(i=>{e.options.ns.indexOf(i)<0&&e.options.ns.push(i)}),e.loadLanguages(t,uw(e,a))},UA=function(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=t.languages[0],i=t.options?t.options.fallbackLng:!1,o=t.languages[t.languages.length-1];if(a.toLowerCase()==="cimode")return!0;const d=(u,h)=>{const m=t.services.backendConnector.state[`${u}|${h}`];return m===-1||m===2};return r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!d(t.isLanguageChangingTo,e)?!1:!!(t.hasResourceBundle(a,e)||!t.services.backendConnector.backend||t.options.resources&&!t.options.partialBundledLanguages||d(a,e)&&(!i||d(o,e)))},VA=function(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!t.languages||!t.languages.length?(qx("i18n.languages were undefined or empty",t.languages),!0):t.options.ignoreJSONStructure!==void 0?t.hasLoadedNamespace(e,{lng:r.lng,precheck:(i,o)=>{if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!o(i.isLanguageChangingTo,e))return!1}}):UA(e,t,r)},Hs=e=>typeof e=="string",HA=e=>typeof e=="object"&&e!==null,KA=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,JA={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},YA=e=>JA[e],QA=e=>e.replace(KA,YA);let Ux={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:QA};const XA=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ux={...Ux,...e}},GA=()=>Ux;let hw;const ZA=e=>{hw=e},e6=()=>hw,t6={type:"3rdParty",init(e){XA(e.options.react),ZA(e)}},n6=x.createContext();class r6{constructor(){V0(this,"getUsedNamespaces",()=>Object.keys(this.usedNamespaces));this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(r=>{this.usedNamespaces[r]||(this.usedNamespaces[r]=!0)})}}const s6=(e,t)=>{const r=x.useRef();return x.useEffect(()=>{r.current=e},[e,t]),r.current},xw=(e,t,r,a)=>e.getFixedT(t,r,a),a6=(e,t,r,a)=>x.useCallback(xw(e,t,r,a),[e,t,r,a]),i6=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:r}=t,{i18n:a,defaultNS:i}=x.useContext(n6)||{},o=r||a||e6();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new r6),!o){qx("You will need to pass in an i18next instance by using initReactI18next");const z=(M,W)=>Hs(W)?W:HA(W)&&Hs(W.defaultValue)?W.defaultValue:Array.isArray(M)?M[M.length-1]:M,I=[z,{},!1];return I.t=z,I.i18n={},I.ready=!1,I}o.options.react&&o.options.react.wait!==void 0&&qx("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const d={...GA(),...o.options.react,...t},{useSuspense:u,keyPrefix:h}=d;let m=i||o.options&&o.options.defaultNS;m=Hs(m)?[m]:m||["translation"],o.reportNamespaces.addUsedNamespaces&&o.reportNamespaces.addUsedNamespaces(m);const f=(o.isInitialized||o.initializedStoreOnce)&&m.every(z=>VA(z,o,d)),b=a6(o,t.lng||null,d.nsMode==="fallback"?m:m[0],h),v=()=>b,T=()=>xw(o,t.lng||null,d.nsMode==="fallback"?m:m[0],h),[N,R]=x.useState(v);let F=m.join();t.lng&&(F=`${t.lng}${F}`);const C=s6(F),j=x.useRef(!0);x.useEffect(()=>{const{bindI18n:z,bindI18nStore:I}=d;j.current=!0,!f&&!u&&(t.lng?rb(o,t.lng,m,()=>{j.current&&R(T)}):nb(o,m,()=>{j.current&&R(T)})),f&&C&&C!==F&&j.current&&R(T);const M=()=>{j.current&&R(T)};return z&&o&&o.on(z,M),I&&o&&o.store.on(I,M),()=>{j.current=!1,z&&o&&z.split(" ").forEach(W=>o.off(W,M)),I&&o&&I.split(" ").forEach(W=>o.store.off(W,M))}},[o,F]),x.useEffect(()=>{j.current&&f&&R(v)},[o,h,f]);const _=[N,o,f];if(_.t=N,_.i18n=o,_.ready=f,f||!f&&!u)return _;throw new Promise(z=>{t.lng?rb(o,t.lng,m,()=>z()):nb(o,m,()=>z())})};var oi=function(){return oi=Object.assign||function(t){for(var r,a=1,i=arguments.length;a<i;a++){r=arguments[a];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},oi.apply(this,arguments)},o6={2e3:{Baisakh:30,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:29,Chaitra:31},2001:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2002:{Baisakh:31,Jestha:31,Asar:32,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2003:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2004:{Baisakh:30,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:29,Chaitra:31},2005:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2006:{Baisakh:31,Jestha:31,Asar:32,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2007:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2008:{Baisakh:31,Jestha:31,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:29,Mangsir:30,Poush:30,Magh:29,Falgun:29,Chaitra:31},2009:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2010:{Baisakh:31,Jestha:31,Asar:32,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2011:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2012:{Baisakh:31,Jestha:31,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:29,Mangsir:30,Poush:30,Magh:29,Falgun:30,Chaitra:30},2013:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2014:{Baisakh:31,Jestha:31,Asar:32,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2015:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2016:{Baisakh:31,Jestha:31,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:29,Mangsir:30,Poush:30,Magh:29,Falgun:30,Chaitra:30},2017:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2018:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2019:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:29,Chaitra:31},2020:{Baisakh:31,Jestha:31,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2021:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2022:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:30},2023:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:29,Chaitra:31},2024:{Baisakh:31,Jestha:31,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2025:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2026:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2027:{Baisakh:30,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:29,Chaitra:31},2028:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2029:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:32,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2030:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2031:{Baisakh:30,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:29,Chaitra:31},2032:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2033:{Baisakh:31,Jestha:31,Asar:32,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2034:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2035:{Baisakh:30,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:29,Mangsir:30,Poush:30,Magh:29,Falgun:29,Chaitra:31},2036:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2037:{Baisakh:31,Jestha:31,Asar:32,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2038:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2039:{Baisakh:31,Jestha:31,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:29,Mangsir:30,Poush:30,Magh:29,Falgun:30,Chaitra:30},2040:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2041:{Baisakh:31,Jestha:31,Asar:32,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2042:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2043:{Baisakh:31,Jestha:31,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:29,Mangsir:30,Poush:30,Magh:29,Falgun:30,Chaitra:30},2044:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2045:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2046:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2047:{Baisakh:31,Jestha:31,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2048:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2049:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:30},2050:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:29,Chaitra:31},2051:{Baisakh:31,Jestha:31,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2052:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2053:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:30},2054:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:29,Chaitra:31},2055:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2056:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:32,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2057:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2058:{Baisakh:30,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:29,Chaitra:31},2059:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2060:{Baisakh:31,Jestha:31,Asar:32,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2061:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2062:{Baisakh:30,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:29,Mangsir:30,Poush:29,Magh:30,Falgun:29,Chaitra:31},2063:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2064:{Baisakh:31,Jestha:31,Asar:32,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2065:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2066:{Baisakh:31,Jestha:31,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:29,Mangsir:30,Poush:30,Magh:29,Falgun:29,Chaitra:31},2067:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2068:{Baisakh:31,Jestha:31,Asar:32,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2069:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2070:{Baisakh:31,Jestha:31,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:29,Mangsir:30,Poush:30,Magh:29,Falgun:30,Chaitra:30},2071:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2072:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2073:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2074:{Baisakh:31,Jestha:31,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2075:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2076:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:30},2077:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:29,Chaitra:31},2078:{Baisakh:31,Jestha:31,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2079:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2080:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:30},2081:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:29,Chaitra:31},2082:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2083:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2084:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2085:{Baisakh:30,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:29,Chaitra:31},2086:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2087:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:30,Chaitra:30},2088:{Baisakh:30,Jestha:31,Asar:32,Shrawan:32,Bhadra:30,Aswin:31,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:30,Chaitra:30},2089:{Baisakh:30,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:30,Chaitra:30},2090:{Baisakh:30,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:30,Chaitra:30}},Vx;(function(e){e.np="np",e.en="en"})(Vx||(Vx={}));var gw=Object.values(o6).map(function(e){return Object.values(e)}),Hx=gw.map(function(e){var t=0;return e.map(function(r){var a=[r,t];return t+=r,a})},[]),Kx=0,Ic=gw.map(function(e){var t=e.reduce(function(a,i){return a+i},0),r=[t,Kx];return Kx+=t,r}),Oc=33238;if(Kx!==Oc)throw new Error("Invalid constant initialization for Nepali Date.");var Jx=1;function l6(e){return e-fw}function d6(e){return e+fw}var fw=2e3,rr=1,sb=0;function c6(e,t){for(;t<0;)t+=e;return t%e}var ko={en:{day:{short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},month:{short:["Bai","Jes","Asa","Shr","Bhd","Asw","Kar","Man","Pou","Mag","Fal","Cha"],long:["Baisakh","Jestha","Asar","Shrawan","Bhadra","Aswin","Kartik","Mangsir","Poush","Magh","Falgun","Chaitra"]},date:["0","1","2","3","4","5","6","7","8","9"]},np:{day:{short:["","","","","","",""],long:["","","","","","",""]},month:{short:["","","","","","","","","","","",""],long:["","","","","","","","","","","",""]},date:["","","","","","","","","",""]}},Fh={year:1943,month:3,date:13};function p6(e,t,r){try{var a=l6(e),i=Ic[a][rr],o=c6(12,t),d=Math.floor(t/12),u=Ic[a+d][rr]-i+Hx[a+d][o][rr],h=i+u+r;if(h<Jx||h>Oc)throw new Error;return h}catch{throw new Error("The date doesn't fall within 2000/01/01 - 2090/12/30")}}function mw(e){if(e<Jx||e>Oc)throw new Error("The epoch difference is not within the boundaries ".concat(Jx," - ").concat(Oc));var t=Ic.findIndex(function(o){return e>o[rr]&&e<=o[rr]+o[sb]}),r=e-Ic[t][rr],a=Hx[t].findIndex(function(o){return r>o[rr]&&r<=o[rr]+o[sb]}),i=r-Hx[t][a][rr];return{year:d6(t),month:a,date:i}}function u6(e,t,r){var a=Math.abs(Date.UTC(e,t,r)-Date.UTC(Fh.year,Fh.month,Fh.date)),i=Math.ceil(a/(1e3*3600*24));return i}function yw(e){var t=new Date(Date.UTC(1943,3,13+e));return{year:t.getUTCFullYear(),month:t.getUTCMonth(),date:t.getUTCDate(),day:t.getUTCDay()}}function h6(e){try{var t=p6(e.year,e.month,e.date),r=mw(t),a=yw(t);return{AD:a,BS:oi(oi({},r),{day:a.day})}}catch{throw new Error("The date doesn't fall within 2000/01/01 - 2090/12/30")}}function x6(e){try{var t=u6(e.getFullYear(),e.getMonth(),e.getDate()),r=mw(t),a=yw(t);return{AD:a,BS:oi(oi({},r),{day:a.day})}}catch{throw new Error("The date doesn't fall within 2000/01/01 - 2090/12/30")}}function Tr(e,t){return e.split("").map(function(r){return ko[t].date[parseInt(r,10)]}).join("")}function g6(e,t,r){return t.replace(/((\\[MDYd])|D{1,2}|M{1,4}|Y{2,4}|d{1,3})/g,function(a,i,o){var d;switch(a){case"D":return Tr(e.date.toString(),r);case"DD":return Tr(e.date.toString().padStart(2,"0"),r);case"M":return Tr((e.month+1).toString(),r);case"MM":return Tr((e.month+1).toString().padStart(2,"0"),r);case"MMM":return ko[r].month.short[e.month];case"MMMM":return ko[r].month.long[e.month];case"YY":return Tr(e.year.toString().slice(-2),r);case"YYY":return Tr(e.year.toString().slice(-3),r);case"YYYY":return Tr(e.year.toString(),r);case"d":return Tr(((d=e.day)===null||d===void 0?void 0:d.toString())||"0",r);case"dd":return ko[r].day.short[e.day||0];case"ddd":return ko[r].day.long[e.day||0];default:return o.replace("/","")}}).replace(/\\/g,"")}function ab(e){var t=/(\d{4})\s*([/-]|\s+)\s*(\d{1,2})\s*([/-]|\s+)\s*(\d{1,2})/,r=/(\d{1,2})\s*([/-]|\s+)\s*(\d{1,2})\s*([/-]|\s+)\s*(\d{4})/,a;if(a=e.match(t),a!==null)return{year:parseInt(a[1],10),month:parseInt(a[3],10)-1,date:parseInt(a[5],10)};if(a=e.match(r),a!==null)return{year:parseInt(a[5],10),month:parseInt(a[3],10)-1,date:parseInt(a[1],10)};throw new Error("Invalid date format")}var Es=Symbol("Date"),Dh=Symbol("Day"),Fs=Symbol("Year"),Ds=Symbol("MonthIndex"),Ps=Symbol("JsDate"),Wd=Symbol("convertToBS()"),za=Symbol("convertToAD()"),Ph=Symbol("setADBS()"),Md=Symbol("setDayYearMonth()"),ib=function(){function e(){var t=new Error("Invalid constructor arguments");if(arguments.length===0)this[Wd](new Date);else if(arguments.length===1){var r=arguments[0];switch(typeof r){case"number":this[Wd](new Date(r));break;case"string":var a=ab(r),i=a.date,o=a.year,d=a.month;this[Md](o,d,i),this[za]();break;case"object":if(r instanceof Date)this[Wd](r);else throw t;break;default:throw t}}else if(arguments.length<=3)this[Md](arguments[0],arguments[1],arguments[2]),this[za]();else throw t}return e.prototype[Md]=function(t,r,a,i){r===void 0&&(r=0),a===void 0&&(a=1),i===void 0&&(i=0),this[Fs]=t,this[Ds]=r,this[Es]=a,this[Dh]=i},e.prototype.toJsDate=function(){return this[Ps]},e.prototype.getDate=function(){return this[Es]},e.prototype.getYear=function(){return this[Fs]},e.prototype.getDay=function(){return this[Dh]},e.prototype.getMonth=function(){return this[Ds]},e.prototype.getDateObject=function(){return{BS:this.getBS(),AD:this.getAD()}},e.prototype.getBS=function(){return{year:this[Fs],month:this[Ds],date:this[Es],day:this[Dh]}},e.prototype.getAD=function(){return{year:this[Ps].getFullYear(),month:this[Ps].getMonth(),date:this[Ps].getDate(),day:this[Ps].getDay()}},e.prototype.setDate=function(t){var r=this[Es];try{this[Es]=t,this[za]()}catch(a){throw this[Es]=r,a}},e.prototype.setMonth=function(t){var r=this[Ds];try{this[Ds]=t,this[za]()}catch(a){throw this[Ds]=r,a}},e.prototype.setYear=function(t){var r=this[Fs];try{this[Fs]=t,this[za]()}catch(a){throw this[Fs]=r,a}},e.prototype.format=function(t,r){return r===void 0&&(r=e.language),g6(this.getBS(),t,r)},e.parse=function(t){var r=ab(t),a=r.date,i=r.year,o=r.month;return new e(i,o,a)},e.now=function(){return new e},e.fromAD=function(t){return new e(t)},e.prototype[Wd]=function(t){var r=x6(t),a=r.AD,i=r.BS;this[Ph](a,i)},e.prototype[Ph]=function(t,r){this[Md](r.year,r.month,r.date,r.day),this[Ps]=new Date(t.year,t.month,t.date)},e.prototype[za]=function(){var t=h6({year:this[Fs],month:this[Ds],date:this[Es]}),r=t.AD,a=t.BS;this[Ph](r,a)},e.prototype.valueOf=function(){return this[Ps].getTime()},e.prototype.toString=function(){return this.format("ddd DD, MMMM YYYY")},e.language=Vx.en,e}();const En=Object.create(null);En.open="0";En.close="1";En.ping="2";En.pong="3";En.message="4";En.upgrade="5";En.noop="6";const oc=Object.create(null);Object.keys(En).forEach(e=>{oc[En[e]]=e});const Yx={type:"error",data:"parser error"},vw=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",bw=typeof ArrayBuffer=="function",jw=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,tf=({type:e,data:t},r,a)=>vw&&t instanceof Blob?r?a(t):ob(t,a):bw&&(t instanceof ArrayBuffer||jw(t))?r?a(t):ob(new Blob([t]),a):a(En[e]+(t||"")),ob=(e,t)=>{const r=new FileReader;return r.onload=function(){const a=r.result.split(",")[1];t("b"+(a||""))},r.readAsDataURL(e)};function lb(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Ih;function f6(e,t){if(vw&&e.data instanceof Blob)return e.data.arrayBuffer().then(lb).then(t);if(bw&&(e.data instanceof ArrayBuffer||jw(e.data)))return t(lb(e.data));tf(e,!1,r=>{Ih||(Ih=new TextEncoder),t(Ih.encode(r))})}const db="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Co=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<db.length;e++)Co[db.charCodeAt(e)]=e;const m6=e=>{let t=e.length*.75,r=e.length,a,i=0,o,d,u,h;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const m=new ArrayBuffer(t),f=new Uint8Array(m);for(a=0;a<r;a+=4)o=Co[e.charCodeAt(a)],d=Co[e.charCodeAt(a+1)],u=Co[e.charCodeAt(a+2)],h=Co[e.charCodeAt(a+3)],f[i++]=o<<2|d>>4,f[i++]=(d&15)<<4|u>>2,f[i++]=(u&3)<<6|h&63;return m},y6=typeof ArrayBuffer=="function",nf=(e,t)=>{if(typeof e!="string")return{type:"message",data:Sw(e,t)};const r=e.charAt(0);return r==="b"?{type:"message",data:v6(e.substring(1),t)}:oc[r]?e.length>1?{type:oc[r],data:e.substring(1)}:{type:oc[r]}:Yx},v6=(e,t)=>{if(y6){const r=m6(e);return Sw(r,t)}else return{base64:!0,data:e}},Sw=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},ww="",b6=(e,t)=>{const r=e.length,a=new Array(r);let i=0;e.forEach((o,d)=>{tf(o,!1,u=>{a[d]=u,++i===r&&t(a.join(ww))})})},j6=(e,t)=>{const r=e.split(ww),a=[];for(let i=0;i<r.length;i++){const o=nf(r[i],t);if(a.push(o),o.type==="error")break}return a};function S6(){return new TransformStream({transform(e,t){f6(e,r=>{const a=r.length;let i;if(a<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,a);else if(a<65536){i=new Uint8Array(3);const o=new DataView(i.buffer);o.setUint8(0,126),o.setUint16(1,a)}else{i=new Uint8Array(9);const o=new DataView(i.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(a))}e.data&&typeof e.data!="string"&&(i[0]|=128),t.enqueue(i),t.enqueue(r)})}})}let Oh;function $d(e){return e.reduce((t,r)=>t+r.length,0)}function qd(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let a=0;for(let i=0;i<t;i++)r[i]=e[0][a++],a===e[0].length&&(e.shift(),a=0);return e.length&&a<e[0].length&&(e[0]=e[0].slice(a)),r}function w6(e,t){Oh||(Oh=new TextDecoder);const r=[];let a=0,i=-1,o=!1;return new TransformStream({transform(d,u){for(r.push(d);;){if(a===0){if($d(r)<1)break;const h=qd(r,1);o=(h[0]&128)===128,i=h[0]&127,i<126?a=3:i===126?a=1:a=2}else if(a===1){if($d(r)<2)break;const h=qd(r,2);i=new DataView(h.buffer,h.byteOffset,h.length).getUint16(0),a=3}else if(a===2){if($d(r)<8)break;const h=qd(r,8),m=new DataView(h.buffer,h.byteOffset,h.length),f=m.getUint32(0);if(f>Math.pow(2,21)-1){u.enqueue(Yx);break}i=f*Math.pow(2,32)+m.getUint32(4),a=3}else{if($d(r)<i)break;const h=qd(r,i);u.enqueue(nf(o?h:Oh.decode(h),t)),a=0}if(i===0||i>e){u.enqueue(Yx);break}}}})}const kw=4;function We(e){if(e)return k6(e)}function k6(e){for(var t in We.prototype)e[t]=We.prototype[t];return e}We.prototype.on=We.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};We.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};We.prototype.off=We.prototype.removeListener=We.prototype.removeAllListeners=We.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var a,i=0;i<r.length;i++)if(a=r[i],a===t||a.fn===t){r.splice(i,1);break}return r.length===0&&delete this._callbacks["$"+e],this};We.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],a=1;a<arguments.length;a++)t[a-1]=arguments[a];if(r){r=r.slice(0);for(var a=0,i=r.length;a<i;++a)r[a].apply(this,t)}return this};We.prototype.emitReserved=We.prototype.emit;We.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};We.prototype.hasListeners=function(e){return!!this.listeners(e).length};const op=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),en=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),C6="arraybuffer";function Cw(e,...t){return t.reduce((r,a)=>(e.hasOwnProperty(a)&&(r[a]=e[a]),r),{})}const N6=en.setTimeout,_6=en.clearTimeout;function lp(e,t){t.useNativeTimers?(e.setTimeoutFn=N6.bind(en),e.clearTimeoutFn=_6.bind(en)):(e.setTimeoutFn=en.setTimeout.bind(en),e.clearTimeoutFn=en.clearTimeout.bind(en))}const A6=1.33;function R6(e){return typeof e=="string"?B6(e):Math.ceil((e.byteLength||e.size)*A6)}function B6(e){let t=0,r=0;for(let a=0,i=e.length;a<i;a++)t=e.charCodeAt(a),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(a++,r+=4);return r}function Nw(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function T6(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function z6(e){let t={},r=e.split("&");for(let a=0,i=r.length;a<i;a++){let o=r[a].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}class L6 extends Error{constructor(t,r,a){super(t),this.description=r,this.context=a,this.type="TransportError"}}class rf extends We{constructor(t){super(),this.writable=!1,lp(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,a){return super.emitReserved("error",new L6(t,r,a)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=nf(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=T6(t);return r.length?"?"+r:""}}class E6 extends rf{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let a=0;this._polling&&(a++,this.once("pollComplete",function(){--a||r()})),this.writable||(a++,this.once("drain",function(){--a||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=a=>{if(this.readyState==="opening"&&a.type==="open"&&this.onOpen(),a.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(a)};j6(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,b6(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=Nw()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let _w=!1;try{_w=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const F6=_w;function D6(){}class P6 extends E6{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let a=location.port;a||(a=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||a!==t.port}}doWrite(t,r){const a=this.request({method:"POST",data:t});a.on("success",r),a.on("error",(i,o)=>{this.onError("xhr post error",i,o)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,a)=>{this.onError("xhr poll error",r,a)}),this.pollXhr=t}}class Ln extends We{constructor(t,r,a){super(),this.createRequest=t,lp(this,a),this._opts=a,this._method=a.method||"GET",this._uri=r,this._data=a.data!==void 0?a.data:null,this._create()}_create(){var t;const r=Cw(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const a=this._xhr=this.createRequest(r);try{a.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){a.setDisableHeaderCheck&&a.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&a.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{a.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{a.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(a),"withCredentials"in a&&(a.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(a.timeout=this._opts.requestTimeout),a.onreadystatechange=()=>{var i;a.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(a.getResponseHeader("set-cookie"))),a.readyState===4&&(a.status===200||a.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof a.status=="number"?a.status:0)},0))},a.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=Ln.requestsCount++,Ln.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=D6,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Ln.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Ln.requestsCount=0;Ln.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",cb);else if(typeof addEventListener=="function"){const e="onpagehide"in en?"pagehide":"unload";addEventListener(e,cb,!1)}}function cb(){for(let e in Ln.requests)Ln.requests.hasOwnProperty(e)&&Ln.requests[e].abort()}const I6=function(){const e=Aw({xdomain:!1});return e&&e.responseType!==null}();class O6 extends P6{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=I6&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Ln(Aw,this.uri(),t)}}function Aw(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||F6))return new XMLHttpRequest}catch{}if(!t)try{return new en[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Rw=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class W6 extends rf{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,a=Rw?{}:Cw(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(a.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,a)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const a=t[r],i=r===t.length-1;tf(a,this.supportsBinary,o=>{try{this.doWrite(a,o)}catch{}i&&op(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=Nw()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const Wh=en.WebSocket||en.MozWebSocket;class M6 extends W6{createSocket(t,r,a){return Rw?new Wh(t,r,a):r?new Wh(t,r):new Wh(t)}doWrite(t,r){this.ws.send(r)}}class $6 extends rf{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=w6(Number.MAX_SAFE_INTEGER,this.socket.binaryType),a=t.readable.pipeThrough(r).getReader(),i=S6();i.readable.pipeTo(t.writable),this._writer=i.writable.getWriter();const o=()=>{a.read().then(({done:u,value:h})=>{u||(this.onPacket(h),o())}).catch(u=>{})};o();const d={type:"open"};this.query.sid&&(d.data=`{"sid":"${this.query.sid}"}`),this._writer.write(d).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const a=t[r],i=r===t.length-1;this._writer.write(a).then(()=>{i&&op(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const q6={websocket:M6,webtransport:$6,polling:O6},U6=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,V6=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Qx(e){if(e.length>8e3)throw"URI too long";const t=e,r=e.indexOf("["),a=e.indexOf("]");r!=-1&&a!=-1&&(e=e.substring(0,r)+e.substring(r,a).replace(/:/g,";")+e.substring(a,e.length));let i=U6.exec(e||""),o={},d=14;for(;d--;)o[V6[d]]=i[d]||"";return r!=-1&&a!=-1&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=H6(o,o.path),o.queryKey=K6(o,o.query),o}function H6(e,t){const r=/\/{2,9}/g,a=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&a.splice(0,1),t.slice(-1)=="/"&&a.splice(a.length-1,1),a}function K6(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(a,i,o){i&&(r[i]=o)}),r}const Xx=typeof addEventListener=="function"&&typeof removeEventListener=="function",lc=[];Xx&&addEventListener("offline",()=>{lc.forEach(e=>e())},!1);class Kr extends We{constructor(t,r){if(super(),this.binaryType=C6,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const a=Qx(t);r.hostname=a.host,r.secure=a.protocol==="https"||a.protocol==="wss",r.port=a.port,a.query&&(r.query=a.query)}else r.host&&(r.hostname=Qx(r.host).host);lp(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(a=>{const i=a.prototype.name;this.transports.push(i),this._transportsByName[i]=a}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=z6(this.opts.query)),Xx&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},lc.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=kw,r.transport=t,this.id&&(r.sid=this.id);const a=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](a)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Kr.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",Kr.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let a=0;a<this.writeBuffer.length;a++){const i=this.writeBuffer[a].data;if(i&&(r+=R6(i)),a>0&&r>this._maxPayload)return this.writeBuffer.slice(0,a);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,op(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,a){return this._sendPacket("message",t,r,a),this}send(t,r,a){return this._sendPacket("message",t,r,a),this}_sendPacket(t,r,a,i){if(typeof r=="function"&&(i=r,r=void 0),typeof a=="function"&&(i=a,a=null),this.readyState==="closing"||this.readyState==="closed")return;a=a||{},a.compress=a.compress!==!1;const o={type:t,data:r,options:a};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},a=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?a():t()}):this.upgrading?a():t()),this}_onError(t){if(Kr.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Xx&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const a=lc.indexOf(this._offlineEventListener);a!==-1&&lc.splice(a,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}Kr.protocol=kw;class J6 extends Kr{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),a=!1;Kr.priorWebsocketSuccess=!1;const i=()=>{a||(r.send([{type:"ping",data:"probe"}]),r.once("packet",b=>{if(!a)if(b.type==="pong"&&b.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Kr.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{a||this.readyState!=="closed"&&(f(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const v=new Error("probe error");v.transport=r.name,this.emitReserved("upgradeError",v)}}))};function o(){a||(a=!0,f(),r.close(),r=null)}const d=b=>{const v=new Error("probe error: "+b);v.transport=r.name,o(),this.emitReserved("upgradeError",v)};function u(){d("transport closed")}function h(){d("socket closed")}function m(b){r&&b.name!==r.name&&o()}const f=()=>{r.removeListener("open",i),r.removeListener("error",d),r.removeListener("close",u),this.off("close",h),this.off("upgrading",m)};r.once("open",i),r.once("error",d),r.once("close",u),this.once("close",h),this.once("upgrading",m),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{a||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let a=0;a<t.length;a++)~this.transports.indexOf(t[a])&&r.push(t[a]);return r}}let Y6=class extends J6{constructor(t,r={}){const a=typeof t=="object"?t:r;(!a.transports||a.transports&&typeof a.transports[0]=="string")&&(a.transports=(a.transports||["polling","websocket","webtransport"]).map(i=>q6[i]).filter(i=>!!i)),super(t,a)}};function Q6(e,t="",r){let a=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),a=Qx(e)),a.port||(/^(http|ws)$/.test(a.protocol)?a.port="80":/^(http|ws)s$/.test(a.protocol)&&(a.port="443")),a.path=a.path||"/";const o=a.host.indexOf(":")!==-1?"["+a.host+"]":a.host;return a.id=a.protocol+"://"+o+":"+a.port+t,a.href=a.protocol+"://"+o+(r&&r.port===a.port?"":":"+a.port),a}const X6=typeof ArrayBuffer=="function",G6=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,Bw=Object.prototype.toString,Z6=typeof Blob=="function"||typeof Blob<"u"&&Bw.call(Blob)==="[object BlobConstructor]",eR=typeof File=="function"||typeof File<"u"&&Bw.call(File)==="[object FileConstructor]";function sf(e){return X6&&(e instanceof ArrayBuffer||G6(e))||Z6&&e instanceof Blob||eR&&e instanceof File}function dc(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,a=e.length;r<a;r++)if(dc(e[r]))return!0;return!1}if(sf(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return dc(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&dc(e[r]))return!0;return!1}function tR(e){const t=[],r=e.data,a=e;return a.data=Gx(r,t),a.attachments=t.length,{packet:a,buffers:t}}function Gx(e,t){if(!e)return e;if(sf(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let a=0;a<e.length;a++)r[a]=Gx(e[a],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=Gx(e[a],t));return r}return e}function nR(e,t){return e.data=Zx(e.data,t),delete e.attachments,e}function Zx(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=Zx(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=Zx(e[r],t));return e}const rR=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];var ue;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(ue||(ue={}));class sR{constructor(t){this.replacer=t}encode(t){return(t.type===ue.EVENT||t.type===ue.ACK)&&dc(t)?this.encodeAsBinary({type:t.type===ue.EVENT?ue.BINARY_EVENT:ue.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===ue.BINARY_EVENT||t.type===ue.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=tR(t),a=this.encodeAsString(r.packet),i=r.buffers;return i.unshift(a),i}}class af extends We{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const a=r.type===ue.BINARY_EVENT;a||r.type===ue.BINARY_ACK?(r.type=a?ue.EVENT:ue.ACK,this.reconstructor=new aR(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(sf(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const a={type:Number(t.charAt(0))};if(ue[a.type]===void 0)throw new Error("unknown packet type "+a.type);if(a.type===ue.BINARY_EVENT||a.type===ue.BINARY_ACK){const o=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const d=t.substring(o,r);if(d!=Number(d)||t.charAt(r)!=="-")throw new Error("Illegal attachments");a.attachments=Number(d)}if(t.charAt(r+1)==="/"){const o=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););a.nsp=t.substring(o,r)}else a.nsp="/";const i=t.charAt(r+1);if(i!==""&&Number(i)==i){const o=r+1;for(;++r;){const d=t.charAt(r);if(d==null||Number(d)!=d){--r;break}if(r===t.length)break}a.id=Number(t.substring(o,r+1))}if(t.charAt(++r)){const o=this.tryParse(t.substr(r));if(af.isPayloadValid(a.type,o))a.data=o;else throw new Error("invalid payload")}return a}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case ue.CONNECT:return pb(r);case ue.DISCONNECT:return r===void 0;case ue.CONNECT_ERROR:return typeof r=="string"||pb(r);case ue.EVENT:case ue.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&rR.indexOf(r[0])===-1);case ue.ACK:case ue.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class aR{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=nR(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function pb(e){return Object.prototype.toString.call(e)==="[object Object]"}const iR=Object.freeze(Object.defineProperty({__proto__:null,Decoder:af,Encoder:sR,get PacketType(){return ue}},Symbol.toStringTag,{value:"Module"}));function fn(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const oR=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Tw extends We{constructor(t,r,a){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,a&&a.auth&&(this.auth=a.auth),this._opts=Object.assign({},a),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[fn(t,"open",this.onopen.bind(this)),fn(t,"packet",this.onpacket.bind(this)),fn(t,"error",this.onerror.bind(this)),fn(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var a,i,o;if(oR.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const d={type:ue.EVENT,data:r};if(d.options={},d.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const f=this.ids++,b=r.pop();this._registerAckCallback(f,b),d.id=f}const u=(i=(a=this.io.engine)===null||a===void 0?void 0:a.transport)===null||i===void 0?void 0:i.writable,h=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!u||(h?(this.notifyOutgoingListeners(d),this.packet(d)):this.sendBuffer.push(d)),this.flags={},this}_registerAckCallback(t,r){var a;const i=(a=this.flags.timeout)!==null&&a!==void 0?a:this._opts.ackTimeout;if(i===void 0){this.acks[t]=r;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let u=0;u<this.sendBuffer.length;u++)this.sendBuffer[u].id===t&&this.sendBuffer.splice(u,1);r.call(this,new Error("operation has timed out"))},i),d=(...u)=>{this.io.clearTimeoutFn(o),r.apply(this,u)};d.withError=!0,this.acks[t]=d}emitWithAck(t,...r){return new Promise((a,i)=>{const o=(d,u)=>d?i(d):a(u);o.withError=!0,r.push(o),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const a={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((i,...o)=>(this._queue[0],i!==null?a.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(i)):(this._queue.shift(),r&&r(null,...o)),a.pending=!1,this._drainQueue())),this._queue.push(a),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:ue.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(a=>String(a.id)===t)){const a=this.acks[t];delete this.acks[t],a.withError&&a.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case ue.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case ue.EVENT:case ue.BINARY_EVENT:this.onevent(t);break;case ue.ACK:case ue.BINARY_ACK:this.onack(t);break;case ue.DISCONNECT:this.ondisconnect();break;case ue.CONNECT_ERROR:this.destroy();const a=new Error(t.data.message);a.data=t.data.data,this.emitReserved("connect_error",a);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const a of r)a.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let a=!1;return function(...i){a||(a=!0,r.packet({type:ue.ACK,id:t,data:i}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:ue.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let a=0;a<r.length;a++)if(t===r[a])return r.splice(a,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let a=0;a<r.length;a++)if(t===r[a])return r.splice(a,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const a of r)a.apply(this,t.data)}}}function ui(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}ui.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};ui.prototype.reset=function(){this.attempts=0};ui.prototype.setMin=function(e){this.ms=e};ui.prototype.setMax=function(e){this.max=e};ui.prototype.setJitter=function(e){this.jitter=e};class eg extends We{constructor(t,r){var a;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,lp(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((a=r.randomizationFactor)!==null&&a!==void 0?a:.5),this.backoff=new ui({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const i=r.parser||iR;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new Y6(this.uri,this.opts);const r=this.engine,a=this;this._readyState="opening",this.skipReconnect=!1;const i=fn(r,"open",function(){a.onopen(),t&&t()}),o=u=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",u),t?t(u):this.maybeReconnectOnOpen()},d=fn(r,"error",o);if(this._timeout!==!1){const u=this._timeout,h=this.setTimeoutFn(()=>{i(),o(new Error("timeout")),r.close()},u);this.opts.autoUnref&&h.unref(),this.subs.push(()=>{this.clearTimeoutFn(h)})}return this.subs.push(i),this.subs.push(d),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(fn(t,"ping",this.onping.bind(this)),fn(t,"data",this.ondata.bind(this)),fn(t,"error",this.onerror.bind(this)),fn(t,"close",this.onclose.bind(this)),fn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){op(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let a=this.nsps[t];return a?this._autoConnect&&!a.active&&a.connect():(a=new Tw(this,t,r),this.nsps[t]=a),a}_destroy(t){const r=Object.keys(this.nsps);for(const a of r)if(this.nsps[a].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let a=0;a<r.length;a++)this.engine.write(r[a],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var a;this.cleanup(),(a=this.engine)===null||a===void 0||a.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const a=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},r);this.opts.autoUnref&&a.unref(),this.subs.push(()=>{this.clearTimeoutFn(a)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const go={};function cc(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=Q6(e,t.path||"/socket.io"),a=r.source,i=r.id,o=r.path,d=go[i]&&o in go[i].nsps,u=t.forceNew||t["force new connection"]||t.multiplex===!1||d;let h;return u?h=new eg(a,t):(go[i]||(go[i]=new eg(a,t)),h=go[i]),r.query&&!t.query&&(t.query=r.queryKey),h.socket(r.path,t)}Object.assign(cc,{Manager:eg,Socket:Tw,io:cc,connect:cc});const jt=cc({autoConnect:!0,reconnection:!0,reconnectionAttempts:1/0,reconnectionDelay:1e3});jt.on("connect",()=>{console.log("Socket connected:",jt.id)});jt.on("disconnect",()=>{console.log("Socket disconnected")});jt.on("connect_error",e=>{console.error("Socket connection error:",e)});function zw(e,t){return function(){return e.apply(t,arguments)}}const{toString:lR}=Object.prototype,{getPrototypeOf:of}=Object,{iterator:dp,toStringTag:Lw}=Symbol,cp=(e=>t=>{const r=lR.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),jn=e=>(e=e.toLowerCase(),t=>cp(t)===e),pp=e=>t=>typeof t===e,{isArray:hi}=Array,li=pp("undefined");function al(e){return e!==null&&!li(e)&&e.constructor!==null&&!li(e.constructor)&&_t(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Ew=jn("ArrayBuffer");function dR(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Ew(e.buffer),t}const cR=pp("string"),_t=pp("function"),Fw=pp("number"),il=e=>e!==null&&typeof e=="object",pR=e=>e===!0||e===!1,pc=e=>{if(cp(e)!=="object")return!1;const t=of(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Lw in e)&&!(dp in e)},uR=e=>{if(!il(e)||al(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},hR=jn("Date"),xR=jn("File"),gR=jn("Blob"),fR=jn("FileList"),mR=e=>il(e)&&_t(e.pipe),yR=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||_t(e.append)&&((t=cp(e))==="formdata"||t==="object"&&_t(e.toString)&&e.toString()==="[object FormData]"))},vR=jn("URLSearchParams"),[bR,jR,SR,wR]=["ReadableStream","Request","Response","Headers"].map(jn),kR=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ol(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let a,i;if(typeof e!="object"&&(e=[e]),hi(e))for(a=0,i=e.length;a<i;a++)t.call(null,e[a],a,e);else{if(al(e))return;const o=r?Object.getOwnPropertyNames(e):Object.keys(e),d=o.length;let u;for(a=0;a<d;a++)u=o[a],t.call(null,e[u],u,e)}}function Dw(e,t){if(al(e))return null;t=t.toLowerCase();const r=Object.keys(e);let a=r.length,i;for(;a-- >0;)if(i=r[a],t===i.toLowerCase())return i;return null}const qs=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Pw=e=>!li(e)&&e!==qs;function tg(){const{caseless:e,skipUndefined:t}=Pw(this)&&this||{},r={},a=(i,o)=>{const d=e&&Dw(r,o)||o;pc(r[d])&&pc(i)?r[d]=tg(r[d],i):pc(i)?r[d]=tg({},i):hi(i)?r[d]=i.slice():(!t||!li(i))&&(r[d]=i)};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&ol(arguments[i],a);return r}const CR=(e,t,r,{allOwnKeys:a}={})=>(ol(t,(i,o)=>{r&&_t(i)?Object.defineProperty(e,o,{value:zw(i,r),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(e,o,{value:i,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:a}),e),NR=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),_R=(e,t,r,a)=>{e.prototype=Object.create(t.prototype,a),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},AR=(e,t,r,a)=>{let i,o,d;const u={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)d=i[o],(!a||a(d,e,t))&&!u[d]&&(t[d]=e[d],u[d]=!0);e=r!==!1&&of(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},RR=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const a=e.indexOf(t,r);return a!==-1&&a===r},BR=e=>{if(!e)return null;if(hi(e))return e;let t=e.length;if(!Fw(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},TR=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&of(Uint8Array)),zR=(e,t)=>{const a=(e&&e[dp]).call(e);let i;for(;(i=a.next())&&!i.done;){const o=i.value;t.call(e,o[0],o[1])}},LR=(e,t)=>{let r;const a=[];for(;(r=e.exec(t))!==null;)a.push(r);return a},ER=jn("HTMLFormElement"),FR=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,a,i){return a.toUpperCase()+i}),ub=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),DR=jn("RegExp"),Iw=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),a={};ol(r,(i,o)=>{let d;(d=t(i,o,e))!==!1&&(a[o]=d||i)}),Object.defineProperties(e,a)},PR=e=>{Iw(e,(t,r)=>{if(_t(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const a=e[r];if(_t(a)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},IR=(e,t)=>{const r={},a=i=>{i.forEach(o=>{r[o]=!0})};return hi(e)?a(e):a(String(e).split(t)),r},OR=()=>{},WR=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function MR(e){return!!(e&&_t(e.append)&&e[Lw]==="FormData"&&e[dp])}const $R=e=>{const t=new Array(10),r=(a,i)=>{if(il(a)){if(t.indexOf(a)>=0)return;if(al(a))return a;if(!("toJSON"in a)){t[i]=a;const o=hi(a)?[]:{};return ol(a,(d,u)=>{const h=r(d,i+1);!li(h)&&(o[u]=h)}),t[i]=void 0,o}}return a};return r(e,0)},qR=jn("AsyncFunction"),UR=e=>e&&(il(e)||_t(e))&&_t(e.then)&&_t(e.catch),Ow=((e,t)=>e?setImmediate:t?((r,a)=>(qs.addEventListener("message",({source:i,data:o})=>{i===qs&&o===r&&a.length&&a.shift()()},!1),i=>{a.push(i),qs.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",_t(qs.postMessage)),VR=typeof queueMicrotask<"u"?queueMicrotask.bind(qs):typeof process<"u"&&process.nextTick||Ow,HR=e=>e!=null&&_t(e[dp]),L={isArray:hi,isArrayBuffer:Ew,isBuffer:al,isFormData:yR,isArrayBufferView:dR,isString:cR,isNumber:Fw,isBoolean:pR,isObject:il,isPlainObject:pc,isEmptyObject:uR,isReadableStream:bR,isRequest:jR,isResponse:SR,isHeaders:wR,isUndefined:li,isDate:hR,isFile:xR,isBlob:gR,isRegExp:DR,isFunction:_t,isStream:mR,isURLSearchParams:vR,isTypedArray:TR,isFileList:fR,forEach:ol,merge:tg,extend:CR,trim:kR,stripBOM:NR,inherits:_R,toFlatObject:AR,kindOf:cp,kindOfTest:jn,endsWith:RR,toArray:BR,forEachEntry:zR,matchAll:LR,isHTMLForm:ER,hasOwnProperty:ub,hasOwnProp:ub,reduceDescriptors:Iw,freezeMethods:PR,toObjectSet:IR,toCamelCase:FR,noop:OR,toFiniteNumber:WR,findKey:Dw,global:qs,isContextDefined:Pw,isSpecCompliantForm:MR,toJSONObject:$R,isAsyncFn:qR,isThenable:UR,setImmediate:Ow,asap:VR,isIterable:HR};let ee=class Ww extends Error{static from(t,r,a,i,o,d){const u=new Ww(t.message,r||t.code,a,i,o);return u.cause=t,u.name=t.name,d&&Object.assign(u,d),u}constructor(t,r,a,i,o){super(t),this.name="AxiosError",this.isAxiosError=!0,r&&(this.code=r),a&&(this.config=a),i&&(this.request=i),o&&(this.response=o,this.status=o.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:L.toJSONObject(this.config),code:this.code,status:this.status}}};ee.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";ee.ERR_BAD_OPTION="ERR_BAD_OPTION";ee.ECONNABORTED="ECONNABORTED";ee.ETIMEDOUT="ETIMEDOUT";ee.ERR_NETWORK="ERR_NETWORK";ee.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";ee.ERR_DEPRECATED="ERR_DEPRECATED";ee.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";ee.ERR_BAD_REQUEST="ERR_BAD_REQUEST";ee.ERR_CANCELED="ERR_CANCELED";ee.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";ee.ERR_INVALID_URL="ERR_INVALID_URL";const KR=null;function ng(e){return L.isPlainObject(e)||L.isArray(e)}function Mw(e){return L.endsWith(e,"[]")?e.slice(0,-2):e}function hb(e,t,r){return e?e.concat(t).map(function(i,o){return i=Mw(i),!r&&o?"["+i+"]":i}).join(r?".":""):t}function JR(e){return L.isArray(e)&&!e.some(ng)}const YR=L.toFlatObject(L,{},null,function(t){return/^is[A-Z]/.test(t)});function up(e,t,r){if(!L.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=L.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(R,F){return!L.isUndefined(F[R])});const a=r.metaTokens,i=r.visitor||f,o=r.dots,d=r.indexes,h=(r.Blob||typeof Blob<"u"&&Blob)&&L.isSpecCompliantForm(t);if(!L.isFunction(i))throw new TypeError("visitor must be a function");function m(N){if(N===null)return"";if(L.isDate(N))return N.toISOString();if(L.isBoolean(N))return N.toString();if(!h&&L.isBlob(N))throw new ee("Blob is not supported. Use a Buffer instead.");return L.isArrayBuffer(N)||L.isTypedArray(N)?h&&typeof Blob=="function"?new Blob([N]):Buffer.from(N):N}function f(N,R,F){let C=N;if(N&&!F&&typeof N=="object"){if(L.endsWith(R,"{}"))R=a?R:R.slice(0,-2),N=JSON.stringify(N);else if(L.isArray(N)&&JR(N)||(L.isFileList(N)||L.endsWith(R,"[]"))&&(C=L.toArray(N)))return R=Mw(R),C.forEach(function(_,z){!(L.isUndefined(_)||_===null)&&t.append(d===!0?hb([R],z,o):d===null?R:R+"[]",m(_))}),!1}return ng(N)?!0:(t.append(hb(F,R,o),m(N)),!1)}const b=[],v=Object.assign(YR,{defaultVisitor:f,convertValue:m,isVisitable:ng});function T(N,R){if(!L.isUndefined(N)){if(b.indexOf(N)!==-1)throw Error("Circular reference detected in "+R.join("."));b.push(N),L.forEach(N,function(C,j){(!(L.isUndefined(C)||C===null)&&i.call(t,C,L.isString(j)?j.trim():j,R,v))===!0&&T(C,R?R.concat(j):[j])}),b.pop()}}if(!L.isObject(e))throw new TypeError("data must be an object");return T(e),t}function xb(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(a){return t[a]})}function lf(e,t){this._pairs=[],e&&up(e,this,t)}const $w=lf.prototype;$w.append=function(t,r){this._pairs.push([t,r])};$w.toString=function(t){const r=t?function(a){return t.call(this,a,xb)}:xb;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function QR(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function qw(e,t,r){if(!t)return e;const a=r&&r.encode||QR,i=L.isFunction(r)?{serialize:r}:r,o=i&&i.serialize;let d;if(o?d=o(t,i):d=L.isURLSearchParams(t)?t.toString():new lf(t,i).toString(a),d){const u=e.indexOf("#");u!==-1&&(e=e.slice(0,u)),e+=(e.indexOf("?")===-1?"?":"&")+d}return e}class gb{constructor(){this.handlers=[]}use(t,r,a){return this.handlers.push({fulfilled:t,rejected:r,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){L.forEach(this.handlers,function(a){a!==null&&t(a)})}}const Uw={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},XR=typeof URLSearchParams<"u"?URLSearchParams:lf,GR=typeof FormData<"u"?FormData:null,ZR=typeof Blob<"u"?Blob:null,eB={isBrowser:!0,classes:{URLSearchParams:XR,FormData:GR,Blob:ZR},protocols:["http","https","file","blob","url","data"]},df=typeof window<"u"&&typeof document<"u",rg=typeof navigator=="object"&&navigator||void 0,tB=df&&(!rg||["ReactNative","NativeScript","NS"].indexOf(rg.product)<0),nB=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",rB=df&&window.location.href||"http://localhost",sB=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:df,hasStandardBrowserEnv:tB,hasStandardBrowserWebWorkerEnv:nB,navigator:rg,origin:rB},Symbol.toStringTag,{value:"Module"})),ct={...sB,...eB};function aB(e,t){return up(e,new ct.classes.URLSearchParams,{visitor:function(r,a,i,o){return ct.isNode&&L.isBuffer(r)?(this.append(a,r.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...t})}function iB(e){return L.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function oB(e){const t={},r=Object.keys(e);let a;const i=r.length;let o;for(a=0;a<i;a++)o=r[a],t[o]=e[o];return t}function Vw(e){function t(r,a,i,o){let d=r[o++];if(d==="__proto__")return!0;const u=Number.isFinite(+d),h=o>=r.length;return d=!d&&L.isArray(i)?i.length:d,h?(L.hasOwnProp(i,d)?i[d]=[i[d],a]:i[d]=a,!u):((!i[d]||!L.isObject(i[d]))&&(i[d]=[]),t(r,a,i[d],o)&&L.isArray(i[d])&&(i[d]=oB(i[d])),!u)}if(L.isFormData(e)&&L.isFunction(e.entries)){const r={};return L.forEachEntry(e,(a,i)=>{t(iB(a),i,r,0)}),r}return null}function lB(e,t,r){if(L.isString(e))try{return(t||JSON.parse)(e),L.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(r||JSON.stringify)(e)}const ll={transitional:Uw,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const a=r.getContentType()||"",i=a.indexOf("application/json")>-1,o=L.isObject(t);if(o&&L.isHTMLForm(t)&&(t=new FormData(t)),L.isFormData(t))return i?JSON.stringify(Vw(t)):t;if(L.isArrayBuffer(t)||L.isBuffer(t)||L.isStream(t)||L.isFile(t)||L.isBlob(t)||L.isReadableStream(t))return t;if(L.isArrayBufferView(t))return t.buffer;if(L.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let u;if(o){if(a.indexOf("application/x-www-form-urlencoded")>-1)return aB(t,this.formSerializer).toString();if((u=L.isFileList(t))||a.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return up(u?{"files[]":t}:t,h&&new h,this.formSerializer)}}return o||i?(r.setContentType("application/json",!1),lB(t)):t}],transformResponse:[function(t){const r=this.transitional||ll.transitional,a=r&&r.forcedJSONParsing,i=this.responseType==="json";if(L.isResponse(t)||L.isReadableStream(t))return t;if(t&&L.isString(t)&&(a&&!this.responseType||i)){const d=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(t,this.parseReviver)}catch(u){if(d)throw u.name==="SyntaxError"?ee.from(u,ee.ERR_BAD_RESPONSE,this,null,this.response):u}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ct.classes.FormData,Blob:ct.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};L.forEach(["delete","get","head","post","put","patch"],e=>{ll.headers[e]={}});const dB=L.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),cB=e=>{const t={};let r,a,i;return e&&e.split(`
`).forEach(function(d){i=d.indexOf(":"),r=d.substring(0,i).trim().toLowerCase(),a=d.substring(i+1).trim(),!(!r||t[r]&&dB[r])&&(r==="set-cookie"?t[r]?t[r].push(a):t[r]=[a]:t[r]=t[r]?t[r]+", "+a:a)}),t},fb=Symbol("internals");function fo(e){return e&&String(e).trim().toLowerCase()}function uc(e){return e===!1||e==null?e:L.isArray(e)?e.map(uc):String(e)}function pB(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=r.exec(e);)t[a[1]]=a[2];return t}const uB=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Mh(e,t,r,a,i){if(L.isFunction(a))return a.call(this,t,r);if(i&&(t=r),!!L.isString(t)){if(L.isString(a))return t.indexOf(a)!==-1;if(L.isRegExp(a))return a.test(t)}}function hB(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,a)=>r.toUpperCase()+a)}function xB(e,t){const r=L.toCamelCase(" "+t);["get","set","has"].forEach(a=>{Object.defineProperty(e,a+r,{value:function(i,o,d){return this[a].call(this,t,i,o,d)},configurable:!0})})}let At=class{constructor(t){t&&this.set(t)}set(t,r,a){const i=this;function o(u,h,m){const f=fo(h);if(!f)throw new Error("header name must be a non-empty string");const b=L.findKey(i,f);(!b||i[b]===void 0||m===!0||m===void 0&&i[b]!==!1)&&(i[b||h]=uc(u))}const d=(u,h)=>L.forEach(u,(m,f)=>o(m,f,h));if(L.isPlainObject(t)||t instanceof this.constructor)d(t,r);else if(L.isString(t)&&(t=t.trim())&&!uB(t))d(cB(t),r);else if(L.isObject(t)&&L.isIterable(t)){let u={},h,m;for(const f of t){if(!L.isArray(f))throw TypeError("Object iterator must return a key-value pair");u[m=f[0]]=(h=u[m])?L.isArray(h)?[...h,f[1]]:[h,f[1]]:f[1]}d(u,r)}else t!=null&&o(r,t,a);return this}get(t,r){if(t=fo(t),t){const a=L.findKey(this,t);if(a){const i=this[a];if(!r)return i;if(r===!0)return pB(i);if(L.isFunction(r))return r.call(this,i,a);if(L.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=fo(t),t){const a=L.findKey(this,t);return!!(a&&this[a]!==void 0&&(!r||Mh(this,this[a],a,r)))}return!1}delete(t,r){const a=this;let i=!1;function o(d){if(d=fo(d),d){const u=L.findKey(a,d);u&&(!r||Mh(a,a[u],u,r))&&(delete a[u],i=!0)}}return L.isArray(t)?t.forEach(o):o(t),i}clear(t){const r=Object.keys(this);let a=r.length,i=!1;for(;a--;){const o=r[a];(!t||Mh(this,this[o],o,t,!0))&&(delete this[o],i=!0)}return i}normalize(t){const r=this,a={};return L.forEach(this,(i,o)=>{const d=L.findKey(a,o);if(d){r[d]=uc(i),delete r[o];return}const u=t?hB(o):String(o).trim();u!==o&&delete r[o],r[u]=uc(i),a[u]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return L.forEach(this,(a,i)=>{a!=null&&a!==!1&&(r[i]=t&&L.isArray(a)?a.join(", "):a)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const a=new this(t);return r.forEach(i=>a.set(i)),a}static accessor(t){const a=(this[fb]=this[fb]={accessors:{}}).accessors,i=this.prototype;function o(d){const u=fo(d);a[u]||(xB(i,d),a[u]=!0)}return L.isArray(t)?t.forEach(o):o(t),this}};At.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);L.reduceDescriptors(At.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(a){this[r]=a}}});L.freezeMethods(At);function $h(e,t){const r=this||ll,a=t||r,i=At.from(a.headers);let o=a.data;return L.forEach(e,function(u){o=u.call(r,o,i.normalize(),t?t.status:void 0)}),i.normalize(),o}function Hw(e){return!!(e&&e.__CANCEL__)}let dl=class extends ee{constructor(t,r,a){super(t??"canceled",ee.ERR_CANCELED,r,a),this.name="CanceledError",this.__CANCEL__=!0}};function Kw(e,t,r){const a=r.config.validateStatus;!r.status||!a||a(r.status)?e(r):t(new ee("Request failed with status code "+r.status,[ee.ERR_BAD_REQUEST,ee.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function gB(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function fB(e,t){e=e||10;const r=new Array(e),a=new Array(e);let i=0,o=0,d;return t=t!==void 0?t:1e3,function(h){const m=Date.now(),f=a[o];d||(d=m),r[i]=h,a[i]=m;let b=o,v=0;for(;b!==i;)v+=r[b++],b=b%e;if(i=(i+1)%e,i===o&&(o=(o+1)%e),m-d<t)return;const T=f&&m-f;return T?Math.round(v*1e3/T):void 0}}function mB(e,t){let r=0,a=1e3/t,i,o;const d=(m,f=Date.now())=>{r=f,i=null,o&&(clearTimeout(o),o=null),e(...m)};return[(...m)=>{const f=Date.now(),b=f-r;b>=a?d(m,f):(i=m,o||(o=setTimeout(()=>{o=null,d(i)},a-b)))},()=>i&&d(i)]}const Wc=(e,t,r=3)=>{let a=0;const i=fB(50,250);return mB(o=>{const d=o.loaded,u=o.lengthComputable?o.total:void 0,h=d-a,m=i(h),f=d<=u;a=d;const b={loaded:d,total:u,progress:u?d/u:void 0,bytes:h,rate:m||void 0,estimated:m&&u&&f?(u-d)/m:void 0,event:o,lengthComputable:u!=null,[t?"download":"upload"]:!0};e(b)},r)},mb=(e,t)=>{const r=e!=null;return[a=>t[0]({lengthComputable:r,total:e,loaded:a}),t[1]]},yb=e=>(...t)=>L.asap(()=>e(...t)),yB=ct.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,ct.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(ct.origin),ct.navigator&&/(msie|trident)/i.test(ct.navigator.userAgent)):()=>!0,vB=ct.hasStandardBrowserEnv?{write(e,t,r,a,i,o,d){if(typeof document>"u")return;const u=[`${e}=${encodeURIComponent(t)}`];L.isNumber(r)&&u.push(`expires=${new Date(r).toUTCString()}`),L.isString(a)&&u.push(`path=${a}`),L.isString(i)&&u.push(`domain=${i}`),o===!0&&u.push("secure"),L.isString(d)&&u.push(`SameSite=${d}`),document.cookie=u.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function bB(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function jB(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Jw(e,t,r){let a=!bB(t);return e&&(a||r==!1)?jB(e,t):t}const vb=e=>e instanceof At?{...e}:e;function Zs(e,t){t=t||{};const r={};function a(m,f,b,v){return L.isPlainObject(m)&&L.isPlainObject(f)?L.merge.call({caseless:v},m,f):L.isPlainObject(f)?L.merge({},f):L.isArray(f)?f.slice():f}function i(m,f,b,v){if(L.isUndefined(f)){if(!L.isUndefined(m))return a(void 0,m,b,v)}else return a(m,f,b,v)}function o(m,f){if(!L.isUndefined(f))return a(void 0,f)}function d(m,f){if(L.isUndefined(f)){if(!L.isUndefined(m))return a(void 0,m)}else return a(void 0,f)}function u(m,f,b){if(b in t)return a(m,f);if(b in e)return a(void 0,m)}const h={url:o,method:o,data:o,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,withXSRFToken:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:u,headers:(m,f,b)=>i(vb(m),vb(f),b,!0)};return L.forEach(Object.keys({...e,...t}),function(f){const b=h[f]||i,v=b(e[f],t[f],f);L.isUndefined(v)&&b!==u||(r[f]=v)}),r}const Yw=e=>{const t=Zs({},e);let{data:r,withXSRFToken:a,xsrfHeaderName:i,xsrfCookieName:o,headers:d,auth:u}=t;if(t.headers=d=At.from(d),t.url=qw(Jw(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),u&&d.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):""))),L.isFormData(r)){if(ct.hasStandardBrowserEnv||ct.hasStandardBrowserWebWorkerEnv)d.setContentType(void 0);else if(L.isFunction(r.getHeaders)){const h=r.getHeaders(),m=["content-type","content-length"];Object.entries(h).forEach(([f,b])=>{m.includes(f.toLowerCase())&&d.set(f,b)})}}if(ct.hasStandardBrowserEnv&&(a&&L.isFunction(a)&&(a=a(t)),a||a!==!1&&yB(t.url))){const h=i&&o&&vB.read(o);h&&d.set(i,h)}return t},SB=typeof XMLHttpRequest<"u",wB=SB&&function(e){return new Promise(function(r,a){const i=Yw(e);let o=i.data;const d=At.from(i.headers).normalize();let{responseType:u,onUploadProgress:h,onDownloadProgress:m}=i,f,b,v,T,N;function R(){T&&T(),N&&N(),i.cancelToken&&i.cancelToken.unsubscribe(f),i.signal&&i.signal.removeEventListener("abort",f)}let F=new XMLHttpRequest;F.open(i.method.toUpperCase(),i.url,!0),F.timeout=i.timeout;function C(){if(!F)return;const _=At.from("getAllResponseHeaders"in F&&F.getAllResponseHeaders()),I={data:!u||u==="text"||u==="json"?F.responseText:F.response,status:F.status,statusText:F.statusText,headers:_,config:e,request:F};Kw(function(W){r(W),R()},function(W){a(W),R()},I),F=null}"onloadend"in F?F.onloadend=C:F.onreadystatechange=function(){!F||F.readyState!==4||F.status===0&&!(F.responseURL&&F.responseURL.indexOf("file:")===0)||setTimeout(C)},F.onabort=function(){F&&(a(new ee("Request aborted",ee.ECONNABORTED,e,F)),F=null)},F.onerror=function(z){const I=z&&z.message?z.message:"Network Error",M=new ee(I,ee.ERR_NETWORK,e,F);M.event=z||null,a(M),F=null},F.ontimeout=function(){let z=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const I=i.transitional||Uw;i.timeoutErrorMessage&&(z=i.timeoutErrorMessage),a(new ee(z,I.clarifyTimeoutError?ee.ETIMEDOUT:ee.ECONNABORTED,e,F)),F=null},o===void 0&&d.setContentType(null),"setRequestHeader"in F&&L.forEach(d.toJSON(),function(z,I){F.setRequestHeader(I,z)}),L.isUndefined(i.withCredentials)||(F.withCredentials=!!i.withCredentials),u&&u!=="json"&&(F.responseType=i.responseType),m&&([v,N]=Wc(m,!0),F.addEventListener("progress",v)),h&&F.upload&&([b,T]=Wc(h),F.upload.addEventListener("progress",b),F.upload.addEventListener("loadend",T)),(i.cancelToken||i.signal)&&(f=_=>{F&&(a(!_||_.type?new dl(null,e,F):_),F.abort(),F=null)},i.cancelToken&&i.cancelToken.subscribe(f),i.signal&&(i.signal.aborted?f():i.signal.addEventListener("abort",f)));const j=gB(i.url);if(j&&ct.protocols.indexOf(j)===-1){a(new ee("Unsupported protocol "+j+":",ee.ERR_BAD_REQUEST,e));return}F.send(o||null)})},kB=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let a=new AbortController,i;const o=function(m){if(!i){i=!0,u();const f=m instanceof Error?m:this.reason;a.abort(f instanceof ee?f:new dl(f instanceof Error?f.message:f))}};let d=t&&setTimeout(()=>{d=null,o(new ee(`timeout of ${t}ms exceeded`,ee.ETIMEDOUT))},t);const u=()=>{e&&(d&&clearTimeout(d),d=null,e.forEach(m=>{m.unsubscribe?m.unsubscribe(o):m.removeEventListener("abort",o)}),e=null)};e.forEach(m=>m.addEventListener("abort",o));const{signal:h}=a;return h.unsubscribe=()=>L.asap(u),h}},CB=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let a=0,i;for(;a<r;)i=a+t,yield e.slice(a,i),a=i},NB=async function*(e,t){for await(const r of _B(e))yield*CB(r,t)},_B=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:a}=await t.read();if(r)break;yield a}}finally{await t.cancel()}},bb=(e,t,r,a)=>{const i=NB(e,t);let o=0,d,u=h=>{d||(d=!0,a&&a(h))};return new ReadableStream({async pull(h){try{const{done:m,value:f}=await i.next();if(m){u(),h.close();return}let b=f.byteLength;if(r){let v=o+=b;r(v)}h.enqueue(new Uint8Array(f))}catch(m){throw u(m),m}},cancel(h){return u(h),i.return()}},{highWaterMark:2})},jb=64*1024,{isFunction:Ud}=L,AB=(({Request:e,Response:t})=>({Request:e,Response:t}))(L.global),{ReadableStream:Sb,TextEncoder:wb}=L.global,kb=(e,...t)=>{try{return!!e(...t)}catch{return!1}},RB=e=>{e=L.merge.call({skipUndefined:!0},AB,e);const{fetch:t,Request:r,Response:a}=e,i=t?Ud(t):typeof fetch=="function",o=Ud(r),d=Ud(a);if(!i)return!1;const u=i&&Ud(Sb),h=i&&(typeof wb=="function"?(N=>R=>N.encode(R))(new wb):async N=>new Uint8Array(await new r(N).arrayBuffer())),m=o&&u&&kb(()=>{let N=!1;const R=new r(ct.origin,{body:new Sb,method:"POST",get duplex(){return N=!0,"half"}}).headers.has("Content-Type");return N&&!R}),f=d&&u&&kb(()=>L.isReadableStream(new a("").body)),b={stream:f&&(N=>N.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(N=>{!b[N]&&(b[N]=(R,F)=>{let C=R&&R[N];if(C)return C.call(R);throw new ee(`Response type '${N}' is not supported`,ee.ERR_NOT_SUPPORT,F)})});const v=async N=>{if(N==null)return 0;if(L.isBlob(N))return N.size;if(L.isSpecCompliantForm(N))return(await new r(ct.origin,{method:"POST",body:N}).arrayBuffer()).byteLength;if(L.isArrayBufferView(N)||L.isArrayBuffer(N))return N.byteLength;if(L.isURLSearchParams(N)&&(N=N+""),L.isString(N))return(await h(N)).byteLength},T=async(N,R)=>{const F=L.toFiniteNumber(N.getContentLength());return F??v(R)};return async N=>{let{url:R,method:F,data:C,signal:j,cancelToken:_,timeout:z,onDownloadProgress:I,onUploadProgress:M,responseType:W,headers:K,withCredentials:xe="same-origin",fetchOptions:re}=Yw(N),Re=t||fetch;W=W?(W+"").toLowerCase():"text";let De=kB([j,_&&_.toAbortSignal()],z),Qe=null;const Ue=De&&De.unsubscribe&&(()=>{De.unsubscribe()});let Rt;try{if(M&&m&&F!=="get"&&F!=="head"&&(Rt=await T(K,C))!==0){let ce=new r(R,{method:"POST",body:C,duplex:"half"}),G;if(L.isFormData(C)&&(G=ce.headers.get("content-type"))&&K.setContentType(G),ce.body){const[an,Ve]=mb(Rt,Wc(yb(M)));C=bb(ce.body,jb,an,Ve)}}L.isString(xe)||(xe=xe?"include":"omit");const Be=o&&"credentials"in r.prototype,Ut={...re,signal:De,method:F.toUpperCase(),headers:K.normalize().toJSON(),body:C,duplex:"half",credentials:Be?xe:void 0};Qe=o&&new r(R,Ut);let $=await(o?Re(Qe,re):Re(R,Ut));const X=f&&(W==="stream"||W==="response");if(f&&(I||X&&Ue)){const ce={};["status","statusText","headers"].forEach(Fn=>{ce[Fn]=$[Fn]});const G=L.toFiniteNumber($.headers.get("content-length")),[an,Ve]=I&&mb(G,Wc(yb(I),!0))||[];$=new a(bb($.body,jb,an,()=>{Ve&&Ve(),Ue&&Ue()}),ce)}W=W||"text";let te=await b[L.findKey(b,W)||"text"]($,N);return!X&&Ue&&Ue(),await new Promise((ce,G)=>{Kw(ce,G,{data:te,headers:At.from($.headers),status:$.status,statusText:$.statusText,config:N,request:Qe})})}catch(Be){throw Ue&&Ue(),Be&&Be.name==="TypeError"&&/Load failed|fetch/i.test(Be.message)?Object.assign(new ee("Network Error",ee.ERR_NETWORK,N,Qe),{cause:Be.cause||Be}):ee.from(Be,Be&&Be.code,N,Qe)}}},BB=new Map,Qw=e=>{let t=e&&e.env||{};const{fetch:r,Request:a,Response:i}=t,o=[a,i,r];let d=o.length,u=d,h,m,f=BB;for(;u--;)h=o[u],m=f.get(h),m===void 0&&f.set(h,m=u?new Map:RB(t)),f=m;return m};Qw();const cf={http:KR,xhr:wB,fetch:{get:Qw}};L.forEach(cf,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Cb=e=>`- ${e}`,TB=e=>L.isFunction(e)||e===null||e===!1;function zB(e,t){e=L.isArray(e)?e:[e];const{length:r}=e;let a,i;const o={};for(let d=0;d<r;d++){a=e[d];let u;if(i=a,!TB(a)&&(i=cf[(u=String(a)).toLowerCase()],i===void 0))throw new ee(`Unknown adapter '${u}'`);if(i&&(L.isFunction(i)||(i=i.get(t))))break;o[u||"#"+d]=i}if(!i){const d=Object.entries(o).map(([h,m])=>`adapter ${h} `+(m===!1?"is not supported by the environment":"is not available in the build"));let u=r?d.length>1?`since :
`+d.map(Cb).join(`
`):" "+Cb(d[0]):"as no adapter specified";throw new ee("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return i}const Xw={getAdapter:zB,adapters:cf};function qh(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new dl(null,e)}function Nb(e){return qh(e),e.headers=At.from(e.headers),e.data=$h.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Xw.getAdapter(e.adapter||ll.adapter,e)(e).then(function(a){return qh(e),a.data=$h.call(e,e.transformResponse,a),a.headers=At.from(a.headers),a},function(a){return Hw(a)||(qh(e),a&&a.response&&(a.response.data=$h.call(e,e.transformResponse,a.response),a.response.headers=At.from(a.response.headers))),Promise.reject(a)})}const Gw="1.13.4",hp={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{hp[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});const _b={};hp.transitional=function(t,r,a){function i(o,d){return"[Axios v"+Gw+"] Transitional option '"+o+"'"+d+(a?". "+a:"")}return(o,d,u)=>{if(t===!1)throw new ee(i(d," has been removed"+(r?" in "+r:"")),ee.ERR_DEPRECATED);return r&&!_b[d]&&(_b[d]=!0,console.warn(i(d," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(o,d,u):!0}};hp.spelling=function(t){return(r,a)=>(console.warn(`${a} is likely a misspelling of ${t}`),!0)};function LB(e,t,r){if(typeof e!="object")throw new ee("options must be an object",ee.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let i=a.length;for(;i-- >0;){const o=a[i],d=t[o];if(d){const u=e[o],h=u===void 0||d(u,o,e);if(h!==!0)throw new ee("option "+o+" must be "+h,ee.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new ee("Unknown option "+o,ee.ERR_BAD_OPTION)}}const hc={assertOptions:LB,validators:hp},_n=hc.validators;let Ks=class{constructor(t){this.defaults=t||{},this.interceptors={request:new gb,response:new gb}}async request(t,r){try{return await this._request(t,r)}catch(a){if(a instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";try{a.stack?o&&!String(a.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+o):a.stack=o}catch{}}throw a}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Zs(this.defaults,r);const{transitional:a,paramsSerializer:i,headers:o}=r;a!==void 0&&hc.assertOptions(a,{silentJSONParsing:_n.transitional(_n.boolean),forcedJSONParsing:_n.transitional(_n.boolean),clarifyTimeoutError:_n.transitional(_n.boolean)},!1),i!=null&&(L.isFunction(i)?r.paramsSerializer={serialize:i}:hc.assertOptions(i,{encode:_n.function,serialize:_n.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),hc.assertOptions(r,{baseUrl:_n.spelling("baseURL"),withXsrfToken:_n.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let d=o&&L.merge(o.common,o[r.method]);o&&L.forEach(["delete","get","head","post","put","patch","common"],N=>{delete o[N]}),r.headers=At.concat(d,o);const u=[];let h=!0;this.interceptors.request.forEach(function(R){typeof R.runWhen=="function"&&R.runWhen(r)===!1||(h=h&&R.synchronous,u.unshift(R.fulfilled,R.rejected))});const m=[];this.interceptors.response.forEach(function(R){m.push(R.fulfilled,R.rejected)});let f,b=0,v;if(!h){const N=[Nb.bind(this),void 0];for(N.unshift(...u),N.push(...m),v=N.length,f=Promise.resolve(r);b<v;)f=f.then(N[b++],N[b++]);return f}v=u.length;let T=r;for(;b<v;){const N=u[b++],R=u[b++];try{T=N(T)}catch(F){R.call(this,F);break}}try{f=Nb.call(this,T)}catch(N){return Promise.reject(N)}for(b=0,v=m.length;b<v;)f=f.then(m[b++],m[b++]);return f}getUri(t){t=Zs(this.defaults,t);const r=Jw(t.baseURL,t.url,t.allowAbsoluteUrls);return qw(r,t.params,t.paramsSerializer)}};L.forEach(["delete","get","head","options"],function(t){Ks.prototype[t]=function(r,a){return this.request(Zs(a||{},{method:t,url:r,data:(a||{}).data}))}});L.forEach(["post","put","patch"],function(t){function r(a){return function(o,d,u){return this.request(Zs(u||{},{method:t,headers:a?{"Content-Type":"multipart/form-data"}:{},url:o,data:d}))}}Ks.prototype[t]=r(),Ks.prototype[t+"Form"]=r(!0)});let EB=class Zw{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(o){r=o});const a=this;this.promise.then(i=>{if(!a._listeners)return;let o=a._listeners.length;for(;o-- >0;)a._listeners[o](i);a._listeners=null}),this.promise.then=i=>{let o;const d=new Promise(u=>{a.subscribe(u),o=u}).then(i);return d.cancel=function(){a.unsubscribe(o)},d},t(function(o,d,u){a.reason||(a.reason=new dl(o,d,u),r(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=a=>{t.abort(a)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new Zw(function(i){t=i}),cancel:t}}};function FB(e){return function(r){return e.apply(null,r)}}function DB(e){return L.isObject(e)&&e.isAxiosError===!0}const sg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(sg).forEach(([e,t])=>{sg[t]=e});function ek(e){const t=new Ks(e),r=zw(Ks.prototype.request,t);return L.extend(r,Ks.prototype,t,{allOwnKeys:!0}),L.extend(r,t,null,{allOwnKeys:!0}),r.create=function(i){return ek(Zs(e,i))},r}const Fe=ek(ll);Fe.Axios=Ks;Fe.CanceledError=dl;Fe.CancelToken=EB;Fe.isCancel=Hw;Fe.VERSION=Gw;Fe.toFormData=up;Fe.AxiosError=ee;Fe.Cancel=Fe.CanceledError;Fe.all=function(t){return Promise.all(t)};Fe.spread=FB;Fe.isAxiosError=DB;Fe.mergeConfig=Zs;Fe.AxiosHeaders=At;Fe.formToJSON=e=>Vw(L.isHTMLForm(e)?new FormData(e):e);Fe.getAdapter=Xw.getAdapter;Fe.HttpStatusCode=sg;Fe.default=Fe;const{Axios:f8,AxiosError:m8,CanceledError:y8,isCancel:v8,CancelToken:b8,VERSION:j8,all:S8,Cancel:w8,isAxiosError:k8,spread:C8,toFormData:N8,AxiosHeaders:_8,HttpStatusCode:A8,formToJSON:R8,getAdapter:B8,mergeConfig:T8}=Fe,PB="/api",E=Fe.create({baseURL:PB,timeout:1e4}),IB=()=>E.get("/dashboard/summary"),OB=(e={})=>E.get("/bills",{params:{includeItems:"true",...e}}),WB=()=>E.get("/bills/pending/all"),MB=()=>E.get("/bills/cleared"),$B=(e,t)=>E.patch(`/bills/${e}/dispatch`,{status:t}),Ab=e=>E.get(`/bills/${e}/items`,{timeout:3e4}),qB=(e,t)=>E.put(`/bills/${e}/items`,{items:t},{timeout:6e4}),UB=e=>E.get(`/bills/${e}/print-data`,{timeout:3e4}),VB=()=>E.post("/email/test-connection"),HB=e=>E.post("/email/test",{toEmail:e}),KB=(e,t,r="")=>E.post("/email/send-bill",{billId:e,toEmail:t,nepaliDate:r},{timeout:3e4}),JB=(e={})=>E.get("/vouchers",{params:e}),YB=(e={})=>E.get("/vouchers/combined",{params:e}),QB=()=>E.get("/vouchers/combined-types"),XB=()=>E.post("/vouchers/backfill-timestamps",{},{timeout:12e4}),GB=()=>E.get("/vouchers/types"),ZB=(e={})=>E.get("/vouchers/deleted",{params:e}),eT=e=>E.post(`/vouchers/restore/${e}`),tT=(e,t)=>E.patch(`/vouchers/${e}/audit-status`,{status:t}),nT=(e,t)=>E.patch("/vouchers/bulk-audit",{ids:e,status:t}),Rb=e=>E.get(`/voucher-history/${e}/changes`),rT=(e={})=>E.get("/daybook",{params:e}),sT=(e={})=>E.get("/sacks",{params:e}),aT=(e,t)=>E.patch(`/sacks/${e}/status`,{status:t}),iT=()=>E.get("/sync/status"),oT=()=>E.post("/sync/start"),lT=()=>E.post("/sync/stop"),dT=()=>E.post("/sync/trigger"),cT=(e=null)=>E.post("/sync/deleted",{voucherTypes:e}),pT=()=>E.get("/tally/status"),uT=()=>E.get("/tally/companies"),hT=()=>E.get("/tally/voucher-types"),xT=e=>E.get("/users/my-permissions",{params:{userId:e}}),gT=e=>E.get(`/users/permissions/${e}`),fT=(e,t)=>E.post(`/users/permissions/${e}`,{permissions:t}),mT=()=>E.get("/config/settings"),yT=e=>E.post("/config/settings",{settings:e}),vT=(e={})=>E.get("/fonepay/transactions",{params:e}),bT=()=>E.get("/fonepay/summary"),jT=e=>E.post("/fonepay/link-to-bill",e),ST=e=>E.post("/fonepay/unlink",{transactionId:e}),wT=e=>E.post("/fonepay/bulk-link",{links:e}),kT=(e,t)=>E.post("/fonepay/suggest-matches",{dateFrom:e,dateTo:t}),CT=(e={})=>E.get("/fonepay/ledger",{params:e}),NT=(e={})=>E.get("/rbb/transactions",{params:e}),_T=()=>E.get("/rbb/summary"),AT=()=>E.get("/rbb/status"),RT=()=>E.post("/rbb/sync"),BT=()=>E.post("/rbb/start"),TT=()=>E.post("/rbb/stop"),zT=(e={})=>E.get("/stock",{params:e}),Bb=(e={})=>E.get("/ledgers/debtors",{params:e}),LT=e=>E.get("/ledgers/search",{params:{q:e}}),ET=()=>E.get("/ledgers/agents"),FT=e=>E.post("/invoice",e,{timeout:3e4}),DT=()=>E.get("/invoice/pending"),PT=()=>E.post("/invoice/pending/sync"),IT=(e={})=>E.get("/invoice/history",{params:e}),OT=e=>E.get("/invoice/summary",{params:{date:e}}),Tb=(e="",t=!1)=>E.get("/outstanding",{params:{...e?{party:e}:{},...t?{overdue:"1"}:{}}}),WT=(e=!1)=>E.get("/outstanding/ageing",{params:e?{overdue:"1"}:{}}),MT=(e=!1)=>E.get("/outstanding/parties",{params:e?{overdue:"1"}:{}}),$T=()=>E.get("/outstanding/summary"),qT=()=>E.post("/outstanding/sync",{},{timeout:3e4}),UT=(e="",t="")=>E.get("/profit-loss",{params:{from:e,to:t}}),VT=(e="",t="")=>E.get("/balance-sheet",{params:{from:e,to:t},timeout:6e4}),HT=(e="",t="")=>E.get("/trial-balance",{params:{from:e,to:t},timeout:6e4}),KT=(e,t)=>E.get("/cash-flow",{params:{from:e,to:t},timeout:6e4}),JT=(e="",t="")=>E.get("/ratios",{params:{from:e,to:t},timeout:12e4}),YT=()=>E.get("/stock-groups/summary"),QT=()=>E.post("/stock-groups/sync",{},{timeout:3e4}),XT=(e="")=>E.get("/price-lists",{params:e?{level:e}:{}}),GT=()=>E.get("/price-lists/levels"),ZT=()=>E.post("/price-lists/sync",{},{timeout:3e4}),ez=(e,t,r="")=>E.get("/inventory-movement",{params:{from:e,to:t,...r?{item:r}:{}}}),tz=(e,t)=>E.get("/inventory-movement/summary",{params:{from:e,to:t}}),nz=(e="")=>E.get("/bank-recon",{params:e?{type:e}:{}}),rz=(e="")=>E.get("/bank-recon/summary",{params:e?{type:e}:{}}),sz=()=>E.get("/bank-recon/unmatched/rbb"),az=()=>E.get("/bank-recon/unmatched/fonepay"),iz=(e,t="",r="",a="")=>E.post("/bank-recon/auto-match",{type:e,bankLedger:t,from:r,to:a},{timeout:6e4}),oz=(e,t)=>E.get("/tally-xml/vouchers",{params:{fromDate:e,toDate:t},timeout:12e4}),zb=e=>E.get(`/tally-xml/voucher/${e}`,{timeout:12e4}),lz=(e={})=>E.get("/columnar",{params:e}),dz=(e={})=>E.get("/columnar/details",{params:e}),cz=()=>E.get("/cheques/reconciliation",{timeout:3e4}),pz=e=>E.get("/cheques/reconciliation/odbc-cheques",{params:e,timeout:3e4}),Uh=()=>E.post("/cheques/sync-odbc",{},{timeout:6e4}),uz=(e,t)=>E.put(`/cheques/${e}/status`,t),hz=()=>E.post("/cheques/sync-pending",{},{timeout:6e4}),xz=e=>E.get("/cheques/cheque-post/receipts",{params:{date:e},timeout:3e4}),Lb=()=>E.get("/cheques/cheque-post/odbc-parties",{timeout:3e4}),gz=e=>E.post("/cheques/cheque-post/sync",e,{timeout:6e4}),fz=e=>E.post("/cheques/cheque-post/sync-all",e,{timeout:12e4}),mz=e=>E.get("/cheques/cheque-post/posted",{params:{date:e}}),Eb=e=>E.get("/cheques/cheque-post/log",{params:e}),yz=e=>E.get(`/cheques/odbc-voucher/${e}`,{timeout:3e4}),vz=()=>E.get("/voucher-lock/status",{timeout:3e4}),Fb=e=>E.post("/voucher-lock/lock",e,{timeout:6e5}),Db=e=>E.post("/voucher-lock/unlock",e,{timeout:6e5}),Pb=e=>E.put("/voucher-lock/schedule",e),bz=e=>E.post("/voucher-lock/toggle",e,{timeout:3e4}),jz=()=>E.get("/chat/status"),Sz=(e,t)=>E.post("/chat/query",{command:e,params:t},{timeout:3e4}),wz=(e,t=[])=>E.post("/chat/message",{message:e,history:t},{timeout:6e4}),Vh=()=>E.get("/collection/staff"),kz=e=>E.post("/collection/staff",e),Cz=e=>E.delete(`/collection/staff/${e}`),Ib=(e={})=>E.get("/collection/batches",{params:e}),Nz=e=>E.post("/collection/batches",e),_z=e=>E.get(`/collection/batches/${e}`),Az=e=>E.get(`/collection/batches/${e}/print`),Ob=(e,t)=>E.put(`/collection/batches/${e}/bulk-update`,t),Rz=e=>E.post(`/collection/batches/${e}/create-receipt`,{},{timeout:6e4}),Bz=()=>E.get("/collection/assignable-cheques"),Tz=()=>E.get("/collection/stats"),zz=()=>E.get("/collection/party-balances",{timeout:3e4}),Lz=(e={})=>E.get("/collection/cheque-receivable/local",{params:e}),Ez=()=>E.get("/ledger-both",{timeout:18e4}),Fz=()=>E.get("/bank-names"),Dz=e=>E.post("/bank-names",e),Pz=(e,t)=>E.put(`/bank-names/${e}`,t),Iz=e=>E.delete(`/bank-names/${e}`),Oz=()=>E.get("/bank-names/ledger-mappings"),Vd=e=>E.post("/bank-names/ledger-mappings",e),Wz=(e,t)=>E.put(`/bank-names/ledger-mappings/${e}`,t),Mz=e=>E.delete(`/bank-names/ledger-mappings/${e}`),Wb=e=>E.get("/bank-names/phone-mappings",{params:{party:e}}),Hd=e=>E.post("/bank-names/phone-mappings",e),$z=e=>E.delete(`/bank-names/phone-mappings/${encodeURIComponent(e)}`),Mb=()=>E.get("/data-completeness"),qz=e=>E.get("/eod-recon",{params:{date:e}}),Uz=()=>E.get("/ledgers/hierarchy/companies"),Vz=e=>E.post("/ledgers/hierarchy/sync",{},{params:{company:e},timeout:12e4}),Hz=(e,t)=>E.get("/ledgers/detail",{params:{name:e,company:t},timeout:3e4}),Kz=(e,t,r,a)=>E.get("/ledgers/account-view",{params:{name:e,from:t,to:r,company:a},timeout:6e4}),$b=[{command:"sales-today",label:"Today Sales",icon:""},{command:"daybook",label:"Daybook",icon:""},{command:"stock-summary",label:"Stock",icon:""},{command:"outstanding",label:"Outstanding",icon:""},{command:"pending-bills",label:"Pending",icon:""},{command:"cheques",label:"Cheques",icon:""},{command:"dashboard",label:"Summary",icon:""},{command:"lock-vouchers",label:"Lock",icon:"",write:!0},{command:"unlock-vouchers",label:"Unlock",icon:"",write:!0}];function mo(e){if(e==null||isNaN(e))return"0";const t=Number(e),r=t<0,a=Math.abs(t).toFixed(2),[i,o]=a.split(".");let d="";if(i.length<=3)d=i;else{d=i.slice(-3);let h=i.slice(0,-3);for(;h.length>2;)d=h.slice(-2)+","+d,h=h.slice(0,-2);h&&(d=h+","+d)}return(r?"-":"")+d+(o&&o!=="00"?"."+o:"")}function Jz(e,t){var r,a,i,o,d,u;if(!t)return"No data available";if(e==="dashboard"&&typeof t=="object"&&!Array.isArray(t)){const h=[];return t.todaySales!=null&&h.push(`Today's Sales: Rs ${mo(t.todaySales)} (${t.todaySalesCount||0} bills)`),t.totalBills!=null&&h.push(`Total Bills: ${t.totalBills}`),t.pendingBills!=null&&h.push(`Pending: ${t.pendingBills}`),t.totalParties!=null&&h.push(`Parties: ${t.totalParties}`),t.totalStockItems!=null&&h.push(`Stock Items: ${t.totalStockItems}`),h.join(`
`)||JSON.stringify(t,null,2)}if(Array.isArray(t)){if(t.length===0)return"No records found";if((r=t[0])!=null&&r.party_name&&((a=t[0])==null?void 0:a.amount)!=null){const h=t.reduce((b,v)=>b+(Number(v.amount)||0),0);let f=t.slice(0,30).map((b,v)=>`${v+1}. ${b.party_name}  Rs ${mo(b.amount)}${b.voucher_number?` (${b.voucher_number})`:""}${b.voucher_type?` [${b.voucher_type}]`:""}`).join(`
`);return f+=`

Total: Rs ${mo(h)} (${t.length} entries)`,t.length>30&&(f+=`
... showing first 30 of ${t.length}`),f}if((i=t[0])!=null&&i.item_name||(o=t[0])!=null&&o.name){const h=t[0].item_name?"item_name":"name";let f=t.slice(0,30).map((b,v)=>{const T=b.closing_balance||b.balance||b.quantity||"",N=b.closing_value||b.value||"";return`${v+1}. ${b[h]}${T?`  ${T}${b.unit?" "+b.unit:""}`:""}${N?` (Rs ${mo(N)})`:""}`}).join(`
`);return t.length>30&&(f+=`
... showing first 30 of ${t.length}`),f}if(((d=t[0])==null?void 0:d.cheque_number)!=null||((u=t[0])==null?void 0:u.cheque_date)!=null){let m=t.slice(0,20).map((f,b)=>`${b+1}. ${f.party_name||"Unknown"}  Rs ${mo(f.amount)} ${f.cheque_number?`#${f.cheque_number}`:""} [${f.status||"?"}]`).join(`
`);return t.length>20&&(m+=`
... showing first 20 of ${t.length}`),m}return t.slice(0,20).map((h,m)=>`${m+1}. ${JSON.stringify(h)}`).join(`
`)}if(t.locked!=null||t.unlocked!=null){const h=t.locked!=null?"locked":"unlocked";return`${t.locked||t.unlocked||0} vouchers ${h}${t.failed?`, ${t.failed} failed`:""} (total: ${t.total})`}return typeof t=="object"?JSON.stringify(t,null,2):String(t)}function Yz({open:e,onClose:t}){const[r,a]=x.useState([{role:"system",content:"Welcome! Use the quick buttons above or type a question below."}]),[i,o]=x.useState(""),[d,u]=x.useState(!1),[h,m]=x.useState(!1),f=x.useRef(null),b=x.useRef(null);x.useEffect(()=>{jz().then(R=>m(R.data.aiEnabled)).catch(()=>{})},[]),x.useEffect(()=>{var R;(R=f.current)==null||R.scrollIntoView({behavior:"smooth"})},[r]),x.useEffect(()=>{e&&setTimeout(()=>{var R;return(R=b.current)==null?void 0:R.focus()},300)},[e]);const v=async(R,F)=>{const C=$b.find(j=>j.command===R);a(j=>[...j,{role:"user",content:`${(C==null?void 0:C.icon)||">"} ${(C==null?void 0:C.label)||R}`}]),u(!0);try{const j=await Sz(R,F),_=Jz(R,j.data.data);a(z=>[...z,{role:"assistant",content:_,label:j.data.label}])}catch(j){a(_=>{var z,I;return[..._,{role:"error",content:`Error: ${((I=(z=j.response)==null?void 0:z.data)==null?void 0:I.error)||j.message}`}]})}finally{u(!1)}},T=async()=>{const R=i.trim();if(!(!R||d)){o(""),a(F=>[...F,{role:"user",content:R}]),u(!0);try{const F=r.filter(j=>j.role==="user"||j.role==="assistant").map(j=>({role:j.role,content:j.content})),C=await wz(R,F);C.data.aiEnabled?a(j=>[...j,{role:"assistant",content:C.data.reply}]):a(j=>[...j,{role:"system",content:C.data.message}])}catch(F){a(C=>{var j,_;return[...C,{role:"error",content:`Error: ${((_=(j=F.response)==null?void 0:j.data)==null?void 0:_.error)||F.message}`}]})}finally{u(!1)}}},N=R=>{R.key==="Enter"&&!R.shiftKey&&(R.preventDefault(),T())};return n.jsxs("div",{className:`chat-panel ${e?"open":""}`,children:[n.jsxs("div",{className:"cp-head",children:[n.jsxs("div",{className:"cp-title",children:[n.jsx("span",{children:""}),n.jsx("h3",{children:"Tally Assistant"}),h&&n.jsx("span",{className:"cp-ai-badge",children:"AI"})]}),n.jsx("button",{className:"m-close",onClick:t,children:""})]}),n.jsx("div",{className:"cp-actions",children:$b.map(R=>n.jsxs("button",{className:`cp-action-btn ${R.write?"write":""}`,onClick:()=>v(R.command),disabled:d,title:R.label,children:[n.jsx("span",{children:R.icon}),n.jsx("span",{children:R.label})]},R.command))}),n.jsxs("div",{className:"cp-messages",children:[r.map((R,F)=>n.jsxs("div",{className:`cp-msg cp-msg-${R.role}`,children:[R.label&&n.jsx("div",{className:"cp-msg-label",children:R.label}),n.jsx("pre",{className:"cp-msg-text",children:R.content})]},F)),d&&n.jsx("div",{className:"cp-msg cp-msg-loading",children:n.jsxs("div",{className:"cp-typing",children:[n.jsx("span",{}),n.jsx("span",{}),n.jsx("span",{})]})}),n.jsx("div",{ref:f})]}),n.jsxs("div",{className:"cp-input-area",children:[n.jsx("input",{ref:b,className:"cp-input",placeholder:h?"Ask anything about your business...":"AI not configured  use quick buttons above",value:i,onChange:R=>o(R.target.value),onKeyDown:N,disabled:d}),n.jsx("button",{className:"cp-send",onClick:T,disabled:!i.trim()||d,children:""})]})]})}const Hh={dashboard:" Dashboard",pending:" Pending Bills",vouchers:" Total Vouchers",deleted:" Deleted Vouchers",dispatch:" Dispatch",sacks:" Sacks",daybook:" Daybook",fonepay:" Fonepay",rbb:" RBB Banking","bill-history":" Dashboard Bills",parties:" Parties",outstanding:" Outstanding & Ageing","stock-groups":" Stock Groups","profit-loss":" Profit & Loss","price-lists":" Price Lists","bank-recon":" Bank Reconciliation","inventory-movement":" Inventory Movement","balance-sheet":" Balance Sheet","trial-balance":" Trial Balance","cash-flow":" Cash Flow","ratio-analysis":" Ratio Analysis","xml-viewer":" XML Viewer",columnar:" Columnar Dashboard",cheques:" Cheque Management","cheque-post":" Cheque Post","cheque-vouchers":" Cheque Voucher List",collection:" Cheque Collection","ledger-both":" Ledger (Both)","bank-names":" Mapping Settings","eod-recon":" EOD Reconciliation","data-completeness":" Data Quality Tracking","ledger-hierarchy":" Ledger Hierarchy","ledger-account":" Ledger Account",settings:" Settings"},k=e=>`${Math.abs(Number(e)||0).toLocaleString("en-IN")}`,ag=e=>{if(!e)return"";const t=new Date;let r;if(/^\d{8}$/.test(e)){const i=parseInt(e.substring(0,4)),o=parseInt(e.substring(4,6))-1,d=parseInt(e.substring(6,8));r=new Date(i,o,d)}else r=new Date(e);if(isNaN(r.getTime()))return"";const a=Math.floor((t-r)/1e3);return a<60?"Just now":a<3600?`${Math.floor(a/60)} min ago`:a<86400?`${Math.floor(a/3600)} hr ago`:`${Math.floor(a/86400)} days ago`},pf=e=>{if(!e)return null;if(/^\d{8}$/.test(e)){const r=parseInt(e.substring(0,4)),a=parseInt(e.substring(4,6))-1,i=parseInt(e.substring(6,8));return new Date(r,a,i)}const t=new Date(e);return isNaN(t.getTime())?null:t},zr=e=>{if(!e)return"";const t=new Date,r=pf(e);if(!r)return"";const a=Math.floor((t-r)/(1e3*60*60*24));return a===0?"Today":a===1?"1 day ago":`${a} days ago`},La=e=>{if(!e)return"";const t=pf(e);if(!t)return"";const r=t.getFullYear(),a=t.getMonth()+1,i=t.getDate();let o=r+56,d=a+8,u=i+15;return u>30&&(u-=30,d+=1),d>12&&(d-=12,o+=1),`${u} ${["","","","","","","","","","","",""][d-1]} ${o}`},lt=e=>{if(!e)return"";const t=pf(e);if(!t)return"";const r=String(t.getDate()).padStart(2,"0"),a=String(t.getMonth()+1).padStart(2,"0"),i=t.getFullYear();return`${r}/${a}/${i}`},Kh=e=>{if(!e||e.length<14||e==="000000000")return"";const t=e.substring(0,4),r=e.substring(4,6),a=e.substring(6,8),i=e.substring(8,10),o=e.substring(10,12),d=e.substring(12,14),u=parseInt(i)%12||12,h=parseInt(i)>=12?"PM":"AM";return`${a}/${r}/${t} ${u}:${o}:${d} ${h}`};function Qz(){var Nv,_v,Av,Rv,Bv,Tv,zv,Lv,Ev,Fv,Dv,Pv,Iv,Ov,Wv,Mv,$v,qv,Uv,Vv,Hv,Kv,Jv,Yv,Qv,Xv,Gv,Zv,e0,t0,n0,r0,s0,a0,i0,o0,l0,d0,c0,p0,u0,h0;const[e,t]=x.useState(()=>{try{return JSON.parse(localStorage.getItem("rush_user")||"null")}catch{return null}}),[r,a]=x.useState({username:"",password:""}),[i,o]=x.useState(""),[d,u]=x.useState(!1),[h,m]=x.useState(new Set),[f,b]=x.useState("dashboard"),[v,T]=x.useState(!0),[N,R]=x.useState(()=>localStorage.getItem("rushDarkMode")!=="false"),[F,C]=x.useState(!1),[j,_]=x.useState(!1),[z,I]=x.useState(!1),[M,W]=x.useState(""),[K,xe]=x.useState(""),[re,Re]=x.useState("cashier"),[De,Qe]=x.useState({}),[Ue,Rt]=x.useState(!1),[Be,Ut]=x.useState(!1),[$,X]=x.useState(""),[te,ce]=x.useState(""),[G,an]=x.useState(null),[Ve,Fn]=x.useState(!1),[on,Zr]=x.useState(""),[xi,rk]=x.useState(""),[gi,sk]=x.useState(""),[ur,cl]=x.useState(null),[hf,pl]=x.useState(!1),[gp,ul]=x.useState([]),[ak,na]=x.useState(!1),fp=x.useRef(null),ik=x.useRef(null),[Bt,ok]=x.useState({totalSales:0,totalReceived:0,pendingAmount:0,billCount:0,pendingCount:0}),[mp,lk]=x.useState([]),[xf,yp]=x.useState([]),[gf,vp]=x.useState({total:0,critical:0,normal:0}),[bp,dk]=x.useState([]),[hr,ff]=x.useState("pending"),[Dn,fi]=x.useState([]),[mf,yf]=x.useState([]),[vf,bf]=x.useState([]),[jf,Sf]=x.useState([]),[mi,wf]=x.useState([]),[JL,ck]=x.useState({total:0,count:0}),[yi,kf]=x.useState([]),[pk,uk]=x.useState({total:0,count:0}),[Sn,Pn]=x.useState({agent_ledger_group:"Agent Agents",sales_ledger:"1 Sales A/c",default_godown:"Main Location",business_name:"",business_address:"",business_phone:"",business_pan:"",smtp_host:"",smtp_port:"587",smtp_secure:"false",smtp_user:"",smtp_pass:"",smtp_from_name:"",smtp_from_email:""}),[pe,hk]=x.useState(null),[ht,wn]=x.useState(!1),[jp,xk]=x.useState(new Date().toISOString().split("T")[0]),[es,gk]=x.useState(""),[ts,fk]=x.useState(""),[xt,Sp]=x.useState("For DB"),[vi,Cf]=x.useState([]),[Nf,_f]=x.useState(!1),[ns,Af]=x.useState(!1),[wp,mk]=x.useState(()=>{const s=new Date,l=new ib(s);return{en:s,np:l}}),[yk,vk]=x.useState(!0),[xr,Rf]=x.useState(!1),[kp,Bf]=x.useState(!1),[bi,hl]=x.useState(!1),[Tf,zf]=x.useState([]),[Cp,Lf]=x.useState(0),[Np,Ef]=x.useState(!1),[Ff,Df]=x.useState(null),[Pe,Pf]=x.useState(!1),[xl,_p]=x.useState([]),[ji,gl]=x.useState(!1),[If,fl]=x.useState(!1),[ml,Of]=x.useState(!1),[yl,Wf]=x.useState(!1),[Si,bk]=x.useState("all"),[Ap,Mf]=x.useState(new Date().toISOString().split("T")[0]),[Rp,$f]=x.useState(new Date().toISOString().split("T")[0]),[ra,qf]=x.useState("columnar"),[vl,jk]=x.useState(""),Xe=()=>new Date().toISOString().split("T")[0],[rs,Bp]=x.useState(Xe()),[ss,Tp]=x.useState(Xe()),[Ge,gr]=x.useState({field:"alter_id",direction:"desc"}),[wi,Sk]=x.useState(""),[ln,wk]=x.useState("both"),[as,kk]=x.useState("non_audited"),[is,Uf]=x.useState(!1),[os,Vf]=x.useState(""),[kn,Tt]=x.useState(1),[fr,Hf]=x.useState(0),[sa,aa]=x.useState(new Set),[zp,Kf]=x.useState(!1),In=100,[Vt,ki]=x.useState({field:"alter_id",direction:"desc"}),[bl,Jf]=x.useState(null),[jl,Lp]=x.useState([]),[Yf,Qf]=x.useState(!1),[mr,Ep]=x.useState(""),[yr,Fp]=x.useState(""),[Dp,Ck]=x.useState(""),[On,Xf]=x.useState("all"),[vr,ia]=x.useState(new Set),[Wn,Gf]=x.useState({}),[Ci,Sl]=x.useState(null),[wl,Pp]=x.useState(""),[Zf,Ip]=x.useState([]),[em,tm]=x.useState(!1),[Se,Nk]=x.useState(null),[YL,QL]=x.useState(!1),[Ni,Op]=x.useState(""),[_i,Wp]=x.useState(""),[Mp,_k]=x.useState(""),[Mn,Ak]=x.useState({isRunning:!1,status:"idle",lastSyncTime:null}),[kl,Cl]=x.useState(!1),[nm,Rk]=x.useState([]),[rm,Bk]=x.useState([]),[sm,Tk]=x.useState([]),[Nl,zk]=x.useState("bills"),[Lk,am]=x.useState(!1),[im,om]=x.useState(!1),[$p,Ek]=x.useState(""),[st,Fk]=x.useState(null),[ls,lm]=x.useState(!1),[oa,Dk]=x.useState([]),[Pk,dm]=x.useState(!1),[Ik,qp]=x.useState(null),[Up,cm]=x.useState(""),[Vp,pm]=x.useState(""),[_l,um]=x.useState(""),[Al,hm]=x.useState(""),[ds,Ok]=x.useState([]),[Wk,Hp]=x.useState(null),[br,Ai]=x.useState(""),[$n,la]=x.useState(""),[qn,Ri]=x.useState(""),[dn,Bi]=x.useState(""),[Ti,Mk]=x.useState(""),[da,$k]=x.useState([]),[cs,qk]=x.useState([]),[Rl,ge]=x.useState(null),[Kp,xm]=x.useState(""),[Uk,Bl]=x.useState(null),[Tl,gm]=x.useState([]),[zl,fm]=x.useState(""),[Ll,mm]=x.useState(""),[ca,Vk]=x.useState("banks"),[zi,ym]=x.useState(null),[Li,vm]=x.useState(!1),[ps,Hk]=x.useState(new Date().toISOString().slice(0,10).replace(/-/g,"")),[Jp,Kk]=x.useState(""),[El,Yp]=x.useState(null),[Qp,Fl]=x.useState(!1),[jr,us]=x.useState({}),[Dl,Jk]=x.useState([]),[zt,bm]=x.useState(""),[hs,Yk]=x.useState({}),[Qk,jm]=x.useState(!1),[Xp,Sm]=x.useState(!1),[Gp,wm]=x.useState(""),[Pl,km]=x.useState(""),[Xk,Cm]=x.useState({}),[Z,Ei]=x.useState(null),[XL,Nm]=x.useState(!1),[Ze,Gk]=x.useState(null),[Zp,_m]=x.useState(!1),[Il,Zk]=x.useState(""),[Ol,e2]=x.useState(""),[Am,t2]=x.useState([]),[n2,Rm]=x.useState(!1),[Bm,Tm]=x.useState(!1),[zm,r2]=x.useState([]),[s2,a2]=x.useState([]),[eu,i2]=x.useState(""),[o2,Lm]=x.useState(!1),[Em,Fm]=x.useState(!1),[Dm,l2]=x.useState([]),[Pm,d2]=x.useState([]),[tu,Im]=x.useState(!1),[nu,c2]=x.useState(Xe()),[ru,p2]=x.useState(Xe()),[su,u2]=x.useState("movements"),[h2,x2]=x.useState([]),[Om,g2]=x.useState([]),[Wm,f2]=x.useState([]),[Mm,m2]=x.useState([]),[Fi,y2]=x.useState("summary"),[v2,$m]=x.useState(!1),[qm,Um]=x.useState(!1),[xs,b2]=x.useState("rbb_tally"),[Vm,j2]=x.useState("RBB Bank"),[au,S2]=x.useState(""),[iu,w2]=x.useState(""),[me,k2]=x.useState(null),[ou,Hm]=x.useState(!1),[Wl,C2]=x.useState(""),[Ml,N2]=x.useState(""),[cn,_2]=x.useState(null),[lu,Km]=x.useState(!1),[$l,A2]=x.useState(""),[ql,R2]=x.useState(""),[Ul,B2]=x.useState(""),[pn,T2]=x.useState(null),[du,cu]=x.useState(!1),[Vl,z2]=x.useState(Xe()),[Hl,L2]=x.useState(Xe()),[pa,E2]=x.useState(null),[pu,Jm]=x.useState(!1),[Kl,F2]=x.useState(""),[Jl,D2]=x.useState(""),[Di,P2]=x.useState([]),[uu,Ym]=x.useState(!1),[I2,Qm]=x.useState(!1),[Xm,Gm]=x.useState(null),[un,Zm]=x.useState(null),[ey,O2]=x.useState(""),[hu,W2]=x.useState(""),[Pi,M2]=x.useState({field:"masterId",dir:"desc"}),[ua,ty]=x.useState(""),$2=s=>{const l=new Date;return l.setMonth(l.getMonth()-s),l.toISOString().split("T")[0]},[xu,q2]=x.useState($2(5)),[gu,U2]=x.useState(Xe()),[Ii,V2]=x.useState([]),[we,H2]=x.useState({}),[Yl,K2]=x.useState([]),[ny,J2]=x.useState(0),[fu,Y2]=x.useState([]),[Un,Q2]=x.useState({}),[Oi,X2]=x.useState({key:"changed_at",dir:"desc"}),[ry,sy]=x.useState(null),[ay,mu]=x.useState([]),[G2,iy]=x.useState(!1),[oy,ly]=x.useState(!1),[ha,Z2]=x.useState(Xe()),[Ql,e3]=x.useState(""),[GL,ZL]=x.useState(""),[yu,dy]=x.useState(null),[t3,n3]=x.useState([]),[r3,cy]=x.useState(!1),[Y,s3]=x.useState(null),[xa,a3]=x.useState([]),[py,i3]=x.useState([]),[e8,o3]=x.useState(null),[at,uy]=x.useState("dashboard"),[vu,hy]=x.useState(!1),[xy,gy]=x.useState(!1),[gs,l3]=x.useState(""),[bu,d3]=x.useState(""),[ju,c3]=x.useState(null),[Su,p3]=x.useState([]),[u3,fy]=x.useState(!1),[Wi,my]=x.useState(!1),[Xl,h3]=x.useState(null),[wu,x3]=x.useState(""),[Mi,yy]=x.useState(""),[$i,g3]=x.useState("voucherDate"),[ku,vy]=x.useState("desc"),[Sr,Cu]=x.useState("assign"),[Nu,_u]=x.useState([]),[Gl,f3]=x.useState([]),[ga,m3]=x.useState([]),[Lt,Au]=x.useState(new Set),[fa,y3]=x.useState(""),[Ht,Ru]=x.useState(null),[ma,v3]=x.useState([]),[fs,b3]=x.useState(null),[Bu,j3]=x.useState({}),[S3,by]=x.useState(!1),[ya,va]=x.useState(!1),[Zl,w3]=x.useState(""),[Tu,zu]=x.useState(!1),[Vn,ed]=x.useState({name:"",phone:"",tallyLedgerName:""}),[wr,k3]=x.useState(null),[ms,td]=x.useState({}),[qi,C3]=x.useState([]),[N3,jy]=x.useState(!1),[Sy,_3]=x.useState(""),[Lu,wy]=x.useState(!1),[nd,A3]=x.useState("pending"),[rd,R3]=x.useState([]),[ys,B3]=x.useState(null),[Eu,ky]=x.useState(!1),[Fu,T3]=x.useState(""),[kr,z3]=x.useState("total"),[vs,L3]=x.useState("all"),[E3,F3]=x.useState([]),[D3,P3]=x.useState([]),[sd,Du]=x.useState(!1),[ba,Ui]=x.useState({}),[Cy,Ny]=x.useState(!1),[bs,I3]=x.useState([]),[_y,O3]=x.useState([]),[Pu,Ay]=x.useState(!1),[t8,Ry]=x.useState(null),[Hn,W3]=x.useState(Xe()),[Et,Kn]=x.useState(()=>{try{return JSON.parse(localStorage.getItem("cpForms")||"{}")}catch{return{}}}),[M3,Iu]=x.useState({}),[$3,ja]=x.useState(null),[q3,U3]=x.useState({}),[By,V3]=x.useState({}),Kt={2080:[31,32,31,32,31,30,30,30,29,30,29,31],2081:[31,31,32,31,31,31,30,29,30,29,30,30],2082:[31,31,32,32,31,30,30,29,30,29,30,30],2083:[31,32,31,32,31,30,30,30,29,29,30,31],2084:[30,32,31,32,31,30,30,30,29,30,29,31],2085:[31,31,32,31,31,31,30,29,30,29,30,30],2086:[31,31,32,32,31,30,30,29,30,29,30,30],2087:[31,32,31,32,31,30,30,30,29,29,30,31],2088:[31,31,31,32,31,31,29,30,30,29,30,30],2089:[31,31,32,31,31,31,30,29,30,29,30,30],2090:[31,32,31,32,31,30,30,30,29,29,30,31]},H3=(s,l,c)=>{var y;if(!Kt[s]||l<1||l>12||c<1||c>(((y=Kt[s])==null?void 0:y[l-1])||32))return null;let p=0;for(let S=2080;S<s;S++){if(!Kt[S])return null;p+=Kt[S].reduce((w,A)=>w+A,0)}for(let S=0;S<l-1;S++)p+=Kt[s][S];p+=c-1;const g=new Date(2023,3,14);return g.setDate(g.getDate()+p),g},Ty=()=>{let l=Math.floor((new Date-new Date(2023,3,14))/864e5);if(l<0)return 2080;for(let c=2080;c<=2090;c++){if(!Kt[c])return c;const p=Kt[c].reduce((g,y)=>g+y,0);if(l<p)return c;l-=p}return 2090},K3=(s,l,c)=>{const p=`${s}-${l}`;V3(A=>({...A,[p]:c}));let g,y,S;const w=c.replace(/[^0-9]/g,"");if(w.length>=4&&!c.includes("-"))g=parseInt(w.slice(0,2)),y=parseInt(w.slice(2,4)),S=w.length>=8?parseInt(w.slice(4,8)):Ty();else{const A=c.split("-").map(Number);A.length>=2&&(g=A[0],y=A[1],S=A[2]||Ty())}if(g>0&&y>0){const A=H3(S,y,g);if(A){const B=`${A.getFullYear()}-${String(A.getMonth()+1).padStart(2,"0")}-${String(A.getDate()).padStart(2,"0")}`;Ba(s,l,"chequeDate",B)}}};x.useEffect(()=>{const s=setInterval(()=>{const l=new Date;mk({en:l,np:new ib(l)})},1e3);return()=>clearInterval(s)},[]),x.useEffect(()=>{Object.keys(Et).length>0&&localStorage.setItem("cpForms",JSON.stringify(Et))},[Et]);const[ad,id]=x.useState("entry"),[Vi,Ou]=x.useState({}),[Wu,zy]=x.useState(!1),[He,Ly]=x.useState(null),[Ey,Fy]=x.useState(0),[Mu,Dy]=x.useState(null),[Hi,J3]=x.useState(!1),[Py,$u]=x.useState({}),[od,Y3]=x.useState([]),[le,Q3]=x.useState(null),[qu,Iy]=x.useState(!1),[n8,X3]=x.useState("dashboard"),[Ki,Oy]=x.useState([]),[Uu,Wy]=x.useState(!1),[Cr,My]=x.useState(Xe()),[Nr,G3]=x.useState({total_count:0,synced_count:0,pending_count:0,failed_count:0,total_amount:0,synced_amount:0}),[Jn,$y]=x.useState({open:!1,bill:null}),[Yn,Ji]=x.useState({cashTeller1:"",cashTeller2:"",chequeReceipt:"",qrCode:"",discount:"",bankDeposit:"",esewa:""}),[ld,qy]=x.useState(!1),[bt,Sa]=x.useState({open:!1,bill:null,items:[],loading:!1}),[Jt,_r]=x.useState([]),[Yi,wa]=x.useState(!1),[ke,js]=x.useState({stockItem:"",quantity:1,rate:"",unit:""}),[Z3,Qi]=x.useState(""),[Vu,Hu]=x.useState([]),[eC,dd]=x.useState(!1),[r8,s8]=x.useState(!1),[cd,Uy]=x.useState(!1),[a8,Ku]=x.useState(-1),[Qn,Xn]=x.useState({open:!1,billId:null,sending:!1}),[Ss,Xi]=x.useState(""),[ka,Ca]=x.useState(null),[ws,pd]=x.useState(!1),[ks,tC]=x.useState(""),[i8,o8]=x.useState(!1),[ye,Ft]=x.useState({partyName:"",voucherType:"Pending Sales Bill",date:new Date().toISOString().split("T")[0],narration:"",agent:"",items:[{name:"",quantity:1,rate:"",amount:0}]}),[Vy,Hy]=x.useState(!1),[Na,nC]=x.useState([]),[_a,rC]=x.useState([]),[Aa,sC]=x.useState([]),[Gi,aC]=x.useState([]),[l8,d8]=x.useState(""),[Ky,Cs]=x.useState(!1),[iC,ud]=x.useState(!1),[Jy,Ns]=x.useState(-1),[Ju,Zi]=x.useState(0),[Yu,eo]=x.useState(0),[oC,Yy]=x.useState([]),[Qu,c8]=x.useState([]),O=x.useCallback((s,l,c)=>{const p=Date.now();Yy(g=>[...g,{id:p,type:s,title:l,message:c}]),setTimeout(()=>{Yy(g=>g.filter(y=>y.id!==p))},4e3)},[]),Dt=x.useCallback(async()=>{try{const[s,l,c,p]=await Promise.all([IB(),OB({limit:50}),WB(),MB()]);ok(s.data||{totalSales:0,totalReceived:0,pendingAmount:0,billCount:0,pendingCount:0}),lk(Array.isArray(l.data)?l.data:[]);const g=c.data;g!=null&&g.bills?(yp(g.bills),vp(g.counts||{total:0,critical:0,normal:0})):Array.isArray(g)?(yp(g),vp({total:g.length,critical:g.length,normal:0})):(yp([]),vp({total:0,critical:0,normal:0}));const y=p.data;dk(Array.isArray(y)?y:(y==null?void 0:y.bills)||[])}catch(s){console.error("Failed to fetch data:",s)}finally{vk(!1)}},[]),_s=x.useCallback(async()=>{try{const s={fromDate:Ap.replace(/-/g,""),toDate:Rp.replace(/-/g,"")};vl&&(s.voucherTypes=vl);const c=(await rT(s)).data||{};bf(Array.isArray(c.entries)?c.entries:Array.isArray(c)?c:[])}catch(s){console.error("Failed to fetch daybook:",s),bf([])}},[Ap,Rp,vl]),hd=x.useCallback(async()=>{try{const s=await sT();Sf(Array.isArray(s.data)?s.data:[])}catch(s){console.error("Failed to fetch sacks:",s),Sf([])}},[]),Pt=x.useCallback(async()=>{Rf(!0);try{const s=rs?rs.replace(/-/g,""):void 0,l=ss?ss.replace(/-/g,""):void 0,c=(kn-1)*In,p=ln!=="billing",[g,y]=await Promise.all([p?YB({limit:In,offset:c,dateFrom:s,dateTo:l,voucherType:wi||void 0,search:K||void 0,company:ln==="both"?"both":ln}):JB({limit:In,offset:c,dateFrom:s,dateTo:l,voucherType:wi||void 0,search:K||void 0,auditStatus:as||void 0,isCritical:is?"1":void 0,criticalReason:os||void 0}),p?QB():GB()]),S=g.data||{};fi(Array.isArray(S.vouchers)?S.vouchers:[]),Hf(S.total||0),yf(Array.isArray(y.data)?y.data:[]),aa(new Set)}catch(s){console.error("Failed to fetch vouchers:",s),fi([]),Hf(0),yf([])}finally{Rf(!1)}},[rs,ss,wi,ln,kn,K,as,is,os]),Qy=x.useCallback(async s=>{var l;if(bl===s){Jf(null),Lp([]);return}Jf(s),Qf(!0);try{const c=await Rb(s);Lp(((l=c.data)==null?void 0:l.changes)||[])}catch(c){console.error("Failed to fetch change log:",c),Lp([])}finally{Qf(!1)}},[bl]);x.useEffect(()=>{const s=setTimeout(()=>{xe(M),M!==K&&Tt(1)},400);return()=>clearTimeout(s)},[M]),x.useEffect(()=>{f==="vouchers"&&Pt()},[rs,ss,wi,f,Pt]);const As=x.useCallback(async()=>{var s,l;Ef(!0);try{const c=await ZB({limit:1e3});zf(((s=c.data)==null?void 0:s.vouchers)||[]),Lf(((l=c.data)==null?void 0:l.count)||0)}catch(c){console.error("Failed to fetch deleted vouchers:",c),zf([]),Lf(0)}finally{Ef(!1)}},[]),lC=x.useCallback(async s=>{var l,c;Df(s);try{const p=await eT(s);(l=p.data)!=null&&l.success?(O("success","Restored","Voucher restored successfully"),As(),Pt()):O("error","Failed",((c=p.data)==null?void 0:c.error)||"Could not restore voucher")}catch(p){O("error","Failed",p.message||"Could not restore voucher")}finally{Df(null)}},[O,As,Pt]);x.useEffect(()=>{f==="deleted"&&As()},[f,As]);const Ar=x.useCallback(async()=>{var s;Bf(!0);try{const l={limit:1e4};mr&&(l.fromDate=mr),yr&&(l.toDate=yr);const c={};mr&&(c.fromDate=mr),yr&&(c.toDate=yr);const[p,g,y]=await Promise.all([vT(l),bT(),CT(c)]),S=((s=p.data)==null?void 0:s.transactions)||p.data||[];wf(Array.isArray(S)?S:[]);const w=g.data||{};ck({total:w.totalAmount||0,count:w.totalCount||0,linkedCount:w.linkedCount||0,linkedAmount:w.linkedAmount||0,unlinkedCount:w.unlinkedCount||0,unlinkedAmount:w.unlinkedAmount||0}),Nk(y.data||null)}catch(l){console.error("Failed to fetch Fonepay:",l),wf([])}finally{Bf(!1)}},[mr,yr]),dC=x.useCallback(async()=>{var s;tm(!0);try{const c=((s=(await kT(mr||void 0,yr||void 0)).data)==null?void 0:s.suggestions)||[],p={};for(const g of c)p[g.transactionId]={...g.matchedReceipt,confidence:g.confidence||"low",warning:g.warning||null};Gf(p),c.length>0&&Xf("suggested")}catch(l){console.error("Auto-match failed:",l)}finally{tm(!1)}},[mr,yr]),cC=x.useCallback(async()=>{const s=[];for(const l of vr){const c=Wn[l];c&&s.push({transactionId:l,voucherNumber:c.voucherNumber,partyName:c.partyName,companyName:c.companyName,billDate:c.voucherDate})}if(s.length!==0)try{await wT(s);const l={...Wn};for(const c of s)delete l[c.transactionId];Gf(l),ia(new Set),Ar()}catch(l){console.error("Bulk confirm failed:",l)}},[vr,Wn,Ar]),pC=x.useCallback(async s=>{try{await ST(s),Ar()}catch(l){console.error("Unlink failed:",l)}},[Ar]),uC=x.useCallback(async(s,l)=>{try{await jT({transactionId:s,voucherNumber:l.bill_name,partyName:l.party_name,companyName:"FOR DB",billDate:l.bill_date}),Sl(null),Pp(""),Ip([]),Ar()}catch(c){console.error("Manual link failed:",c)}},[Ar]),hC=x.useCallback(async s=>{var l;Sl(s),Pp("");try{const c=await Tb();Ip(((l=c.data)==null?void 0:l.bills)||c.data||[])}catch(c){console.error("Failed to load bills:",c),Ip([])}},[]),to=x.useCallback(async()=>{var s;hl(!0);try{const l={limit:1e4};Ni&&(l.fromDate=Ni),_i&&(l.toDate=_i);const[c,p]=await Promise.all([NT(l),_T()]),g=((s=c.data)==null?void 0:s.transactions)||c.data||[];kf(Array.isArray(g)?g:[]);const y=p.data||{};uk({total:y.accountBalance||0,count:g.length||0})}catch(l){console.error("Failed to fetch RBB:",l),kf([])}finally{hl(!1)}},[Ni,_i]),xd=x.useCallback(async()=>{try{const s=await AT();Ak(s.data||{isRunning:!1,status:"idle"})}catch(s){console.error("Failed to fetch RBB status:",s)}},[]),xC=async()=>{Cl(!0);try{await BT(),await xd()}catch(s){console.error("Failed to start RBB service:",s)}finally{Cl(!1)}},gC=async()=>{Cl(!0);try{await TT(),await xd()}catch(s){console.error("Failed to stop RBB service:",s)}finally{Cl(!1)}},fC=async()=>{hl(!0);try{await RT(),setTimeout(async()=>{await to(),await xd()},3e3)}catch(s){console.error("Failed to trigger RBB sync:",s),hl(!1)}},no=x.useCallback(async()=>{var s;_f(!0);try{const l=await DT();Cf(((s=l.data)==null?void 0:s.invoices)||[])}catch(l){console.error("Failed to fetch pending invoices:",l),Cf([])}finally{_f(!1)}},[]),mC=x.useCallback(async()=>{var s;try{const l=await mT();(s=l.data)!=null&&s.settings&&Pn(c=>({...c,...l.data.settings}))}catch(l){console.error("Failed to fetch app settings:",l)}},[]),Ra=x.useCallback(async()=>{wn(!0);try{const s=await vz();hk(s.data),s.data.defaultCompany&&Sp(s.data.defaultCompany)}catch(s){console.error("Failed to fetch voucher lock status:",s)}wn(!1)},[]),Rr=x.useCallback(async()=>{try{await yT(Sn),O("success","Settings Saved","Configuration updated successfully")}catch(s){console.error("Failed to save settings:",s),O("error","Save Failed","Could not save settings")}},[Sn,O]),gd=x.useCallback(async()=>{var s;Wy(!0);try{const[l,c]=await Promise.all([IT({fromDate:Cr,toDate:Cr}),OT(Cr)]);Oy(((s=l.data)==null?void 0:s.invoices)||[]),G3(c.data||{total_count:0,synced_count:0,pending_count:0,failed_count:0,total_amount:0,synced_amount:0})}catch(l){console.error("Failed to fetch bill history:",l),Oy([])}finally{Wy(!1)}},[Cr]),Xy=x.useCallback(async()=>{var s,l;Af(!0);try{const p=(await PT()).data;p.success?(O("success"," Sync Complete",`${p.synced} synced, ${p.failed} failed`),no()):O("error","Sync Failed",p.error||"Unknown error")}catch(c){O("error","Sync Failed",((l=(s=c.response)==null?void 0:s.data)==null?void 0:l.error)||c.message)}finally{Af(!1)}},[O,no]),yC=x.useCallback(async()=>{var g,y,S,w;const[s,l,c,p]=await Promise.allSettled([zT(),Bb(),ET(),hT()]);if(s.status==="fulfilled"){const A=((g=s.value.data)==null?void 0:g.items)||[];nC(Array.isArray(A)?A:[])}else console.error("Failed to load stock items:",s.reason);if(l.status==="fulfilled"){const A=((y=l.value.data)==null?void 0:y.ledgers)||[];rC(Array.isArray(A)?A:[])}else console.error("Failed to load parties:",l.reason);if(c.status==="fulfilled"){const A=((S=c.value.data)==null?void 0:S.agents)||[];sC(Array.isArray(A)?A:[])}else console.error("Failed to load agents:",c.reason);if(p.status==="fulfilled"){const A=((w=p.value.data)==null?void 0:w.voucherTypes)||[];aC(Array.isArray(A)?A:[])}else console.error("Failed to load voucher types:",p.reason)},[]),Gy=x.useCallback(async()=>{var s,l;try{const p=((s=(await pT()).data)==null?void 0:s.connected)||!1;if(Pf(p),p)try{const g=await uT();_p(((l=g.data)==null?void 0:l.companies)||[])}catch{}else _p([])}catch{Pf(!1),_p([])}},[]),Zy=x.useCallback(async()=>{var s;try{const l=await iT();gl(((s=l.data)==null?void 0:s.isRunning)||!1)}catch{gl(!1)}},[]),vC=x.useCallback(async()=>{var s;fl(!0);try{const l=await oT();gl(((s=l.data)==null?void 0:s.isRunning)||!1),O("success","Sync Started","Auto-sync service is now running")}catch{O("error","Failed","Could not start sync service")}finally{fl(!1)}},[O]),bC=x.useCallback(async()=>{var s;fl(!0);try{const l=await lT();gl(((s=l.data)==null?void 0:s.isRunning)||!1),O("success","Sync Stopped","Auto-sync service has been stopped")}catch{O("error","Failed","Could not stop sync service")}finally{fl(!1)}},[O]),ev=x.useCallback(async()=>{Of(!0);try{await dT(),await Promise.all([Dt(),_s(),Pt()]),O("success","Refreshed","Data synced from Tally")}catch{O("error","Sync Failed","Could not sync with Tally")}finally{Of(!1)}},[Dt,_s,Pt,O]),tv=x.useCallback(async()=>{var s,l;Wf(!0);try{const c=await cT();if((s=c.data)!=null&&s.success){const{deleted:p,checked:g,tallyCount:y}=c.data;p>0?(O("success","Deleted Synced",`Found ${p} deleted vouchers (checked ${g} local vs ${y} in Tally)`),await Promise.all([Dt(),Pt(),As()])):O("success","No Deletions",`All ${g} local vouchers still exist in Tally`)}else O("error","Sync Failed",((l=c.data)==null?void 0:l.error)||"Could not sync deleted vouchers")}catch(c){O("error","Sync Failed",c.message||"Could not sync deleted vouchers")}finally{Wf(!1)}},[Dt,Pt,As,O]);x.useEffect(()=>{Dt(),_s(),hd(),Pt(),no(),mC(),Gy(),Zy(),jt.on("bill:new",l=>{O("bill","New Bill Created",`${l.voucherNumber}  ${l.partyName}  ${k(l.amount)}`),Dt()}),jt.on("payment:created",()=>Dt()),jt.on("sync:update",()=>{Dt(),_s()}),jt.on("dispatch:updated",Dt),jt.on("sack:statusChanged",hd);const s=setInterval(()=>{Gy(),Zy()},15e3);return()=>{jt.off("bill:new"),jt.off("payment:created"),jt.off("sync:update"),jt.off("dispatch:updated"),jt.off("sack:statusChanged"),clearInterval(s)}},[]),x.useEffect(()=>{_s()},[_s]),x.useEffect(()=>{f==="rbb"&&to()},[Ni,_i,f,to]),x.useEffect(()=>{f==="bill-history"&&gd()},[Cr,f,gd]);const ro=x.useCallback(s=>{const l=s||ps;vm(!0),qz(l).then(c=>ym(c.data)).catch(()=>{}).finally(()=>vm(!1))},[ps]);x.useEffect(()=>{f==="eod-recon"&&!zi&&!Li&&ro()},[f]),x.useEffect(()=>{f==="data-completeness"&&!El&&(Fl(!0),Mb().then(s=>Yp(s.data)).catch(()=>{}).finally(()=>Fl(!1)))},[f]);const Xu=async s=>{const l=s||zt;if(l){Sm(!0);try{const c=await Vz(l);Yk(p=>({...p,[l]:c.data}))}catch(c){console.error("Hierarchy sync error:",c)}finally{Sm(!1)}}},jC=s=>{bm(s),wm(""),km(""),Cm({}),hs[s]||Xu(s)},SC=async(s,l)=>{Nm(!0),Ei({name:s,company:l,loading:!0});try{const c=await Hz(s,l);Ei({...c.data.ledger,company:l})}catch(c){Ei({name:s,company:l,error:c.message||"Failed to fetch"})}finally{Nm(!1)}};x.useEffect(()=>{f==="ledger-hierarchy"&&Dl.length===0&&(jm(!0),Uz().then(s=>{const l=s.data.companies||[];if(Jk(l),l.length>0&&!zt){const c=l[0];bm(c),hs[c]||Xu(c)}}).catch(()=>{}).finally(()=>jm(!1)))},[f]),x.useEffect(()=>{localStorage.setItem("rushDarkMode",N.toString()),document.documentElement.setAttribute("data-theme",N?"dark":"light")},[N]);const wC=()=>{R(s=>!s)},fd=x.useCallback(async(s=!1)=>{am(!0);try{const[l,c,p,g]=await Promise.all([Tb("",s),WT(s),MT(s),$T()]);Rk(l.data.bills||[]),Bk(c.data.summary||[]),Tk(p.data.parties||[]),Fk(g.data)}catch(l){console.error("Outstanding fetch error:",l)}am(!1)},[]),kC=async()=>{om(!0);try{await qT(),await fd(ls)}catch(s){console.error("Outstanding sync error:",s)}om(!1)},md=x.useCallback(async()=>{dm(!0);try{const s=await Fz();Dk(s.data.banks||[])}catch(s){console.error("Bank names fetch error:",s)}dm(!1)},[]),nv=async()=>{var s,l;if(!(!_l.trim()||!Al.trim()))try{await Dz({shortName:_l,fullName:Al}),um(""),hm(""),md()}catch(c){O("error","Error",((l=(s=c.response)==null?void 0:s.data)==null?void 0:l.error)||c.message)}},rv=async s=>{var l,c;if(!(!Up.trim()||!Vp.trim()))try{await Pz(s,{shortName:Up,fullName:Vp}),qp(null),md()}catch(p){O("error","Error",((c=(l=p.response)==null?void 0:l.data)==null?void 0:c.error)||p.message)}},CC=async(s,l)=>{var c,p;if(confirm(`Delete "${l}"?`))try{await Iz(s),md()}catch(g){O("error","Error",((p=(c=g.response)==null?void 0:c.data)==null?void 0:p.error)||g.message)}},Gu=s=>{const l=(s||"").match(/9[0-9]{9}/g);return l?[...new Set(l)]:[]},Rs=x.useCallback(async()=>{try{const[s,l]=await Promise.all([Oz(),Wb()]),c=s.data.mappings||[],p=l.data.mappings||[],g={};for(const y of p){const S=y.party_name.toLowerCase();g[S]||(g[S]=[]),g[S].push(y.phone)}for(const y of c){const S=g[y.odbc_party.toLowerCase()]||[],w=Gu(y.odbc_party),A=[...new Set([...S,...w])];y._phones=A.join(", "),y._phonesArr=A}Ok(c),gm(p)}catch(s){console.error("Ledger mappings fetch error:",s)}},[]),NC=async()=>{var s,l;if(!(!qn.trim()||!dn.trim()))try{await Vd({billingParty:qn,odbcParty:dn});const c=Gu(dn);for(const p of c)try{await Hd({phone:p,partyName:dn})}catch{}Ri(""),Bi(""),Rs()}catch(c){O("error","Error",((l=(s=c.response)==null?void 0:s.data)==null?void 0:l.error)||c.message)}},sv=async s=>{var l,c;if(!(!br.trim()||!$n.trim()))try{await Wz(s,{billingParty:br,odbcParty:$n}),Hp(null),Rs()}catch(p){O("error","Error",((c=(l=p.response)==null?void 0:l.data)==null?void 0:c.error)||p.message)}},_C=async(s,l)=>{var c,p;if(confirm(`Delete mapping for "${l}"?`))try{await Mz(s),Rs()}catch(g){O("error","Error",((p=(c=g.response)==null?void 0:c.data)==null?void 0:p.error)||g.message)}},av=async(s,l)=>{var p,g;const c=l.split(",").map(y=>y.trim()).filter(y=>/^9[0-9]{9}$/.test(y));if(c.length===0)return O("error","Invalid","Enter valid 10-digit phone number(s) starting with 9");try{for(const y of c)await Hd({phone:y,partyName:s.odbc_party});O("success","Saved",`${c.length} phone(s) mapped to ${s.odbc_party}`),Rs()}catch(y){O("error","Error",((g=(p=y.response)==null?void 0:p.data)==null?void 0:g.error)||y.message)}},iv=x.useCallback(async()=>{try{const s=await Wb();gm(s.data.mappings||[])}catch(s){console.error("Phone mappings fetch error:",s)}},[]),ov=async()=>{var s,l;if(!(!zl.trim()||!Ll.trim()))try{await Hd({phone:zl,partyName:Ll}),fm(""),mm(""),iv()}catch(c){O("error","Error",((l=(s=c.response)==null?void 0:s.data)==null?void 0:l.error)||c.message)}},AC=async s=>{var l,c;if(confirm(`Delete phone mapping for "${s}"?`))try{await $z(s),iv()}catch(p){O("error","Error",((c=(l=p.response)==null?void 0:l.data)==null?void 0:c.error)||p.message)}},lv=x.useCallback(async()=>{_m(!0);try{const s=Il?Il.replace(/-/g,""):"",l=Ol?Ol.replace(/-/g,""):"",c=await UT(s,l);Gk(c.data)}catch(s){console.error("P&L fetch error:",s)}_m(!1)},[Il,Ol]),dv=x.useCallback(async()=>{Hm(!0);try{const s=Wl?Wl.replace(/-/g,""):"",l=Ml?Ml.replace(/-/g,""):"",c=await VT(s,l);k2(c.data)}catch(s){console.error("Balance Sheet fetch error:",s)}Hm(!1)},[Wl,Ml]),cv=x.useCallback(async()=>{Km(!0);try{const s=$l?$l.replace(/-/g,""):"",l=ql?ql.replace(/-/g,""):"",c=await HT(s,l);_2(c.data)}catch(s){console.error("Trial Balance fetch error:",s)}Km(!1)},[$l,ql]),pv=x.useCallback(async()=>{cu(!0);try{const s=Vl?Vl.replace(/-/g,""):"",l=Hl?Hl.replace(/-/g,""):"";if(!s||!l){alert("Please select both From and To dates"),cu(!1);return}const c=await KT(s,l);T2(c.data)}catch(s){console.error("Cash Flow fetch error:",s)}cu(!1)},[Vl,Hl]),uv=x.useCallback(async()=>{Jm(!0);try{const s=Kl?Kl.replace(/-/g,""):"",l=Jl?Jl.replace(/-/g,""):"",c=await JT(s,l);E2(c.data)}catch(s){console.error("Ratio Analysis fetch error:",s)}Jm(!1)},[Kl,Jl]),hv=x.useCallback(async()=>{var s,l,c,p,g,y;ly(!0);try{const w={date:ha.replace(/-/g,"")};Ql&&(w.search=Ql);const A=await lz(w);V2(((s=A.data)==null?void 0:s.bills)||[]),H2(((l=A.data)==null?void 0:l.totals)||{}),K2(((c=A.data)==null?void 0:c.pendingBills)||[]),J2(((p=A.data)==null?void 0:p.pendingTotal)||0),Y2(((g=A.data)==null?void 0:g.alterations)||[]),Q2(((y=A.data)==null?void 0:y.voucherCounts)||{})}catch(S){console.error("Columnar fetch error:",S)}ly(!1)},[ha,Ql]),RC=x.useCallback(async s=>{var l;if(yu===s){dy(null);return}dy(s),cy(!0);try{const c=ha.replace(/-/g,""),p=await dz({date:c,party:s});n3(((l=p.data)==null?void 0:l.vouchers)||[])}catch(c){console.error("Columnar details error:",c)}cy(!1)},[ha,yu]),xv=x.useCallback(async()=>{var s;Ym(!0);try{const l=xu.replace(/-/g,""),c=gu.replace(/-/g,""),p=await oz(l,c);P2(((s=p.data)==null?void 0:s.vouchers)||[])}catch(l){console.error("XML vouchers fetch error:",l)}Ym(!1)},[xu,gu]),BC=async s=>{Qm(!0),Gm(s);try{const l=await zb(s);Zm(l.data)}catch(l){console.error("XML detail fetch error:",l),Zm({error:l.message})}Qm(!1)},gv=x.useCallback(async()=>{Rm(!0);try{const s=await YT();t2(s.data.groups||[])}catch(s){console.error("Stock groups fetch error:",s)}Rm(!1)},[]),TC=async()=>{Tm(!0);try{await QT(),await gv()}catch(s){console.error("Stock groups sync error:",s)}Tm(!1)},Zu=x.useCallback(async()=>{Lm(!0);try{const[s,l]=await Promise.all([XT(eu),GT()]);r2(s.data.prices||[]),a2(l.data.levels||[])}catch(s){console.error("Price lists fetch error:",s)}Lm(!1)},[eu]),zC=async()=>{Fm(!0);try{await ZT(),await Zu()}catch(s){console.error("Price lists sync error:",s)}Fm(!1)},fv=x.useCallback(async()=>{Im(!0);try{const s=nu.replace(/-/g,""),l=ru.replace(/-/g,""),[c,p]=await Promise.all([ez(s,l),tz(s,l)]);l2(c.data.movements||[]),d2(p.data.summary||[])}catch(s){console.error("Inventory movement fetch error:",s)}Im(!1)},[nu,ru]),eh=x.useCallback(async()=>{$m(!0);try{const[s,l,c,p]=await Promise.all([nz(xs),rz(xs),sz(),az()]);x2(s.data.matches||[]),g2(l.data.summary||[]),f2(c.data.transactions||[]),m2(p.data.transactions||[])}catch(s){console.error("Recon fetch error:",s)}$m(!1)},[xs]),LC=async()=>{var s,l;Um(!0);try{const c=au?au.replace(/-/g,""):"",p=iu?iu.replace(/-/g,""):"";await iz(xs,Vm,c,p),await eh()}catch(c){console.error("Auto-match error:",c),alert("Auto-match failed: "+(((l=(s=c.response)==null?void 0:s.data)==null?void 0:l.error)||c.message))}Um(!1)},yd=async()=>{hy(!0);try{const s=await cz();s3(s.data.reconciliation),a3(s.data.merged||[]),i3(s.data.odbcCheques||[]),o3(s.data.summary)}catch(s){console.error("Cheque recon error:",s)}hy(!1)},mv=async()=>{var s,l;fy(!0);try{const c=await pz({});p3(((s=c.data)==null?void 0:s.cheques)||[]),h3(((l=c.data)==null?void 0:l.stats)||null)}catch(c){console.error("Cheque vouchers fetch error:",c)}fy(!1)},EC=async()=>{var s,l,c,p;my(!0);try{const g=await Uh();(s=g.data)!=null&&s.success?(O("success","Synced",`${g.data.synced} vouchers synced from Tally`),await mv()):O("error","Sync Failed",((l=g.data)==null?void 0:l.error)||"Unknown error")}catch(g){O("error","Sync Failed",((p=(c=g.response)==null?void 0:c.data)==null?void 0:p.error)||g.message)}my(!1)},yv=async()=>{Iy(!0);try{const s=await Eb({limit:100});Y3(s.data.logs||[]),Q3(s.data.stats||null)}catch(s){console.error("Cheque management fetch error:",s)}Iy(!1)},so=async()=>{by(!0);try{const[s,l,c,p]=await Promise.all([Vh(),Ib(),Bz(),Tz()]);_u(s.data.staff||[]),f3(l.data.batches||[]),m3(c.data.cheques||[]),b3(p.data.stats||null)}catch(s){console.error("Collection fetch error:",s)}by(!1),zz().then(s=>j3(s.data.balances||{})).catch(()=>{})},th=async()=>{ky(!0);try{const s=await Ez();R3(s.data.rows||[]),B3(s.data.summary||null),F3(s.data.allBillingParties||[]),P3(s.data.allOdbcParties||[]),Ui({})}catch(s){console.error("LedgerBoth fetch error:",s)}ky(!1)},FC=async()=>{const s=Object.entries(ba).filter(([,p])=>p);if(s.length===0)return;Ny(!0);let l=0,c=0;for(const[p,g]of s)try{const[y,...S]=p.split(":"),w=S.join(":");await Vd({billingParty:y==="billing"?w:g,odbcParty:y==="cheque"?w:g}),l++}catch{c++}O("success","Bulk Mapped",`${l} mapped${c?`, ${c} failed`:""}`),Du(!1),Ui({}),th(),Ny(!1)},vv=async()=>{jy(!0);try{const s=await Lz();C3(s.data.cheques||[])}catch(s){console.error("Cheque receivable fetch error:",s)}jy(!1)},DC=async()=>{var s,l;wy(!0);try{await Uh(),O("success","ODBC Synced","Vouchers re-synced from Tally"),await vv()}catch(c){O("error","Sync Failed",((l=(s=c.response)==null?void 0:s.data)==null?void 0:l.error)||c.message)}wy(!1)},PC=async()=>{var s,l;if(!(!fa||Lt.size===0)){va(!0);try{await Nz({staffId:parseInt(fa),chequeIds:Array.from(Lt)}),Au(new Set),O("success","Batch Created",`${Lt.size} cheques assigned`),await so();const p=((await Ib({status:"assigned"})).data.batches||[])[0];if(p){const g=await Az(p.id);k3(g.data)}}catch(c){O("error","Error",((l=(s=c.response)==null?void 0:s.data)==null?void 0:l.error)||c.message)}va(!1)}},nh=async s=>{try{const l=await _z(s);Ru(l.data.batch),v3(l.data.items||[]);const c={};(l.data.items||[]).forEach(p=>{c[p.id]=p.status}),td(c)}catch(l){console.error(l)}},IC=async()=>{var s,l;if(Ht){va(!0);try{const c=Object.entries(ms).map(([p,g])=>({itemId:parseInt(p),status:g,notes:""}));await Ob(Ht.id,{updates:c}),O("success","Saved","Batch items updated"),await nh(Ht.id),await so()}catch(c){O("error","Error",((l=(s=c.response)==null?void 0:s.data)==null?void 0:l.error)||c.message)}va(!1)}},OC=async()=>{var s,l;if(Ht){va(!0);try{const c=Object.entries(ms).map(([g,y])=>({itemId:parseInt(g),status:y,notes:""}));await Ob(Ht.id,{updates:c});const p=await Rz(Ht.id);p.data.success?O("success","Receipt Created","Tally receipt created successfully"):O("error","Tally Error",p.data.error||"Failed to create receipt"),Ru(null),await so()}catch(c){O("error","Error",((l=(s=c.response)==null?void 0:s.data)==null?void 0:l.error)||c.message)}va(!1)}},WC=async()=>{var s,l;if(!(!Vn.name||!Vn.tallyLedgerName))try{await kz(Vn),ed({name:"",phone:"",tallyLedgerName:""}),zu(!1),O("success","Staff Added",`${Vn.name} added`);const c=await Vh();_u(c.data.staff||[])}catch(c){O("error","Error",((l=(s=c.response)==null?void 0:s.data)==null?void 0:l.error)||c.message)}},MC=async s=>{if(confirm("Deactivate this staff?"))try{await Cz(s);const l=await Vh();_u(l.data.staff||[])}catch(l){O("error","Error",l.message)}},Bs=async(s,l)=>{var c,p;try{await uz(s,{status:l}),await yd()}catch(g){alert("Status update failed: "+(((p=(c=g.response)==null?void 0:c.data)==null?void 0:p.error)||g.message))}},$C=async()=>{var s,l;gy(!0);try{await hz(),await yd()}catch(c){alert("Sync failed: "+(((l=(s=c.response)==null?void 0:s.data)==null?void 0:l.error)||c.message))}gy(!1)},qC=(s,l)=>{if(!s||!l.length)return"";const c=ds.find(A=>A.billing_party.toLowerCase()===s.toLowerCase().trim());if(c){const A=l.find(B=>B.name.toLowerCase()===c.odbc_party.toLowerCase());if(A)return A.name}const p=s.toLowerCase().trim(),g=l.find(A=>A.name.toLowerCase().trim()===p);if(g)return g.name;const y=p.split(",")[0].trim(),S=l.find(A=>A.name.toLowerCase().trim().split(",")[0].trim()===y);if(S)return S.name;const w=l.find(A=>A.name.toLowerCase().startsWith(y)||y.startsWith(A.name.toLowerCase().split(",")[0].trim()));return w?w.name:""},ao=async s=>{Ay(!0);try{const l=(s||Hn).replace(/-/g,""),[c,p,g,y]=await Promise.all([xz(l),Lb(),mz(l),Eb({limit:100})]),S=c.data.vouchers||[],w=new Set((g.data.masterIds||[]).map(String)),A=S.filter(Q=>!w.has(String(Q.masterId))),B=p.data.parties||[];I3(A),O3(B);const P=(y.data.logs||[]).filter(Q=>Q.voucher_date===l);w.size>0?(Fy(w.size),Dy(P)):(Fy(0),Dy(null));const V={};for(const Q of A)if(!V[Q.masterId]){const Me=qC(Q.partyName,B),Te=(Q.partyName||"").split(",")[0].trim();V[Q.masterId]={odbcParty:Me,chequeLines:[{bankName:"",chequeNumber:"",chequeDate:"",amount:String(Q.chequeReceiptAmount||""),accountHolderName:Te}]}}Kn(Q=>({...V,...Q}))}catch(l){console.error("Cheque post fetch error:",l)}Ay(!1)},rh=(s,l,c)=>{Kn(p=>({...p,[s]:{...p[s],[l]:c}}))},Ba=(s,l,c,p)=>{Kn(g=>{const y={...g[s]},S=[...y.chequeLines];return S[l]={...S[l],[c]:p},{...g,[s]:{...y,chequeLines:S}}})},vd=(s,l,c)=>{Kn(p=>{const g={...p[s]},y=[...g.chequeLines];return y[l]={...y[l],...c},{...p,[s]:{...g,chequeLines:y}}})},bv=(s,l)=>{Kn(c=>{const p={...c[s]},g=p.chequeLines||[],y=g[g.length-1]||{},S=parseInt(y.chequeNumber),w=S&&!isNaN(S)?String(S+1):"",A=y.bankName||"";return{...c,[s]:{...p,chequeLines:[...g,{bankName:A,chequeNumber:w,chequeDate:"",amount:"",accountHolderName:y.accountHolderName||"",_hasSlash:!!A}]}}})},UC=(s,l,c)=>{Kn(p=>{const g=p[s];if(!g)return p;const y=g.chequeLines,S=y.reduce((A,B)=>A+(parseFloat(B.amount)||0),0),w=c-S;if(l===y.length-1&&w>.01){const A=y[y.length-1]||{},B=parseInt(A.chequeNumber),D=B&&!isNaN(B)?String(B+1):"",P=A.bankName||"";return{...p,[s]:{...g,chequeLines:[...y,{bankName:P,chequeNumber:D,chequeDate:"",amount:String(Math.round(w*100)/100),accountHolderName:A.accountHolderName||"",_hasSlash:!!P}]}}}return p})},VC=(s,l)=>{Kn(c=>{const p={...c[s]},g=p.chequeLines.filter((y,S)=>S!==l);return{...c,[s]:{...p,chequeLines:g.length?g:[{bankName:"",chequeNumber:"",chequeDate:"",amount:"",accountHolderName:""}]}}})},HC=async s=>{var g,y;const l=Et[s.masterId];if(!(l!=null&&l.odbcParty))return alert("Please select ODBC party name");const c=l.chequeLines.reduce((S,w)=>S+(parseFloat(w.amount)||0),0);if(Math.abs(c-s.chequeReceiptAmount)>.01)return alert(`Cheque lines total (${k(c)}) does not match receipt amount (${k(s.chequeReceiptAmount)}). Please adjust.`);if(l.chequeLines.some(S=>!S.bankName||!S.chequeNumber||!S.amount))return alert("Please fill cheque number, bank name, and amount for all lines");Ry(s.masterId);try{const S=await gz({partyName:l.odbcParty,chequeLines:l.chequeLines.map(w=>({bankName:w.bankName,chequeNumber:w.chequeNumber,chequeDate:(w.chequeDate||"").replace(/-/g,""),amount:parseFloat(w.amount),accountHolderName:w.accountHolderName||"",partyOverride:w.partyOverride||""})),date:s.voucherDate,narration:`Cheque from ${s.partyName}`});if(S.data.success){if(alert(`Synced ${l.chequeLines.length} cheques for ${s.partyName} to ODBC`),s.partyName&&l.odbcParty&&s.partyName.toLowerCase()!==l.odbcParty.toLowerCase())try{await Vd({billingParty:s.partyName,odbcParty:l.odbcParty})}catch{}Kn(w=>{const A={...w};return delete A[s.masterId],A}),ao(Hn)}else alert("Sync failed: "+(S.data.error||"Unknown error"))}catch(S){alert("Sync error: "+(((y=(g=S.response)==null?void 0:g.data)==null?void 0:y.error)||S.message))}Ry(null)},jv=s=>{if(!s)return"";const l=new Date(s);if(isNaN(l.getTime()))return s;const c=new Date(2023,3,14);let p=Math.floor((l-c)/864e5);if(p<0)return s;const g=["Bai","Jes","Asa","Shr","Bhd","Asw","Kar","Man","Pou","Mag","Fal","Cha"];let y=2080,S=0,w=1;for(y=2080;y<=2090&&Kt[y];y++){const A=Kt[y].reduce((B,D)=>B+D,0);if(p<A)break;p-=A}if(Kt[y]){for(S=0;S<12&&!(p<Kt[y][S]);S++)p-=Kt[y][S];w=p+1}return`${String(w).padStart(2,"0")}-${g[S]}-${y}`},KC=async()=>{var l,c,p;const s=bs.filter(g=>Vi[g.masterId]);if(!s.length)return alert("No receipts selected");for(const g of s){const y=Et[g.masterId];if(!(y!=null&&y.odbcParty))return alert(`Select ODBC party for ${g.partyName}`);const S=y.chequeLines.reduce((w,A)=>w+(parseFloat(A.amount)||0),0);if(Math.abs(S-g.chequeReceiptAmount)>.01)return alert(`Amount mismatch for ${g.partyName}`);if(y.chequeLines.some(w=>!w.bankName||!w.chequeNumber||!w.amount))return alert(`Fill all fields for ${g.partyName}`)}zy(!0);try{const g={receipts:s.map(S=>{const w=Et[S.masterId];return{masterId:S.masterId,partyName:w.odbcParty,billingPartyName:S.partyName,chequeLines:w.chequeLines.map(A=>({bankName:A.bankName,chequeNumber:A.chequeNumber,chequeDate:(A.chequeDate||"").replace(/-/g,""),amount:parseFloat(A.amount),accountHolderName:A.accountHolderName||"",partyOverride:A.partyOverride||""})),narration:`Cheque from ${S.partyName}`}}),date:(Hn||"").replace(/-/g,""),billingCompany:"For DB"},y=await fz(g);if(Ly(y.data),(l=y.data.summary)!=null&&l.journalCreated){for(const S of s){const w=Et[S.masterId];if(S.partyName&&(w!=null&&w.odbcParty)&&S.partyName.toLowerCase()!==w.odbcParty.toLowerCase())try{await Vd({billingParty:S.partyName,odbcParty:w.odbcParty})}catch{}}Kn(S=>{const w={...S};for(const A of s)delete w[A.masterId];return w})}}catch(g){alert("Sync error: "+(((p=(c=g.response)==null?void 0:c.data)==null?void 0:p.error)||g.message))}zy(!1)},JC=()=>{localStorage.removeItem("rush_user"),t(null),m(new Set),b("dashboard")},YC=async s=>{try{const c=(await xT(s)).data.allowedPages||[];m(new Set(c))}catch{m(new Set)}},de=s=>!e||(e==null?void 0:e.role)==="admin"||h.size===0?!0:h.has(s);x.useEffect(()=>{e!=null&&e.id&&YC(e.id)},[e==null?void 0:e.id]);const QC=async s=>{Rt(!0);try{const l=await gT(s),c={};for(const p of l.data.permissions||[])c[p.pageKey]=p.visible;Qe(c)}catch{Qe({})}Rt(!1)},XC=async()=>{var s,l;Ut(!0);try{const p=Object.keys(Hh).map(g=>({pageKey:g,visible:De[g]!==void 0?De[g]:!0}));await fT(re,p),alert("Permissions saved!")}catch(c){alert("Save error: "+(((l=(s=c.response)==null?void 0:s.data)==null?void 0:l.error)||c.message))}Ut(!1)},GC=s=>{if(X(s),fp.current&&clearTimeout(fp.current),s.trim().length<2){ul([]),na(!1);return}fp.current=setTimeout(async()=>{try{const l=await LT(s.trim());ul(l.data.ledgers||[]),na(!0)}catch{ul([])}},300)},ZC=s=>{X(s),na(!1),ul([]),sh(s)},sh=async s=>{var l,c;if(s){ce(s),Fn(!0),Zr(""),an(null);try{const p=xi?xi.replace(/-/g,""):void 0,g=gi?gi.replace(/-/g,""):void 0,y=await Kz(s,p,g);an(y.data)}catch(p){Zr(((c=(l=p.response)==null?void 0:l.data)==null?void 0:c.error)||p.message)}Fn(!1)}},eN=async s=>{if(s){pl(!0);try{const l=await zb(s);cl(l.data)}catch(l){cl({error:l.message})}pl(!1)}},ae=s=>{de(s)&&(b(s),C(!1),s==="sacks"&&hd(),s==="daybook"&&_s(),s==="vouchers"&&Pt(),s==="fonepay"&&Ar(),s==="rbb"&&(to(),xd()),s==="bill-history"&&gd(),s==="create-bill"&&yC(),s==="outstanding"&&fd(ls),s==="bank-names"&&(md(),Rs(),Bb().then(l=>$k((l.data.ledgers||[]).map(c=>c.name))).catch(()=>{}),Lb().then(l=>qk((l.data.parties||[]).map(c=>c.name))).catch(()=>{})),s==="profit-loss"&&lv(),s==="stock-groups"&&gv(),s==="price-lists"&&Zu(),s==="inventory-movement"&&fv(),s==="bank-recon"&&eh(),s==="balance-sheet"&&dv(),s==="trial-balance"&&cv(),s==="cash-flow"&&pv(),s==="ratio-analysis"&&uv(),s==="xml-viewer"&&xv(),s==="columnar"&&hv(),s==="eod-recon"&&ro(),s==="cheques"&&(yd(),yv()),s==="cheque-post"&&(ao(),Rs()),s==="cheque-vouchers"&&mv(),s==="collection"&&so(),s==="ledger-both"&&th(),s==="settings"&&Ra())},Sv=s=>{$y({open:!0,bill:s}),Ji({cashTeller1:"",cashTeller2:"",chequeReceipt:"",qrCode:"",discount:"",bankDeposit:"",esewa:""})},bd=()=>{$y({open:!1,bill:null}),Ji({cashTeller1:"",cashTeller2:"",chequeReceipt:"",qrCode:"",discount:"",bankDeposit:"",esewa:""})},tN=async s=>{Sa({open:!0,bill:s,items:[],loading:!0}),_r([]),wa(!1),Ku(-1),js({stockItem:"",quantity:1,rate:"",unit:""}),Qi(""),Hu([]);try{if(s.items&&s.items.length>0){const p=s.items;Sa(g=>({...g,items:p,loading:!1})),_r(p.map(g=>({...g})));return}const c=(await Ab(s.id)).data.items||[];Sa(p=>({...p,items:c,loading:!1})),_r(c.map(p=>({...p})))}catch(l){console.error("Failed to fetch bill items:",l),O("Failed to fetch bill items","error"),Sa(c=>({...c,loading:!1}))}},ah=()=>{Yi&&!window.confirm("You have unsaved changes. Are you sure you want to close?")||(Sa({open:!1,bill:null,items:[],loading:!1}),_r([]),wa(!1),Ku(-1),js({stockItem:"",quantity:1,rate:"",unit:""}),Qi(""))},ih=async s=>{var l,c;try{O("info","Preparing Print","Loading bill data...");const{data:p}=await UB(s.id),g=La(p.bill.voucherDate),y=window.open("","_blank","width=800,height=600"),S=p.items.map((B,D)=>`
        <tr>
          <td style="padding:6px 10px;border-bottom:1px solid #ddd;text-align:center">${D+1}</td>
          <td style="padding:6px 10px;border-bottom:1px solid #ddd">${B.stockItem}</td>
          <td style="padding:6px 10px;border-bottom:1px solid #ddd;text-align:center">${B.quantity} ${B.unit}</td>
          <td style="padding:6px 10px;border-bottom:1px solid #ddd;text-align:right">Rs ${Number(B.rate).toLocaleString("en-IN")}</td>
          <td style="padding:6px 10px;border-bottom:1px solid #ddd;text-align:right">Rs ${Number(B.amount).toLocaleString("en-IN")}</td>
        </tr>
      `).join(""),w=p.items.reduce((B,D)=>B+(Number(D.amount)||0),0),A=p.items.reduce((B,D)=>B+(Number(D.quantity)||0),0);y.document.write(`<!DOCTYPE html><html><head>
        <title>Bill - ${p.bill.voucherNumber}</title>
        <style>
          *{margin:0;padding:0;box-sizing:border-box}
          body{font-family:'Segoe UI',Arial,sans-serif;padding:20px;color:#333}
          .header{text-align:center;margin-bottom:20px;border-bottom:2px solid #333;padding-bottom:15px}
          .header h1{font-size:22px;margin-bottom:4px}
          .header .addr{font-size:12px;color:#666}
          .header .pan{font-size:11px;color:#888;margin-top:4px}
          .doc-title-wrap{text-align:center}
          .doc-title{font-size:16px;font-weight:700;margin:15px 0;text-transform:uppercase;letter-spacing:1px;border:1px solid #333;display:inline-block;padding:4px 20px}
          .info-row{display:flex;justify-content:space-between;margin-bottom:6px;font-size:13px}
          .info-section{margin-bottom:15px;padding:10px;background:#f9f9f9;border-radius:4px}
          table{width:100%;border-collapse:collapse;margin:15px 0}
          th{background:#333;color:white;padding:8px 10px;font-size:12px;text-transform:uppercase}
          th:first-child{border-radius:4px 0 0 0}th:last-child{border-radius:0 4px 0 0}
          .total-row td{font-weight:700;border-top:2px solid #333;padding:10px}
          .footer{margin-top:40px;display:flex;justify-content:space-between;font-size:12px}
          .footer .sign{border-top:1px solid #999;padding-top:5px;text-align:center;width:150px}
          @media print{body{padding:10px}.no-print{display:none}}
        </style>
      </head><body>
        <div class="header">
          <h1>${p.business.businessName||"Business"}</h1>
          ${p.business.businessAddress?`<div class="addr">${p.business.businessAddress}</div>`:""}
          ${p.business.businessPhone?`<div class="addr">Phone: ${p.business.businessPhone}</div>`:""}
          ${p.business.businessPAN?`<div class="pan">PAN: ${p.business.businessPAN}</div>`:""}
        </div>
        <div class="doc-title-wrap"><span class="doc-title">${p.bill.voucherType||"Pending Sales Bill"}</span></div>
        <div class="info-section">
          <div class="info-row"><span><strong>Party:</strong> ${p.bill.partyName}</span><span><strong>Bill No:</strong> ${p.bill.voucherNumber}</span></div>
          <div class="info-row"><span>${(l=p.party)!=null&&l.address?`<strong>Address:</strong> ${p.party.address}`:""}</span><span><strong>Date:</strong> ${lt(p.bill.voucherDate)}</span></div>
          <div class="info-row"><span>${(c=p.party)!=null&&c.phone?`<strong>Phone:</strong> ${p.party.phone}`:""}</span><span style="font-size:12px;color:#555">${g}</span></div>
        </div>
        <table>
          <thead><tr>
            <th style="width:40px;text-align:center">#</th>
            <th style="text-align:left">Item</th>
            <th style="width:100px;text-align:center">Qty</th>
            <th style="width:100px;text-align:right">Rate</th>
            <th style="width:120px;text-align:right">Amount</th>
          </tr></thead>
          <tbody>${S}</tbody>
          <tfoot><tr class="total-row">
            <td colspan="2" style="text-align:right">Total:</td>
            <td style="text-align:center">${A}</td>
            <td></td>
            <td style="text-align:right">Rs ${w.toLocaleString("en-IN")}</td>
          </tr></tfoot>
        </table>
        ${p.bill.narration?`<div style="font-size:12px;color:#666;margin:10px 0"><strong>Narration:</strong> ${p.bill.narration}</div>`:""}
        <div class="footer"><div class="sign">Prepared By</div><div class="sign">Received By</div></div>
        <script>window.onload=function(){setTimeout(function(){window.print()},300)}<\/script>
      </body></html>`),y.document.close()}catch(p){console.error("Print failed:",p),O("error","Print Failed",p.message||"Could not load bill data")}},nN=async()=>{var s,l;pd(!0),Ca(null);try{const{data:c}=await VB();Ca(c)}catch(c){Ca({success:!1,error:((l=(s=c.response)==null?void 0:s.data)==null?void 0:l.error)||c.message})}finally{pd(!1)}},rN=async()=>{var s,l,c,p;if(ks){pd(!0),Ca(null);try{const{data:g}=await HB(ks);Ca(g),O("success","Test Email Sent",`Email sent to ${ks}`)}catch(g){Ca({success:!1,error:((l=(s=g.response)==null?void 0:s.data)==null?void 0:l.error)||g.message}),O("error","Email Failed",((p=(c=g.response)==null?void 0:c.data)==null?void 0:p.error)||g.message)}finally{pd(!1)}}},wv=async()=>{var s,l;if(!(!Ss||!Qn.billId)){Xn(c=>({...c,sending:!0}));try{const{data:c}=await KB(Qn.billId,Ss);c.success?(O("success","Email Sent",`Bill emailed to ${Ss}`),Xn({open:!1,billId:null,sending:!1}),Xi("")):O("error","Email Failed",c.error)}catch(c){O("error","Email Failed",((l=(s=c.response)==null?void 0:s.data)==null?void 0:l.error)||c.message)}finally{Xn(c=>({...c,sending:!1}))}}},sN=async s=>{if(Qi(s),js(c=>({...c,stockItem:s})),s.length<2){Hu([]),dd(!1);return}const l=Na.filter(c=>{var p;return(p=c.name)==null?void 0:p.toLowerCase().includes(s.toLowerCase())}).slice(0,10);Hu(l),dd(!0)},aN=s=>{js(l=>({...l,stockItem:s.name,rate:s.rate||"",unit:s.base_units||"Nos"})),Qi(s.name),dd(!1)},kv=(s,l,c)=>{_r(p=>{const g=[...p];if(g[s]={...g[s],[l]:c},l==="quantity"||l==="rate"){const y=l==="quantity"?parseFloat(c)||0:parseFloat(g[s].quantity)||0,S=l==="rate"?parseFloat(c)||0:parseFloat(g[s].rate)||0;g[s].amount=y*S}return g}),wa(!0)},iN=s=>{window.confirm("Delete this item?")&&(_r(l=>l.filter((c,p)=>p!==s)),wa(!0),Ku(-1))},oN=()=>{if(!ke.stockItem||!ke.quantity||!ke.rate){O("Please fill in all fields","error");return}const s={stockItem:ke.stockItem,quantity:parseFloat(ke.quantity),rate:parseFloat(ke.rate),amount:parseFloat(ke.quantity)*parseFloat(ke.rate),unit:ke.unit||"Nos"};_r(l=>[...l,s]),wa(!0),js({stockItem:"",quantity:1,rate:"",unit:""}),Qi(""),O('Item added to list. Click "Save All Changes" to sync to Tally.',"info")},lN=async()=>{var s,l;if(!bt.bill||Jt.length===0){O("No items to save","error");return}Uy(!0);try{await qB(bt.bill.id,Jt),O("Items saved to Tally!","success");const p=(await Ab(bt.bill.id)).data.items||[];Sa(g=>({...g,items:p})),_r(p.map(g=>({...g}))),wa(!1),Dt()}catch(c){console.error("Failed to save items:",c),O(((l=(s=c.response)==null?void 0:s.data)==null?void 0:l.error)||"Failed to save items","error")}finally{Uy(!1)}},dN=()=>{Ft({partyName:"",voucherType:"Pending Sales Bill",date:new Date().toISOString().split("T")[0],narration:"",agent:"",items:[{name:"",quantity:1,rate:"",unit:"",amount:0}]}),b("dashboard")},Cv=()=>{Ft(s=>({...s,items:[...s.items,{name:"",quantity:1,rate:"",unit:"",amount:0}]}))},cN=s=>{Ft(l=>({...l,items:l.items.filter((c,p)=>p!==s)}))},gt=(s,l,c)=>{Ft(p=>{const g=[...p.items];if(g[s]={...g[s],[l]:c},l==="quantity"||l==="rate"){const y=parseFloat(g[s].quantity)||0,S=parseFloat(g[s].rate)||0;g[s].amount=y*S}return{...p,items:g}})},jd=()=>ye.items.reduce((s,l)=>s+(l.amount||0),0),pN=async()=>{var c,p,g;const s=jd(),l=ye.items.filter(y=>y.name&&y.amount>0);if(console.log("[Create Bill] Starting submission..."),console.log("[Create Bill] Party:",ye.partyName),console.log("[Create Bill] Items:",l),console.log("[Create Bill] Total:",s),!ye.partyName){O("error","Missing Party","Please select a party name");return}if(l.length===0){O("error","No Items","Add at least one item with quantity and rate");return}Hy(!0);try{const y=l.map(B=>({stockItem:B.name,quantity:parseFloat(B.quantity)||1,rate:parseFloat(B.rate)||0,amount:B.amount||0,unit:B.unit||"Nos"})),S={partyName:ye.partyName,items:y,narration:ye.narration||"Created from Dashboard",voucherType:ye.voucherType||"Pending Sales Bill",date:ye.date,numPackages:ye.agent||""};console.log("[Create Bill] Sending to API:",S);const w=await FT(S);console.log("[Create Bill] API Response:",w.data);const A=w.data;A.success?(A.mode==="online"?O("success"," Bill Created in Tally",`${ye.voucherType} for ${ye.partyName} - ${y.length} items, Rs ${s.toLocaleString("en-IN")}`):(O("warning"," Bill Saved Locally",`${A.invoiceNumber} - Will sync when Tally is online`),no()),dN(),Dt()):(console.error("[Create Bill] API returned error:",A),O("error","Creation Failed",A.error||"Unknown error"))}catch(y){console.error("[Create Bill] Error:",y),console.error("[Create Bill] Response data:",(c=y.response)==null?void 0:c.data),O("error","Creation Failed",((g=(p=y.response)==null?void 0:p.data)==null?void 0:g.error)||y.message)}finally{Hy(!1)}},Yt=Object.values(Yn).reduce((s,l)=>s+(parseFloat(l)||0),0),uN=async()=>{if(!Jn.bill||Yt<=0)return;const s=Jn.bill,l=s.tally_master_id||s.master_id||s.id,c=Math.abs(s.pending_amount||s.amount),p=Yt>=c?"Sales":"Credit Sales";qy(!0);try{const g=await fetch(`/api/receipt/pending-sales-bills/${l}/complete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({partyName:s.party_name,amount:c,date:s.voucher_date,voucherNumber:s.voucher_number,guid:s.tally_guid,paymentModes:{cashTeller1:parseFloat(Yn.cashTeller1)||0,cashTeller2:parseFloat(Yn.cashTeller2)||0,chequeReceipt:parseFloat(Yn.chequeReceipt)||0,qrCode:parseFloat(Yn.qrCode)||0,discount:parseFloat(Yn.discount)||0,bankDeposit:parseFloat(Yn.bankDeposit)||0,esewa:parseFloat(Yn.esewa)||0}})}),y=await g.json();g.ok&&y.success?(O("success","Payment Completed",`${k(Yt)} from ${s.party_name} - Updated to ${p}`),bd(),Dt()):O("error","Payment Failed",y.error||"Failed to complete payment")}catch(g){O("error","Payment Failed",g.message)}finally{qy(!1)}},oh=async(s,l)=>{try{await $B(s,l),O("success","Dispatch Updated",`Status changed to ${l}`),Dt()}catch(c){O("error","Update Failed",c.message)}},Ts=Array.isArray(mp)?mp:[],hN=Ts.filter(s=>{var l;return Si==="all"?!0:Si==="unpaid"?s.payment_status==="pending":Si==="paid"?s.payment_status==="paid":Si==="credit"?(l=s.voucher_type)==null?void 0:l.toLowerCase().includes("credit"):!0}).filter(s=>{var c,p;if(!M)return!0;const l=M.toLowerCase();return((c=s.party_name)==null?void 0:c.toLowerCase().includes(l))||((p=s.voucher_number)==null?void 0:p.toLowerCase().includes(l))}),zs={pending:Ts.filter(s=>s.dispatch_status==="pending"||s.dispatch_status==="created"),packing:Ts.filter(s=>s.dispatch_status==="packing"),ready:Ts.filter(s=>s.dispatch_status==="ready"),dispatched:Ts.filter(s=>s.dispatch_status==="dispatched"||s.dispatch_status==="customer_taken")},Gn=Array.isArray(xf)?xf:[],lh=Array.isArray(jf)?jf:[],Zn=Array.isArray(vf)?vf:[],Qt=Zn.reduce((s,l)=>{var c,p;return(c=l.voucher_type)!=null&&c.toLowerCase().includes("sales")&&(s.debit+=Math.abs(l.amount||0)),(p=l.voucher_type)!=null&&p.toLowerCase().includes("receipt")&&(s.credit+=Math.abs(l.amount||0)),s},{debit:0,credit:0});return n.jsxs("div",{className:`rush-dashboard ${N?"dark":"light"}`,"data-mode":v?"simple":"advanced",children:[n.jsxs("nav",{className:`sidebar ${F?"open":""}`,children:[n.jsxs("div",{className:"brand",children:[n.jsx("div",{className:"brand-icon",children:"R"}),n.jsxs("div",{children:[n.jsx("h2",{children:"Rush Wholesale"}),n.jsx("span",{style:{fontSize:"11px"},children:e?n.jsxs(n.Fragment,{children:[e.displayName," ",n.jsx("span",{style:{background:"var(--blue-g)",color:"var(--blue)",padding:"1px 6px",borderRadius:"4px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase"},children:e.role})]}):"POS Dashboard"})]})]}),n.jsxs("div",{className:"nav",children:[n.jsx("div",{className:"nav-label",children:"Main"}),de("dashboard")&&n.jsxs("div",{className:`nav-item ${f==="dashboard"?"active":""}`,onClick:()=>ae("dashboard"),children:[n.jsx("span",{className:"nav-icon",children:""})," Dashboard"]}),de("create-bill")&&n.jsxs("div",{className:`nav-item create-bill-btn ${f==="create-bill"?"active":""}`,onClick:()=>ae("create-bill"),style:{background:f==="create-bill"?"var(--blue)":"var(--blue-g)",color:f==="create-bill"?"white":"var(--blue)",fontWeight:"600"},children:[n.jsx("span",{className:"nav-icon",children:""})," Create Bill"]}),de("pending")&&n.jsxs("div",{className:`nav-item ${f==="pending"?"active":""}`,onClick:()=>ae("pending"),children:[n.jsx("span",{className:"nav-icon",children:""})," Pending Bills",Gn.length>0&&n.jsx("span",{className:"nav-badge amber",children:Gn.length})]}),de("vouchers")&&n.jsxs("div",{className:`nav-item ${f==="vouchers"?"active":""}`,onClick:()=>ae("vouchers"),children:[n.jsx("span",{className:"nav-icon",children:""})," Total Vouchers",Ts.length>0&&n.jsx("span",{className:"nav-badge blue",children:Ts.length})]}),de("deleted")&&n.jsxs("div",{className:`nav-item ${f==="deleted"?"active":""}`,onClick:()=>ae("deleted"),children:[n.jsx("span",{className:"nav-icon",children:""})," Deleted Vouchers",Cp>0&&n.jsx("span",{className:"nav-badge red",children:Cp})]}),n.jsx("div",{className:"nav-label",children:"Operations"}),de("dispatch")&&n.jsxs("div",{className:`nav-item ${f==="dispatch"?"active":""}`,onClick:()=>ae("dispatch"),children:[n.jsx("span",{className:"nav-icon",children:""})," Dispatch",zs.pending.length>0&&n.jsx("span",{className:"nav-badge amber",children:zs.pending.length})]}),de("sacks")&&n.jsxs("div",{className:`nav-item ${f==="sacks"?"active":""}`,onClick:()=>ae("sacks"),children:[n.jsx("span",{className:"nav-icon",children:""})," Sacks"]}),n.jsx("div",{className:"nav-label",children:"Accounts"}),de("daybook")&&n.jsxs("div",{className:`nav-item ${f==="daybook"?"active":""}`,onClick:()=>ae("daybook"),children:[n.jsx("span",{className:"nav-icon",children:""})," Daybook"]}),de("columnar")&&n.jsxs("div",{className:`nav-item ${f==="columnar"?"active":""}`,onClick:()=>ae("columnar"),children:[n.jsx("span",{className:"nav-icon",children:""})," Columnar"]}),de("eod-recon")&&n.jsxs("div",{className:`nav-item ${f==="eod-recon"?"active":""}`,onClick:()=>ae("eod-recon"),children:[n.jsx("span",{className:"nav-icon",children:""})," EOD Recon"]}),de("parties")&&n.jsxs("div",{className:`nav-item ${f==="parties"?"active":""}`,onClick:()=>ae("parties"),children:[n.jsx("span",{className:"nav-icon",children:""})," Parties"]}),de("ledger-hierarchy")&&n.jsxs("div",{className:`nav-item ${f==="ledger-hierarchy"?"active":""}`,onClick:()=>ae("ledger-hierarchy"),children:[n.jsx("span",{className:"nav-icon",children:""})," Ledger Hierarchy"]}),de("ledger-account")&&n.jsxs("div",{className:`nav-item ${f==="ledger-account"?"active":""}`,onClick:()=>ae("ledger-account"),children:[n.jsx("span",{className:"nav-icon",children:""})," Ledger Account"]}),n.jsx("div",{className:"nav-label",children:"Payments"}),de("fonepay")&&n.jsxs("div",{className:`nav-item ${f==="fonepay"?"active":""}`,onClick:()=>ae("fonepay"),children:[n.jsx("span",{className:"nav-icon",children:""})," Fonepay",mi.length>0&&n.jsx("span",{className:"nav-badge green",children:mi.length})]}),de("rbb")&&n.jsxs("div",{className:`nav-item ${f==="rbb"?"active":""}`,onClick:()=>ae("rbb"),children:[n.jsx("span",{className:"nav-icon",children:""})," RBB Banking",yi.length>0&&n.jsx("span",{className:"nav-badge cyan",children:yi.length})]}),de("bill-history")&&n.jsxs("div",{className:`nav-item ${f==="bill-history"?"active":""}`,onClick:()=>ae("bill-history"),children:[n.jsx("span",{className:"nav-icon",children:""})," Dashboard Bills",Ki.length>0&&n.jsx("span",{className:"nav-badge orange",children:Ki.length})]}),n.jsx("div",{className:"nav-label",children:"Cheque Mgmt"}),de("cheques")&&n.jsxs("div",{className:`nav-item ${f==="cheques"?"active":""}`,onClick:()=>ae("cheques"),children:[n.jsx("span",{className:"nav-icon",children:""})," Cheques"]}),de("cheque-post")&&n.jsxs("div",{className:`nav-item ${f==="cheque-post"?"active":""}`,onClick:()=>ae("cheque-post"),children:[n.jsx("span",{className:"nav-icon",children:""})," Cheque Post"]}),de("cheque-vouchers")&&n.jsxs("div",{className:`nav-item ${f==="cheque-vouchers"?"active":""}`,onClick:()=>ae("cheque-vouchers"),children:[n.jsx("span",{className:"nav-icon",children:""})," Cheque Vouchers"]}),de("collection")&&n.jsxs("div",{className:`nav-item ${f==="collection"?"active":""}`,onClick:()=>ae("collection"),children:[n.jsx("span",{className:"nav-icon",children:""})," Collection"]}),de("ledger-both")&&n.jsxs("div",{className:`nav-item ${f==="ledger-both"?"active":""}`,onClick:()=>ae("ledger-both"),children:[n.jsx("span",{className:"nav-icon",children:""})," Ledger (Both)"]}),de("bank-names")&&n.jsxs("div",{className:`nav-item ${f==="bank-names"?"active":""}`,onClick:()=>ae("bank-names"),children:[n.jsx("span",{className:"nav-icon",children:""})," Mapping Settings"]}),n.jsx("div",{className:"nav-label adv",children:"Reports"}),de("outstanding")&&n.jsxs("div",{className:`nav-item adv ${f==="outstanding"?"active":""}`,onClick:()=>ae("outstanding"),children:[n.jsx("span",{className:"nav-icon",children:""})," Outstanding"]}),de("stock-groups")&&n.jsxs("div",{className:`nav-item adv ${f==="stock-groups"?"active":""}`,onClick:()=>ae("stock-groups"),children:[n.jsx("span",{className:"nav-icon",children:""})," Stock Groups"]}),de("profit-loss")&&n.jsxs("div",{className:`nav-item adv ${f==="profit-loss"?"active":""}`,onClick:()=>ae("profit-loss"),children:[n.jsx("span",{className:"nav-icon",children:""})," Profit & Loss"]}),de("balance-sheet")&&n.jsxs("div",{className:`nav-item adv ${f==="balance-sheet"?"active":""}`,onClick:()=>ae("balance-sheet"),children:[n.jsx("span",{className:"nav-icon",children:""})," Balance Sheet"]}),de("trial-balance")&&n.jsxs("div",{className:`nav-item adv ${f==="trial-balance"?"active":""}`,onClick:()=>ae("trial-balance"),children:[n.jsx("span",{className:"nav-icon",children:""})," Trial Balance"]}),de("cash-flow")&&n.jsxs("div",{className:`nav-item adv ${f==="cash-flow"?"active":""}`,onClick:()=>ae("cash-flow"),children:[n.jsx("span",{className:"nav-icon",children:""})," Cash Flow"]}),de("ratio-analysis")&&n.jsxs("div",{className:`nav-item adv ${f==="ratio-analysis"?"active":""}`,onClick:()=>ae("ratio-analysis"),children:[n.jsx("span",{className:"nav-icon",children:""})," Ratio Analysis"]}),de("price-lists")&&n.jsxs("div",{className:`nav-item adv ${f==="price-lists"?"active":""}`,onClick:()=>ae("price-lists"),children:[n.jsx("span",{className:"nav-icon",children:""})," Price Lists"]}),de("bank-recon")&&n.jsxs("div",{className:`nav-item adv ${f==="bank-recon"?"active":""}`,onClick:()=>ae("bank-recon"),children:[n.jsx("span",{className:"nav-icon",children:""})," Reconciliation"]}),de("inventory-movement")&&n.jsxs("div",{className:`nav-item adv ${f==="inventory-movement"?"active":""}`,onClick:()=>ae("inventory-movement"),children:[n.jsx("span",{className:"nav-icon",children:""})," Inventory Move"]}),n.jsx("div",{className:"nav-label adv",children:"System"}),de("xml-viewer")&&n.jsxs("div",{className:`nav-item adv ${f==="xml-viewer"?"active":""}`,onClick:()=>ae("xml-viewer"),children:[n.jsx("span",{className:"nav-icon",children:""})," XML Viewer"]}),de("data-completeness")&&n.jsxs("div",{className:`nav-item adv ${f==="data-completeness"?"active":""}`,onClick:()=>ae("data-completeness"),children:[n.jsx("span",{className:"nav-icon",children:""})," Data Quality"]}),de("settings")&&n.jsxs("div",{className:`nav-item adv ${f==="settings"?"active":""}`,onClick:()=>ae("settings"),children:[n.jsx("span",{className:"nav-icon",children:""})," Settings"]}),e&&n.jsx("div",{style:{marginTop:"12px",padding:"0 8px"},children:n.jsxs("div",{className:"nav-item",onClick:JC,style:{color:"var(--red)",fontSize:"13px"},children:[n.jsx("span",{className:"nav-icon",children:""})," Logout"]})})]}),Gn.length>0&&n.jsxs("div",{className:"sidebar-pending-card",onClick:()=>ae("pending"),children:[n.jsxs("div",{className:"spc-header",children:[n.jsx("span",{className:"spc-icon",children:""}),n.jsx("span",{className:"spc-title",children:"Pending Bills"})]}),n.jsxs("div",{className:"spc-stats",children:[n.jsxs("div",{className:"spc-stat",children:[n.jsx("span",{className:"spc-count",children:Gn.length}),n.jsx("span",{className:"spc-label",children:"Bills"}),gf.critical>0&&n.jsxs("span",{style:{fontSize:"10px",color:"var(--red)",marginLeft:"4px"},children:["(",gf.critical," critical)"]})]}),n.jsx("div",{className:"spc-divider"}),n.jsxs("div",{className:"spc-stat",children:[n.jsxs("span",{className:"spc-amount",children:["Rs ",Math.abs(Bt.pendingAmount).toLocaleString("en-IN")]}),n.jsx("span",{className:"spc-label",children:"Total Due"})]})]}),n.jsx("button",{className:"spc-btn",children:"View All "})]}),n.jsx("div",{className:"sidebar-footer",children:n.jsxs("div",{className:"sync-bar",children:[n.jsx("span",{className:`sync-dot ${Pe?"":"offline"}`}),Pe?"Tally Connected":"Tally Offline",n.jsx("span",{style:{marginLeft:"auto",fontFamily:"var(--mono)",fontSize:"10px",color:"var(--t3)"},children:ji?"":""})]})})]}),n.jsxs("header",{className:"topbar",children:[n.jsx("button",{className:"top-btn mobile-menu-btn",onClick:()=>C(!F),style:{display:"none"},children:""}),n.jsxs("div",{className:"page-title",children:[Hh[f],n.jsxs("span",{className:"live",children:[n.jsx("span",{className:"live-dot"}),"LIVE"]})]}),xl.length>0&&n.jsxs("div",{className:"tally-companies-badge",children:[n.jsx("span",{className:"tcb-dot"}),n.jsxs("span",{className:"tcb-count",children:[xl.length," ",xl.length===1?"Company":"Companies"]}),n.jsx("span",{className:"tcb-names",children:xl.join(" | ")})]}),n.jsxs("div",{className:"topbar-datetime",children:[n.jsx("div",{className:"dt-nepali",children:wp.np.format("YYYY MMMM DD, ddd")}),n.jsx("div",{className:"dt-english",children:wp.en.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})}),n.jsx("div",{className:"dt-time",children:wp.en.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})})]}),n.jsx("input",{className:"search-box",placeholder:" Search bills, parties...",value:M,onChange:s=>W(s.target.value)}),n.jsxs("div",{className:"mode-tog",children:[n.jsx("button",{className:v?"active":"",onClick:()=>T(!0),children:"Simple"}),n.jsx("button",{className:v?"":"active",onClick:()=>T(!1),children:"Advanced"})]}),n.jsx("button",{className:"top-btn",onClick:wC,title:N?"Switch to Light Mode":"Switch to Dark Mode",children:N?"":""}),n.jsx("button",{className:"top-btn",onClick:ev,disabled:ml,title:"Sync with Tally",children:ml?"":""}),n.jsx("div",{className:"top-btn",onClick:()=>{I(!z),z||_(!1)},title:"Tally Assistant",children:""}),n.jsxs("div",{className:"top-btn",onClick:()=>{_(!j),j||I(!1)},children:["",Qu.filter(s=>!s.read).length>0&&n.jsx("span",{className:"notif-dot"})]}),n.jsx("div",{className:"avatar",children:"S"})]}),n.jsx("div",{className:"toasts",children:oC.map(s=>n.jsxs("div",{className:`toast ${s.type}`,children:[n.jsx("span",{className:"toast-ic",children:s.type==="bill"?"":s.type==="success"?"":""}),n.jsxs("div",{children:[n.jsx("div",{className:"toast-title",children:s.title}),n.jsx("div",{className:"toast-msg",children:s.message})]})]},s.id))}),n.jsxs("div",{className:`notif-panel ${j?"open":""}`,children:[n.jsxs("div",{className:"np-head",children:[n.jsx("h3",{children:" Notifications"}),n.jsx("button",{className:"m-close",onClick:()=>_(!1),children:""})]}),n.jsx("div",{className:"np-list",children:Qu.length===0?n.jsx("div",{className:"empty-state",children:"No notifications"}):Qu.map((s,l)=>n.jsxs("div",{className:`np-item ${s.read?"":"unread"}`,children:[n.jsx("div",{className:"np-title",children:s.title}),n.jsx("div",{className:"np-msg",children:s.message}),n.jsx("div",{className:"np-time",children:ag(s.created_at)})]},l))})]}),n.jsx(Yz,{open:z,onClose:()=>I(!1)}),n.jsx("main",{className:"main-content",children:yk?n.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px"},children:n.jsx("div",{className:"loading-spinner"})}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:`page ${f==="dashboard"?"active":""}`,children:[n.jsxs("div",{className:"stats",children:[n.jsxs("div",{className:"stat blue",children:[n.jsxs("div",{className:"stat-top",children:[n.jsx("span",{className:"stat-label",children:"Today's Sales"}),n.jsx("span",{className:"stat-ic blue",children:""})]}),n.jsx("div",{className:"stat-val",children:k(Bt.totalSales)}),n.jsxs("div",{className:"stat-sub",children:[Bt.billCount," bills today"]})]}),n.jsxs("div",{className:"stat green",children:[n.jsxs("div",{className:"stat-top",children:[n.jsx("span",{className:"stat-label",children:"Received"}),n.jsx("span",{className:"stat-ic green",children:""})]}),n.jsx("div",{className:"stat-val",children:k(Bt.totalReceived)}),n.jsxs("div",{className:"stat-sub",children:[Bt.totalSales>0?Math.round(Bt.totalReceived/Bt.totalSales*100):0,"% collected"]})]}),n.jsxs("div",{className:"stat red",children:[n.jsxs("div",{className:"stat-top",children:[n.jsx("span",{className:"stat-label",children:"Unpaid Bills"}),n.jsx("span",{className:"stat-ic red",children:""})]}),n.jsx("div",{className:"stat-val",children:Gn.length}),n.jsxs("div",{className:"stat-sub",children:[k(Bt.pendingAmount)," outstanding"]})]}),n.jsxs("div",{className:"stat amber",children:[n.jsxs("div",{className:"stat-top",children:[n.jsx("span",{className:"stat-label",children:"Pending Dispatch"}),n.jsx("span",{className:"stat-ic amber",children:""})]}),n.jsx("div",{className:"stat-val",children:zs.pending.length}),n.jsx("div",{className:"stat-sub",children:"Awaiting dispatch"})]}),n.jsxs("div",{className:"stat purple adv",children:[n.jsxs("div",{className:"stat-top",children:[n.jsx("span",{className:"stat-label",children:"Credit Outstanding"}),n.jsx("span",{className:"stat-ic blue",children:""})]}),n.jsx("div",{className:"stat-val",children:k(Bt.pendingAmount)}),n.jsxs("div",{className:"stat-sub",children:[Gn.length," parties"]})]}),n.jsxs("div",{className:"stat cyan adv",children:[n.jsxs("div",{className:"stat-top",children:[n.jsx("span",{className:"stat-label",children:"Sacks In Progress"}),n.jsx("span",{className:"stat-ic blue",children:""})]}),n.jsx("div",{className:"stat-val",children:lh.filter(s=>s.status!=="dispatched").length}),n.jsx("div",{className:"stat-sub",children:"Collecting bags"})]})]}),n.jsxs("div",{className:"sec-head",children:[n.jsxs("div",{className:"sec-title",children:["Recent Bills ",n.jsxs("span",{className:"cnt",children:[mp.length," today"]})]}),n.jsx("div",{className:"tabs",children:["all","unpaid","paid","credit"].map(s=>n.jsx("button",{className:`tab ${Si===s?"active":""}`,onClick:()=>bk(s),children:s.charAt(0).toUpperCase()+s.slice(1)},s))})]}),n.jsx("div",{className:"bills-grid",children:hN.slice(0,12).map(s=>n.jsx(Xz,{bill:s,onPay:()=>Sv(s)},s.id))}),vi.length>0&&n.jsxs("div",{style:{marginTop:"24px"},children:[n.jsxs("div",{className:"sec-head",children:[n.jsxs("div",{className:"sec-title",style:{color:"var(--orange)"},children:[" Pending Bills (Local) ",n.jsx("span",{className:"cnt",children:vi.length})]}),n.jsxs("div",{style:{display:"flex",gap:"8px"},children:[n.jsxs("button",{className:"btn btn-s",onClick:no,disabled:Nf,style:{padding:"6px 12px",fontSize:"12px"},children:[Nf?"":""," Refresh"]}),n.jsx("button",{className:"btn btn-p",onClick:Xy,disabled:ns||!Pe,style:{padding:"6px 12px",fontSize:"12px"},title:Pe?"Sync all pending to Tally":"Connect Tally first to sync",children:ns?" Syncing...":" Sync All to Tally"})]})]}),n.jsx("div",{style:{background:"var(--card)",borderRadius:"12px",border:"1px solid var(--orange)",padding:"0",overflow:"hidden"},children:n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"14px"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{background:"var(--orange)",color:"white"},children:[n.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Invoice #"}),n.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Tally Voucher"}),n.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Date"}),n.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Party"}),n.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Type"}),n.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"Items"}),n.jsx("th",{style:{padding:"12px",textAlign:"right"},children:"Amount"}),n.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"Status"})]})}),n.jsx("tbody",{children:vi.map((s,l)=>{var c;return n.jsxs("tr",{style:{borderBottom:"1px solid var(--border)"},children:[n.jsx("td",{style:{padding:"10px 12px",fontWeight:"600",color:"var(--blue)"},children:s.invoice_number}),n.jsx("td",{style:{padding:"10px 12px",fontWeight:"600",color:s.tally_voucher_number?"var(--green)":"var(--t3)"},children:s.tally_voucher_number||(s.status==="synced"?`#${s.tally_master_id||"-"}`:"-")}),n.jsx("td",{style:{padding:"10px 12px",color:"var(--t2)"},children:s.invoice_date?lt(s.invoice_date.replace(/-/g,"")):"-"}),n.jsx("td",{style:{padding:"10px 12px"},children:s.party_name}),n.jsx("td",{style:{padding:"10px 12px",color:"var(--t2)"},children:s.voucher_type||"Sales"}),n.jsx("td",{style:{padding:"10px 12px",textAlign:"center"},children:((c=s.items)==null?void 0:c.length)||0}),n.jsxs("td",{style:{padding:"10px 12px",textAlign:"right",fontWeight:"600",color:"var(--green)"},children:["Rs ",Number(s.total_amount||0).toLocaleString("en-IN")]}),n.jsx("td",{style:{padding:"10px 12px",textAlign:"center"},children:n.jsx("span",{style:{padding:"4px 8px",borderRadius:"4px",fontSize:"11px",fontWeight:"600",background:s.status==="pending"?"var(--orange-g)":s.status==="synced"?"var(--green-g)":"var(--red-g)",color:s.status==="pending"?"var(--orange)":s.status==="synced"?"var(--green)":"var(--red)"},children:s.status==="pending"?" Pending":s.status==="synced"?" Synced":" Failed"})})]},s.id||l)})})]})}),!Pe&&n.jsx("div",{style:{marginTop:"8px",padding:"8px 12px",background:"var(--red-g)",borderRadius:"6px",color:"var(--red)",fontSize:"12px"},children:" Tally is not connected. Start Tally to sync pending bills."})]}),n.jsxs("div",{style:{transform:"scale(1)",transformOrigin:"top left",fontSize:"130%"},children:[n.jsxs("div",{className:"sec-head",style:{marginTop:"24px"},children:[n.jsxs("div",{className:"sec-title",children:[" Recently Altered Vouchers ",n.jsxs("span",{className:"cnt",children:[Dn.length>0?Math.min(Dn.length,15):0," shown"]})]}),n.jsx("button",{className:"btn btn-s",onClick:()=>b("vouchers"),style:{fontSize:"14px",padding:"8px 16px"},children:"View All "})]}),n.jsxs("div",{className:"vouchers-table-wrapper",style:{maxHeight:"500px",overflow:"auto",background:"var(--bg2)",borderRadius:"12px",border:"1px solid var(--border)"},children:[n.jsxs("table",{className:"vouchers-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsxs("th",{className:"sortable",onClick:()=>ki(s=>({field:"alter_id",direction:s.field==="alter_id"&&s.direction==="desc"?"asc":"desc"})),children:["Alt ID ",Vt.field==="alter_id"&&n.jsx("span",{className:"sort-arrow",children:Vt.direction==="asc"?"":""})]}),n.jsxs("th",{className:"sortable",onClick:()=>ki(s=>({field:"id",direction:s.field==="id"&&s.direction==="desc"?"asc":"desc"})),children:["UID ",Vt.field==="id"&&n.jsx("span",{className:"sort-arrow",children:Vt.direction==="asc"?"":""})]}),n.jsxs("th",{className:"sortable",onClick:()=>ki(s=>({field:"voucher_date",direction:s.field==="voucher_date"&&s.direction==="desc"?"asc":"desc"})),children:["Date ",Vt.field==="voucher_date"&&n.jsx("span",{className:"sort-arrow",children:Vt.direction==="asc"?"":""})]}),n.jsx("th",{children:"Voucher No."}),n.jsxs("th",{className:"sortable",onClick:()=>ki(s=>({field:"party_name",direction:s.field==="party_name"&&s.direction==="asc"?"desc":"asc"})),children:["Ledger Name ",Vt.field==="party_name"&&n.jsx("span",{className:"sort-arrow",children:Vt.direction==="asc"?"":""})]}),n.jsx("th",{children:"Type"}),n.jsxs("th",{className:"sortable r",onClick:()=>ki(s=>({field:"amount",direction:s.field==="amount"&&s.direction==="desc"?"asc":"desc"})),children:["Amount ",Vt.field==="amount"&&n.jsx("span",{className:"sort-arrow",children:Vt.direction==="asc"?"":""})]}),n.jsx("th",{children:"Age"})]})}),n.jsx("tbody",{children:[...Dn].sort((s,l)=>{const c=Vt.field,p=Vt.direction==="asc"?1:-1;return c==="party_name"?(s.party_name||"").localeCompare(l.party_name||"")*p:c==="voucher_date"?((s.voucher_date||"")>(l.voucher_date||"")?1:-1)*p:((s[c]||0)-(l[c]||0))*p}).slice(0,15).map((s,l)=>{const c=s.tally_master_id||s.master_id,p=bl===c;return n.jsxs(vo.Fragment,{children:[n.jsxs("tr",{onClick:()=>c&&Qy(c),style:{cursor:c?"pointer":"default",background:p?"var(--bg)":void 0},children:[n.jsx("td",{style:{fontFamily:"var(--mono)",fontWeight:"700",color:"var(--blue)"},children:s.alter_id||"-"}),n.jsx("td",{style:{fontFamily:"var(--mono)",fontSize:"11px",color:"var(--t2)"},children:s.id||"-"}),n.jsx("td",{className:"date-cell",children:lt(s.voucher_date)}),n.jsx("td",{style:{fontWeight:"600"},children:s.voucher_number||s.tally_master_id||`#${s.alter_id}`||"-"}),n.jsxs("td",{className:"party-cell",style:{maxWidth:"180px"},children:[s.party_name||"-",s.extra_parties_count>0&&n.jsxs("span",{style:{fontSize:"10px",color:"var(--orange)",marginLeft:"4px",fontWeight:"700"},children:["+",s.extra_parties_count]})]}),n.jsx("td",{children:n.jsx("span",{className:`vt-badge ${(s.voucher_type||"").toLowerCase().includes("receipt")?"receipt":(s.voucher_type||"").toLowerCase().includes("payment")?"payment":"sales"}`,children:s.voucher_type||"-"})}),n.jsxs("td",{className:"r amt-cell",style:{color:"var(--green)"},children:["Rs ",((s.total_amount&&s.total_amount>0?s.total_amount:s.amount)||0).toLocaleString("en-IN")]}),n.jsx("td",{className:"age-cell",children:n.jsx("span",{className:`age-badge ${zr(s.voucher_date)==="Today"?"today":"old"}`,children:zr(s.voucher_date)})})]}),p&&n.jsx("tr",{children:n.jsx("td",{colSpan:"8",style:{padding:0,border:"none"},children:n.jsxs("div",{style:{background:"var(--bg)",borderLeft:"3px solid var(--blue)",padding:"10px 14px",margin:"0 4px 6px 4px",borderRadius:"0 6px 6px 0",fontSize:"12px"},children:[n.jsx("div",{style:{fontWeight:"700",color:"var(--blue)",marginBottom:"6px"},children:"Alteration Log"}),Yf?n.jsx("span",{style:{color:"var(--t3)"},children:"Loading..."}):jl.length===0?n.jsx("span",{style:{color:"var(--t3)"},children:"No field changes recorded."}):jl.map((g,y)=>n.jsxs("div",{style:{display:"flex",gap:"8px",padding:"3px 0",borderBottom:"1px solid var(--border)"},children:[n.jsx("span",{style:{fontWeight:"600",color:"var(--orange)",minWidth:"100px"},children:g.field_name}),n.jsx("span",{style:{color:"var(--red)",fontFamily:"var(--mono)"},children:g.old_value||"-"}),n.jsx("span",{style:{color:"var(--t3)"},children:""}),n.jsx("span",{style:{color:"var(--green)",fontFamily:"var(--mono)"},children:g.new_value||"-"}),n.jsx("span",{style:{color:"var(--t3)",marginLeft:"auto",fontSize:"10px"},children:g.changed_at?new Date(g.changed_at+"Z").toLocaleString("en-US",{timeZone:"Asia/Kathmandu"}):""})]},y))]})})})]},s.id||l)})})]}),Dn.length===0&&n.jsx("div",{className:"empty-state",style:{padding:"40px 20px"},children:n.jsx("div",{style:{color:"var(--t3)"},children:"No vouchers found. Check the Vouchers page."})})]})]})]}),n.jsxs("div",{className:`page ${f==="create-bill"?"active":""}`,children:[n.jsxs("div",{className:"sec-head",style:{marginBottom:"20px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px",flexWrap:"wrap"},children:[n.jsx("div",{className:"sec-title",style:{fontSize:"20px"},children:" Create New Bill"}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:"600",background:Pe?"rgba(34,197,94,0.15)":"rgba(239,68,68,0.15)",color:Pe?"var(--green)":"var(--red)"},children:[n.jsx("span",{style:{width:"8px",height:"8px",borderRadius:"50%",background:Pe?"var(--green)":"var(--red)"}}),Pe?"Tally Online":"Tally Offline"]}),vi.length>0&&n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsxs("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:"600",background:"rgba(245,158,11,0.15)",color:"var(--orange)"},children:[vi.length," pending"]}),n.jsx("button",{onClick:Xy,disabled:ns||!Pe,style:{padding:"4px 10px",borderRadius:"6px",border:"none",fontSize:"12px",cursor:"pointer",background:ns||!Pe?"var(--bg2)":"var(--blue-g)",color:ns||!Pe?"var(--t3)":"var(--blue)",opacity:ns||!Pe?.5:1},title:Pe?"Sync pending invoices to Tally":"Tally offline",children:ns?" Syncing...":" Sync"})]}),n.jsxs("div",{style:{display:"flex",gap:"8px",fontSize:"11px",color:"var(--t3)"},children:[n.jsx("span",{style:{padding:"4px 8px",background:"var(--bg2)",borderRadius:"4px"},children:" Navigate"}),n.jsx("span",{style:{padding:"4px 8px",background:"var(--bg2)",borderRadius:"4px"},children:"Enter Select/Add Row"}),n.jsx("span",{style:{padding:"4px 8px",background:"var(--bg2)",borderRadius:"4px"},children:"Tab Quick Select"}),n.jsx("span",{style:{padding:"4px 8px",background:"var(--bg2)",borderRadius:"4px"},children:"Esc Close"})]})]}),n.jsxs("div",{style:{display:"flex",gap:"12px"},children:[n.jsx("button",{className:"btn btn-o",onClick:()=>ae("dashboard"),children:" Back"}),n.jsx("button",{className:"btn btn-p",onClick:pN,disabled:Vy||!ye.partyName||jd()<=0,style:{padding:"10px 24px",fontSize:"14px"},children:Vy?" Creating...":Pe?" Create Bill":" Save Offline"})]})]}),!Pe&&n.jsxs("div",{style:{padding:"10px 16px",marginBottom:"16px",borderRadius:"8px",background:"rgba(245,158,11,0.1)",border:"1px solid rgba(245,158,11,0.3)",color:"var(--orange)",fontSize:"13px"},children:[n.jsx("strong",{children:"Offline Mode:"})," Bills will be saved locally as DB-YYYYMMDD-NNN and sync automatically when Tally is back online."]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 300px",gap:"24px"},children:[n.jsxs("div",{style:{background:"var(--card)",borderRadius:"12px",padding:"20px",border:"1px solid var(--border)"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[n.jsxs("div",{children:[n.jsx("h3",{style:{fontSize:"16px",fontWeight:"700",color:"var(--t1)"},children:" Inventory Items"}),n.jsx("span",{style:{fontSize:"11px",color:Na.length>0?"var(--green)":"var(--red)"},children:Na.length>0?`${Na.length} items synced`:" No items synced - run Tally sync first"})]}),n.jsx("button",{className:"btn btn-s",onClick:Cv,style:{padding:"6px 12px",fontSize:"12px"},children:"+ Add Item"})]}),n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{background:"var(--bg2)",fontSize:"12px",color:"var(--t2)"},children:[n.jsx("th",{style:{padding:"10px",textAlign:"left",fontWeight:"600"},children:"#"}),n.jsx("th",{style:{padding:"10px",textAlign:"left",fontWeight:"600"},children:"Item Name"}),n.jsx("th",{style:{padding:"10px",textAlign:"center",fontWeight:"600",width:"100px"},children:"Qty"}),n.jsx("th",{style:{padding:"10px",textAlign:"right",fontWeight:"600",width:"120px"},children:"Rate"}),n.jsx("th",{style:{padding:"10px",textAlign:"right",fontWeight:"600",width:"130px"},children:"Amount"}),n.jsx("th",{style:{padding:"10px",width:"50px"}})]})}),n.jsx("tbody",{children:ye.items.map((s,l)=>{var y;const p=(((y=s.name)==null?void 0:y.trim().toLowerCase())||"").split(/\s+/).filter(S=>S.length>0),g=Na.map(S=>{var V;if(!s.name||p.length===0)return{...S,score:0};const w=((V=S.name)==null?void 0:V.toLowerCase())||"",A=(S.selling_price||0).toString(),B=(S.standard_cost||0).toString();let D=0,P=0;for(const Q of p){const Me=w.includes(Q),Te=A===Q||B===Q,H=A.includes(Q)||B.includes(Q);(Me||Te||H)&&(P++,Te?D+=10:w.startsWith(Q)?D+=5:Me?D+=3:H&&(D+=2))}return P<p.length?{...S,score:-1}:{...S,score:D}}).filter(S=>S.score>=0).sort((S,w)=>w.score-S.score).slice(0,20);return n.jsxs("tr",{style:{borderBottom:"1px solid var(--border)"},children:[n.jsx("td",{style:{padding:"8px 10px",color:"var(--t3)",fontSize:"13px"},children:l+1}),n.jsxs("td",{style:{padding:"8px 10px",position:"relative"},children:[n.jsx("input",{id:`item-${l}`,type:"text",placeholder:"Search name or price...",value:s.name,onChange:S=>{gt(l,"name",S.target.value),Ns(l),Zi(0)},onFocus:()=>{Ns(l),Zi(0)},onBlur:()=>setTimeout(()=>Ns(-1),200),onKeyDown:S=>{if(!(Jy!==l||g.length===0)){if(S.key==="ArrowDown")S.preventDefault(),Zi(w=>Math.min(w+1,g.length-1));else if(S.key==="ArrowUp")S.preventDefault(),Zi(w=>Math.max(w-1,0));else if(S.key==="Enter"&&g[Ju]){S.preventDefault();const w=g[Ju];gt(l,"name",w.name),w.selling_price?gt(l,"rate",w.selling_price):w.standard_cost&&gt(l,"rate",w.standard_cost),w.base_units&&gt(l,"unit",w.base_units),Ns(-1),setTimeout(()=>{var A;return(A=document.getElementById(`qty-${l}`))==null?void 0:A.focus()},50)}else if(S.key==="Escape")Ns(-1);else if(S.key==="Tab"&&!S.shiftKey&&g.length>0&&s.name){const w=g[0];gt(l,"name",w.name),w.selling_price?gt(l,"rate",w.selling_price):w.standard_cost&&gt(l,"rate",w.standard_cost),w.base_units&&gt(l,"unit",w.base_units),Ns(-1)}}},style:{width:"100%",padding:"8px",border:"1px solid var(--border)",borderRadius:"6px",fontSize:"14px",background:"var(--bg)"}}),Jy===l&&Na.length>0&&n.jsx("div",{style:{position:"absolute",top:"100%",left:"10px",right:"10px",background:"var(--card)",border:"1px solid var(--border)",borderRadius:"8px",maxHeight:"250px",overflow:"auto",zIndex:100,boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:g.length===0?n.jsx("div",{style:{padding:"12px",color:"var(--t3)",fontSize:"13px",textAlign:"center"},children:"No items found"}):g.map((S,w)=>n.jsxs("div",{onClick:()=>{gt(l,"name",S.name),S.selling_price?gt(l,"rate",S.selling_price):S.standard_cost&&gt(l,"rate",S.standard_cost),S.base_units&&gt(l,"unit",S.base_units),Ns(-1),setTimeout(()=>{var A;return(A=document.getElementById(`qty-${l}`))==null?void 0:A.focus()},50)},style:{padding:"10px 12px",cursor:"pointer",borderBottom:"1px solid var(--border)",fontSize:"13px",background:w===Ju?"var(--bg2)":"transparent",display:"flex",justifyContent:"space-between",alignItems:"center"},onMouseEnter:()=>Zi(w),children:[n.jsxs("div",{children:[n.jsx("div",{style:{fontWeight:"600"},children:S.name}),S.closing_balance>0&&n.jsxs("div",{style:{fontSize:"11px",color:"var(--t3)"},children:["Stock: ",S.closing_balance," ",S.base_units||""]})]}),n.jsxs("div",{style:{textAlign:"right"},children:[S.selling_price>0&&n.jsxs("div",{style:{fontWeight:"700",color:"var(--green)"},children:["",S.selling_price.toLocaleString("en-IN")]}),!S.selling_price&&S.standard_cost>0&&n.jsxs("div",{style:{fontWeight:"600",color:"var(--t2)"},children:["",S.standard_cost.toLocaleString("en-IN")]})]})]},w))})]}),n.jsx("td",{style:{padding:"8px 10px"},children:n.jsx("input",{id:`qty-${l}`,type:"number",min:"1",value:s.quantity,onChange:S=>gt(l,"quantity",S.target.value),onFocus:S=>S.target.select(),onKeyDown:S=>{var w;S.key==="Enter"&&(S.preventDefault(),(w=document.getElementById(`rate-${l}`))==null||w.focus())},style:{width:"100%",padding:"8px",border:"1px solid var(--border)",borderRadius:"6px",fontSize:"14px",textAlign:"center",background:"var(--bg)"}})}),n.jsx("td",{style:{padding:"8px 10px"},children:n.jsx("input",{id:`rate-${l}`,type:"number",placeholder:"0.00",value:s.rate,onChange:S=>gt(l,"rate",S.target.value),onFocus:S=>S.target.select(),onKeyDown:S=>{var w;(S.key==="Enter"||S.key==="Tab"&&!S.shiftKey)&&(S.preventDefault(),l===ye.items.length-1?(Cv(),setTimeout(()=>{var B;return(B=document.getElementById(`item-${l+1}`))==null?void 0:B.focus()},50)):(w=document.getElementById(`item-${l+1}`))==null||w.focus())},style:{width:"100%",padding:"8px",border:"1px solid var(--border)",borderRadius:"6px",fontSize:"14px",textAlign:"right",background:"var(--bg)"}})}),n.jsxs("td",{style:{padding:"8px 10px",textAlign:"right",fontWeight:"600",fontSize:"14px",color:"var(--green)"},children:["Rs ",(s.amount||0).toLocaleString("en-IN")]}),n.jsx("td",{style:{padding:"8px 10px"},children:ye.items.length>1&&n.jsx("button",{onClick:()=>cN(l),style:{background:"var(--red-g)",color:"var(--red)",border:"none",borderRadius:"6px",padding:"6px 10px",cursor:"pointer",fontSize:"12px"},children:""})})]},l)})}),n.jsx("tfoot",{children:n.jsxs("tr",{style:{background:"var(--bg2)"},children:[n.jsx("td",{colSpan:"4",style:{padding:"12px",textAlign:"right",fontWeight:"700",fontSize:"16px"},children:"Total:"}),n.jsxs("td",{style:{padding:"12px",textAlign:"right",fontWeight:"700",fontSize:"18px",color:"var(--blue)"},children:["Rs ",jd().toLocaleString("en-IN")]}),n.jsx("td",{})]})})]})]}),n.jsxs("div",{style:{background:"var(--card)",borderRadius:"12px",padding:"20px",border:"1px solid var(--border)",height:"fit-content"},children:[n.jsx("h3",{style:{fontSize:"16px",fontWeight:"700",color:"var(--t1)",marginBottom:"16px"},children:" Bill Details"}),n.jsxs("div",{style:{marginBottom:"16px",position:"relative"},children:[n.jsxs("label",{style:{display:"block",marginBottom:"6px",fontWeight:"600",fontSize:"13px",color:"var(--t2)"},children:["Party Name *",n.jsxs("span",{style:{fontSize:"10px",color:_a.length>0?"var(--green)":"var(--red)",marginLeft:"8px"},children:["(",_a.length>0?`${_a.length} parties`:"No parties synced",")"]})]}),(()=>{const s=_a.filter(l=>{var c;return!ye.partyName||((c=l.name)==null?void 0:c.toLowerCase().includes(ye.partyName.toLowerCase()))}).slice(0,15);return n.jsxs(n.Fragment,{children:[n.jsx("input",{type:"text",placeholder:_a.length>0?"Search party/customer... ( Enter)":"Sync Tally first to load parties...",value:ye.partyName,onChange:l=>{Ft(c=>({...c,partyName:l.target.value})),Cs(!0),eo(0)},onFocus:()=>{Cs(!0),eo(0)},onBlur:()=>setTimeout(()=>Cs(!1),200),onKeyDown:l=>{!Ky||s.length===0||(l.key==="ArrowDown"?(l.preventDefault(),eo(c=>Math.min(c+1,s.length-1))):l.key==="ArrowUp"?(l.preventDefault(),eo(c=>Math.max(c-1,0))):l.key==="Enter"&&s[Yu]?(l.preventDefault(),Ft(c=>({...c,partyName:s[Yu].name})),Cs(!1),setTimeout(()=>{var c;return(c=document.querySelector('input[placeholder="Search name or price..."]'))==null?void 0:c.focus()},50)):l.key==="Escape"?Cs(!1):l.key==="Tab"&&s.length>0&&ye.partyName&&(Ft(c=>({...c,partyName:s[0].name})),Cs(!1)))},style:{width:"100%",padding:"12px",fontSize:"14px",border:"1px solid var(--border)",borderRadius:"8px",background:"var(--bg)"}}),Ky&&_a.length>0&&n.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"var(--card)",border:"1px solid var(--border)",borderRadius:"8px",maxHeight:"250px",overflow:"auto",zIndex:100,boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:s.length===0?n.jsx("div",{style:{padding:"12px",color:"var(--t3)",fontSize:"13px",textAlign:"center"},children:"No parties found"}):s.map((l,c)=>n.jsxs("div",{onClick:()=>{Ft(p=>({...p,partyName:l.name})),Cs(!1),setTimeout(()=>{var p;return(p=document.querySelector('input[placeholder="Search name or price..."]'))==null?void 0:p.focus()},50)},style:{padding:"10px 12px",cursor:"pointer",borderBottom:"1px solid var(--border)",fontSize:"13px",background:c===Yu?"var(--bg2)":"transparent",display:"flex",justifyContent:"space-between",alignItems:"center"},onMouseEnter:()=>eo(c),children:[n.jsx("div",{style:{fontWeight:"600"},children:l.name}),l.closing_balance!==0&&n.jsxs("div",{style:{fontSize:"11px",color:l.closing_balance>0?"var(--red)":"var(--green)",fontWeight:"600"},children:["",Math.abs(l.closing_balance).toLocaleString("en-IN")," ",l.closing_balance>0?"Dr":"Cr"]})]},c))})]})})()]}),n.jsxs("div",{style:{marginBottom:"16px"},children:[n.jsxs("label",{style:{display:"block",marginBottom:"6px",fontWeight:"600",fontSize:"13px",color:"var(--t2)"},children:["Voucher Type",n.jsxs("span",{style:{fontSize:"10px",color:Gi.length>0?"var(--green)":"var(--orange)",marginLeft:"8px"},children:["(",Gi.length>0?`${Gi.length} types from Tally`:"Using defaults",")"]})]}),n.jsx("select",{value:ye.voucherType,onChange:s=>Ft(l=>({...l,voucherType:s.target.value})),style:{width:"100%",padding:"12px",fontSize:"14px",border:"1px solid var(--border)",borderRadius:"8px",background:"var(--bg)"},children:Gi.length>0?Gi.map((s,l)=>n.jsx("option",{value:s.name,children:s.name},l)):n.jsxs(n.Fragment,{children:[n.jsx("option",{value:"Pending Sales Bill",children:"Pending Sales Bill"}),n.jsx("option",{value:"Sales",children:"Sales"}),n.jsx("option",{value:"Purchase",children:"Purchase"}),n.jsx("option",{value:"Credit Note",children:"Credit Note"}),n.jsx("option",{value:"Debit Note",children:"Debit Note"})]})})]}),n.jsxs("div",{style:{marginBottom:"16px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"6px",fontWeight:"600",fontSize:"13px",color:"var(--t2)"},children:"Date"}),n.jsx("input",{type:"date",value:ye.date,onChange:s=>Ft(l=>({...l,date:s.target.value})),style:{width:"100%",padding:"12px",fontSize:"14px",border:"1px solid var(--border)",borderRadius:"8px",background:"var(--bg)"}})]}),n.jsxs("div",{style:{marginBottom:"16px",position:"relative"},children:[n.jsxs("label",{style:{display:"block",marginBottom:"6px",fontWeight:"600",fontSize:"13px",color:"var(--t2)"},children:["Staff / Agent (Num Packages)",n.jsxs("span",{style:{fontSize:"10px",color:Aa.length>0?"var(--green)":"var(--orange)",marginLeft:"8px"},children:["(",Aa.length>0?`${Aa.length} agents`:"No agents found",")"]})]}),(()=>{const s=Aa.filter(l=>{var c;return!ye.agent||((c=l.name)==null?void 0:c.toLowerCase().includes(ye.agent.toLowerCase()))}).slice(0,15);return n.jsxs(n.Fragment,{children:[n.jsx("input",{type:"text",placeholder:Aa.length>0?"Click to select staff/agent...":"No agents in Tally Agent Ledger",value:ye.agent,onChange:l=>{Ft(c=>({...c,agent:l.target.value})),ud(!0)},onFocus:()=>ud(!0),onBlur:()=>setTimeout(()=>ud(!1),200),style:{width:"100%",padding:"12px",fontSize:"14px",border:"1px solid var(--border)",borderRadius:"8px",background:"var(--bg)",cursor:"pointer"}}),iC&&Aa.length>0&&n.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"var(--card)",border:"1px solid var(--border)",borderRadius:"8px",maxHeight:"200px",overflow:"auto",zIndex:100,boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:s.length===0?n.jsx("div",{style:{padding:"12px",color:"var(--t3)",fontSize:"13px",textAlign:"center"},children:"No agents found"}):s.map((l,c)=>n.jsx("div",{onClick:()=>{Ft(p=>({...p,agent:l.name})),ud(!1)},style:{padding:"10px 12px",cursor:"pointer",borderBottom:"1px solid var(--border)",fontSize:"13px",fontWeight:"600"},onMouseEnter:p=>p.target.style.background="var(--bg2)",onMouseLeave:p=>p.target.style.background="transparent",children:l.name},c))})]})})()]}),n.jsxs("div",{style:{marginBottom:"16px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"6px",fontWeight:"600",fontSize:"13px",color:"var(--t2)"},children:"Narration / Notes"}),n.jsx("textarea",{placeholder:"Optional notes",value:ye.narration,onChange:s=>Ft(l=>({...l,narration:s.target.value})),rows:3,style:{width:"100%",padding:"12px",fontSize:"14px",border:"1px solid var(--border)",borderRadius:"8px",background:"var(--bg)",resize:"vertical"}})]}),n.jsxs("div",{style:{background:"var(--blue-g)",borderRadius:"8px",padding:"16px",marginTop:"20px"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[n.jsx("span",{style:{color:"var(--t2)",fontSize:"13px"},children:"Items:"}),n.jsx("span",{style:{fontWeight:"600"},children:ye.items.filter(s=>s.name).length})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[n.jsx("span",{style:{color:"var(--t2)",fontSize:"13px"},children:"Total Qty:"}),n.jsx("span",{style:{fontWeight:"600"},children:ye.items.reduce((s,l)=>s+(parseFloat(l.quantity)||0),0)})]}),n.jsxs("div",{style:{borderTop:"1px solid var(--border)",paddingTop:"12px",marginTop:"8px",display:"flex",justifyContent:"space-between"},children:[n.jsx("span",{style:{fontWeight:"700",fontSize:"15px"},children:"Grand Total:"}),n.jsxs("span",{style:{fontWeight:"700",fontSize:"18px",color:"var(--blue)"},children:["Rs ",jd().toLocaleString("en-IN")]})]})]})]})]})]}),n.jsxs("div",{className:`page ${f==="pending"?"active":""}`,children:[n.jsxs("div",{className:"sec-head",style:{marginBottom:"0"},children:[n.jsx("div",{className:"sec-title",style:{fontSize:"18px"},children:hr==="pending"?" Pending Bills":" Cleared Bills"}),n.jsx("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:hr==="pending"&&n.jsxs("span",{style:{fontSize:"14px",color:"var(--t2)"},children:["Total: ",n.jsx("strong",{style:{color:"var(--red)"},children:k(Bt.pendingAmount)})]})})]}),n.jsxs("div",{style:{display:"flex",gap:"0",marginBottom:"16px",borderBottom:"2px solid var(--border)"},children:[n.jsxs("button",{onClick:()=>ff("pending"),style:{padding:"10px 20px",fontSize:"13px",fontWeight:"600",cursor:"pointer",background:"none",border:"none",color:hr==="pending"?"var(--amber)":"var(--t3)",borderBottom:hr==="pending"?"2px solid var(--amber)":"2px solid transparent",marginBottom:"-2px"},children:[" Pending (",Gn.length,")"]}),n.jsxs("button",{onClick:()=>ff("cleared"),style:{padding:"10px 20px",fontSize:"13px",fontWeight:"600",cursor:"pointer",background:"none",border:"none",color:hr==="cleared"?"var(--green)":"var(--t3)",borderBottom:hr==="cleared"?"2px solid var(--green)":"2px solid transparent",marginBottom:"-2px"},children:[" Cleared (",bp.length,")"]})]}),hr==="pending"&&n.jsxs("div",{className:"pending-list",children:[Gn.map((s,l)=>{const c=s.is_critical===1;return n.jsxs("div",{className:"pending-item",style:c?{borderLeft:"3px solid var(--red)"}:{},children:[n.jsxs("div",{className:"pending-left",children:[n.jsx("div",{className:"pending-num",style:c?{background:"var(--red-g)",color:"var(--red)"}:{},children:String(l+1).padStart(2,"0")}),n.jsxs("div",{className:"pending-info",children:[n.jsxs("div",{className:"pending-party",children:[s.party_name,s.party_address&&n.jsxs("span",{className:"pending-addr",children:[", ",s.party_address]}),c&&s.critical_reason&&(()=>{const p=s.udf_payment_total>0&&Math.abs((s.udf_payment_total||0)-Math.abs(s.amount||0))<1;return s.critical_reason.split(",").filter(g=>!(g==="udf_change"&&p)).map(g=>{const y={udf_change:"UDF",audited_edit:"AUDIT-EDIT",post_dated:"POST-DATE"},S={udf_change:"#e65100",audited_edit:"#c62828",post_dated:"#6a1b9a"};return n.jsx("span",{style:{marginLeft:"4px",fontSize:"10px",background:S[g]||"var(--red)",color:"white",padding:"2px 6px",borderRadius:"4px"},children:y[g]||g},g)})})(),c&&!s.critical_reason&&n.jsx("span",{style:{marginLeft:"8px",fontSize:"10px",background:"var(--red)",color:"white",padding:"2px 6px",borderRadius:"4px"},children:"CRITICAL"})]}),n.jsxs("div",{className:"pending-meta",children:[n.jsx("span",{className:"pending-inv",children:s.voucher_number}),n.jsx("span",{className:"pending-dot",children:""}),n.jsx("span",{className:"pending-date",children:lt(s.voucher_date)}),n.jsx("span",{className:"pending-dot",children:""}),n.jsx("span",{className:"pending-bs",children:La(s.voucher_date)}),s.udf_payment_total>0&&n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"pending-dot",children:""}),n.jsxs("span",{style:{color:"var(--amber)",fontSize:"11px"},children:["UDF: ",k(s.udf_payment_total)]})]})]}),n.jsx("div",{className:"pending-ago",children:zr(s.voucher_date)})]})]}),n.jsxs("div",{className:"pending-right",children:[n.jsxs("div",{className:"pending-amt",children:["Rs ",Math.abs(s.pending_amount||s.amount).toLocaleString("en-IN")]}),n.jsxs("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap"},children:[n.jsx("button",{className:"pending-pay-btn",style:{background:"var(--blue-g)",color:"var(--blue)"},onClick:()=>tN(s),children:" Items"}),n.jsx("button",{className:"pending-pay-btn",style:{background:"var(--cyan-g, rgba(0,188,212,0.1))",color:"var(--cyan, #00bcd4)"},onClick:()=>ih(s),children:" Print"}),n.jsx("button",{className:"pending-pay-btn",style:{background:"var(--purple-g, rgba(156,39,176,0.1))",color:"var(--purple, #9c27b0)"},onClick:()=>{Xi(""),Xn({open:!0,billId:s.id,sending:!1})},children:" Email"}),n.jsx("button",{className:"pending-pay-btn",onClick:()=>Sv(s),children:" Pay"})]})]})]},s.id)}),Gn.length===0&&n.jsxs("div",{className:"empty-state",style:{padding:"60px 20px"},children:[n.jsx("div",{style:{fontSize:"48px",marginBottom:"12px"},children:""}),n.jsx("div",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:"No Pending Bills!"}),n.jsx("div",{style:{color:"var(--t3)"},children:"All payments are up to date"})]})]}),hr==="cleared"&&n.jsxs("div",{className:"pending-list",children:[bp.map((s,l)=>n.jsxs("div",{className:"pending-item",style:{borderLeft:"3px solid var(--green)"},children:[n.jsxs("div",{className:"pending-left",children:[n.jsx("div",{className:"pending-num",style:{background:"var(--green-g)",color:"var(--green)"},children:String(l+1).padStart(2,"0")}),n.jsxs("div",{className:"pending-info",children:[n.jsxs("div",{className:"pending-party",children:[s.party_name,s.party_address&&n.jsxs("span",{className:"pending-addr",children:[", ",s.party_address]}),n.jsx("span",{style:{marginLeft:"8px",fontSize:"10px",background:s.voucher_type==="Sales"?"var(--green)":"var(--amber)",color:"white",padding:"2px 6px",borderRadius:"4px"},children:s.voucher_type})]}),n.jsxs("div",{className:"pending-meta",children:[n.jsx("span",{className:"pending-inv",children:s.voucher_number}),n.jsx("span",{className:"pending-dot",children:""}),n.jsx("span",{className:"pending-date",children:lt(s.voucher_date)}),n.jsx("span",{className:"pending-dot",children:""}),n.jsx("span",{className:"pending-bs",children:La(s.voucher_date)}),n.jsx("span",{className:"pending-dot",children:""}),n.jsxs("span",{style:{color:"var(--green)",fontSize:"11px"},children:["Paid: ",k(s.udf_payment_total)]})]})]})]}),n.jsxs("div",{className:"pending-right",children:[n.jsxs("div",{className:"pending-amt",style:{color:"var(--green)"},children:["Rs ",Math.abs(s.amount).toLocaleString("en-IN")]}),n.jsxs("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap"},children:[n.jsx("button",{className:"pending-pay-btn",style:{background:"var(--cyan-g, rgba(0,188,212,0.1))",color:"var(--cyan, #00bcd4)"},onClick:()=>ih(s),children:" Print"}),n.jsx("button",{className:"pending-pay-btn",style:{background:"var(--purple-g, rgba(156,39,176,0.1))",color:"var(--purple, #9c27b0)"},onClick:()=>{Xi(""),Xn({open:!0,billId:s.id,sending:!1})},children:" Email"})]})]})]},s.id)),bp.length===0&&n.jsxs("div",{className:"empty-state",style:{padding:"60px 20px"},children:[n.jsx("div",{style:{fontSize:"48px",marginBottom:"12px"},children:""}),n.jsx("div",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:"No Cleared Bills Yet"}),n.jsx("div",{style:{color:"var(--t3)"},children:"Bills will appear here after payment is completed"})]})]})]}),n.jsxs("div",{className:`page ${f==="vouchers"?"active":""}`,children:[n.jsxs("div",{className:"sec-head",style:{marginBottom:"16px",flexWrap:"wrap",gap:"12px"},children:[n.jsxs("div",{className:"sec-title",style:{fontSize:"18px"},children:[" Total Vouchers",n.jsxs("span",{className:"cnt",style:{marginLeft:"8px"},children:[fr," vouchers"]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flexWrap:"wrap"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",background:"var(--card)",padding:"6px 12px",borderRadius:"8px",border:"1px solid var(--border)"},children:[n.jsx("span",{style:{fontSize:"11px",color:"var(--t3)",fontWeight:"600"},children:"From:"}),n.jsx("input",{type:"date",value:rs,onChange:s=>Bp(s.target.value),style:{background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"4px",padding:"4px 8px",fontSize:"12px",color:"var(--t1)"}}),n.jsx("span",{style:{fontSize:"11px",color:"var(--t3)",fontWeight:"600",marginLeft:"8px"},children:"To:"}),n.jsx("input",{type:"date",value:ss,onChange:s=>Tp(s.target.value),style:{background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"4px",padding:"4px 8px",fontSize:"12px",color:"var(--t1)"}}),n.jsx("button",{onClick:()=>{Bp(Xe()),Tp(Xe()),Tt(1)},style:{background:"var(--blue-g)",color:"var(--blue)",border:"none",borderRadius:"4px",padding:"4px 8px",fontSize:"10px",fontWeight:"600",cursor:"pointer"},children:"Today"}),n.jsx("button",{onClick:()=>{Bp(""),Tp(""),Tt(1)},style:{background:"var(--bg)",color:"var(--t2)",border:"1px solid var(--border)",borderRadius:"4px",padding:"4px 8px",fontSize:"10px",cursor:"pointer"},children:"All"})]}),n.jsxs("select",{value:wi,onChange:s=>{Sk(s.target.value),Tt(1)},style:{padding:"6px 10px",fontSize:"12px",borderRadius:"6px",border:"1px solid var(--border)",background:"var(--bg2)",color:"var(--t1)",minWidth:"160px"},children:[n.jsxs("option",{value:"",children:["All Types (",mf.reduce((s,l)=>s+l.count,0),")"]}),mf.map((s,l)=>n.jsxs("option",{value:s.voucher_type,children:[s.voucher_type," (",s.count,")"]},l))]}),n.jsx("div",{style:{display:"flex",gap:"2px",background:"var(--bg)",borderRadius:"6px",border:"1px solid var(--border)",padding:"2px"},children:[["both","Both"],["billing","FOR DB"],["odbc","ODBC"]].map(([s,l])=>n.jsx("button",{onClick:()=>{wk(s),Tt(1)},style:{padding:"4px 10px",fontSize:"11px",fontWeight:ln===s?"700":"400",borderRadius:"4px",border:"none",cursor:"pointer",background:ln===s?"var(--accent)":"transparent",color:ln===s?"white":"var(--t2)",transition:"all 0.15s"},children:l},s))}),n.jsx("input",{className:"search-box",placeholder:"Search vouchers...",value:M,onChange:s=>W(s.target.value),style:{width:"180px"}}),n.jsx("button",{className:"btn btn-p",onClick:Pt,disabled:xr,style:{padding:"6px 12px",fontSize:"12px"},children:xr?" Loading...":" Refresh"}),n.jsx("button",{className:"btn",onClick:async()=>{var s,l;try{O("info","Syncing","Syncing ODBC vouchers from Tally..."),await Uh(),O("success","Synced","ODBC vouchers synced from Tally"),ln!=="billing"&&Pt()}catch(c){O("error","Sync Failed",((l=(s=c.response)==null?void 0:s.data)==null?void 0:l.error)||c.message)}},style:{padding:"6px 12px",fontSize:"12px"},children:"Sync ODBC"}),n.jsx("button",{className:"btn",onClick:async()=>{var s,l;try{O("info","Backfill","Fetching creation timestamps from Tally...");const p=(await XB()).data;O("success","Done",`${p.updated} vouchers updated with creation timestamps`),Pt()}catch(c){O("error","Failed",((l=(s=c.response)==null?void 0:s.data)==null?void 0:l.error)||c.message)}},style:{padding:"6px 12px",fontSize:"12px"},title:"Fetch creation timestamps from Tally for vouchers that don't have them yet",children:"Backfill Timestamps"}),n.jsx("div",{style:{width:"1px",height:"24px",background:"var(--border)"}}),n.jsxs("select",{value:xt,onChange:s=>Sp(s.target.value),style:{padding:"6px 8px",fontSize:"11px",borderRadius:"6px",border:"1px solid var(--border)",background:"var(--bg2)",color:"var(--t1)"},children:[n.jsx("option",{value:(pe==null?void 0:pe.defaultCompany)||"FOR DB",children:(pe==null?void 0:pe.defaultCompany)||"FOR DB"}),n.jsx("option",{value:"ODBC CHq Mgmt",children:"ODBC CHq Mgmt"}),n.jsx("option",{value:"both",children:"Both Companies"})]}),n.jsx("button",{onClick:async()=>{var l,c,p;const s=ss||rs||new Date().toISOString().split("T")[0];if(confirm(`Lock all vouchers up to ${s} in "${xt}"?`)){wn(!0);try{const g=await Fb({date:s,company:xt});g.data.success?O("success","Locked",`${g.data.totalLocked} vouchers locked in "${xt}"`):O("error","Lock Failed",((l=g.data.errors)==null?void 0:l.join(", "))||g.data.message||"0 vouchers locked")}catch(g){O("error","Lock Failed",((p=(c=g.response)==null?void 0:c.data)==null?void 0:p.error)||g.message)}wn(!1)}},disabled:ht,style:{padding:"6px 12px",fontSize:"12px",background:ht?"var(--bg4)":"var(--red)",color:"white",border:"none",borderRadius:"6px",fontWeight:"600",cursor:ht?"not-allowed":"pointer",whiteSpace:"nowrap"},children:ht?" ...":" Lock"}),n.jsx("button",{onClick:async()=>{var c,p,g;const s=rs,l=ss;if(!s||!l){O("error","Error","Set From/To dates first");return}if(confirm(`Unlock vouchers from ${s} to ${l} in "${xt}"?`)){wn(!0);try{const y=await Db({fromDate:s,toDate:l,company:xt});y.data.success?O("success","Unlocked",`${y.data.totalUnlocked} vouchers unlocked in "${xt}"`):O("error","Unlock Failed",((c=y.data.errors)==null?void 0:c.join(", "))||y.data.message||"0 vouchers unlocked")}catch(y){O("error","Unlock Failed",((g=(p=y.response)==null?void 0:p.data)==null?void 0:g.error)||y.message)}wn(!1)}},disabled:ht,style:{padding:"6px 12px",fontSize:"12px",background:ht?"var(--bg4)":"var(--green)",color:"white",border:"none",borderRadius:"6px",fontWeight:"600",cursor:ht?"not-allowed":"pointer",whiteSpace:"nowrap"},children:ht?" ...":" Unlock"})]})]}),n.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginBottom:"12px",alignItems:"center"},children:[n.jsx("span",{style:{fontSize:"11px",color:"var(--t2)",fontWeight:"600",marginRight:"4px"},children:"Status:"}),[{key:"",label:"All",bg:"var(--bg)",color:"var(--t2)",border:"var(--border)"},{key:"non_audited",label:"Non Audited",bg:"var(--red-g)",color:"var(--red)",border:"var(--red)"},{key:"need_to_ask",label:"Need to Ask",bg:"var(--amber-g)",color:"var(--amber)",border:"var(--amber)"},{key:"audited",label:"Audited",bg:"var(--green-g)",color:"var(--green)",border:"var(--green)"},{key:"unset",label:"Unset",bg:"var(--bg)",color:"var(--t3)",border:"var(--border)"}].map(s=>n.jsx("button",{onClick:()=>{kk(as===s.key?"":s.key),Tt(1)},style:{padding:"4px 10px",fontSize:"11px",fontWeight:as===s.key?"700":"500",borderRadius:"4px",cursor:"pointer",transition:"all 0.15s",background:as===s.key?s.bg:"var(--bg)",color:as===s.key?s.color:"var(--t3)",border:as===s.key?`2px solid ${s.border}`:"1px solid var(--border)"},children:s.label},s.key)),n.jsx("div",{style:{width:"1px",height:"20px",background:"var(--border)",margin:"0 4px"}}),n.jsx("button",{onClick:()=>{Uf(!is),Vf(""),Tt(1)},style:{padding:"4px 10px",fontSize:"11px",fontWeight:is?"700":"500",borderRadius:"4px",cursor:"pointer",transition:"all 0.15s",background:is?"var(--red-g)":"var(--bg)",color:is?"var(--red)":"var(--t3)",border:is?"2px solid var(--red)":"1px solid var(--border)"},children:"CRITICAL"}),[{key:"udf_change",label:"UDF Change",color:"#e65100",bg:"#fff3e0",border:"#e65100"},{key:"audited_edit",label:"Audited Edit",color:"#c62828",bg:"#ffebee",border:"#c62828"},{key:"post_dated",label:"Post Dated",color:"#6a1b9a",bg:"#f3e5f5",border:"#6a1b9a"}].map(s=>n.jsx("button",{onClick:()=>{Vf(os===s.key?"":s.key),Uf(!1),Tt(1)},style:{padding:"4px 10px",fontSize:"11px",fontWeight:os===s.key?"700":"500",borderRadius:"4px",cursor:"pointer",transition:"all 0.15s",background:os===s.key?s.bg:"var(--bg)",color:os===s.key?s.color:"var(--t3)",border:os===s.key?`2px solid ${s.border}`:"1px solid var(--border)"},children:s.label},s.key))]}),sa.size>0&&n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"8px 14px",marginBottom:"10px",background:"var(--blue-g)",border:"1px solid var(--blue)",borderRadius:"8px"},children:[n.jsxs("span",{style:{fontSize:"12px",fontWeight:"700",color:"var(--blue)"},children:[sa.size," selected"]}),n.jsx("div",{style:{width:"1px",height:"18px",background:"var(--blue)",opacity:.3}}),n.jsx("span",{style:{fontSize:"11px",color:"var(--t2)"},children:"Set audit:"}),[{key:"audited",label:"Audited",bg:"var(--green)",color:"#fff"},{key:"need_to_ask",label:"Need to Ask",bg:"var(--amber)",color:"#fff"},{key:"non_audited",label:"Non Audited",bg:"var(--red)",color:"#fff"}].map(s=>n.jsx("button",{disabled:zp,onClick:async()=>{Kf(!0);try{await nT([...sa],s.key),fi(l=>l.map(c=>sa.has(c.id)?{...c,audit_status:s.key}:c)),aa(new Set)}catch(l){console.error("Bulk audit failed:",l)}finally{Kf(!1)}},style:{padding:"4px 10px",fontSize:"11px",fontWeight:"600",borderRadius:"4px",cursor:zp?"wait":"pointer",border:"none",background:s.bg,color:s.color,opacity:zp?.6:1},children:s.label},s.key)),n.jsx("div",{style:{flex:1}}),n.jsx("button",{onClick:()=>aa(new Set),style:{padding:"4px 8px",fontSize:"10px",borderRadius:"4px",border:"1px solid var(--border)",background:"var(--bg)",color:"var(--t2)",cursor:"pointer"},children:"Clear"})]}),xr?n.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px"},children:[n.jsx("div",{className:"loading-spinner"}),n.jsx("span",{style:{marginLeft:"12px",color:"var(--t2)"},children:"Loading all vouchers..."})]}):n.jsxs("div",{className:"vouchers-table-wrapper",children:[n.jsxs("table",{className:"vouchers-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{style:{width:"32px",padding:"4px"},children:n.jsx("input",{type:"checkbox",checked:Dn.length>0&&sa.size===Dn.length,onChange:s=>{s.target.checked?aa(new Set(Dn.map(l=>l.id))):aa(new Set)},style:{cursor:"pointer"}})}),n.jsxs("th",{className:"sortable",onClick:()=>gr(s=>({field:"id",direction:s.field==="id"&&s.direction==="asc"?"desc":"asc"})),children:["UID ",Ge.field==="id"&&n.jsx("span",{className:"sort-arrow",children:Ge.direction==="asc"?"":""})]}),n.jsxs("th",{className:"sortable",onClick:()=>gr(s=>({field:"alter_id",direction:s.field==="alter_id"&&s.direction==="asc"?"desc":"asc"})),children:["Alt ID ",Ge.field==="alter_id"&&n.jsx("span",{className:"sort-arrow",children:Ge.direction==="asc"?"":""})]}),n.jsx("th",{children:"GUID"}),n.jsxs("th",{className:"sortable",onClick:()=>gr(s=>({field:"voucher_type",direction:s.field==="voucher_type"&&s.direction==="asc"?"desc":"asc"})),children:["Voucher Type ",Ge.field==="voucher_type"&&n.jsx("span",{className:"sort-arrow",children:Ge.direction==="asc"?"":""})]}),ln==="both"&&n.jsxs("th",{className:"sortable",onClick:()=>gr(s=>({field:"company",direction:s.field==="company"&&s.direction==="asc"?"desc":"asc"})),children:["Company ",Ge.field==="company"&&n.jsx("span",{className:"sort-arrow",children:Ge.direction==="asc"?"":""})]}),n.jsxs("th",{className:"sortable",onClick:()=>gr(s=>({field:"party_name",direction:s.field==="party_name"&&s.direction==="asc"?"desc":"asc"})),children:["Party Name ",Ge.field==="party_name"&&n.jsx("span",{className:"sort-arrow",children:Ge.direction==="asc"?"":""})]}),n.jsxs("th",{className:"r sortable",onClick:()=>gr(s=>({field:"amount",direction:s.field==="amount"&&s.direction==="asc"?"desc":"asc"})),children:["Amount ",Ge.field==="amount"&&n.jsx("span",{className:"sort-arrow",children:Ge.direction==="asc"?"":""})]}),n.jsxs("th",{className:"sortable",onClick:()=>gr(s=>({field:"voucher_date",direction:s.field==="voucher_date"&&s.direction==="asc"?"desc":"asc"})),children:["English Date ",Ge.field==="voucher_date"&&n.jsx("span",{className:"sort-arrow",children:Ge.direction==="asc"?"":""})]}),n.jsx("th",{children:"Nepali Date"}),n.jsxs("th",{className:"sortable",onClick:()=>gr(s=>({field:"tally_created_datetime",direction:s.field==="tally_created_datetime"&&s.direction==="asc"?"desc":"asc"})),children:["Created At ",Ge.field==="tally_created_datetime"&&n.jsx("span",{className:"sort-arrow",children:Ge.direction==="asc"?"":""})]}),n.jsx("th",{children:"Age"}),n.jsx("th",{children:"Audit"}),n.jsx("th",{style:{width:"50px",textAlign:"center"},children:"Lock"})]})}),n.jsx("tbody",{children:Dn.sort((s,l)=>{const{field:c,direction:p}=Ge;let g=s[c],y=l[c];return g==null&&(g=""),y==null&&(y=""),c==="id"||c==="amount"||c==="alter_id"?(g=Number(g)||0,y=Number(y)||0):(g=String(g).toLowerCase(),y=String(y).toLowerCase()),g<y?p==="asc"?-1:1:g>y?p==="asc"?1:-1:0}).map((s,l)=>{var g,y,S,w;const c=s.tally_master_id||s.master_id,p=bl===c;return n.jsxs(vo.Fragment,{children:[n.jsxs("tr",{className:`${s.payment_status==="pending"?"unpaid-row":""} ${p?"expanded-row":""}`,onClick:()=>c&&Qy(c),style:{cursor:c?"pointer":"default"},children:[n.jsx("td",{style:{padding:"4px",textAlign:"center"},onClick:A=>A.stopPropagation(),children:n.jsx("input",{type:"checkbox",checked:sa.has(s.id),onChange:A=>{aa(B=>{const D=new Set(B);return A.target.checked?D.add(s.id):D.delete(s.id),D})},style:{cursor:"pointer"}})}),n.jsx("td",{className:"mono",children:s.id||"-"}),n.jsx("td",{className:"mono",children:s.alter_id||s.voucher_number||"-"}),n.jsx("td",{className:"mono guid",children:s.tally_guid||s.master_id||"-"}),n.jsxs("td",{children:[n.jsx("span",{className:`vt-badge ${(g=s.voucher_type)!=null&&g.toLowerCase().includes("sales")?"sales":(y=s.voucher_type)!=null&&y.toLowerCase().includes("receipt")?"receipt":(S=s.voucher_type)!=null&&S.toLowerCase().includes("payment")||(w=s.voucher_type)!=null&&w.toLowerCase().includes("purchase")?"payment":"journal"}`,children:s.voucher_type||"Unknown"}),s.is_critical===1&&s.critical_reason&&(()=>{const A=s.udf_payment_total>0&&Math.abs((s.udf_payment_total||0)-Math.abs(s.amount||0))<1;return s.critical_reason.split(",").filter(D=>!(D==="udf_change"&&A)).map(D=>{const P={udf_change:"UDF",audited_edit:"AUDIT-EDIT",post_dated:"POST-DATE"},V={udf_change:"#e65100",audited_edit:"#c62828",post_dated:"#6a1b9a"};return n.jsx("span",{style:{marginLeft:"4px",fontSize:"9px",background:V[D]||"var(--red)",color:"white",padding:"1px 5px",borderRadius:"3px",fontWeight:"700"},children:P[D]||D},D)})})(),s.is_critical===1&&!s.critical_reason&&n.jsx("span",{style:{marginLeft:"4px",fontSize:"9px",background:"var(--red)",color:"white",padding:"1px 5px",borderRadius:"3px",fontWeight:"700"},children:"CRITICAL"}),s.is_critical!==1&&s.critical_reason&&(()=>{const A=s.udf_payment_total>0&&Math.abs((s.udf_payment_total||0)-Math.abs(s.amount||0))<1;return s.critical_reason.split(",").filter(D=>!(D==="udf_change"&&A)).map(D=>{const P={udf_change:"UDF",audited_edit:"AUDIT-EDIT",post_dated:"POST-DATE"},V={udf_change:"#e65100",audited_edit:"#c62828",post_dated:"#6a1b9a"};return n.jsx("span",{style:{marginLeft:"4px",fontSize:"9px",background:"transparent",color:V[D]||"var(--t3)",padding:"1px 5px",borderRadius:"3px",fontWeight:"600",border:`1px solid ${V[D]||"var(--border)"}`,opacity:.6},children:P[D]||D},D)})})()]}),ln==="both"&&n.jsx("td",{children:n.jsx("span",{style:{fontSize:"9px",padding:"2px 6px",borderRadius:"3px",fontWeight:"700",background:s.company==="FOR DB"?"var(--blue-g, #e3f2fd)":"var(--amber-g, #fff8e1)",color:s.company==="FOR DB"?"var(--blue, #1976d2)":"var(--amber, #f57f17)"},children:s.company==="FOR DB"?"FOR DB":"ODBC"})}),n.jsx("td",{className:"party-cell",children:s.party_name||"-"}),n.jsxs("td",{className:`r amt-cell ${(s.amount||0)<0?"credit":"debit"}`,children:["Rs ",Math.abs(s.amount||0).toLocaleString("en-IN")]}),n.jsx("td",{className:"date-cell",children:lt(s.voucher_date)}),n.jsx("td",{className:"date-cell nepali",children:La(s.voucher_date)}),n.jsx("td",{className:"date-cell",style:{fontSize:"10px",whiteSpace:"nowrap"},title:s.tally_created_datetime?`Created: ${Kh(s.tally_created_datetime)}
Updated: ${Kh(s.tally_updated_datetime)}
Status: ${s.object_update_action||"?"}
Entered by: ${s.entered_by||"?"}`:"",children:s.tally_created_datetime?n.jsxs(n.Fragment,{children:[Kh(s.tally_created_datetime),s.object_update_action&&n.jsx("span",{style:{marginLeft:"4px",fontSize:"8px",padding:"1px 4px",borderRadius:"3px",fontWeight:"700",background:s.object_update_action==="Create"?"var(--green-g, #e8f5e9)":"var(--amber-g, #fff8e1)",color:s.object_update_action==="Create"?"var(--green, #2e7d32)":"var(--amber, #f57f17)"},children:s.object_update_action==="Create"?"NEW":"EDITED"})]}):n.jsx("span",{style:{color:"var(--t3)"},children:""})}),n.jsx("td",{className:"age-cell",children:n.jsx("span",{className:`age-badge ${zr(s.voucher_date)==="Today"?"today":zr(s.voucher_date).includes("1 day")?"recent":"old"}`,children:zr(s.voucher_date)})}),n.jsx("td",{onClick:A=>A.stopPropagation(),style:{padding:"4px"},children:s.company==="ODBC CHq Mgmt"?n.jsx("span",{style:{fontSize:"10px",color:"var(--t3)"},children:""}):n.jsxs("select",{value:s.audit_status||"",onChange:async A=>{const B=A.target.value||null;try{await tT(s.id,B),fi(D=>D.map(P=>P.id===s.id?{...P,audit_status:B}:P))}catch(D){console.error("Audit update failed:",D)}},style:{fontSize:"10px",padding:"3px 4px",borderRadius:"4px",cursor:"pointer",border:"1px solid var(--border)",background:"var(--bg)",color:"var(--t1)",...s.audit_status==="audited"?{background:"var(--green-g)",color:"var(--green)",fontWeight:"700"}:s.audit_status==="need_to_ask"?{background:"var(--amber-g)",color:"var(--amber)",fontWeight:"700"}:s.audit_status==="non_audited"?{background:"var(--red-g)",color:"var(--red)",fontWeight:"700"}:{}},children:[n.jsx("option",{value:"",children:""}),n.jsx("option",{value:"audited",children:"Audited"}),n.jsx("option",{value:"need_to_ask",children:"Need to Ask"}),n.jsx("option",{value:"non_audited",children:"Non Audited"})]})}),n.jsx("td",{onClick:A=>A.stopPropagation(),style:{padding:"4px",textAlign:"center"},children:s.company==="ODBC CHq Mgmt"?n.jsx("span",{style:{fontSize:"10px",color:"var(--t3)"},children:""}):n.jsx("button",{onClick:async()=>{const A=s._locked;try{const B=await bz({billId:s.id,lockValue:A?"No":"Yes",company:xt});B.data.success?(fi(D=>D.map(P=>P.id===s.id?{...P,_locked:!A}:P)),O("success",A?"Unlocked":"Locked",`Voucher ${s.voucher_number||s.id} ${A?"unlocked":"locked"}`)):O("error","Failed",B.data.error||"Could not toggle lock")}catch(B){O("error","Error",B.message)}},title:s._locked?"Click to unlock":"Click to lock",style:{padding:"3px 8px",fontSize:"14px",border:"none",borderRadius:"4px",cursor:"pointer",background:s._locked?"var(--red-g)":"var(--bg)",color:s._locked?"var(--red)":"var(--t3)"},children:s._locked?"":""})})]}),p&&n.jsx("tr",{className:"change-log-row",children:n.jsx("td",{colSpan:ln==="both"?15:14,style:{padding:0,border:"none"},children:n.jsxs("div",{style:{background:"var(--bg)",borderLeft:"3px solid var(--blue)",padding:"12px 16px",margin:"0 8px 8px 8px",borderRadius:"0 8px 8px 0"},children:[n.jsxs("div",{style:{fontSize:"12px",fontWeight:"700",color:"var(--blue)",marginBottom:"8px"},children:["Alteration History  Master ID: ",c]}),Yf?n.jsx("div",{style:{color:"var(--t3)",fontSize:"12px"},children:"Loading changes..."}):jl.length===0?n.jsx("div",{style:{color:"var(--t3)",fontSize:"12px"},children:"No field changes recorded for this voucher."}):n.jsxs("table",{style:{width:"100%",fontSize:"12px",borderCollapse:"collapse"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{borderBottom:"1px solid var(--border)"},children:[n.jsx("th",{style:{textAlign:"left",padding:"4px 8px",color:"var(--t2)",fontWeight:"600"},children:"Field"}),n.jsx("th",{style:{textAlign:"left",padding:"4px 8px",color:"var(--t2)",fontWeight:"600"},children:"Old Value"}),n.jsx("th",{style:{textAlign:"left",padding:"4px 8px",color:"var(--t2)",fontWeight:"600"},children:"New Value"}),n.jsx("th",{style:{textAlign:"left",padding:"4px 8px",color:"var(--t2)",fontWeight:"600"},children:"Alter ID"}),n.jsx("th",{style:{textAlign:"left",padding:"4px 8px",color:"var(--t2)",fontWeight:"600"},children:"Changed At"})]})}),n.jsx("tbody",{children:jl.map((A,B)=>n.jsxs("tr",{style:{borderBottom:"1px solid var(--border)"},children:[n.jsx("td",{style:{padding:"4px 8px",fontWeight:"600",color:"var(--orange)"},children:A.field_name}),n.jsx("td",{style:{padding:"4px 8px",color:"var(--red)",fontFamily:"var(--mono)"},children:A.old_value||"-"}),n.jsx("td",{style:{padding:"4px 8px",color:"var(--green)",fontFamily:"var(--mono)"},children:A.new_value||"-"}),n.jsxs("td",{style:{padding:"4px 8px",color:"var(--t3)",fontFamily:"var(--mono)"},children:[A.old_alter_id,"  ",A.new_alter_id]}),n.jsx("td",{style:{padding:"4px 8px",color:"var(--t3)"},children:A.changed_at?new Date(A.changed_at+"Z").toLocaleString("en-US",{timeZone:"Asia/Kathmandu"}):"-"})]},B))})]})]})})})]},s.id||l)})})]}),Dn.length===0&&n.jsxs("div",{className:"empty-state",style:{padding:"60px 20px"},children:[n.jsx("div",{style:{fontSize:"48px",marginBottom:"12px"},children:""}),n.jsx("div",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:"No Vouchers Found"}),n.jsx("div",{style:{color:"var(--t3)"},children:M?"Try a different search term":"No vouchers synced from Tally yet. Click Refresh to load."})]}),fr>In&&n.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"8px",padding:"16px 0",flexWrap:"wrap"},children:[n.jsx("button",{className:"btn btn-o",disabled:kn<=1||xr,onClick:()=>Tt(1),style:{padding:"6px 10px",fontSize:"12px"},children:"First"}),n.jsx("button",{className:"btn btn-o",disabled:kn<=1||xr,onClick:()=>Tt(s=>Math.max(1,s-1)),style:{padding:"6px 10px",fontSize:"12px"},children:" Prev"}),(()=>{const s=Math.ceil(fr/In),l=[];let c=Math.max(1,kn-2),p=Math.min(s,c+4);p-c<4&&(c=Math.max(1,p-4));for(let g=c;g<=p;g++)l.push(g);return l.map(g=>n.jsx("button",{className:`btn ${g===kn?"btn-p":"btn-o"}`,onClick:()=>Tt(g),disabled:xr,style:{padding:"6px 10px",fontSize:"12px",minWidth:"36px",fontWeight:g===kn?"700":"400"},children:g},g))})(),n.jsx("button",{className:"btn btn-o",disabled:kn>=Math.ceil(fr/In)||xr,onClick:()=>Tt(s=>s+1),style:{padding:"6px 10px",fontSize:"12px"},children:"Next "}),n.jsx("button",{className:"btn btn-o",disabled:kn>=Math.ceil(fr/In)||xr,onClick:()=>Tt(Math.ceil(fr/In)),style:{padding:"6px 10px",fontSize:"12px"},children:"Last"}),n.jsxs("span",{style:{fontSize:"12px",color:"var(--t3)",marginLeft:"8px"},children:["Page ",kn," of ",Math.ceil(fr/In)," (",fr," total)"]})]})]})]}),n.jsxs("div",{className:`page ${f==="deleted"?"active":""}`,children:[n.jsxs("div",{className:"sec-head",style:{marginBottom:"16px",flexWrap:"wrap",gap:"12px"},children:[n.jsxs("div",{className:"sec-title",style:{fontSize:"18px"},children:[" Deleted Vouchers",n.jsxs("span",{className:"cnt",style:{marginLeft:"8px"},children:[Cp," vouchers"]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("button",{className:"btn btn-p",onClick:As,disabled:Np,style:{padding:"6px 12px",fontSize:"12px"},children:Np?" Loading...":" Refresh"}),n.jsx("button",{className:"btn btn-o",onClick:tv,disabled:yl||!Pe,style:{padding:"6px 12px",fontSize:"12px"},children:yl?" Syncing...":" Sync Deleted from Tally"})]})]}),n.jsxs("div",{style:{background:"var(--card)",padding:"12px 16px",borderRadius:"8px",marginBottom:"16px",border:"1px solid var(--border)",fontSize:"13px",color:"var(--t2)"},children:[n.jsx("strong",{style:{color:"var(--amber)"},children:" Note:"})," These vouchers were deleted in Tally and are kept here for reference. You can restore them locally (they will reappear on next sync if still in Tally) or permanently delete them from the database."]}),Np?n.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px"},children:[n.jsx("div",{className:"loading-spinner"}),n.jsx("span",{style:{marginLeft:"12px",color:"var(--t2)"},children:"Loading deleted vouchers..."})]}):Tf.length===0?n.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"var(--t3)"},children:[n.jsx("div",{style:{fontSize:"48px",marginBottom:"12px"},children:""}),n.jsx("div",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px",color:"var(--green)"},children:"No Deleted Vouchers"}),n.jsx("div",{style:{color:"var(--t3)"},children:"All vouchers are in sync with Tally"})]}):n.jsx("div",{className:"vouchers-table-wrapper",children:n.jsxs("table",{className:"vouchers-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"UID"}),n.jsx("th",{children:"GUID"}),n.jsx("th",{children:"Voucher Type"}),n.jsx("th",{children:"Voucher No"}),n.jsx("th",{children:"Party Name"}),n.jsx("th",{className:"r",children:"Amount"}),n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Deleted At"}),n.jsx("th",{children:"Reason"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:Tf.map((s,l)=>{var c,p,g,y;return n.jsxs("tr",{style:{opacity:.85},children:[n.jsx("td",{style:{color:"var(--t3)",fontSize:"11px"},children:l+1}),n.jsx("td",{style:{fontFamily:"var(--mono)",fontSize:"11px"},children:s.id}),n.jsxs("td",{style:{fontFamily:"var(--mono)",fontSize:"10px",color:"var(--t3)",maxWidth:"100px",overflow:"hidden",textOverflow:"ellipsis"},children:[(c=s.tally_guid)==null?void 0:c.substring(0,12),"..."]}),n.jsx("td",{children:n.jsx("span",{className:`vt-badge ${(p=s.voucher_type)!=null&&p.toLowerCase().includes("sales")?"sales":(g=s.voucher_type)!=null&&g.toLowerCase().includes("receipt")?"receipt":(y=s.voucher_type)!=null&&y.toLowerCase().includes("payment")?"payment":"journal"}`,children:s.voucher_type})}),n.jsx("td",{style:{fontWeight:"600"},children:s.voucher_number}),n.jsxs("td",{children:[s.party_name,s.extra_parties_count>0&&n.jsxs("span",{style:{fontSize:"10px",color:"var(--orange)",marginLeft:"4px",fontWeight:"700"},children:["+",s.extra_parties_count]})]}),n.jsx("td",{className:"r",style:{fontWeight:"600",color:s.amount<0?"var(--red)":"var(--green)"},children:k(s.total_amount&&s.total_amount>0?s.total_amount:s.amount)}),n.jsx("td",{style:{fontSize:"12px"},children:lt(s.voucher_date)}),n.jsx("td",{style:{fontSize:"11px",color:"var(--t3)"},children:s.deleted_at?new Date(s.deleted_at+"Z").toLocaleString("en-US",{timeZone:"Asia/Kathmandu"}):"-"}),n.jsx("td",{style:{fontSize:"11px",color:"var(--amber)"},children:s.delete_reason||"-"}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-sm",onClick:()=>lC(s.tally_guid),disabled:Ff===s.tally_guid,style:{padding:"4px 8px",fontSize:"11px",background:"var(--green-g)",color:"var(--green)",border:"1px solid var(--green)",borderRadius:"4px",cursor:"pointer"},children:Ff===s.tally_guid?"...":" Restore"})})]},s.tally_guid||l)})})]})})]}),n.jsxs("div",{className:`page ${f==="dispatch"?"active":""}`,children:[n.jsx("div",{className:"sec-head",style:{marginBottom:"16px"},children:n.jsx("div",{className:"sec-title",style:{fontSize:"18px"},children:" Dispatch Board"})}),n.jsxs("div",{className:"kanban",children:[n.jsx(Kd,{title:"Paid  To Pack",color:"amber",items:zs.pending.filter(s=>s.payment_status==="paid"),onMove:s=>oh(s,"packing"),moveLabel:" Move to Packing"}),n.jsx(Kd,{title:"Packing",color:"orange",items:zs.packing,onMove:s=>oh(s,"ready"),moveLabel:" Mark Ready"}),n.jsx(Kd,{title:"Ready",color:"cyan",items:zs.ready,onMove:s=>oh(s,"dispatched"),moveLabel:" Dispatched",moveStyle:{borderColor:"var(--green)",color:"var(--green)"}}),n.jsx(Kd,{title:"Dispatched",color:"green",items:zs.dispatched,faded:!0})]})]}),n.jsxs("div",{className:`page ${f==="sacks"?"active":""}`,children:[n.jsxs("div",{className:"sec-head",style:{marginBottom:"16px"},children:[n.jsx("div",{className:"sec-title",style:{fontSize:"18px"},children:" Sack / Bag Consolidation"}),n.jsx("button",{className:"btn btn-p",children:"+ New Sack"})]}),n.jsxs("div",{className:"sacks-grid",children:[lh.map(s=>n.jsx(Gz,{sack:s,onUpdateStatus:async l=>{await aT(s.id,l),hd()}},s.id)),lh.length===0&&n.jsx("div",{className:"empty-state",children:"No sacks yet. Create one to consolidate bags."})]})]}),n.jsx("div",{className:`page ${f==="daybook"?"active":""}`,children:n.jsxs("div",{className:"daybook-container",children:[n.jsxs("div",{className:"db-head",style:{flexWrap:"wrap",gap:"10px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("div",{className:"sec-title",style:{marginBottom:0},children:" Daybook"}),n.jsxs("div",{style:{display:"flex",borderRadius:"6px",overflow:"hidden",border:"1px solid var(--border)"},children:[n.jsx("button",{onClick:()=>qf("columnar"),style:{padding:"4px 12px",fontSize:"11px",fontWeight:"600",border:"none",cursor:"pointer",background:ra==="columnar"?"var(--blue)":"var(--bg2)",color:ra==="columnar"?"#fff":"var(--t2)"},children:"Columnar"}),n.jsx("button",{onClick:()=>qf("normal"),style:{padding:"4px 12px",fontSize:"11px",fontWeight:"600",border:"none",cursor:"pointer",background:ra==="normal"?"var(--blue)":"var(--bg2)",color:ra==="normal"?"#fff":"var(--t2)"},children:"Normal"})]}),n.jsxs("span",{style:{fontSize:"11px",color:"var(--t3)"},children:["(",Zn.length," entries)"]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[n.jsx("span",{style:{fontSize:"11px",color:"var(--t2)"},children:"From:"}),n.jsx("input",{type:"date",value:Ap,onChange:s=>Mf(s.target.value)}),n.jsx("span",{style:{fontSize:"11px",color:"var(--t2)"},children:"To:"}),n.jsx("input",{type:"date",value:Rp,onChange:s=>$f(s.target.value)}),n.jsx("button",{onClick:()=>{const s=new Date().toISOString().split("T")[0];Mf(s),$f(s)},style:{background:"var(--blue-g)",color:"var(--blue)",border:"none",borderRadius:"4px",padding:"4px 8px",fontSize:"10px",fontWeight:"600",cursor:"pointer"},children:"Today"}),n.jsxs("select",{value:vl,onChange:s=>jk(s.target.value),style:{padding:"4px 8px",fontSize:"11px",borderRadius:"4px",border:"1px solid var(--border)",background:"var(--bg2)",color:"var(--t1)"},children:[n.jsx("option",{value:"",children:"All Types"}),[...new Set(Zn.map(s=>s.voucher_type))].sort().map(s=>n.jsx("option",{value:s,children:s},s))]})]})]}),n.jsxs("div",{className:"db-summary",style:{marginBottom:"12px"},children:[n.jsxs("div",{className:"db-sum-item",children:[n.jsx("span",{className:"lb",children:"Total Debit"}),n.jsx("span",{className:"vl",style:{color:"var(--red)"},children:k(Qt.debit)})]}),n.jsxs("div",{className:"db-sum-item",children:[n.jsx("span",{className:"lb",children:"Total Credit"}),n.jsx("span",{className:"vl",style:{color:"var(--green)"},children:k(Qt.credit)})]}),n.jsxs("div",{className:"db-sum-item",children:[n.jsx("span",{className:"lb",children:"Balance"}),n.jsxs("span",{className:"vl",style:{color:Qt.debit-Qt.credit>0?"var(--red)":"var(--green)"},children:[k(Qt.debit-Qt.credit)," ",Qt.debit-Qt.credit>0?"Dr":"Cr"]})]})]}),ra==="columnar"&&n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Type"}),n.jsx("th",{children:"Vch No"}),n.jsx("th",{children:"Party"}),n.jsx("th",{children:"Narration"}),n.jsx("th",{className:"r",children:"Debit"}),n.jsx("th",{className:"r",children:"Credit"})]})}),n.jsx("tbody",{children:Zn.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:"8",style:{textAlign:"center",padding:"40px",color:"var(--t3)"},children:"No entries for selected date range"})}):Zn.map((s,l)=>{var c,p,g,y;return n.jsxs("tr",{children:[n.jsx("td",{children:l+1}),n.jsx("td",{style:{fontSize:"11px",whiteSpace:"nowrap"},children:lt(s.voucher_date)}),n.jsx("td",{children:n.jsx("span",{className:`vt ${(c=s.voucher_type)!=null&&c.toLowerCase().includes("sales")?"sales":(p=s.voucher_type)!=null&&p.toLowerCase().includes("receipt")?"receipt":(g=s.voucher_type)!=null&&g.toLowerCase().includes("payment")||(y=s.voucher_type)!=null&&y.toLowerCase().includes("purchase")?"payment":"journal"}`,children:s.voucher_type||"Entry"})}),n.jsx("td",{style:{fontFamily:"var(--mono)",fontSize:"11px"},children:s.voucher_number||""}),n.jsx("td",{className:"party",children:s.party_name||""}),n.jsx("td",{style:{fontSize:"11px",color:"var(--t3)",maxWidth:"200px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:s.narration||""}),n.jsx("td",{className:"r",style:{color:s.debit>0?"var(--red)":"var(--t3)",fontFamily:"var(--mono)"},children:s.debit>0?k(s.debit).replace("",""):""}),n.jsx("td",{className:"r",style:{color:s.credit>0?"var(--green)":"var(--t3)",fontFamily:"var(--mono)"},children:s.credit>0?k(s.credit).replace("",""):""})]},s.id||l)})}),Zn.length>0&&n.jsx("tfoot",{children:n.jsxs("tr",{style:{fontWeight:"700"},children:[n.jsx("td",{colSpan:"6",style:{textAlign:"right"},children:"TOTAL"}),n.jsx("td",{className:"r",style:{color:"var(--red)",fontFamily:"var(--mono)"},children:k(Qt.debit).replace("","")}),n.jsx("td",{className:"r",style:{color:"var(--green)",fontFamily:"var(--mono)"},children:k(Qt.credit).replace("","")})]})})]})}),ra==="normal"&&n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Type"}),n.jsx("th",{children:"Vch No"}),n.jsx("th",{children:"Party"}),n.jsx("th",{children:"Narration"}),n.jsx("th",{className:"r",children:"Amount"}),n.jsx("th",{children:"Dr/Cr"})]})}),n.jsx("tbody",{children:Zn.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:"8",style:{textAlign:"center",padding:"40px",color:"var(--t3)"},children:"No entries for selected date range"})}):Zn.map((s,l)=>{var p,g,y,S;const c=s.debit>0;return n.jsxs("tr",{children:[n.jsx("td",{children:l+1}),n.jsx("td",{style:{fontSize:"11px",whiteSpace:"nowrap"},children:lt(s.voucher_date)}),n.jsx("td",{children:n.jsx("span",{className:`vt ${(p=s.voucher_type)!=null&&p.toLowerCase().includes("sales")?"sales":(g=s.voucher_type)!=null&&g.toLowerCase().includes("receipt")?"receipt":(y=s.voucher_type)!=null&&y.toLowerCase().includes("payment")||(S=s.voucher_type)!=null&&S.toLowerCase().includes("purchase")?"payment":"journal"}`,children:s.voucher_type||"Entry"})}),n.jsx("td",{style:{fontFamily:"var(--mono)",fontSize:"11px"},children:s.voucher_number||""}),n.jsx("td",{className:"party",children:s.party_name||""}),n.jsx("td",{style:{fontSize:"11px",color:"var(--t3)",maxWidth:"200px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:s.narration||""}),n.jsx("td",{className:"r",style:{fontFamily:"var(--mono)",fontWeight:"600",color:c?"var(--red)":"var(--green)"},children:k(c?s.debit:s.credit).replace("","")}),n.jsx("td",{children:n.jsx("span",{style:{fontSize:"10px",fontWeight:"700",padding:"2px 6px",borderRadius:"3px",background:c?"var(--red-g)":"var(--green-g)",color:c?"var(--red)":"var(--green)"},children:c?"Dr":"Cr"})})]},s.id||l)})}),Zn.length>0&&n.jsx("tfoot",{children:n.jsxs("tr",{style:{fontWeight:"700"},children:[n.jsx("td",{colSpan:"6",style:{textAlign:"right"},children:"TOTAL Dr / Cr"}),n.jsxs("td",{className:"r",style:{fontFamily:"var(--mono)"},children:[n.jsx("span",{style:{color:"var(--red)"},children:k(Qt.debit).replace("","")})," / ",n.jsx("span",{style:{color:"var(--green)"},children:k(Qt.credit).replace("","")})]}),n.jsx("td",{})]})})]})})]})}),n.jsxs("div",{className:`page ${f==="parties"?"active":""}`,children:[n.jsx("div",{className:"sec-head",children:n.jsx("div",{className:"sec-title",style:{fontSize:"18px"},children:" Parties"})}),n.jsx("div",{className:"empty-state",children:"Party ledger with outstanding balances  coming soon."})]}),n.jsxs("div",{className:`page ${f==="fonepay"?"active":""}`,children:[Se&&n.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"16px",flexWrap:"wrap"},children:[n.jsxs("div",{style:{flex:1,minWidth:"160px",background:"var(--card)",borderRadius:"10px",padding:"14px 18px",border:"1px solid var(--green)",borderLeftWidth:"3px"},children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--green)",fontWeight:"600",marginBottom:"4px"},children:"FONEPAY COLLECTED (CR)"}),n.jsxs("div",{style:{fontSize:"20px",fontWeight:"700",fontFamily:"var(--mono)",color:"var(--green)"},children:["Rs ",(Se.totalCR||0).toLocaleString("en-IN")]}),n.jsxs("div",{style:{fontSize:"11px",color:"var(--t3)"},children:[Se.crCount||0," transactions"]})]}),n.jsxs("div",{style:{flex:1,minWidth:"160px",background:"var(--card)",borderRadius:"10px",padding:"14px 18px",border:"1px solid var(--red)",borderLeftWidth:"3px"},children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--red)",fontWeight:"600",marginBottom:"4px"},children:"RBB SETTLED (DR)"}),n.jsxs("div",{style:{fontSize:"20px",fontWeight:"700",fontFamily:"var(--mono)",color:"var(--red)"},children:["Rs ",(Se.totalDR||0).toLocaleString("en-IN")]}),n.jsxs("div",{style:{fontSize:"11px",color:"var(--t3)"},children:[Se.drCount||0," settlements"]})]}),n.jsxs("div",{style:{flex:1,minWidth:"160px",background:"var(--card)",borderRadius:"10px",padding:"14px 18px",border:`1px solid ${(Se.balance||0)===0?"var(--green)":"var(--orange)"}`,borderLeftWidth:"3px"},children:[n.jsxs("div",{style:{fontSize:"11px",color:(Se.balance||0)===0?"var(--green)":"var(--orange)",fontWeight:"600",marginBottom:"4px"},children:["BALANCE ",(Se.balance||0)===0?"(MATCHED)":"(PENDING)"]}),n.jsxs("div",{style:{fontSize:"20px",fontWeight:"700",fontFamily:"var(--mono)",color:(Se.balance||0)===0?"var(--green)":"var(--orange)"},children:["Rs ",Math.abs(Se.balance||0).toLocaleString("en-IN")]}),n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)"},children:(Se.balance||0)===0?"All settled":(Se.balance||0)>0?"Settlement pending":"Over-settled"})]})]}),n.jsxs("div",{className:"sec-head",style:{marginBottom:"16px",flexWrap:"wrap",gap:"12px"},children:[n.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:["all","linked","unlinked",...Object.keys(Wn).length>0?["suggested"]:[]].map(s=>n.jsx("button",{onClick:()=>{Xf(s),ia(new Set)},style:{padding:"5px 12px",borderRadius:"6px",fontSize:"11px",fontWeight:"600",cursor:"pointer",border:On===s?"none":"1px solid var(--border)",background:On===s?s==="linked"?"var(--green)":s==="unlinked"?"var(--orange)":s==="suggested"?"#e6a817":"var(--blue)":"var(--card)",color:On===s?"#fff":"var(--t2)"},children:s.charAt(0).toUpperCase()+s.slice(1)},s))}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flexWrap:"wrap"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",background:"var(--card)",padding:"6px 12px",borderRadius:"8px",border:"1px solid var(--border)"},children:[n.jsx("span",{style:{fontSize:"11px",color:"var(--t3)",fontWeight:"600"},children:"From:"}),n.jsx("input",{type:"date",value:mr,onChange:s=>Ep(s.target.value),style:{background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"4px",padding:"4px 8px",fontSize:"12px",color:"var(--t1)"}}),n.jsx("span",{style:{fontSize:"11px",color:"var(--t3)",fontWeight:"600",marginLeft:"8px"},children:"To:"}),n.jsx("input",{type:"date",value:yr,onChange:s=>Fp(s.target.value),style:{background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"4px",padding:"4px 8px",fontSize:"12px",color:"var(--t1)"}}),n.jsx("button",{onClick:()=>{Ep(Xe()),Fp(Xe())},style:{background:"var(--blue-g)",color:"var(--blue)",border:"none",borderRadius:"4px",padding:"4px 8px",fontSize:"10px",fontWeight:"600",cursor:"pointer"},children:"Today"}),n.jsx("button",{onClick:()=>{Ep(""),Fp("")},style:{background:"var(--bg)",color:"var(--t2)",border:"1px solid var(--border)",borderRadius:"4px",padding:"4px 8px",fontSize:"10px",cursor:"pointer"},children:"All"})]}),n.jsx("input",{className:"search-box",placeholder:"Search initiator, amount, party...",value:Dp,onChange:s=>Ck(s.target.value),style:{width:"200px"}}),n.jsx("button",{className:"btn",onClick:dC,disabled:em,style:{padding:"6px 12px",fontSize:"11px",fontWeight:"600",background:"#e6a817",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer"},children:em?"Matching...":"Auto-Match"}),n.jsx("button",{className:"btn btn-p",onClick:Ar,disabled:kp,style:{padding:"6px 12px",fontSize:"12px"},children:kp?"Loading...":"Refresh"})]})]}),vr.size>0&&n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"10px 16px",marginBottom:"12px",background:"var(--blue-g)",borderRadius:"8px",border:"1px solid var(--blue)"},children:[n.jsxs("span",{style:{fontSize:"13px",fontWeight:"600",color:"var(--blue)"},children:[vr.size," selected"]}),[...vr].some(s=>Wn[s])&&n.jsx("button",{onClick:cC,style:{padding:"5px 14px",borderRadius:"6px",fontSize:"11px",fontWeight:"700",background:"var(--green)",color:"#fff",border:"none",cursor:"pointer"},children:"Confirm Matches"}),n.jsx("button",{onClick:()=>ia(new Set),style:{padding:"5px 12px",borderRadius:"6px",fontSize:"11px",background:"var(--card)",color:"var(--t2)",border:"1px solid var(--border)",cursor:"pointer"},children:"Clear Selection"})]}),kp?n.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px"},children:[n.jsx("div",{className:"loading-spinner"}),n.jsx("span",{style:{marginLeft:"12px",color:"var(--t2)"},children:"Loading Fonepay transactions..."})]}):n.jsxs("div",{className:"vouchers-table-wrapper",children:[n.jsxs("table",{className:"vouchers-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{style:{width:"32px"},children:n.jsx("input",{type:"checkbox",onChange:s=>{if(s.target.checked){const l=mi.filter(c=>On==="linked"?!!c.voucher_number:On==="unlinked"?!c.voucher_number&&!Wn[c.transaction_id]:On==="suggested"?!!Wn[c.transaction_id]:!0);ia(new Set(l.map(c=>c.transaction_id)))}else ia(new Set)},checked:vr.size>0})}),n.jsx("th",{children:"#"}),n.jsx("th",{children:"Date & Time"}),n.jsx("th",{children:"Description"}),n.jsx("th",{className:"r",children:"DR (Settled)"}),n.jsx("th",{className:"r",children:"CR (Collected)"}),n.jsx("th",{className:"r",children:"Balance"}),n.jsx("th",{children:"Linked To"})]})}),n.jsxs("tbody",{children:[(()=>{const s=mi.filter(y=>{var D,P,V,Q;const S=!!y.voucher_number,w=!!Wn[y.transaction_id];if(On==="linked"&&!S||On==="unlinked"&&(S||w)||On==="suggested"&&!w)return!1;if(!Dp)return!0;const A=Dp.toLowerCase();let B="";try{y.raw_data&&(B=JSON.parse(y.raw_data).initiator||"")}catch{}return((D=y.transaction_id)==null?void 0:D.toLowerCase().includes(A))||(B==null?void 0:B.includes(A))||String(y.amount||"").includes(A)||((P=y.party_name)==null?void 0:P.toLowerCase().includes(A))||((V=y.voucher_number)==null?void 0:V.toLowerCase().includes(A))||((Q=y.description)==null?void 0:Q.toLowerCase().includes(A))}).map(y=>{let S="-",w="";try{if(y.raw_data){const A=JSON.parse(y.raw_data);S=A.initiator||"-",w=A.issuerName||""}}catch{}return{type:"CR",date:y.transaction_date||"",amount:Math.abs(y.amount||0),description:S,detail:w,txn:y}}),l=((Se==null?void 0:Se.entries)||[]).filter(y=>y.side==="DR").map(y=>({type:"DR",date:y.date||"",amount:y.dr,description:y.description,detail:y.detail,txn:null})),c=[...s,...l].sort((y,S)=>(S.date||"").localeCompare(y.date||"")),p=[...c].reverse();let g=0;for(const y of p)g+=(y.type==="CR"?y.amount:0)-(y.type==="DR"?y.amount:0),y.balance=g;return c.map((y,S)=>{if(y.type==="DR")return n.jsxs("tr",{style:{background:"rgba(231,76,60,0.05)"},children:[n.jsx("td",{}),n.jsx("td",{className:"idx",children:S+1}),n.jsx("td",{style:{whiteSpace:"nowrap"},children:n.jsx("div",{style:{fontWeight:"600"},children:lt(y.date)})}),n.jsxs("td",{children:[n.jsx("div",{style:{fontWeight:"600",fontSize:"12px"},children:y.description}),n.jsx("div",{style:{fontSize:"10px",color:"var(--t3)"},children:n.jsx("span",{style:{padding:"1px 5px",borderRadius:"3px",fontSize:"9px",fontWeight:"700",background:y.detail==="ESEWASTLMT"?"rgba(46,204,113,0.15)":"rgba(52,152,219,0.15)",color:y.detail==="ESEWASTLMT"?"var(--green)":"var(--blue)"},children:y.detail||"RBB"})})]}),n.jsxs("td",{className:"r",style:{fontFamily:"var(--mono)",fontWeight:"700",color:"var(--red)",fontSize:"14px"},children:["Rs ",y.amount.toLocaleString("en-IN")]}),n.jsx("td",{className:"r"}),n.jsxs("td",{className:"r",style:{fontFamily:"var(--mono)",fontWeight:"700",color:y.balance===0?"var(--green)":y.balance>0?"var(--orange)":"var(--red)"},children:["Rs ",Math.abs(y.balance).toLocaleString("en-IN")]}),n.jsx("td",{style:{fontSize:"11px",color:"var(--t3)"},children:"RBB Settlement"})]},`dr-${S}`);const w=y.txn,A=!!w.voucher_number,B=Wn[w.transaction_id],D=vr.has(w.transaction_id);return n.jsxs("tr",{style:{background:B?"rgba(230,168,23,0.06)":A?"rgba(46,204,113,0.04)":"transparent"},children:[n.jsx("td",{children:n.jsx("input",{type:"checkbox",checked:D,onChange:P=>{const V=new Set(vr);P.target.checked?V.add(w.transaction_id):V.delete(w.transaction_id),ia(V)}})}),n.jsx("td",{className:"idx",children:S+1}),n.jsxs("td",{style:{whiteSpace:"nowrap"},children:[n.jsx("div",{style:{fontWeight:"600"},children:lt(y.date)}),n.jsx("div",{style:{fontSize:"10px",color:"var(--t3)"},children:y.date.split(" ")[1]||""})]}),n.jsxs("td",{children:[n.jsx("div",{style:{fontWeight:"600",fontFamily:"var(--mono)"},children:y.description}),y.detail&&n.jsx("div",{style:{color:"var(--t3)",fontSize:"10px"},children:y.detail})]}),n.jsx("td",{className:"r"}),n.jsxs("td",{className:"r",style:{fontFamily:"var(--mono)",fontWeight:"600",color:"var(--green)",fontSize:"14px"},children:["Rs ",y.amount.toLocaleString("en-IN")]}),n.jsxs("td",{className:"r",style:{fontFamily:"var(--mono)",fontWeight:"700",color:y.balance===0?"var(--green)":y.balance>0?"var(--orange)":"var(--red)"},children:["Rs ",Math.abs(y.balance).toLocaleString("en-IN")]}),n.jsx("td",{style:{minWidth:"150px"},children:A?n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"12px",fontWeight:"600",color:"var(--green)"},children:w.party_name}),n.jsx("div",{style:{fontSize:"10px",color:"var(--t3)",fontFamily:"var(--mono)"},children:w.voucher_number})]}),n.jsx("button",{onClick:()=>pC(w.transaction_id),style:{padding:"2px 6px",borderRadius:"4px",fontSize:"9px",background:"var(--red-g)",color:"var(--red)",border:"1px solid var(--red)",cursor:"pointer",marginLeft:"auto"},children:"Unlink"})]}):B?n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"12px",fontWeight:"600",color:B.confidence==="high"?"var(--green)":"#e6a817"},children:B.partyName}),n.jsx("div",{style:{fontSize:"10px",color:"var(--t3)",fontFamily:"var(--mono)"},children:B.voucherNumber})]}),n.jsx("span",{style:{padding:"2px 6px",borderRadius:"4px",fontSize:"9px",fontWeight:"700",marginLeft:"auto",background:B.confidence==="high"?"rgba(46,204,113,0.15)":"rgba(230,168,23,0.15)",color:B.confidence==="high"?"var(--green)":"#e6a817"},children:B.confidence==="high"?"Phone Match":"Suggested"})]}):n.jsx("button",{onClick:()=>hC(w),style:{padding:"4px 10px",borderRadius:"5px",fontSize:"11px",fontWeight:"600",background:"var(--blue-g)",color:"var(--blue)",border:"1px solid var(--blue)",cursor:"pointer"},children:"Link"})})]},w.id||`cr-${S}`)})})(),Se&&n.jsxs("tr",{style:{background:"var(--bg)",fontWeight:"700",borderTop:"2px solid var(--border)"},children:[n.jsx("td",{colSpan:4,style:{fontWeight:"700"},children:"TOTAL"}),n.jsxs("td",{className:"r",style:{color:"var(--red)",fontFamily:"var(--mono)"},children:["Rs ",(Se.totalDR||0).toLocaleString("en-IN")]}),n.jsxs("td",{className:"r",style:{color:"var(--green)",fontFamily:"var(--mono)"},children:["Rs ",(Se.totalCR||0).toLocaleString("en-IN")]}),n.jsxs("td",{className:"r",style:{fontFamily:"var(--mono)",color:(Se.balance||0)===0?"var(--green)":"var(--orange)"},children:["Rs ",Math.abs(Se.balance||0).toLocaleString("en-IN"),(Se.balance||0)===0&&n.jsx("span",{style:{marginLeft:"6px",fontSize:"9px",fontWeight:"700",color:"var(--green)"},children:"MATCHED"})]}),n.jsx("td",{})]})]})]}),mi.length===0&&!((Nv=Se==null?void 0:Se.entries)!=null&&Nv.length)&&n.jsxs("div",{className:"empty-state",style:{padding:"60px 20px"},children:[n.jsx("div",{style:{fontSize:"48px",marginBottom:"12px"},children:""}),n.jsx("div",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:"No Fonepay Transactions"}),n.jsx("div",{style:{color:"var(--t3)"},children:"Click Refresh to load transactions from Fonepay"})]})]}),Ci&&n.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.6)",zIndex:1e3,display:"flex",justifyContent:"center",alignItems:"center"},onClick:()=>Sl(null),children:n.jsxs("div",{style:{background:"var(--card)",borderRadius:"12px",width:"600px",maxHeight:"80vh",overflow:"auto",padding:"24px",border:"1px solid var(--border)"},onClick:s=>s.stopPropagation(),children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"16px",fontWeight:"700",color:"var(--t1)"},children:"Link to Bill"}),n.jsxs("div",{style:{fontSize:"12px",color:"var(--t3)"},children:["Fonepay Rs ",Math.abs(Ci.amount||0).toLocaleString("en-IN")," - ",Ci.transaction_date]})]}),n.jsx("button",{onClick:()=>Sl(null),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer",color:"var(--t3)"},children:"x"})]}),n.jsx("input",{placeholder:"Search party name...",value:wl,onChange:s=>Pp(s.target.value),style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid var(--border)",background:"var(--bg)",color:"var(--t1)",fontSize:"13px",marginBottom:"12px"}}),n.jsxs("div",{style:{maxHeight:"400px",overflow:"auto"},children:[Zf.filter(s=>{var l,c;return wl?((l=s.party_name)==null?void 0:l.toLowerCase().includes(wl.toLowerCase()))||((c=s.bill_name)==null?void 0:c.toLowerCase().includes(wl.toLowerCase())):!0}).map((s,l)=>{const c=Math.abs(s.closing_balance)===Math.abs(Ci.amount);return n.jsxs("div",{onClick:()=>uC(Ci.transaction_id,s),style:{padding:"10px 14px",borderRadius:"8px",marginBottom:"4px",cursor:"pointer",border:c?"2px solid var(--green)":"1px solid var(--border)",background:c?"rgba(46,204,113,0.08)":"var(--bg)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsxs("div",{children:[n.jsx("div",{style:{fontWeight:"600",fontSize:"13px",color:"var(--t1)"},children:s.party_name}),n.jsxs("div",{style:{fontSize:"11px",color:"var(--t3)",fontFamily:"var(--mono)"},children:[s.bill_name," | ",s.bill_date||""," | ",s.ageing_days||0,"d"]})]}),n.jsxs("div",{style:{textAlign:"right"},children:[n.jsxs("div",{style:{fontWeight:"700",fontFamily:"var(--mono)",fontSize:"14px",color:c?"var(--green)":"var(--t1)"},children:["Rs ",Math.abs(s.closing_balance||0).toLocaleString("en-IN")]}),c&&n.jsx("div",{style:{fontSize:"9px",color:"var(--green)",fontWeight:"700"},children:"EXACT MATCH"})]})]},l)}),Zf.length===0&&n.jsx("div",{style:{padding:"30px",textAlign:"center",color:"var(--t3)"},children:"No outstanding bills found"})]})]})})]}),n.jsxs("div",{className:`page ${f==="rbb"?"active":""}`,children:[n.jsxs("div",{className:"sec-head",style:{marginBottom:"16px",flexWrap:"wrap",gap:"12px"},children:[n.jsxs("div",{className:"sec-title",style:{fontSize:"18px"},children:[" RBB Banking Transactions",n.jsxs("span",{className:"cnt",style:{marginLeft:"8px"},children:[yi.length," transactions"]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flexWrap:"wrap"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",background:"var(--card)",padding:"6px 12px",borderRadius:"8px",border:"1px solid var(--border)"},children:[n.jsx("span",{style:{fontSize:"11px",color:"var(--t3)",fontWeight:"600"},children:"From:"}),n.jsx("input",{type:"date",value:Ni,onChange:s=>Op(s.target.value),style:{background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"4px",padding:"4px 8px",fontSize:"12px",color:"var(--t1)"}}),n.jsx("span",{style:{fontSize:"11px",color:"var(--t3)",fontWeight:"600",marginLeft:"8px"},children:"To:"}),n.jsx("input",{type:"date",value:_i,onChange:s=>Wp(s.target.value),style:{background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"4px",padding:"4px 8px",fontSize:"12px",color:"var(--t1)"}}),n.jsx("button",{onClick:()=>{Op(Xe()),Wp(Xe())},style:{background:"var(--blue-g)",color:"var(--blue)",border:"none",borderRadius:"4px",padding:"4px 8px",fontSize:"10px",fontWeight:"600",cursor:"pointer"},children:"Today"}),n.jsx("button",{onClick:()=>{Op(""),Wp("")},style:{background:"var(--bg)",color:"var(--t2)",border:"1px solid var(--border)",borderRadius:"4px",padding:"4px 8px",fontSize:"10px",cursor:"pointer"},children:"All"})]}),n.jsx("input",{className:"search-box",placeholder:"Search ref, amount...",value:Mp,onChange:s=>_k(s.target.value),style:{width:"160px"}}),n.jsxs("div",{style:{background:"var(--cyan-g)",color:"var(--cyan)",padding:"6px 14px",borderRadius:"8px",fontFamily:"var(--mono)",fontWeight:"700"},children:["Balance: Rs ",(pk.total||0).toLocaleString("en-IN")]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",background:"var(--card)",padding:"6px 12px",borderRadius:"8px",border:"1px solid var(--border)"},children:[n.jsx("span",{style:{width:"8px",height:"8px",borderRadius:"50%",background:Mn.isRunning?"var(--green)":"var(--red)",boxShadow:Mn.isRunning?"0 0 6px var(--green)":"none"}}),n.jsx("span",{style:{fontSize:"11px",color:"var(--t2)",fontWeight:"600"},children:Mn.isRunning?"Running":"Stopped"}),Mn.lastSyncTime&&n.jsxs("span",{style:{fontSize:"10px",color:"var(--t3)"},children:["Last: ",ag(Mn.lastSyncTime)]})]}),Mn.isRunning?n.jsx("button",{className:"btn",onClick:gC,disabled:kl,style:{padding:"6px 12px",fontSize:"12px",background:"var(--red-g)",color:"var(--red)",border:"none"},children:kl?"...":" Stop"}):n.jsx("button",{className:"btn",onClick:xC,disabled:kl,style:{padding:"6px 12px",fontSize:"12px",background:"var(--green-g)",color:"var(--green)",border:"none"},children:kl?"...":" Start"}),n.jsx("button",{className:"btn",onClick:fC,disabled:bi||!Mn.isRunning,title:Mn.isRunning?"Sync from bank now":"Start service first",style:{padding:"6px 12px",fontSize:"12px",background:"var(--blue-g)",color:"var(--blue)",border:"none",opacity:Mn.isRunning?1:.5},children:bi?"...":" Sync"}),n.jsx("button",{className:"btn btn-p",onClick:to,disabled:bi,style:{padding:"6px 12px",fontSize:"12px"},children:bi?" Loading...":" Refresh"})]})]}),bi?n.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px"},children:[n.jsx("div",{className:"loading-spinner"}),n.jsx("span",{style:{marginLeft:"12px",color:"var(--t2)"},children:"Loading RBB transactions..."})]}):n.jsxs("div",{className:"vouchers-table-wrapper",children:[n.jsxs("table",{className:"vouchers-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Description"}),n.jsx("th",{className:"r",style:{color:"var(--red)"},children:"Debit (DR)"}),n.jsx("th",{className:"r",style:{color:"var(--green)"},children:"Credit (CR)"}),n.jsx("th",{className:"r",children:"Balance"}),n.jsx("th",{children:"Reference"}),n.jsx("th",{children:"Nepali Date"}),n.jsx("th",{children:"Age"})]})}),n.jsx("tbody",{children:(()=>{const s=yi.filter(l=>{var g,y,S;if(!Mp)return!0;const c=Mp.toLowerCase(),p=String(l.credit||l.debit||"");return((g=l.transaction_id)==null?void 0:g.toLowerCase().includes(c))||((y=l.description)==null?void 0:y.toLowerCase().includes(c))||((S=l.reference_number)==null?void 0:S.toLowerCase().includes(c))||p.includes(c)});return s.map((l,c)=>{const p=l.transaction_date||l.value_date||"",g=l.balance||0,y=c<s.length-1?s[c+1].balance||0:g,S=g-y,w=S<0,A=Math.abs(S);return n.jsxs("tr",{className:w?"unpaid-row":"",children:[n.jsx("td",{className:"idx",children:c+1}),n.jsxs("td",{className:"date-cell",style:{whiteSpace:"nowrap"},children:[n.jsx("div",{style:{fontWeight:"600"},children:lt(p)}),n.jsx("div",{style:{fontSize:"10px",color:"var(--t3)"},children:p.split(" ")[1]||""})]}),n.jsx("td",{className:"party-cell",style:{maxWidth:"220px"},children:l.description||"-"}),n.jsx("td",{className:"r amt-cell",style:{color:"var(--red)",fontSize:"14px"},children:w&&A>0?`Rs ${A.toLocaleString("en-IN")}`:"-"}),n.jsx("td",{className:"r amt-cell",style:{color:"var(--green)",fontSize:"14px"},children:!w&&A>0?`Rs ${A.toLocaleString("en-IN")}`:"-"}),n.jsxs("td",{className:"r",style:{fontFamily:"var(--mono)",fontSize:"13px",fontWeight:"600",color:"var(--t1)"},children:["Rs ",g.toLocaleString("en-IN")]}),n.jsx("td",{className:"mono",style:{fontSize:"10px"},children:l.reference_number||"-"}),n.jsx("td",{className:"date-cell nepali",children:La(p)}),n.jsx("td",{className:"age-cell",children:n.jsx("span",{className:`age-badge ${zr(p)==="Today"?"today":"old"}`,children:zr(p)})})]},l.id||c)})})()})]}),yi.length===0&&n.jsxs("div",{className:"empty-state",style:{padding:"60px 20px"},children:[n.jsx("div",{style:{fontSize:"48px",marginBottom:"12px"},children:""}),n.jsx("div",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:"No RBB Transactions"}),n.jsx("div",{style:{color:"var(--t3)"},children:"Click Refresh to load transactions from RBB Smart Banking"})]})]})]}),n.jsxs("div",{className:`page ${f==="bill-history"?"active":""}`,children:[n.jsxs("div",{className:"sec-head",style:{marginBottom:"16px",flexWrap:"wrap",gap:"12px"},children:[n.jsxs("div",{className:"sec-title",style:{fontSize:"18px"},children:[" Dashboard Bills History",n.jsxs("span",{className:"cnt",style:{marginLeft:"8px"},children:[Ki.length," bills"]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flexWrap:"wrap"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",background:"var(--card)",padding:"6px 12px",borderRadius:"8px",border:"1px solid var(--border)"},children:[n.jsx("span",{style:{fontSize:"11px",color:"var(--t3)",fontWeight:"600"},children:"Date:"}),n.jsx("input",{type:"date",value:Cr,onChange:s=>My(s.target.value),style:{background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"4px",padding:"4px 8px",fontSize:"12px",color:"var(--t1)"}}),n.jsx("button",{onClick:()=>My(Xe()),style:{background:"var(--blue-g)",color:"var(--blue)",border:"none",borderRadius:"4px",padding:"4px 8px",fontSize:"10px",fontWeight:"600",cursor:"pointer"},children:"Today"})]}),n.jsxs("div",{style:{display:"flex",gap:"8px"},children:[n.jsxs("div",{style:{background:"var(--green-g)",color:"var(--green)",padding:"6px 12px",borderRadius:"8px",fontSize:"12px",fontWeight:"600"},children:[" Synced: ",Nr.synced_count||0," (Rs ",Number(Nr.synced_amount||0).toLocaleString("en-IN"),")"]}),n.jsxs("div",{style:{background:"var(--orange-g)",color:"var(--orange)",padding:"6px 12px",borderRadius:"8px",fontSize:"12px",fontWeight:"600"},children:[" Pending: ",Nr.pending_count||0]}),n.jsxs("div",{style:{background:"var(--red-g)",color:"var(--red)",padding:"6px 12px",borderRadius:"8px",fontSize:"12px",fontWeight:"600"},children:[" Failed: ",Nr.failed_count||0]})]}),n.jsx("button",{className:"btn btn-p",onClick:gd,disabled:Uu,style:{padding:"6px 12px",fontSize:"12px"},children:Uu?" Loading...":" Refresh"})]})]}),Uu?n.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px"},children:[n.jsx("div",{className:"loading-spinner"}),n.jsx("span",{style:{marginLeft:"12px",color:"var(--t2)"},children:"Loading bill history..."})]}):n.jsxs("div",{className:"vouchers-table-wrapper",children:[n.jsxs("table",{className:"vouchers-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"#"}),n.jsx("th",{children:"Local Invoice"}),n.jsx("th",{children:"Tally #"}),n.jsx("th",{children:"Bill Date"}),n.jsx("th",{children:"Created"}),n.jsx("th",{children:"Synced At"}),n.jsx("th",{children:"Party"}),n.jsx("th",{className:"r",children:"Items"}),n.jsx("th",{className:"r",children:"Amount"}),n.jsx("th",{children:"Status"})]})}),n.jsx("tbody",{children:Ki.map((s,l)=>{var c;return n.jsxs("tr",{className:s.status==="failed"?"unpaid-row":"",children:[n.jsx("td",{className:"idx",children:l+1}),n.jsx("td",{style:{fontWeight:"600",color:"var(--blue)"},children:s.invoice_number}),n.jsx("td",{style:{fontWeight:"600",color:s.tally_master_id?"var(--green)":"var(--t3)"},children:s.tally_master_id?`#${s.tally_master_id}`:"-"}),n.jsxs("td",{className:"date-cell",children:[n.jsx("div",{style:{fontWeight:"600"},children:s.invoice_date?lt(String(s.invoice_date).replace(/-/g,"")):"-"}),n.jsx("div",{style:{fontSize:"10px",color:"var(--cyan)"},children:s.invoice_date?La(String(s.invoice_date).replace(/-/g,"")):""})]}),n.jsxs("td",{className:"date-cell",style:{fontSize:"11px"},children:[n.jsx("div",{style:{color:"var(--t2)"},children:s.created_at?lt(s.created_at.split(" ")[0].replace(/-/g,"")):"-"}),n.jsx("div",{style:{fontSize:"9px",color:"var(--t3)"},children:s.created_at?s.created_at.split(" ")[1]:""})]}),n.jsx("td",{className:"date-cell",style:{fontSize:"11px"},children:s.synced_at?n.jsxs(n.Fragment,{children:[n.jsx("div",{style:{color:"var(--green)",fontWeight:"600"},children:lt(s.synced_at.split(" ")[0].replace(/-/g,""))}),n.jsx("div",{style:{fontSize:"9px",color:"var(--t3)"},children:s.synced_at.split(" ")[1]})]}):n.jsx("span",{style:{color:"var(--t3)"},children:"-"})}),n.jsx("td",{className:"party-cell",children:s.party_name}),n.jsx("td",{className:"r",children:((c=s.items)==null?void 0:c.length)||0}),n.jsxs("td",{className:"r amt-cell",style:{fontWeight:"600",color:"var(--green)"},children:["Rs ",Number(s.total_amount||0).toLocaleString("en-IN")]}),n.jsxs("td",{children:[n.jsx("span",{style:{padding:"4px 8px",borderRadius:"4px",fontSize:"11px",fontWeight:"600",background:s.status==="pending"?"var(--orange-g)":s.status==="synced"?"var(--green-g)":"var(--red-g)",color:s.status==="pending"?"var(--orange)":s.status==="synced"?"var(--green)":"var(--red)"},children:s.status==="pending"?" Pending":s.status==="synced"?" Synced":" Failed"}),s.sync_error&&n.jsx("div",{style:{fontSize:"10px",color:"var(--red)",marginTop:"4px",maxWidth:"120px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:s.sync_error,children:s.sync_error})]})]},s.id||l)})})]}),Ki.length===0&&n.jsxs("div",{className:"empty-state",style:{padding:"60px 20px"},children:[n.jsx("div",{style:{fontSize:"48px",marginBottom:"12px"},children:""}),n.jsxs("div",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:["No Bills for ",Cr]}),n.jsx("div",{style:{color:"var(--t3)"},children:"Bills created from Dashboard will appear here"})]})]}),n.jsxs("div",{style:{marginTop:"20px",padding:"16px",background:"var(--card)",borderRadius:"12px",border:"1px solid var(--border)"},children:[n.jsxs("div",{style:{fontWeight:"600",marginBottom:"12px",color:"var(--t1)"},children:[" Daily Summary for ",Cr]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"12px"},children:[n.jsxs("div",{style:{padding:"12px",background:"var(--bg)",borderRadius:"8px",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"var(--blue)"},children:Nr.total_count||0}),n.jsx("div",{style:{fontSize:"12px",color:"var(--t3)"},children:"Total Bills"})]}),n.jsxs("div",{style:{padding:"12px",background:"var(--bg)",borderRadius:"8px",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"var(--green)"},children:Nr.synced_count||0}),n.jsx("div",{style:{fontSize:"12px",color:"var(--t3)"},children:"Synced to Tally"})]}),n.jsxs("div",{style:{padding:"12px",background:"var(--bg)",borderRadius:"8px",textAlign:"center"},children:[n.jsxs("div",{style:{fontSize:"24px",fontWeight:"700",color:"var(--cyan)"},children:["Rs ",Number(Nr.total_amount||0).toLocaleString("en-IN")]}),n.jsx("div",{style:{fontSize:"12px",color:"var(--t3)"},children:"Total Amount"})]}),n.jsxs("div",{style:{padding:"12px",background:"var(--bg)",borderRadius:"8px",textAlign:"center"},children:[n.jsxs("div",{style:{fontSize:"24px",fontWeight:"700",color:"var(--green)"},children:["Rs ",Number(Nr.synced_amount||0).toLocaleString("en-IN")]}),n.jsx("div",{style:{fontSize:"12px",color:"var(--t3)"},children:"Synced Amount"})]})]})]})]}),n.jsxs("div",{className:`page ${f==="outstanding"?"active":""}`,children:[n.jsxs("div",{className:"sec-head",style:{marginBottom:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("div",{className:"sec-title",style:{fontSize:"18px"},children:"Outstanding & Ageing"}),n.jsx("button",{className:"btn btn-p",style:{padding:"6px 14px",fontSize:"12px"},onClick:kC,disabled:im,children:im?"Syncing...":"Sync from Tally"})]}),st&&n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"12px",marginBottom:"16px"},children:[n.jsxs("div",{style:{padding:"16px",background:ls?"var(--card)":"var(--blue-g, rgba(59,130,246,0.1))",borderRadius:"12px",border:ls?"1px solid var(--border)":"2px solid var(--blue)",cursor:"pointer",transition:"all 0.2s"},onClick:()=>{lm(!1),fd(!1)},children:[n.jsx("div",{style:{fontSize:"12px",color:"var(--t3)",marginBottom:"4px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Total Receivable"}),n.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"var(--blue)",fontFamily:"var(--mono)"},children:k(((_v=st.total)==null?void 0:_v.amount)||0)}),n.jsxs("div",{style:{fontSize:"12px",color:"var(--t3)",marginTop:"4px"},children:[((Av=st.total)==null?void 0:Av.parties)||0," parties | ",((Rv=st.total)==null?void 0:Rv.bills)||0," bills"]})]}),n.jsxs("div",{style:{padding:"16px",background:ls?"var(--red-g, rgba(239,68,68,0.1))":"var(--card)",borderRadius:"12px",border:ls?"2px solid var(--red)":"1px solid var(--border)",cursor:"pointer",transition:"all 0.2s"},onClick:()=>{lm(!0),fd(!0)},children:[n.jsx("div",{style:{fontSize:"12px",color:"var(--t3)",marginBottom:"4px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Overdue Receivable"}),n.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"var(--red)",fontFamily:"var(--mono)"},children:k(((Bv=st.overdue)==null?void 0:Bv.amount)||0)}),n.jsxs("div",{style:{fontSize:"12px",color:"var(--t3)",marginTop:"4px"},children:[((Tv=st.overdue)==null?void 0:Tv.parties)||0," parties | ",((zv=st.overdue)==null?void 0:zv.bills)||0," bills"]})]}),n.jsxs("div",{style:{padding:"16px",background:"var(--card)",borderRadius:"12px",border:"1px solid var(--border)"},children:[n.jsx("div",{style:{fontSize:"12px",color:"var(--t3)",marginBottom:"4px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Current (0-30 days)"}),n.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"var(--green)",fontFamily:"var(--mono)"},children:k((((Lv=st.total)==null?void 0:Lv.amount)||0)-(((Ev=st.overdue)==null?void 0:Ev.amount)||0))}),n.jsxs("div",{style:{fontSize:"12px",color:"var(--t3)",marginTop:"4px"},children:[(((Fv=st.total)==null?void 0:Fv.bills)||0)-(((Dv=st.overdue)==null?void 0:Dv.bills)||0)," bills within terms"]})]}),n.jsxs("div",{style:{padding:"16px",background:"var(--card)",borderRadius:"12px",border:"1px solid var(--border)"},children:[n.jsx("div",{style:{fontSize:"12px",color:"var(--t3)",marginBottom:"4px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Overdue %"}),n.jsxs("div",{style:{fontSize:"24px",fontWeight:"700",color:(((Pv=st.overdue)==null?void 0:Pv.amount)||0)/(((Iv=st.total)==null?void 0:Iv.amount)||1)>.5?"var(--red)":"var(--orange)",fontFamily:"var(--mono)"},children:[(Ov=st.total)!=null&&Ov.amount?((((Wv=st.overdue)==null?void 0:Wv.amount)||0)/st.total.amount*100).toFixed(1):"0.0","%"]}),n.jsx("div",{style:{fontSize:"12px",color:"var(--t3)",marginTop:"4px"},children:"of total receivable"})]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[n.jsx("div",{style:{display:"flex",gap:"8px"},children:["bills","ageing","parties"].map(s=>n.jsx("button",{className:`btn ${Nl===s?"btn-p":"btn-o"}`,style:{padding:"6px 14px",fontSize:"12px",textTransform:"capitalize"},onClick:()=>zk(s),children:s},s))}),ls&&n.jsx("span",{style:{fontSize:"12px",color:"var(--red)",fontWeight:"600",padding:"4px 10px",background:"var(--red-g, rgba(239,68,68,0.1))",borderRadius:"6px"},children:"Showing Overdue Only (30+ days)"})]}),Lk?n.jsx("div",{style:{textAlign:"center",padding:"40px",color:"var(--t3)"},children:"Loading..."}):n.jsxs(n.Fragment,{children:[Nl==="bills"&&n.jsxs("div",{className:"table-wrap",children:[n.jsx("input",{type:"text",placeholder:"Search party...",value:$p,onChange:s=>Ek(s.target.value),style:{marginBottom:"12px",padding:"8px 12px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"6px",color:"var(--t1)",width:"300px"}}),n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Party"}),n.jsx("th",{children:"Bill"}),n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Days"}),n.jsx("th",{children:"Bucket"}),n.jsx("th",{style:{textAlign:"right"},children:"Amount"})]})}),n.jsx("tbody",{children:nm.filter(s=>!$p||s.party_name.toLowerCase().includes($p.toLowerCase())).map((s,l)=>n.jsxs("tr",{children:[n.jsx("td",{style:{fontWeight:"600"},children:s.party_name}),n.jsx("td",{children:s.bill_name}),n.jsx("td",{children:s.bill_date||"-"}),n.jsx("td",{children:s.ageing_days}),n.jsx("td",{children:n.jsx("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"11px",background:s.ageing_bucket==="90+"?"var(--red-g)":s.ageing_bucket==="60-90"?"var(--orange-g)":s.ageing_bucket==="30-60"?"var(--yellow-g)":"var(--green-g)",color:s.ageing_bucket==="90+"?"var(--red)":s.ageing_bucket==="60-90"?"var(--orange)":s.ageing_bucket==="30-60"?"var(--yellow)":"var(--green)"},children:s.ageing_bucket})}),n.jsx("td",{style:{textAlign:"right",fontFamily:"var(--mono)",fontWeight:"600"},children:k(s.closing_balance)})]},l))})]}),nm.length===0&&n.jsx("div",{style:{textAlign:"center",padding:"30px",color:"var(--t3)"},children:'No outstanding bills. Click "Sync from Tally" to fetch data.'})]}),Nl==="ageing"&&n.jsxs("div",{className:"table-wrap",children:[n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Bucket"}),n.jsx("th",{children:"Bills"}),n.jsx("th",{children:"Parties"}),n.jsx("th",{style:{textAlign:"right"},children:"Total Amount"})]})}),n.jsx("tbody",{children:rm.map((s,l)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsxs("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"600",background:s.ageing_bucket==="90+"?"var(--red-g)":s.ageing_bucket==="60-90"?"var(--orange-g)":s.ageing_bucket==="30-60"?"var(--yellow-g)":"var(--green-g)",color:s.ageing_bucket==="90+"?"var(--red)":s.ageing_bucket==="60-90"?"var(--orange)":s.ageing_bucket==="30-60"?"var(--yellow)":"var(--green)"},children:[s.ageing_bucket," days"]})}),n.jsx("td",{children:s.bill_count}),n.jsx("td",{children:s.party_count}),n.jsx("td",{style:{textAlign:"right",fontFamily:"var(--mono)",fontWeight:"700",fontSize:"14px"},children:k(s.total_amount)})]},l))})]}),rm.length===0&&n.jsx("div",{style:{textAlign:"center",padding:"30px",color:"var(--t3)"},children:"No ageing data. Sync outstanding bills first."})]}),Nl==="parties"&&n.jsxs("div",{className:"table-wrap",children:[n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Party"}),n.jsx("th",{children:"Bills"}),n.jsx("th",{children:"Oldest Bill"}),n.jsx("th",{style:{textAlign:"right"},children:"Total Outstanding"})]})}),n.jsx("tbody",{children:sm.map((s,l)=>n.jsxs("tr",{children:[n.jsx("td",{style:{fontWeight:"600"},children:s.party_name}),n.jsx("td",{children:s.bill_count}),n.jsx("td",{children:s.oldest_bill_date||"-"}),n.jsx("td",{style:{textAlign:"right",fontFamily:"var(--mono)",fontWeight:"700",color:"var(--red)"},children:k(s.total_outstanding)})]},l))})]}),sm.length===0&&n.jsx("div",{style:{textAlign:"center",padding:"30px",color:"var(--t3)"},children:"No data. Sync from Tally first."})]})]})]}),n.jsxs("div",{className:`page ${f==="stock-groups"?"active":""}`,children:[n.jsxs("div",{className:"sec-head",style:{marginBottom:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("div",{className:"sec-title",style:{fontSize:"18px"},children:" Stock Groups"}),n.jsx("button",{className:"btn btn-p",style:{padding:"6px 14px",fontSize:"12px"},onClick:TC,disabled:Bm,children:Bm?" Syncing...":" Sync from Tally"})]}),n2?n.jsx("div",{style:{textAlign:"center",padding:"40px",color:"var(--t3)"},children:"Loading..."}):n.jsxs("div",{className:"table-wrap",children:[n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Group"}),n.jsx("th",{children:"Parent"}),n.jsx("th",{style:{textAlign:"right"},children:"Items"}),n.jsx("th",{style:{textAlign:"right"},children:"Qty"}),n.jsx("th",{style:{textAlign:"right"},children:"Value"})]})}),n.jsx("tbody",{children:Am.map((s,l)=>n.jsxs("tr",{children:[n.jsx("td",{style:{fontWeight:"600"},children:s.name}),n.jsx("td",{style:{color:"var(--t3)"},children:s.parent||"-"}),n.jsx("td",{style:{textAlign:"right"},children:s.item_count||0}),n.jsx("td",{style:{textAlign:"right",fontFamily:"var(--mono)"},children:Number(s.closing_balance||0).toLocaleString()}),n.jsx("td",{style:{textAlign:"right",fontFamily:"var(--mono)",fontWeight:"600",color:"var(--blue)"},children:k(s.closing_value)})]},l))})]}),Am.length===0&&n.jsx("div",{style:{textAlign:"center",padding:"30px",color:"var(--t3)"},children:'No stock groups. Click "Sync from Tally" to fetch.'})]})]}),n.jsxs("div",{className:`page ${f==="profit-loss"?"active":""}`,children:[n.jsxs("div",{className:"sec-head",style:{marginBottom:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("div",{className:"sec-title",style:{fontSize:"18px"},children:" Profit & Loss"}),n.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[n.jsx("input",{type:"date",value:Il,onChange:s=>Zk(s.target.value),style:{padding:"6px 10px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"6px",color:"var(--t1)",fontSize:"12px"}}),n.jsx("span",{style:{color:"var(--t3)"},children:"to"}),n.jsx("input",{type:"date",value:Ol,onChange:s=>e2(s.target.value),style:{padding:"6px 10px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"6px",color:"var(--t1)",fontSize:"12px"}}),n.jsx("button",{className:"btn btn-p",style:{padding:"6px 14px",fontSize:"12px"},onClick:lv,disabled:Zp,children:Zp?" Loading...":" Fetch P&L"})]})]}),Zp?n.jsx("div",{style:{textAlign:"center",padding:"40px",color:"var(--t3)"},children:"Loading from Tally..."}):Ze?n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[n.jsxs("div",{className:"s-card",children:[n.jsx("div",{className:"s-card-h",style:{color:"var(--green)"},children:"Income"}),n.jsx("div",{className:"s-card-b",children:Ze.income&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"s-row",children:[n.jsx("div",{children:n.jsx("div",{className:"s-name",children:"Sales Accounts"})}),n.jsx("span",{style:{fontFamily:"var(--mono)",fontWeight:"600",color:"var(--green)"},children:k(Ze.income.salesTotal)})]}),(Ze.income.salesAccounts||[]).map((s,l)=>n.jsxs("div",{className:"s-row",style:{paddingLeft:"16px"},children:[n.jsx("div",{children:n.jsx("div",{className:"s-desc",children:s.name})}),n.jsx("span",{style:{fontFamily:"var(--mono)",fontSize:"12px"},children:k(Math.abs(s.amount))})]},l)),n.jsxs("div",{className:"s-row",children:[n.jsx("div",{children:n.jsx("div",{className:"s-name",children:"Direct Incomes"})}),n.jsx("span",{style:{fontFamily:"var(--mono)",fontWeight:"600",color:"var(--green)"},children:k(Ze.income.directIncomesTotal)})]}),n.jsxs("div",{className:"s-row",children:[n.jsx("div",{children:n.jsx("div",{className:"s-name",children:"Indirect Incomes"})}),n.jsx("span",{style:{fontFamily:"var(--mono)",fontWeight:"600",color:"var(--green)"},children:k(Ze.income.indirectIncomesTotal)})]}),n.jsxs("div",{className:"s-row",style:{borderTop:"2px solid var(--border)",paddingTop:"8px",marginTop:"8px"},children:[n.jsx("div",{children:n.jsx("div",{className:"s-name",style:{fontSize:"14px",fontWeight:"700"},children:"Total Income"})}),n.jsx("span",{style:{fontFamily:"var(--mono)",fontWeight:"700",fontSize:"16px",color:"var(--green)"},children:k(Ze.income.total)})]})]})})]}),n.jsxs("div",{className:"s-card",children:[n.jsx("div",{className:"s-card-h",style:{color:"var(--red)"},children:"Expenses"}),n.jsx("div",{className:"s-card-b",children:Ze.expenses&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"s-row",children:[n.jsx("div",{children:n.jsx("div",{className:"s-name",children:"Purchase Accounts"})}),n.jsx("span",{style:{fontFamily:"var(--mono)",fontWeight:"600",color:"var(--red)"},children:k(Ze.expenses.purchasesTotal)})]}),(Ze.expenses.purchaseAccounts||[]).map((s,l)=>n.jsxs("div",{className:"s-row",style:{paddingLeft:"16px"},children:[n.jsx("div",{children:n.jsx("div",{className:"s-desc",children:s.name})}),n.jsx("span",{style:{fontFamily:"var(--mono)",fontSize:"12px"},children:k(Math.abs(s.amount))})]},l)),n.jsxs("div",{className:"s-row",children:[n.jsx("div",{children:n.jsx("div",{className:"s-name",children:"Direct Expenses"})}),n.jsx("span",{style:{fontFamily:"var(--mono)",fontWeight:"600",color:"var(--red)"},children:k(Ze.expenses.directExpensesTotal)})]}),n.jsxs("div",{className:"s-row",children:[n.jsx("div",{children:n.jsx("div",{className:"s-name",children:"Indirect Expenses"})}),n.jsx("span",{style:{fontFamily:"var(--mono)",fontWeight:"600",color:"var(--red)"},children:k(Ze.expenses.indirectExpensesTotal)})]}),n.jsxs("div",{className:"s-row",style:{borderTop:"2px solid var(--border)",paddingTop:"8px",marginTop:"8px"},children:[n.jsx("div",{children:n.jsx("div",{className:"s-name",style:{fontSize:"14px",fontWeight:"700"},children:"Total Expenses"})}),n.jsx("span",{style:{fontFamily:"var(--mono)",fontWeight:"700",fontSize:"16px",color:"var(--red)"},children:k(Ze.expenses.total)})]})]})})]}),n.jsx("div",{className:"s-card",style:{gridColumn:"1 / -1"},children:n.jsxs("div",{className:"s-card-b",style:{display:"flex",justifyContent:"space-around",padding:"16px"},children:[n.jsxs("div",{style:{textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"12px",color:"var(--t3)",marginBottom:"4px"},children:"Gross Profit"}),n.jsx("div",{style:{fontSize:"20px",fontWeight:"700",fontFamily:"var(--mono)",color:(Ze.grossProfit||0)>=0?"var(--green)":"var(--red)"},children:k(Ze.grossProfit)})]}),n.jsxs("div",{style:{textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"12px",color:"var(--t3)",marginBottom:"4px"},children:"Net Profit"}),n.jsx("div",{style:{fontSize:"24px",fontWeight:"700",fontFamily:"var(--mono)",color:(Ze.netProfit||0)>=0?"var(--green)":"var(--red)"},children:k(Ze.netProfit)})]})]})})]}):n.jsx("div",{style:{textAlign:"center",padding:"40px",color:"var(--t3)"},children:'Click "Fetch P&L" to load Profit & Loss from Tally. Leave dates blank for full period.'})]}),n.jsxs("div",{className:`page ${f==="price-lists"?"active":""}`,children:[n.jsxs("div",{className:"sec-head",style:{marginBottom:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("div",{className:"sec-title",style:{fontSize:"18px"},children:" Price Lists"}),n.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[n.jsxs("select",{value:eu,onChange:s=>{i2(s.target.value)},style:{padding:"6px 10px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"6px",color:"var(--t1)",fontSize:"12px"},children:[n.jsx("option",{value:"",children:"All Levels"}),s2.map(s=>n.jsx("option",{value:s,children:s},s))]}),n.jsx("button",{className:"btn btn-o",style:{padding:"6px 14px",fontSize:"12px"},onClick:Zu,children:"Filter"}),n.jsx("button",{className:"btn btn-p",style:{padding:"6px 14px",fontSize:"12px"},onClick:zC,disabled:Em,children:Em?" Syncing...":" Sync from Tally"})]})]}),o2?n.jsx("div",{style:{textAlign:"center",padding:"40px",color:"var(--t3)"},children:"Loading..."}):n.jsxs("div",{className:"table-wrap",children:[n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Stock Item"}),n.jsx("th",{children:"Price Level"}),n.jsx("th",{style:{textAlign:"right"},children:"Rate"})]})}),n.jsx("tbody",{children:zm.map((s,l)=>n.jsxs("tr",{children:[n.jsx("td",{style:{fontWeight:"600"},children:s.stock_item}),n.jsx("td",{children:n.jsx("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"11px",background:"var(--blue-g)",color:"var(--blue)"},children:s.price_level})}),n.jsx("td",{style:{textAlign:"right",fontFamily:"var(--mono)",fontWeight:"600"},children:k(s.rate)})]},l))})]}),zm.length===0&&n.jsx("div",{style:{textAlign:"center",padding:"30px",color:"var(--t3)"},children:'No price lists. Click "Sync from Tally" to fetch.'})]})]}),n.jsxs("div",{className:`page ${f==="bank-recon"?"active":""}`,children:[n.jsxs("div",{className:"sec-head",style:{marginBottom:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("div",{className:"sec-title",style:{fontSize:"18px"},children:" Reconciliation"}),n.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[n.jsxs("select",{value:xs,onChange:s=>b2(s.target.value),style:{padding:"6px 10px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"6px",color:"var(--t1)",fontSize:"12px"},children:[n.jsx("option",{value:"rbb_tally",children:"RBB  Tally"}),n.jsx("option",{value:"fonepay_rbb",children:"Fonepay  RBB"}),n.jsx("option",{value:"fonepay_tally",children:"Fonepay  Tally"})]}),n.jsx("button",{className:"btn btn-o",style:{padding:"6px 14px",fontSize:"12px"},onClick:eh,children:" Refresh"})]})]}),n.jsxs("div",{className:"s-card",style:{marginBottom:"16px"},children:[n.jsx("div",{className:"s-card-h",children:"Auto-Match Settings"}),n.jsxs("div",{className:"s-card-b",style:{display:"flex",gap:"12px",alignItems:"center",flexWrap:"wrap"},children:[(xs==="rbb_tally"||xs==="fonepay_tally")&&n.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[n.jsx("label",{style:{fontSize:"12px",color:"var(--t3)"},children:"Bank Ledger:"}),n.jsx("input",{type:"text",value:Vm,onChange:s=>j2(s.target.value),placeholder:"e.g. RBB Bank",style:{padding:"6px 10px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"6px",color:"var(--t1)",fontSize:"12px",width:"150px"}})]}),n.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[n.jsx("label",{style:{fontSize:"12px",color:"var(--t3)"},children:"From:"}),n.jsx("input",{type:"date",value:au,onChange:s=>S2(s.target.value),style:{padding:"6px 10px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"6px",color:"var(--t1)",fontSize:"12px"}})]}),n.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[n.jsx("label",{style:{fontSize:"12px",color:"var(--t3)"},children:"To:"}),n.jsx("input",{type:"date",value:iu,onChange:s=>w2(s.target.value),style:{padding:"6px 10px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"6px",color:"var(--t1)",fontSize:"12px"}})]}),n.jsx("button",{className:"btn btn-p",style:{padding:"8px 18px",fontSize:"12px",fontWeight:"600"},onClick:LC,disabled:qm,children:qm?" Matching...":" Auto-Match"})]})]}),n.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"16px"},children:["summary","matched","unmatched-rbb","unmatched-fonepay"].map(s=>n.jsx("button",{className:`btn ${Fi===s?"btn-p":"btn-o"}`,style:{padding:"6px 14px",fontSize:"12px",textTransform:"capitalize"},onClick:()=>y2(s),children:s.replace(/-/g," ")},s))}),v2?n.jsx("div",{style:{textAlign:"center",padding:"40px",color:"var(--t3)"},children:"Loading..."}):n.jsxs(n.Fragment,{children:[Fi==="summary"&&n.jsxs("div",{className:"table-wrap",children:[n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Type"}),n.jsx("th",{children:"Status"}),n.jsx("th",{style:{textAlign:"right"},children:"Count"}),n.jsx("th",{style:{textAlign:"right"},children:"Source Amount"}),n.jsx("th",{style:{textAlign:"right"},children:"Target Amount"})]})}),n.jsx("tbody",{children:Om.map((s,l)=>n.jsxs("tr",{children:[n.jsx("td",{children:s.recon_type}),n.jsx("td",{children:n.jsx("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"11px",background:s.match_status==="matched"?"var(--green-g)":s.match_status==="manual_match"?"var(--blue-g)":"var(--red-g)",color:s.match_status==="matched"?"var(--green)":s.match_status==="manual_match"?"var(--blue)":"var(--red)"},children:s.match_status})}),n.jsx("td",{style:{textAlign:"right"},children:s.count}),n.jsx("td",{style:{textAlign:"right",fontFamily:"var(--mono)"},children:k(s.total_source_amount)}),n.jsx("td",{style:{textAlign:"right",fontFamily:"var(--mono)"},children:k(s.total_target_amount)})]},l))})]}),Om.length===0&&n.jsx("div",{style:{textAlign:"center",padding:"30px",color:"var(--t3)"},children:"No reconciliation data yet. Use auto-match to start matching."})]}),Fi==="matched"&&n.jsx("div",{className:"table-wrap",children:n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Source"}),n.jsx("th",{style:{textAlign:"right"},children:"Amount"}),n.jsx("th",{children:"Target"}),n.jsx("th",{style:{textAlign:"right"},children:"Amount"}),n.jsx("th",{children:"Confidence"})]})}),n.jsx("tbody",{children:h2.filter(s=>s.match_status==="matched"||s.match_status==="manual_match").map((s,l)=>n.jsxs("tr",{children:[n.jsx("td",{style:{fontSize:"12px"},children:s.source_description}),n.jsx("td",{style:{textAlign:"right",fontFamily:"var(--mono)",fontSize:"12px"},children:k(s.source_amount)}),n.jsx("td",{style:{fontSize:"12px"},children:s.target_description}),n.jsx("td",{style:{textAlign:"right",fontFamily:"var(--mono)",fontSize:"12px"},children:k(s.target_amount)}),n.jsx("td",{children:n.jsxs("span",{style:{fontSize:"11px",fontWeight:"600",color:s.match_confidence>=.9?"var(--green)":"var(--yellow)"},children:[Math.round(s.match_confidence*100),"%"]})})]},l))})]})}),Fi==="unmatched-rbb"&&n.jsxs("div",{className:"table-wrap",children:[n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Description"}),n.jsx("th",{style:{textAlign:"right"},children:"Credit"}),n.jsx("th",{style:{textAlign:"right"},children:"Debit"}),n.jsx("th",{style:{textAlign:"right"},children:"Balance"})]})}),n.jsx("tbody",{children:Wm.map((s,l)=>n.jsxs("tr",{children:[n.jsx("td",{children:s.transaction_date}),n.jsx("td",{style:{fontSize:"12px"},children:s.description}),n.jsx("td",{style:{textAlign:"right",fontFamily:"var(--mono)",color:"var(--green)"},children:s.credit>0?k(s.credit):"-"}),n.jsx("td",{style:{textAlign:"right",fontFamily:"var(--mono)",color:"var(--red)"},children:s.debit>0?k(s.debit):"-"}),n.jsx("td",{style:{textAlign:"right",fontFamily:"var(--mono)"},children:k(s.balance)})]},l))})]}),Wm.length===0&&n.jsx("div",{style:{textAlign:"center",padding:"30px",color:"var(--t3)"},children:"All RBB transactions matched!"})]}),Fi==="unmatched-fonepay"&&n.jsxs("div",{className:"table-wrap",children:[n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Issuer"}),n.jsx("th",{style:{textAlign:"right"},children:"Amount"})]})}),n.jsx("tbody",{children:Mm.map((s,l)=>n.jsxs("tr",{children:[n.jsx("td",{children:s.transaction_date}),n.jsx("td",{style:{fontSize:"12px"},children:s.description}),n.jsx("td",{children:s.issuer_name||"-"}),n.jsx("td",{style:{textAlign:"right",fontFamily:"var(--mono)",fontWeight:"600",color:"var(--green)"},children:k(s.amount)})]},l))})]}),Mm.length===0&&n.jsx("div",{style:{textAlign:"center",padding:"30px",color:"var(--t3)"},children:"All Fonepay transactions matched!"})]})]})]}),n.jsxs("div",{className:`page ${f==="inventory-movement"?"active":""}`,children:[n.jsxs("div",{className:"sec-head",style:{marginBottom:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("div",{className:"sec-title",style:{fontSize:"18px"},children:" Inventory Movement"}),n.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[n.jsx("input",{type:"date",value:nu,onChange:s=>c2(s.target.value),style:{padding:"6px 10px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"6px",color:"var(--t1)",fontSize:"12px"}}),n.jsx("span",{style:{color:"var(--t3)"},children:"to"}),n.jsx("input",{type:"date",value:ru,onChange:s=>p2(s.target.value),style:{padding:"6px 10px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"6px",color:"var(--t1)",fontSize:"12px"}}),n.jsx("button",{className:"btn btn-p",style:{padding:"6px 14px",fontSize:"12px"},onClick:fv,disabled:tu,children:tu?" Loading...":" Fetch"})]})]}),n.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"16px"},children:["movements","summary"].map(s=>n.jsx("button",{className:`btn ${su===s?"btn-p":"btn-o"}`,style:{padding:"6px 14px",fontSize:"12px",textTransform:"capitalize"},onClick:()=>u2(s),children:s},s))}),tu?n.jsx("div",{style:{textAlign:"center",padding:"40px",color:"var(--t3)"},children:"Loading from Tally..."}):n.jsxs(n.Fragment,{children:[su==="movements"&&n.jsxs("div",{className:"table-wrap",children:[n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Type"}),n.jsx("th",{children:"Voucher#"}),n.jsx("th",{children:"Party"}),n.jsx("th",{children:"Item"}),n.jsx("th",{style:{textAlign:"right"},children:"Qty"}),n.jsx("th",{children:"Direction"}),n.jsx("th",{style:{textAlign:"right"},children:"Amount"})]})}),n.jsx("tbody",{children:Dm.flatMap((s,l)=>(s.items||[]).map((c,p)=>n.jsxs("tr",{children:[n.jsx("td",{children:s.date}),n.jsx("td",{children:n.jsx("span",{style:{fontSize:"11px",padding:"2px 6px",borderRadius:"4px",background:s.voucherType==="Sales"?"var(--green-g)":"var(--blue-g)",color:s.voucherType==="Sales"?"var(--green)":"var(--blue)"},children:s.voucherType})}),n.jsx("td",{children:s.voucherNumber}),n.jsx("td",{style:{fontSize:"12px"},children:s.partyName}),n.jsx("td",{style:{fontWeight:"600"},children:c.stockItem}),n.jsx("td",{style:{textAlign:"right",fontFamily:"var(--mono)"},children:c.quantity}),n.jsx("td",{children:n.jsx("span",{style:{fontSize:"11px",fontWeight:"600",color:c.direction==="in"?"var(--green)":"var(--red)"},children:c.direction==="in"?" IN":" OUT"})}),n.jsx("td",{style:{textAlign:"right",fontFamily:"var(--mono)",fontSize:"12px"},children:k(Math.abs(c.amount))})]},`${l}-${p}`)))})]}),Dm.length===0&&n.jsx("div",{style:{textAlign:"center",padding:"30px",color:"var(--t3)"},children:"No movements found. Select a date range and click Fetch."})]}),su==="summary"&&n.jsxs("div",{className:"table-wrap",children:[n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Stock Item"}),n.jsx("th",{style:{textAlign:"right"},children:"Qty In"}),n.jsx("th",{style:{textAlign:"right"},children:"Qty Out"}),n.jsx("th",{style:{textAlign:"right"},children:"Net"}),n.jsx("th",{style:{textAlign:"right"},children:"In Value"}),n.jsx("th",{style:{textAlign:"right"},children:"Out Value"})]})}),n.jsx("tbody",{children:Pm.map((s,l)=>n.jsxs("tr",{children:[n.jsx("td",{style:{fontWeight:"600"},children:s.stockItem}),n.jsx("td",{style:{textAlign:"right",fontFamily:"var(--mono)",color:"var(--green)"},children:s.totalIn}),n.jsx("td",{style:{textAlign:"right",fontFamily:"var(--mono)",color:"var(--red)"},children:s.totalOut}),n.jsx("td",{style:{textAlign:"right",fontFamily:"var(--mono)",fontWeight:"600",color:s.netQuantity>=0?"var(--green)":"var(--red)"},children:s.netQuantity}),n.jsx("td",{style:{textAlign:"right",fontFamily:"var(--mono)",fontSize:"12px"},children:k(s.inValue)}),n.jsx("td",{style:{textAlign:"right",fontFamily:"var(--mono)",fontSize:"12px"},children:k(s.outValue)})]},l))})]}),Pm.length===0&&n.jsx("div",{style:{textAlign:"center",padding:"30px",color:"var(--t3)"},children:"No data. Fetch inventory movements first."})]})]})]}),n.jsxs("div",{className:`page ${f==="balance-sheet"?"active":""}`,children:[n.jsxs("div",{className:"sec-head",style:{marginBottom:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("div",{className:"sec-title",style:{fontSize:"18px"},children:" Balance Sheet"}),n.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[n.jsx("input",{type:"date",value:Wl,onChange:s=>C2(s.target.value),style:{padding:"6px 10px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"6px",color:"var(--t1)",fontSize:"12px"}}),n.jsx("span",{style:{color:"var(--t3)"},children:"to"}),n.jsx("input",{type:"date",value:Ml,onChange:s=>N2(s.target.value),style:{padding:"6px 10px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"6px",color:"var(--t1)",fontSize:"12px"}}),n.jsx("button",{className:"btn btn-p",style:{padding:"6px 14px",fontSize:"12px"},onClick:dv,disabled:ou,children:ou?" Loading...":" Fetch"})]})]}),ou?n.jsx("div",{style:{textAlign:"center",padding:"40px",color:"var(--t3)"},children:"Loading from Tally..."}):me?n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[n.jsxs("div",{className:"s-card",children:[n.jsx("div",{className:"s-card-h",style:{color:"var(--blue)"},children:"Assets"}),n.jsxs("div",{className:"s-card-b",children:[me.assets.fixed.length>0&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"s-row",style:{borderBottom:"1px solid var(--border)"},children:[n.jsx("div",{children:n.jsx("div",{className:"s-name",style:{fontWeight:"600"},children:"Fixed Assets"})}),n.jsx("span",{style:{fontFamily:"var(--mono)",fontWeight:"600",color:"var(--blue)"},children:k(me.assets.totalFixed)})]}),me.assets.fixed.map((s,l)=>n.jsxs("div",{className:"s-row",style:{paddingLeft:"16px"},children:[n.jsx("div",{children:n.jsx("div",{className:"s-desc",children:s.name})}),n.jsx("span",{style:{fontFamily:"var(--mono)",fontSize:"12px"},children:k(Math.abs(s.closingBalance))})]},l))]}),me.assets.current.length>0&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"s-row",style:{borderBottom:"1px solid var(--border)",marginTop:"8px"},children:[n.jsx("div",{children:n.jsx("div",{className:"s-name",style:{fontWeight:"600"},children:"Current Assets"})}),n.jsx("span",{style:{fontFamily:"var(--mono)",fontWeight:"600",color:"var(--blue)"},children:k(me.assets.totalCurrent)})]}),me.assets.current.map((s,l)=>n.jsxs("div",{className:"s-row",style:{paddingLeft:"16px"},children:[n.jsx("div",{children:n.jsx("div",{className:"s-desc",children:s.name})}),n.jsx("span",{style:{fontFamily:"var(--mono)",fontSize:"12px"},children:k(Math.abs(s.closingBalance))})]},l))]}),me.assets.investments.length>0&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"s-row",style:{borderBottom:"1px solid var(--border)",marginTop:"8px"},children:[n.jsx("div",{children:n.jsx("div",{className:"s-name",style:{fontWeight:"600"},children:"Investments"})}),n.jsx("span",{style:{fontFamily:"var(--mono)",fontWeight:"600",color:"var(--blue)"},children:k(me.assets.totalInvestments)})]}),me.assets.investments.map((s,l)=>n.jsxs("div",{className:"s-row",style:{paddingLeft:"16px"},children:[n.jsx("div",{children:n.jsx("div",{className:"s-desc",children:s.name})}),n.jsx("span",{style:{fontFamily:"var(--mono)",fontSize:"12px"},children:k(Math.abs(s.closingBalance))})]},l))]}),n.jsxs("div",{className:"s-row",style:{borderTop:"2px solid var(--border)",paddingTop:"8px",marginTop:"12px"},children:[n.jsx("div",{children:n.jsx("div",{className:"s-name",style:{fontSize:"14px",fontWeight:"700"},children:"Total Assets"})}),n.jsx("span",{style:{fontFamily:"var(--mono)",fontWeight:"700",fontSize:"16px",color:"var(--blue)"},children:k(me.assets.total)})]})]})]}),n.jsxs("div",{className:"s-card",children:[n.jsx("div",{className:"s-card-h",style:{color:"var(--red)"},children:"Liabilities & Equity"}),n.jsxs("div",{className:"s-card-b",children:[me.liabilities.current.length>0&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"s-row",style:{borderBottom:"1px solid var(--border)"},children:[n.jsx("div",{children:n.jsx("div",{className:"s-name",style:{fontWeight:"600"},children:"Current Liabilities"})}),n.jsx("span",{style:{fontFamily:"var(--mono)",fontWeight:"600",color:"var(--red)"},children:k(me.liabilities.totalCurrent)})]}),me.liabilities.current.map((s,l)=>n.jsxs("div",{className:"s-row",style:{paddingLeft:"16px"},children:[n.jsx("div",{children:n.jsx("div",{className:"s-desc",children:s.name})}),n.jsx("span",{style:{fontFamily:"var(--mono)",fontSize:"12px"},children:k(Math.abs(s.closingBalance))})]},l))]}),me.liabilities.longTerm.length>0&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"s-row",style:{borderBottom:"1px solid var(--border)",marginTop:"8px"},children:[n.jsx("div",{children:n.jsx("div",{className:"s-name",style:{fontWeight:"600"},children:"Long-Term Liabilities"})}),n.jsx("span",{style:{fontFamily:"var(--mono)",fontWeight:"600",color:"var(--red)"},children:k(me.liabilities.totalLongTerm)})]}),me.liabilities.longTerm.map((s,l)=>n.jsxs("div",{className:"s-row",style:{paddingLeft:"16px"},children:[n.jsx("div",{children:n.jsx("div",{className:"s-desc",children:s.name})}),n.jsx("span",{style:{fontFamily:"var(--mono)",fontSize:"12px"},children:k(Math.abs(s.closingBalance))})]},l))]}),n.jsxs("div",{className:"s-row",style:{borderTop:"1px solid var(--border)",paddingTop:"8px",marginTop:"8px"},children:[n.jsx("div",{children:n.jsx("div",{className:"s-name",style:{fontWeight:"600"},children:"Total Liabilities"})}),n.jsx("span",{style:{fontFamily:"var(--mono)",fontWeight:"600",color:"var(--red)"},children:k(me.liabilities.total)})]}),me.equity.items.length>0&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"s-row",style:{borderBottom:"1px solid var(--border)",marginTop:"12px"},children:[n.jsx("div",{children:n.jsx("div",{className:"s-name",style:{fontWeight:"600",color:"var(--purple)"},children:"Equity"})}),n.jsx("span",{style:{fontFamily:"var(--mono)",fontWeight:"600",color:"var(--purple)"},children:k(me.equity.total)})]}),me.equity.items.map((s,l)=>n.jsxs("div",{className:"s-row",style:{paddingLeft:"16px"},children:[n.jsx("div",{children:n.jsx("div",{className:"s-desc",children:s.name})}),n.jsx("span",{style:{fontFamily:"var(--mono)",fontSize:"12px"},children:k(Math.abs(s.closingBalance))})]},l))]}),n.jsxs("div",{className:"s-row",style:{borderTop:"2px solid var(--border)",paddingTop:"8px",marginTop:"12px"},children:[n.jsx("div",{children:n.jsx("div",{className:"s-name",style:{fontSize:"14px",fontWeight:"700"},children:"Total Liabilities + Equity"})}),n.jsx("span",{style:{fontFamily:"var(--mono)",fontWeight:"700",fontSize:"16px",color:"var(--red)"},children:k(me.liabilities.total+me.equity.total)})]})]})]}),n.jsx("div",{className:"s-card",style:{gridColumn:"1 / -1"},children:n.jsxs("div",{className:"s-card-b",style:{display:"flex",justifyContent:"space-around",padding:"16px"},children:[n.jsxs("div",{style:{textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"12px",color:"var(--t3)",marginBottom:"4px"},children:"Total Assets"}),n.jsx("div",{style:{fontSize:"20px",fontWeight:"700",fontFamily:"var(--mono)",color:"var(--blue)"},children:k(me.assets.total)})]}),n.jsxs("div",{style:{textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"12px",color:"var(--t3)",marginBottom:"4px"},children:"Total Liabilities"}),n.jsx("div",{style:{fontSize:"20px",fontWeight:"700",fontFamily:"var(--mono)",color:"var(--red)"},children:k(me.liabilities.total)})]}),n.jsxs("div",{style:{textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"12px",color:"var(--t3)",marginBottom:"4px"},children:"Net Worth"}),n.jsx("div",{style:{fontSize:"20px",fontWeight:"700",fontFamily:"var(--mono)",color:me.netWorth>=0?"var(--green)":"var(--red)"},children:k(me.netWorth)})]})]})})]}):n.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"var(--t3)"},children:[n.jsx("div",{style:{fontSize:"40px",marginBottom:"12px"},children:""}),n.jsx("div",{style:{fontSize:"16px",marginBottom:"8px"},children:"Balance Sheet"}),n.jsx("div",{style:{fontSize:"13px"},children:"Select date range and click Fetch to load from Tally"})]})]}),n.jsxs("div",{className:`page ${f==="trial-balance"?"active":""}`,children:[n.jsxs("div",{className:"sec-head",style:{marginBottom:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("div",{className:"sec-title",style:{fontSize:"18px"},children:" Trial Balance"}),n.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[n.jsx("input",{type:"date",value:$l,onChange:s=>A2(s.target.value),style:{padding:"6px 10px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"6px",color:"var(--t1)",fontSize:"12px"}}),n.jsx("span",{style:{color:"var(--t3)"},children:"to"}),n.jsx("input",{type:"date",value:ql,onChange:s=>R2(s.target.value),style:{padding:"6px 10px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"6px",color:"var(--t1)",fontSize:"12px"}}),n.jsx("button",{className:"btn btn-p",style:{padding:"6px 14px",fontSize:"12px"},onClick:cv,disabled:lu,children:lu?" Loading...":" Fetch"})]})]}),lu?n.jsx("div",{style:{textAlign:"center",padding:"40px",color:"var(--t3)"},children:"Loading from Tally..."}):cn&&cn.ledgers?n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"12px",marginBottom:"16px"},children:[n.jsx("div",{className:"s-card",children:n.jsxs("div",{className:"s-card-b",style:{textAlign:"center",padding:"12px"},children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)"},children:"Total Debit"}),n.jsx("div",{style:{fontSize:"18px",fontWeight:"700",fontFamily:"var(--mono)",color:"var(--blue)"},children:k(cn.totalDebit)})]})}),n.jsx("div",{className:"s-card",children:n.jsxs("div",{className:"s-card-b",style:{textAlign:"center",padding:"12px"},children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)"},children:"Total Credit"}),n.jsx("div",{style:{fontSize:"18px",fontWeight:"700",fontFamily:"var(--mono)",color:"var(--red)"},children:k(cn.totalCredit)})]})}),n.jsx("div",{className:"s-card",children:n.jsxs("div",{className:"s-card-b",style:{textAlign:"center",padding:"12px"},children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)"},children:"Difference"}),n.jsx("div",{style:{fontSize:"18px",fontWeight:"700",fontFamily:"var(--mono)",color:cn.isBalanced?"var(--green)":"var(--red)"},children:cn.isBalanced?" Balanced":k(cn.difference)})]})})]}),n.jsx("div",{style:{marginBottom:"12px"},children:n.jsx("input",{placeholder:"Search ledgers...",value:Ul,onChange:s=>B2(s.target.value),style:{width:"100%",padding:"8px 12px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"6px",color:"var(--t1)",fontSize:"13px"}})}),n.jsx("div",{style:{overflow:"auto",maxHeight:"60vh"},children:n.jsxs("table",{className:"rush-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{style:{textAlign:"left"},children:"Ledger Name"}),n.jsx("th",{style:{textAlign:"left"},children:"Group"}),n.jsx("th",{style:{textAlign:"right"},children:"Debit (Dr)"}),n.jsx("th",{style:{textAlign:"right"},children:"Credit (Cr)"})]})}),n.jsx("tbody",{children:cn.ledgers.filter(s=>!Ul||s.name.toLowerCase().includes(Ul.toLowerCase())||s.parent.toLowerCase().includes(Ul.toLowerCase())).map((s,l)=>n.jsxs("tr",{children:[n.jsx("td",{style:{fontSize:"13px"},children:s.name}),n.jsx("td",{style:{fontSize:"12px",color:"var(--t3)"},children:s.parent}),n.jsx("td",{style:{textAlign:"right",fontFamily:"var(--mono)",fontSize:"12px",color:s.debit>0?"var(--blue)":"var(--t3)"},children:s.debit>0?k(s.debit):"-"}),n.jsx("td",{style:{textAlign:"right",fontFamily:"var(--mono)",fontSize:"12px",color:s.credit>0?"var(--red)":"var(--t3)"},children:s.credit>0?k(s.credit):"-"})]},l))}),n.jsx("tfoot",{children:n.jsxs("tr",{style:{fontWeight:"700",borderTop:"2px solid var(--border)"},children:[n.jsxs("td",{colSpan:"2",children:["Total (",cn.count," ledgers)"]}),n.jsx("td",{style:{textAlign:"right",fontFamily:"var(--mono)",color:"var(--blue)"},children:k(cn.totalDebit)}),n.jsx("td",{style:{textAlign:"right",fontFamily:"var(--mono)",color:"var(--red)"},children:k(cn.totalCredit)})]})})]})})]}):n.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"var(--t3)"},children:[n.jsx("div",{style:{fontSize:"40px",marginBottom:"12px"},children:""}),n.jsx("div",{style:{fontSize:"16px",marginBottom:"8px"},children:"Trial Balance"}),n.jsx("div",{style:{fontSize:"13px"},children:"Select date range and click Fetch to load all ledgers from Tally"})]})]}),n.jsxs("div",{className:`page ${f==="cash-flow"?"active":""}`,children:[n.jsxs("div",{className:"sec-head",style:{marginBottom:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("div",{className:"sec-title",style:{fontSize:"18px"},children:" Cash Flow Statement"}),n.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[n.jsx("input",{type:"date",value:Vl,onChange:s=>z2(s.target.value),style:{padding:"6px 10px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"6px",color:"var(--t1)",fontSize:"12px"}}),n.jsx("span",{style:{color:"var(--t3)"},children:"to"}),n.jsx("input",{type:"date",value:Hl,onChange:s=>L2(s.target.value),style:{padding:"6px 10px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"6px",color:"var(--t1)",fontSize:"12px"}}),n.jsx("button",{className:"btn btn-p",style:{padding:"6px 14px",fontSize:"12px"},onClick:pv,disabled:du,children:du?" Loading...":" Fetch"})]})]}),du?n.jsx("div",{style:{textAlign:"center",padding:"40px",color:"var(--t3)"},children:"Loading from Tally..."}):pn?n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:"12px",marginBottom:"16px"},children:[n.jsx("div",{className:"s-card",children:n.jsxs("div",{className:"s-card-b",style:{textAlign:"center",padding:"12px"},children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)"},children:"Opening Cash"}),n.jsx("div",{style:{fontSize:"16px",fontWeight:"700",fontFamily:"var(--mono)",color:"var(--t1)"},children:k(pn.openingCash)})]})}),n.jsx("div",{className:"s-card",children:n.jsxs("div",{className:"s-card-b",style:{textAlign:"center",padding:"12px"},children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)"},children:"Net Cash Flow"}),n.jsxs("div",{style:{fontSize:"16px",fontWeight:"700",fontFamily:"var(--mono)",color:pn.netCashFlow>=0?"var(--green)":"var(--red)"},children:[pn.netCashFlow>=0?"+":"",k(pn.netCashFlow)]})]})}),n.jsx("div",{className:"s-card",children:n.jsxs("div",{className:"s-card-b",style:{textAlign:"center",padding:"12px"},children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)"},children:"Closing Cash"}),n.jsx("div",{style:{fontSize:"16px",fontWeight:"700",fontFamily:"var(--mono)",color:"var(--blue)"},children:k(pn.closingCash)})]})}),n.jsx("div",{className:"s-card",children:n.jsxs("div",{className:"s-card-b",style:{textAlign:"center",padding:"12px"},children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)"},children:"Operating"}),n.jsx("div",{style:{fontSize:"16px",fontWeight:"700",fontFamily:"var(--mono)",color:pn.operating.net>=0?"var(--green)":"var(--red)"},children:k(pn.operating.net)})]})})]}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px"},children:[{title:"Operating Activities",data:pn.operating,color:"var(--green)"},{title:"Investing Activities",data:pn.investing,color:"var(--orange)"},{title:"Financing Activities",data:pn.financing,color:"var(--purple)"}].map((s,l)=>n.jsxs("div",{className:"s-card",children:[n.jsx("div",{className:"s-card-h",style:{color:s.color},children:s.title}),n.jsxs("div",{className:"s-card-b",children:[n.jsxs("div",{className:"s-row",children:[n.jsx("div",{children:n.jsx("div",{className:"s-name",style:{color:"var(--green)"},children:"Inflows"})}),n.jsx("span",{style:{fontFamily:"var(--mono)",fontWeight:"600",color:"var(--green)"},children:k(s.data.totalInflow)})]}),(s.data.inflows||[]).slice(0,5).map((c,p)=>n.jsxs("div",{className:"s-row",style:{paddingLeft:"12px"},children:[n.jsx("div",{children:n.jsxs("div",{className:"s-desc",children:[c.partyName||c.voucherType," ",c.voucherNumber]})}),n.jsx("span",{style:{fontFamily:"var(--mono)",fontSize:"11px"},children:k(c.amount)})]},p)),(s.data.inflows||[]).length>5&&n.jsxs("div",{style:{paddingLeft:"12px",fontSize:"11px",color:"var(--t3)"},children:["+",s.data.inflows.length-5," more..."]}),n.jsxs("div",{className:"s-row",style:{marginTop:"8px"},children:[n.jsx("div",{children:n.jsx("div",{className:"s-name",style:{color:"var(--red)"},children:"Outflows"})}),n.jsx("span",{style:{fontFamily:"var(--mono)",fontWeight:"600",color:"var(--red)"},children:k(s.data.totalOutflow)})]}),(s.data.outflows||[]).slice(0,5).map((c,p)=>n.jsxs("div",{className:"s-row",style:{paddingLeft:"12px"},children:[n.jsx("div",{children:n.jsxs("div",{className:"s-desc",children:[c.partyName||c.voucherType," ",c.voucherNumber]})}),n.jsx("span",{style:{fontFamily:"var(--mono)",fontSize:"11px"},children:k(c.amount)})]},p)),(s.data.outflows||[]).length>5&&n.jsxs("div",{style:{paddingLeft:"12px",fontSize:"11px",color:"var(--t3)"},children:["+",s.data.outflows.length-5," more..."]}),n.jsxs("div",{className:"s-row",style:{borderTop:"2px solid var(--border)",paddingTop:"8px",marginTop:"8px"},children:[n.jsx("div",{children:n.jsx("div",{className:"s-name",style:{fontWeight:"700"},children:"Net"})}),n.jsxs("span",{style:{fontFamily:"var(--mono)",fontWeight:"700",color:s.data.net>=0?"var(--green)":"var(--red)"},children:[s.data.net>=0?"+":"",k(s.data.net)]})]})]})]},l))})]}):n.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"var(--t3)"},children:[n.jsx("div",{style:{fontSize:"40px",marginBottom:"12px"},children:""}),n.jsx("div",{style:{fontSize:"16px",marginBottom:"8px"},children:"Cash Flow Statement"}),n.jsx("div",{style:{fontSize:"13px"},children:"Select date range and click Fetch to analyze cash movements from Tally"})]})]}),n.jsxs("div",{className:`page ${f==="ratio-analysis"?"active":""}`,children:[n.jsxs("div",{className:"sec-head",style:{marginBottom:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("div",{className:"sec-title",style:{fontSize:"18px"},children:" Ratio Analysis"}),n.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[n.jsx("input",{type:"date",value:Kl,onChange:s=>F2(s.target.value),style:{padding:"6px 10px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"6px",color:"var(--t1)",fontSize:"12px"}}),n.jsx("span",{style:{color:"var(--t3)"},children:"to"}),n.jsx("input",{type:"date",value:Jl,onChange:s=>D2(s.target.value),style:{padding:"6px 10px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"6px",color:"var(--t1)",fontSize:"12px"}}),n.jsx("button",{className:"btn btn-p",style:{padding:"6px 14px",fontSize:"12px"},onClick:uv,disabled:pu,children:pu?" Loading...":" Analyze"})]})]}),pu?n.jsx("div",{style:{textAlign:"center",padding:"40px",color:"var(--t3)"},children:"Computing ratios from Tally..."}):pa&&pa.liquidity?n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[n.jsxs("div",{className:"s-card",children:[n.jsx("div",{className:"s-card-h",style:{color:"var(--blue)"},children:"Liquidity Ratios"}),n.jsx("div",{className:"s-card-b",children:Object.entries(pa.liquidity).map(([s,l])=>{var c,p;return n.jsxs("div",{className:"s-row",children:[n.jsxs("div",{children:[n.jsx("div",{className:"s-name",children:s.replace(/([A-Z])/g," $1").replace(/^./,g=>g.toUpperCase())}),n.jsxs("div",{className:"s-desc",children:[l.formula," (Good: ",l.good,")"]})]}),n.jsxs("span",{style:{fontFamily:"var(--mono)",fontWeight:"700",fontSize:"16px",color:parseFloat(l.value)>=parseFloat((c=l.good)==null?void 0:c.replace(/[><% ]/g,""))?"var(--green)":"var(--amber)"},children:[(p=l.value)==null?void 0:p.toFixed(2),l.unit||""]})]},s)})})]}),n.jsxs("div",{className:"s-card",children:[n.jsx("div",{className:"s-card-h",style:{color:"var(--orange)"},children:"Leverage Ratios"}),n.jsx("div",{className:"s-card-b",children:Object.entries(pa.leverage).map(([s,l])=>{var c,p;return n.jsxs("div",{className:"s-row",children:[n.jsxs("div",{children:[n.jsx("div",{className:"s-name",children:s.replace(/([A-Z])/g," $1").replace(/^./,g=>g.toUpperCase())}),n.jsxs("div",{className:"s-desc",children:[l.formula," (Good: ",l.good,")"]})]}),n.jsxs("span",{style:{fontFamily:"var(--mono)",fontWeight:"700",fontSize:"16px",color:parseFloat(l.value)<=parseFloat((c=l.good)==null?void 0:c.replace(/[><% ]/g,""))?"var(--green)":"var(--amber)"},children:[(p=l.value)==null?void 0:p.toFixed(2),l.unit||""]})]},s)})})]}),n.jsxs("div",{className:"s-card",children:[n.jsx("div",{className:"s-card-h",style:{color:"var(--green)"},children:"Profitability Ratios"}),n.jsx("div",{className:"s-card-b",children:Object.entries(pa.profitability).map(([s,l])=>{var c,p;return n.jsxs("div",{className:"s-row",children:[n.jsxs("div",{children:[n.jsx("div",{className:"s-name",children:s.replace(/([A-Z])/g," $1").replace(/^./,g=>g.toUpperCase())}),n.jsxs("div",{className:"s-desc",children:[l.formula," (Good: ",l.good,")"]})]}),n.jsxs("span",{style:{fontFamily:"var(--mono)",fontWeight:"700",fontSize:"16px",color:parseFloat(l.value)>=parseFloat((c=l.good)==null?void 0:c.replace(/[><% ]/g,""))?"var(--green)":"var(--amber)"},children:[(p=l.value)==null?void 0:p.toFixed(2),l.unit||""]})]},s)})})]}),n.jsxs("div",{className:"s-card",children:[n.jsx("div",{className:"s-card-h",style:{color:"var(--purple)"},children:"Efficiency Ratios"}),n.jsx("div",{className:"s-card-b",children:Object.entries(pa.efficiency).map(([s,l])=>{var c,p;return n.jsxs("div",{className:"s-row",children:[n.jsxs("div",{children:[n.jsx("div",{className:"s-name",children:s.replace(/([A-Z])/g," $1").replace(/^./,g=>g.toUpperCase())}),n.jsxs("div",{className:"s-desc",children:[l.formula," (Good: ",l.good,")"]})]}),n.jsxs("span",{style:{fontFamily:"var(--mono)",fontWeight:"700",fontSize:"16px",color:parseFloat(l.value)>=parseFloat((c=l.good)==null?void 0:c.replace(/[><% ]/g,""))?"var(--green)":"var(--amber)"},children:[(p=l.value)==null?void 0:p.toFixed(2),l.unit||""]})]},s)})})]})]}):n.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"var(--t3)"},children:[n.jsx("div",{style:{fontSize:"40px",marginBottom:"12px"},children:""}),n.jsx("div",{style:{fontSize:"16px",marginBottom:"8px"},children:"Ratio Analysis"}),n.jsx("div",{style:{fontSize:"13px"},children:"Select date range and click Analyze to compute financial ratios from Tally"})]})]}),n.jsxs("div",{className:`page ${f==="columnar"?"active":""}`,children:[n.jsxs("div",{className:"sec-head",style:{marginBottom:"16px",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"8px"},children:[n.jsx("div",{className:"sec-title",style:{fontSize:"18px"},children:"Columnar Dashboard"}),n.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",flexWrap:"wrap"},children:[n.jsx("input",{type:"date",value:ha,onChange:s=>Z2(s.target.value),style:{padding:"6px 10px",fontSize:"12px",border:"1px solid var(--border)",borderRadius:"6px",background:"var(--card)",color:"var(--t1)"}}),n.jsx("input",{type:"text",placeholder:"Search party...",value:Ql,onChange:s=>e3(s.target.value),style:{padding:"6px 10px",fontSize:"12px",border:"1px solid var(--border)",borderRadius:"6px",background:"var(--card)",color:"var(--t1)",width:"160px"}}),n.jsx("button",{onClick:hv,style:{padding:"6px 14px",fontSize:"12px",background:"var(--blue)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"600"},children:oy?"Loading...":"Load"})]})]}),Ii.length>0&&n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(130px, 1fr))",gap:"10px",marginBottom:"16px"},children:[{label:"Parties",value:Ii.length,color:"var(--blue)"},{label:"Bill Amount",value:k(we.bill_amount),color:"var(--t1)"},{label:"Cash",value:k(we.cash),color:"#2e7d32"},{label:"QR",value:k(we.qr),color:"#1565c0"},{label:"Cheque",value:k(we.cheque),color:"#6a1b9a"},{label:"Discount",value:k(we.discount),color:"#e65100"},{label:"eSewa",value:k(we.esewa),color:"#00695c"},{label:"Bank Dep.",value:k(we.bank_deposit),color:"#37474f"},{label:"Balance",value:k(we.balance),color:we.balance>0?"var(--red)":"var(--green)"}].map(s=>n.jsxs("div",{style:{background:"var(--card)",borderRadius:"8px",padding:"10px 12px",border:"1px solid var(--border)"},children:[n.jsx("div",{style:{fontSize:"10px",color:"var(--t3)",marginBottom:"4px",textTransform:"uppercase",letterSpacing:"0.5px"},children:s.label}),n.jsx("div",{style:{fontSize:"14px",fontWeight:"700",color:s.color,fontFamily:"var(--mono)"},children:s.value})]},s.label))}),Un.total>0&&n.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"16px",flexWrap:"wrap",alignItems:"center"},children:[n.jsxs("div",{style:{background:"var(--card)",borderRadius:"8px",padding:"8px 14px",border:"2px solid var(--blue)",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("span",{style:{fontSize:"10px",color:"var(--t3)",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Total Vouchers"}),n.jsx("span",{style:{fontSize:"16px",fontWeight:"800",color:"var(--blue)",fontFamily:"var(--mono)"},children:Un.total})]}),[{label:"Sales",count:Un.sales,color:"#1565c0"},{label:"Credit Sales",count:Un.credit_sales,color:"#6a1b9a"},{label:"A Pto Bill",count:Un.apto,color:"#00695c"},{label:"Pending",count:Un.pending,color:"#e65100"},{label:"Debit Note",count:Un.debit_note,color:"#c62828"},{label:"Receipt",count:Un.receipt,color:"#2e7d32"},{label:"Credit Note",count:Un.credit_note,color:"#37474f"}].filter(s=>s.count>0).map(s=>n.jsxs("div",{style:{background:"var(--card)",borderRadius:"6px",padding:"6px 12px",border:"1px solid var(--border)",display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("span",{style:{fontSize:"10px",color:"var(--t3)"},children:s.label}),n.jsx("span",{style:{fontSize:"14px",fontWeight:"700",color:s.color,fontFamily:"var(--mono)"},children:s.count})]},s.label))]}),oy?n.jsx("div",{style:{textAlign:"center",padding:"40px",color:"var(--t3)"},children:"Loading..."}):Ii.length===0?n.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"var(--t3)"},children:[n.jsx("div",{style:{fontSize:"28px",marginBottom:"8px"},children:""}),n.jsx("div",{children:"Select a date range and click Load"})]}):n.jsx("div",{style:{overflowX:"auto",borderRadius:"8px",border:"1px solid var(--border)"},children:n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{background:"var(--bg)",borderBottom:"2px solid var(--border)"},children:[n.jsx("th",{style:{padding:"8px 10px",textAlign:"left",color:"var(--t3)",fontWeight:"600",fontSize:"10px",textTransform:"uppercase",whiteSpace:"nowrap"},children:"#"}),n.jsx("th",{style:{padding:"8px 10px",textAlign:"left",color:"var(--t3)",fontWeight:"600",fontSize:"10px",textTransform:"uppercase",whiteSpace:"nowrap"},children:"Date"}),n.jsx("th",{style:{padding:"8px 10px",textAlign:"left",color:"var(--t3)",fontWeight:"600",fontSize:"10px",textTransform:"uppercase"},children:"Party Name"}),n.jsx("th",{style:{padding:"8px 10px",textAlign:"right",color:"var(--t3)",fontWeight:"600",fontSize:"10px",textTransform:"uppercase",whiteSpace:"nowrap"},children:"Bill Amt"}),n.jsx("th",{style:{padding:"8px 10px",textAlign:"right",color:"#2e7d32",fontWeight:"600",fontSize:"10px",textTransform:"uppercase",whiteSpace:"nowrap"},children:"Cash"}),n.jsx("th",{style:{padding:"8px 10px",textAlign:"right",color:"#1565c0",fontWeight:"600",fontSize:"10px",textTransform:"uppercase",whiteSpace:"nowrap"},children:"QR"}),n.jsx("th",{style:{padding:"8px 10px",textAlign:"right",color:"#6a1b9a",fontWeight:"600",fontSize:"10px",textTransform:"uppercase",whiteSpace:"nowrap"},children:"Cheque"}),n.jsx("th",{style:{padding:"8px 10px",textAlign:"right",color:"#e65100",fontWeight:"600",fontSize:"10px",textTransform:"uppercase",whiteSpace:"nowrap"},children:"Discount"}),n.jsx("th",{style:{padding:"8px 10px",textAlign:"right",color:"#00695c",fontWeight:"600",fontSize:"10px",textTransform:"uppercase",whiteSpace:"nowrap"},children:"eSewa"}),n.jsx("th",{style:{padding:"8px 10px",textAlign:"right",color:"#37474f",fontWeight:"600",fontSize:"10px",textTransform:"uppercase",whiteSpace:"nowrap"},children:"Bank Dep."}),n.jsx("th",{style:{padding:"8px 10px",textAlign:"right",color:"var(--t3)",fontWeight:"600",fontSize:"10px",textTransform:"uppercase",whiteSpace:"nowrap"},children:"Balance"})]})}),n.jsx("tbody",{children:Ii.map((s,l)=>{const c=Math.abs(s.balance)<1,p=yu===s.party_name,g=["Bank Receipt","Counter Receipt","Receipt","Dashboard Receipt","Credit Note"];return n.jsxs(vo.Fragment,{children:[n.jsxs("tr",{onClick:()=>RC(s.party_name),style:{borderBottom:"1px solid var(--border)",cursor:"pointer",background:s.is_critical?"rgba(211,47,47,0.08)":s.is_mismatch?"rgba(230,81,0,0.06)":c?"rgba(46,125,50,0.04)":s.balance>0?"rgba(211,47,47,0.04)":"var(--card)"},children:[n.jsx("td",{style:{padding:"6px 10px",color:"var(--t3)",fontSize:"11px"},children:l+1}),n.jsx("td",{style:{padding:"6px 10px",color:"var(--t3)",fontSize:"11px",whiteSpace:"nowrap"},children:lt(ha.replace(/-/g,""))}),n.jsxs("td",{style:{padding:"6px 10px",fontWeight:"600"},children:[n.jsx("span",{style:{marginRight:"4px",fontSize:"10px",color:"var(--t3)"},children:p?"":""}),s.party_name,s.extra_parties_count>0&&n.jsxs("span",{style:{fontSize:"10px",color:"var(--orange)",fontWeight:"700"},children:[" +",s.extra_parties_count]}),n.jsxs("span",{style:{marginLeft:"6px",fontSize:"9px",color:"var(--t3)"},children:[s.bill_count>0&&`${s.bill_count} bill${s.bill_count>1?"s":""}`,s.pending_count>0&&n.jsxs("span",{style:{color:"var(--amber)"},children:[s.bill_count>0?" + ":"",s.pending_count," pending"]}),s.receipt_count>0&&` / ${s.receipt_count} rcpt`]}),s.is_critical&&n.jsxs("span",{style:{marginLeft:"6px",background:"#d32f2f",color:"#fff",padding:"1px 6px",borderRadius:"3px",fontSize:"9px",fontWeight:"700"},title:s.critical_reason,children:["DUPLICATE: ",s.critical_reason]}),s.is_mismatch&&n.jsx("span",{style:{marginLeft:"6px",background:"#e65100",color:"#fff",padding:"1px 6px",borderRadius:"3px",fontSize:"9px",fontWeight:"700"},children:"ENTRIES MISMATCH"})]}),n.jsxs("td",{style:{padding:"6px 10px",textAlign:"right",fontWeight:"700",fontFamily:"var(--mono)"},children:[k(s.bill_amount),s.pending_amount>0&&n.jsxs("div",{style:{fontSize:"9px",color:"var(--amber)",fontWeight:"600"},children:["+",k(s.pending_amount)," pending"]})]}),n.jsx("td",{style:{padding:"6px 10px",textAlign:"right",fontFamily:"var(--mono)",color:s.cash>0?"#2e7d32":"var(--t4)"},children:s.cash>0?k(s.cash):""}),n.jsx("td",{style:{padding:"6px 10px",textAlign:"right",fontFamily:"var(--mono)",color:s.qr>0?"#1565c0":"var(--t4)"},children:s.qr>0?k(s.qr):""}),n.jsx("td",{style:{padding:"6px 10px",textAlign:"right",fontFamily:"var(--mono)",color:s.cheque>0?"#6a1b9a":"var(--t4)"},children:s.cheque>0?k(s.cheque):""}),n.jsx("td",{style:{padding:"6px 10px",textAlign:"right",fontFamily:"var(--mono)",color:s.discount>0?"#e65100":"var(--t4)"},children:s.discount>0?k(s.discount):""}),n.jsx("td",{style:{padding:"6px 10px",textAlign:"right",fontFamily:"var(--mono)",color:s.esewa>0?"#00695c":"var(--t4)"},children:s.esewa>0?k(s.esewa):""}),n.jsx("td",{style:{padding:"6px 10px",textAlign:"right",fontFamily:"var(--mono)",color:s.bank_deposit>0?"#37474f":"var(--t4)"},children:s.bank_deposit>0?k(s.bank_deposit):""}),n.jsx("td",{style:{padding:"6px 10px",textAlign:"right",fontWeight:"700",fontFamily:"var(--mono)",color:c?"#2e7d32":"var(--red)"},children:c?n.jsx("span",{style:{background:"#e8f5e9",color:"#2e7d32",padding:"2px 8px",borderRadius:"4px",fontSize:"10px"},children:"ZERO"}):k(s.balance)})]}),p&&n.jsx("tr",{children:n.jsx("td",{colSpan:11,style:{padding:0,border:"none"},children:n.jsx("div",{style:{background:"var(--bg)",borderLeft:"3px solid var(--blue)",margin:"0 0 0 20px",padding:"8px 12px"},children:r3?n.jsx("div",{style:{padding:"8px",color:"var(--t3)",fontSize:"11px"},children:"Loading..."}):n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"11px"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{borderBottom:"1px solid var(--border)"},children:[n.jsx("th",{style:{padding:"4px 8px",textAlign:"left",color:"var(--t3)",fontSize:"9px",textTransform:"uppercase"},children:"Type"}),n.jsx("th",{style:{padding:"4px 8px",textAlign:"left",color:"var(--t3)",fontSize:"9px",textTransform:"uppercase"},children:"Vch No"}),n.jsx("th",{style:{padding:"4px 8px",textAlign:"left",color:"var(--t3)",fontSize:"9px",textTransform:"uppercase"},children:"Master ID"}),n.jsx("th",{style:{padding:"4px 8px",textAlign:"right",color:"var(--t3)",fontSize:"9px",textTransform:"uppercase"},children:"Amount"}),n.jsx("th",{style:{padding:"4px 8px",textAlign:"right",color:"#2e7d32",fontSize:"9px",textTransform:"uppercase"},children:"Cash"}),n.jsx("th",{style:{padding:"4px 8px",textAlign:"right",color:"#1565c0",fontSize:"9px",textTransform:"uppercase"},children:"QR"}),n.jsx("th",{style:{padding:"4px 8px",textAlign:"right",color:"#6a1b9a",fontSize:"9px",textTransform:"uppercase"},children:"Cheque"}),n.jsx("th",{style:{padding:"4px 8px",textAlign:"right",color:"#e65100",fontSize:"9px",textTransform:"uppercase"},children:"Discount"}),n.jsx("th",{style:{padding:"4px 8px",textAlign:"right",color:"#00695c",fontSize:"9px",textTransform:"uppercase"},children:"eSewa"}),n.jsx("th",{style:{padding:"4px 8px",textAlign:"right",color:"#37474f",fontSize:"9px",textTransform:"uppercase"},children:"Bank Dep."})]})}),n.jsx("tbody",{children:t3.map(y=>{const S=g.includes(y.voucher_type);return n.jsxs("tr",{style:{borderBottom:"1px solid var(--border)",borderLeft:`3px solid ${S?"#e65100":"#1565c0"}`},children:[n.jsx("td",{style:{padding:"4px 8px",fontWeight:"600",color:S?"#e65100":"#1565c0"},children:y.voucher_type}),n.jsx("td",{style:{padding:"4px 8px",color:"var(--t3)"},children:y.voucher_number||"-"}),n.jsx("td",{style:{padding:"4px 8px",color:"var(--t3)",fontFamily:"var(--mono)",fontSize:"10px"},children:y.tally_master_id||"-"}),n.jsxs("td",{style:{padding:"4px 8px",textAlign:"right",fontFamily:"var(--mono)",fontWeight:"600"},children:[k(y.total_amount&&y.total_amount>0?y.total_amount:Math.abs(y.amount)),y.extra_parties_count>0&&n.jsxs("span",{style:{fontSize:"9px",color:"var(--orange)",marginLeft:"3px"},children:["+",y.extra_parties_count]})]}),n.jsx("td",{style:{padding:"4px 8px",textAlign:"right",fontFamily:"var(--mono)",color:"#2e7d32"},children:y.pay_cash>0?k(y.pay_cash):""}),n.jsx("td",{style:{padding:"4px 8px",textAlign:"right",fontFamily:"var(--mono)",color:"#1565c0"},children:y.pay_qr>0?k(y.pay_qr):""}),n.jsx("td",{style:{padding:"4px 8px",textAlign:"right",fontFamily:"var(--mono)",color:"#6a1b9a"},children:y.pay_cheque>0?k(y.pay_cheque):""}),n.jsx("td",{style:{padding:"4px 8px",textAlign:"right",fontFamily:"var(--mono)",color:"#e65100"},children:y.pay_discount>0?k(y.pay_discount):""}),n.jsx("td",{style:{padding:"4px 8px",textAlign:"right",fontFamily:"var(--mono)",color:"#00695c"},children:y.pay_esewa>0?k(y.pay_esewa):""}),n.jsx("td",{style:{padding:"4px 8px",textAlign:"right",fontFamily:"var(--mono)",color:"#37474f"},children:y.pay_bank_deposit>0?k(y.pay_bank_deposit):""})]},y.id)})})]})})})})]},s.party_name)})}),n.jsx("tfoot",{children:n.jsxs("tr",{style:{borderTop:"2px solid var(--border)",background:"var(--bg)",fontWeight:"700"},children:[n.jsxs("td",{colSpan:3,style:{padding:"8px 10px",fontSize:"11px",textTransform:"uppercase",color:"var(--t3)"},children:["Totals (",Ii.length," parties)"]}),n.jsx("td",{style:{padding:"8px 10px",textAlign:"right",fontFamily:"var(--mono)"},children:k(we.bill_amount)}),n.jsx("td",{style:{padding:"8px 10px",textAlign:"right",fontFamily:"var(--mono)",color:"#2e7d32"},children:we.cash>0?k(we.cash):""}),n.jsx("td",{style:{padding:"8px 10px",textAlign:"right",fontFamily:"var(--mono)",color:"#1565c0"},children:we.qr>0?k(we.qr):""}),n.jsx("td",{style:{padding:"8px 10px",textAlign:"right",fontFamily:"var(--mono)",color:"#6a1b9a"},children:we.cheque>0?k(we.cheque):""}),n.jsx("td",{style:{padding:"8px 10px",textAlign:"right",fontFamily:"var(--mono)",color:"#e65100"},children:we.discount>0?k(we.discount):""}),n.jsx("td",{style:{padding:"8px 10px",textAlign:"right",fontFamily:"var(--mono)",color:"#00695c"},children:we.esewa>0?k(we.esewa):""}),n.jsx("td",{style:{padding:"8px 10px",textAlign:"right",fontFamily:"var(--mono)",color:"#37474f"},children:we.bank_deposit>0?k(we.bank_deposit):""}),n.jsx("td",{style:{padding:"8px 10px",textAlign:"right",fontFamily:"var(--mono)",color:we.balance>0?"var(--red)":"#2e7d32"},children:k(we.balance)})]})})]})}),Yl.length>0&&n.jsxs("div",{style:{marginTop:"20px"},children:[n.jsxs("div",{className:"sec-head",style:{marginBottom:"10px"},children:[n.jsxs("div",{className:"sec-title",style:{fontSize:"15px",color:"var(--amber)"},children:["Pending Sales Bills (",Yl.length,")"]}),n.jsxs("span",{style:{fontSize:"12px",color:"var(--amber)",fontWeight:"700"},children:["Total: ",k(ny)]})]}),n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{className:"v-table",style:{width:"100%",fontSize:"12px"},children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{style:{padding:"8px 10px",textAlign:"left"},children:"#"}),n.jsx("th",{style:{padding:"8px 10px",textAlign:"left"},children:"Party Name"}),n.jsx("th",{style:{padding:"8px 10px",textAlign:"right"},children:"Pending Amount"})]})}),n.jsx("tbody",{children:Yl.map((s,l)=>n.jsxs("tr",{style:{borderBottom:"1px solid var(--border)",background:l%2===0?"var(--card)":"var(--bg)",borderLeft:"3px solid var(--amber)"},children:[n.jsx("td",{style:{padding:"8px 10px",color:"var(--t3)"},children:l+1}),n.jsx("td",{style:{padding:"8px 10px",fontWeight:"600"},children:s.party_name}),n.jsx("td",{style:{padding:"8px 10px",textAlign:"right",fontFamily:"var(--mono)",color:"var(--amber)",fontWeight:"700"},children:k(s.pending_amount)})]},s.party_name))}),n.jsx("tfoot",{children:n.jsxs("tr",{style:{fontWeight:"700",borderTop:"2px solid var(--border)",background:"var(--bg)"},children:[n.jsxs("td",{colSpan:"2",style:{padding:"8px 10px"},children:["Total (",Yl.length," pending)"]}),n.jsx("td",{style:{padding:"8px 10px",textAlign:"right",fontFamily:"var(--mono)",color:"var(--amber)"},children:k(ny)})]})})]})})]}),fu.length>0&&n.jsxs("div",{style:{marginTop:"20px"},children:[n.jsxs("div",{className:"sec-head",style:{marginBottom:"10px"},children:[n.jsxs("div",{className:"sec-title",style:{fontSize:"15px",color:"#c62828"},children:["Audit Trail (",fu.length," changes)"]}),n.jsx("span",{style:{fontSize:"11px",color:"var(--t3)"},children:"Post-date edits to this date's vouchers & changes made on this date to other dates' vouchers"})]}),n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{className:"v-table",style:{width:"100%",fontSize:"11px"},children:[n.jsx("thead",{children:n.jsx("tr",{children:[{key:"party_name",label:"Party"},{key:"voucher_type",label:"Type"},{key:"voucher_date",label:"Vchr Date"},{key:"field_name",label:"Field Changed"},{key:"old_value",label:"Old Value"},{key:"new_value",label:"New Value"},{key:"old_alter_id",label:"Alter ID"},{key:"changed_at",label:"Changed At"}].map(s=>n.jsxs("th",{style:{padding:"6px 8px",textAlign:"left",cursor:"pointer",userSelect:"none",whiteSpace:"nowrap"},onClick:()=>X2(l=>({key:s.key,dir:l.key===s.key&&l.dir==="asc"?"desc":"asc"})),children:[s.label," ",Oi.key===s.key?Oi.dir==="asc"?"":"":""]},s.key))})}),n.jsx("tbody",{children:[...fu].sort((s,l)=>{const c=Oi.key;let p=s[c],g=l[c];return c==="old_alter_id"||c==="new_alter_id"?(p=Number(p)||0,g=Number(g)||0):(p=String(p||"").toLowerCase(),g=String(g||"").toLowerCase()),p<g?Oi.dir==="asc"?-1:1:p>g?Oi.dir==="asc"?1:-1:0}).map((s,l)=>{var w,A,B,D;const c={voucher_type:"Voucher Type",amount:"Amount",udf_payment_total:"UDF/SFL Total",party_name:"Party Name",voucher_date:"Voucher Date",voucher_number:"Voucher No.",narration:"Narration",is_deleted:"Deleted",status:"Status"},p={voucher_type:"#c62828",amount:"#e65100",udf_payment_total:"#e65100",party_name:"#6a1b9a",voucher_date:"#1565c0",voucher_number:"#37474f",narration:"#546e7a",is_deleted:"#b71c1c",status:"#b71c1c"},g=s.alteration_type==="changed_today",y=s.voucher_date?s.voucher_date.replace(/(\d{4})(\d{2})(\d{2})/,"$1-$2-$3"):"",S=ry===`${s.master_id}-${l}`;return n.jsxs(vo.Fragment,{children:[n.jsxs("tr",{style:{borderBottom:"1px solid var(--border)",background:S?"var(--blue-g)":l%2===0?"var(--card)":"var(--bg)",borderLeft:`3px solid ${g?"#ff6f00":p[s.field_name]||"#c62828"}`,cursor:"pointer"},onClick:async()=>{var V;const P=`${s.master_id}-${l}`;if(ry===P){sy(null),mu([]);return}sy(P),iy(!0);try{const Q=await Rb(s.master_id);mu(((V=Q.data)==null?void 0:V.changes)||[])}catch{mu([])}finally{iy(!1)}},children:[n.jsxs("td",{style:{padding:"6px 8px",fontWeight:"600"},children:[s.party_name,g&&n.jsx("span",{style:{display:"block",fontSize:"9px",padding:"1px 4px",borderRadius:"3px",background:"#fff3e0",color:"#e65100",marginTop:"2px",width:"fit-content"},children:"Changed Today"}),!g&&n.jsx("span",{style:{display:"block",fontSize:"9px",padding:"1px 4px",borderRadius:"3px",background:"#fce4ec",color:"#c62828",marginTop:"2px",width:"fit-content"},children:"Edited Later"})]}),n.jsx("td",{style:{padding:"6px 8px"},children:n.jsx("span",{style:{fontSize:"10px",padding:"1px 5px",borderRadius:"3px",background:(w=s.voucher_type)!=null&&w.includes("Sales")?"var(--blue-g)":(A=s.voucher_type)!=null&&A.includes("Receipt")?"var(--green-g)":"var(--bg)",color:(B=s.voucher_type)!=null&&B.includes("Sales")?"var(--blue)":(D=s.voucher_type)!=null&&D.includes("Receipt")?"var(--green)":"var(--t2)"},children:s.voucher_type})}),n.jsx("td",{style:{padding:"6px 8px",fontFamily:"var(--mono)",fontSize:"10px",color:g?"#e65100":"var(--t3)"},children:y}),n.jsx("td",{style:{padding:"6px 8px"},children:n.jsx("span",{style:{fontSize:"10px",fontWeight:"700",color:p[s.field_name]||"var(--t2)",background:"rgba(0,0,0,0.04)",padding:"1px 5px",borderRadius:"3px"},children:c[s.field_name]||s.field_name})}),n.jsx("td",{style:{padding:"6px 8px",fontFamily:"var(--mono)",color:"var(--red)",textDecoration:"line-through",opacity:.7},children:s.field_name==="amount"||s.field_name==="udf_payment_total"?k(Math.abs(parseFloat(s.old_value)||0)):s.old_value||"-"}),n.jsx("td",{style:{padding:"6px 8px",fontFamily:"var(--mono)",color:"var(--green)",fontWeight:"600"},children:s.field_name==="amount"||s.field_name==="udf_payment_total"?k(Math.abs(parseFloat(s.new_value)||0)):s.new_value||"-"}),n.jsxs("td",{style:{padding:"6px 8px",fontFamily:"var(--mono)",fontSize:"10px",color:"var(--t3)"},children:[s.old_alter_id,"  ",s.new_alter_id]}),n.jsx("td",{style:{padding:"6px 8px",fontSize:"10px",color:"var(--t3)"},children:new Date(s.changed_at+"Z").toLocaleString("en-US",{timeZone:"Asia/Kathmandu",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),S&&n.jsx("tr",{children:n.jsx("td",{colSpan:"8",style:{padding:0,border:"none"},children:n.jsxs("div",{style:{background:"var(--bg)",borderLeft:"3px solid var(--blue)",padding:"12px 16px",margin:"0 8px 8px 8px",borderRadius:"0 8px 8px 0"},children:[n.jsxs("div",{style:{fontSize:"12px",fontWeight:"700",color:"var(--blue)",marginBottom:"8px"},children:["Alteration History  ",s.party_name," (Master ID: ",s.master_id,")"]}),G2?n.jsx("div",{style:{color:"var(--t3)",fontSize:"12px"},children:"Loading changes..."}):ay.length===0?n.jsx("div",{style:{color:"var(--t3)",fontSize:"12px"},children:"No field changes recorded for this voucher."}):n.jsxs("table",{style:{width:"100%",fontSize:"12px",borderCollapse:"collapse"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{borderBottom:"1px solid var(--border)"},children:[n.jsx("th",{style:{textAlign:"left",padding:"4px 8px",color:"var(--t2)",fontWeight:"600"},children:"Field"}),n.jsx("th",{style:{textAlign:"left",padding:"4px 8px",color:"var(--t2)",fontWeight:"600"},children:"Old Value"}),n.jsx("th",{style:{textAlign:"left",padding:"4px 8px",color:"var(--t2)",fontWeight:"600"},children:"New Value"}),n.jsx("th",{style:{textAlign:"left",padding:"4px 8px",color:"var(--t2)",fontWeight:"600"},children:"Alter ID"}),n.jsx("th",{style:{textAlign:"left",padding:"4px 8px",color:"var(--t2)",fontWeight:"600"},children:"Changed At"})]})}),n.jsx("tbody",{children:ay.map((P,V)=>n.jsxs("tr",{style:{borderBottom:"1px solid var(--border)"},children:[n.jsx("td",{style:{padding:"4px 8px",fontWeight:"600",color:p[P.field_name]||"var(--orange)"},children:c[P.field_name]||P.field_name}),n.jsx("td",{style:{padding:"4px 8px",color:"var(--red)",fontFamily:"var(--mono)",textDecoration:"line-through",opacity:.7},children:P.field_name==="amount"||P.field_name==="udf_payment_total"?k(Math.abs(parseFloat(P.old_value)||0)):P.old_value||"-"}),n.jsx("td",{style:{padding:"4px 8px",color:"var(--green)",fontFamily:"var(--mono)",fontWeight:"600"},children:P.field_name==="amount"||P.field_name==="udf_payment_total"?k(Math.abs(parseFloat(P.new_value)||0)):P.new_value||"-"}),n.jsxs("td",{style:{padding:"4px 8px",color:"var(--t3)",fontFamily:"var(--mono)"},children:[P.old_alter_id,"  ",P.new_alter_id]}),n.jsx("td",{style:{padding:"4px 8px",color:"var(--t3)"},children:P.changed_at?new Date(P.changed_at+"Z").toLocaleString("en-US",{timeZone:"Asia/Kathmandu"}):"-"})]},V))})]})]})})})]},`${s.master_id}-${s.field_name}-${l}`)})})]})})]})]}),n.jsxs("div",{className:`page ${f==="cheques"?"active":""}`,children:[n.jsxs("div",{className:"sec-head",style:{marginBottom:"16px",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"8px"},children:[n.jsx("div",{className:"sec-title",style:{fontSize:"18px"},children:"Cheque Management"}),n.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[n.jsx("button",{className:"btn btn-p",style:{padding:"6px 14px",fontSize:"12px"},onClick:()=>{yd(),yv()},disabled:vu||qu,children:vu||qu?"Loading...":"Refresh"}),n.jsx("button",{onClick:()=>ae("cheque-post"),style:{padding:"6px 14px",fontSize:"12px",fontWeight:"600",background:"var(--accent)",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Post Cheques"})]})]}),n.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"16px",flexWrap:"wrap"},children:[n.jsxs("div",{style:{flex:"1",minWidth:"140px",background:(Y==null?void 0:Y.pendingToPost)>0?"rgba(245,158,11,0.12)":"rgba(34,197,94,0.12)",border:`1px solid ${(Y==null?void 0:Y.pendingToPost)>0?"var(--orange)":"var(--green)"}`,borderRadius:"10px",padding:"12px"},children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)",marginBottom:"4px"},children:"Pending to Post"}),n.jsx("div",{style:{fontSize:"18px",fontWeight:"700",fontFamily:"var(--mono)",color:(Y==null?void 0:Y.pendingToPost)>0?"var(--orange)":"var(--green)"},children:Y?k(Math.abs(Y.pendingToPost||0)):"Offline"}),n.jsx("div",{style:{fontSize:"10px",color:"var(--t3)"},children:"Cheque Receipt (For DB)"})]}),n.jsxs("div",{style:{flex:"1",minWidth:"140px",background:"var(--card)",border:"1px solid var(--border)",borderRadius:"10px",padding:"12px"},children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)",marginBottom:"4px"},children:"Cheque Mgmt"}),n.jsx("div",{style:{fontSize:"18px",fontWeight:"700",fontFamily:"var(--mono)",color:"var(--t1)"},children:Y?k(Math.abs(((Mv=Y.chequeManagement)==null?void 0:Mv.balance)||0)):"Offline"}),n.jsx("div",{style:{fontSize:"10px",color:"var(--t3)"},children:"For DB"})]}),n.jsxs("div",{style:{flex:"1",minWidth:"140px",background:"var(--card)",border:"1px solid var(--border)",borderRadius:"10px",padding:"12px"},children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)",marginBottom:"4px"},children:"Counter Sales"}),n.jsx("div",{style:{fontSize:"18px",fontWeight:"700",fontFamily:"var(--mono)",color:"var(--t1)"},children:Y?k(Math.abs((($v=Y.counterSales)==null?void 0:$v.balance)||0)):"Offline"}),n.jsx("div",{style:{fontSize:"10px",color:"var(--t3)"},children:"ODBC CHq Mgmt"})]}),n.jsxs("div",{style:{flex:"1",minWidth:"140px",background:Y!=null&&Y.isReconciled?"rgba(34,197,94,0.12)":"rgba(239,68,68,0.12)",border:`1px solid ${Y!=null&&Y.isReconciled?"var(--green)":"var(--red)"}`,borderRadius:"10px",padding:"12px"},children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)",marginBottom:"4px"},children:"Mismatch"}),n.jsx("div",{style:{fontSize:"18px",fontWeight:"700",fontFamily:"var(--mono)",color:Y!=null&&Y.isReconciled?"var(--green)":"var(--red)"},children:Y?Y.isReconciled?"Matched":k(Y.mismatch||0):"Offline"}),n.jsx("div",{style:{fontSize:"10px",color:"var(--t3)"},children:Y!=null&&Y.isReconciled?"Mgmt = Counter Sales":"Mgmt vs Counter Sales"})]}),n.jsxs("div",{style:{flex:"1",minWidth:"140px",background:"var(--card)",border:"1px solid var(--border)",borderRadius:"10px",padding:"12px"},children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)",marginBottom:"4px"},children:"Total Cheques"}),n.jsx("div",{style:{fontSize:"18px",fontWeight:"700",fontFamily:"var(--mono)",color:"var(--t1)"},children:xa.length}),n.jsx("div",{style:{fontSize:"10px",color:"var(--t3)"},children:"ODBC Entries"})]})]}),n.jsx("div",{style:{display:"flex",gap:"2px",marginBottom:"16px",background:"var(--bg)",borderRadius:"8px",padding:"3px",border:"1px solid var(--border)"},children:[{k:"dashboard",l:"Dashboard"},{k:"recon",l:"Recon"},{k:"odbc",l:"Tally ODBC"},{k:"all",l:"All Cheques"},{k:"pending",l:"Pending"},{k:"party",l:"By Party"},{k:"audit",l:"Audit Log"}].map(s=>n.jsx("button",{onClick:()=>{(s.k==="dashboard"||s.k==="audit")&&X3(s.k),uy(s.k)},style:{flex:1,padding:"8px 12px",fontSize:"12px",fontWeight:at===s.k?"600":"400",background:at===s.k?"var(--card)":"transparent",color:at===s.k?"var(--accent)":"var(--t3)",border:"none",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s"},children:s.l},s.k))}),vu&&at!=="dashboard"&&at!=="audit"?n.jsx("div",{style:{textAlign:"center",padding:"40px",color:"var(--t3)"},children:"Loading cheque data..."}):n.jsxs(n.Fragment,{children:[at==="dashboard"&&n.jsxs("div",{children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"10px",marginBottom:"16px"},children:[n.jsxs("div",{style:{background:"var(--card)",border:"1px solid var(--border)",borderRadius:"10px",padding:"16px",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)",marginBottom:"6px"},children:"Total Posts"}),n.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"var(--accent)",fontFamily:"var(--mono)"},children:(le==null?void 0:le.total_posts)||0})]}),n.jsxs("div",{style:{background:"var(--card)",border:"1px solid var(--border)",borderRadius:"10px",padding:"16px",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)",marginBottom:"6px"},children:"Total Cheques Posted"}),n.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"var(--t1)",fontFamily:"var(--mono)"},children:(le==null?void 0:le.total_cheques)||0})]}),n.jsxs("div",{style:{background:"var(--card)",border:"1px solid var(--border)",borderRadius:"10px",padding:"16px",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)",marginBottom:"6px"},children:"Total Amount Posted"}),n.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"var(--green)",fontFamily:"var(--mono)"},children:k((le==null?void 0:le.total_amount)||0)})]}),n.jsxs("div",{style:{background:"var(--card)",border:"1px solid var(--border)",borderRadius:"10px",padding:"16px",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)",marginBottom:"6px"},children:"Total Parties"}),n.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"var(--t1)",fontFamily:"var(--mono)"},children:(le==null?void 0:le.total_parties)||0})]}),n.jsxs("div",{style:{background:(le==null?void 0:le.successful_journals)===(le==null?void 0:le.total_posts)?"rgba(34,197,94,0.12)":"rgba(245,158,11,0.12)",border:`1px solid ${(le==null?void 0:le.successful_journals)===(le==null?void 0:le.total_posts)?"var(--green)":"var(--orange)"}`,borderRadius:"10px",padding:"16px",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)",marginBottom:"6px"},children:"Journals Success"}),n.jsxs("div",{style:{fontSize:"24px",fontWeight:"700",color:(le==null?void 0:le.successful_journals)===(le==null?void 0:le.total_posts)?"var(--green)":"var(--orange)",fontFamily:"var(--mono)"},children:[(le==null?void 0:le.successful_journals)||0,"/",(le==null?void 0:le.total_posts)||0]})]})]}),n.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"16px",flexWrap:"wrap"},children:[n.jsxs("div",{style:{flex:"1",minWidth:"180px",background:(Y==null?void 0:Y.pendingToPost)>0?"rgba(245,158,11,0.12)":"rgba(34,197,94,0.12)",border:`1px solid ${(Y==null?void 0:Y.pendingToPost)>0?"var(--orange)":"var(--green)"}`,borderRadius:"10px",padding:"16px"},children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)",marginBottom:"4px"},children:"Pending to Post"}),n.jsx("div",{style:{fontSize:"20px",fontWeight:"700",fontFamily:"var(--mono)",color:(Y==null?void 0:Y.pendingToPost)>0?"var(--orange)":"var(--green)"},children:Y?k(Math.abs(Y.pendingToPost||0)):"Tally Offline"}),(Y==null?void 0:Y.pendingToPost)>0&&n.jsx("div",{style:{fontSize:"10px",color:"var(--orange)",marginTop:"2px"},children:"Cheque Receipt balance remaining"})]}),n.jsxs("div",{style:{flex:"1",minWidth:"180px",background:"var(--card)",border:"1px solid var(--border)",borderRadius:"10px",padding:"16px"},children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)",marginBottom:"4px"},children:"Cheque Mgmt (For DB)"}),n.jsx("div",{style:{fontSize:"20px",fontWeight:"700",fontFamily:"var(--mono)",color:"var(--t1)"},children:Y?k(Math.abs(((qv=Y.chequeManagement)==null?void 0:qv.balance)||0)):"Tally Offline"})]}),n.jsxs("div",{style:{flex:"1",minWidth:"180px",background:"var(--card)",border:"1px solid var(--border)",borderRadius:"10px",padding:"16px"},children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)",marginBottom:"4px"},children:"Counter Sales (ODBC)"}),n.jsx("div",{style:{fontSize:"20px",fontWeight:"700",fontFamily:"var(--mono)",color:"var(--t1)"},children:Y?k(Math.abs(((Uv=Y.counterSales)==null?void 0:Uv.balance)||0)):"Tally Offline"})]}),n.jsxs("div",{style:{flex:"1",minWidth:"180px",background:Y!=null&&Y.isReconciled?"rgba(34,197,94,0.12)":"rgba(239,68,68,0.12)",border:`1px solid ${Y!=null&&Y.isReconciled?"var(--green)":"var(--red)"}`,borderRadius:"10px",padding:"16px"},children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)",marginBottom:"4px"},children:"Reconciliation"}),n.jsx("div",{style:{fontSize:"20px",fontWeight:"700",color:Y!=null&&Y.isReconciled?"var(--green)":"var(--red)"},children:Y?Y.isReconciled?"Matched":`Diff: ${k(Y.mismatch||0)}`:"Tally Offline"}),n.jsx("div",{style:{fontSize:"10px",color:"var(--t3)",marginTop:"2px"},children:Y!=null&&Y.isReconciled?"Mgmt = Counter Sales":"Mgmt vs Counter Sales"})]})]}),n.jsxs("div",{style:{background:"var(--card)",borderRadius:"10px",border:"2px solid var(--accent)",padding:"20px",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"var(--t1)",marginBottom:"8px"},children:"Quick Post Cheques"}),n.jsx("div",{style:{fontSize:"12px",color:"var(--t3)",marginBottom:"12px"},children:"Enter cheque details, confirm, and post to both ODBC CHq Mgmt and For DB in one go"}),n.jsx("button",{onClick:()=>ae("cheque-post"),style:{padding:"10px 32px",fontSize:"14px",fontWeight:"700",background:"var(--accent)",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer"},children:"Go to Cheque Post"})]}),od.length>0&&n.jsxs("div",{style:{marginTop:"16px"},children:[n.jsx("div",{style:{fontSize:"13px",fontWeight:"700",color:"var(--t1)",marginBottom:"8px"},children:"Recent Posts"}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:od.slice(0,5).map((s,l)=>n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 14px",background:"var(--card)",borderRadius:"8px",border:"1px solid var(--border)",fontSize:"12px"},children:[n.jsxs("div",{children:[n.jsx("span",{style:{fontWeight:"600",color:"var(--t1)"},children:s.voucher_date}),n.jsxs("span",{style:{color:"var(--t3)",marginLeft:"8px"},children:[s.total_parties," parties, ",s.total_cheques," cheques"]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("span",{style:{fontFamily:"var(--mono)",fontWeight:"600",color:"var(--green)"},children:k(s.total_amount)}),n.jsx("span",{style:{padding:"2px 8px",borderRadius:"8px",fontSize:"10px",fontWeight:"600",background:s.journal_success?"rgba(34,197,94,0.15)":"rgba(239,68,68,0.15)",color:s.journal_success?"var(--green)":"var(--red)"},children:s.journal_success?"Journal OK":"Journal Failed"}),n.jsx("span",{style:{color:"var(--t3)",fontSize:"10px"},children:new Date(s.posted_at).toLocaleString()})]})]},s.id||l))}),n.jsx("button",{onClick:()=>uy("audit"),style:{marginTop:"8px",fontSize:"12px",color:"var(--accent)",background:"transparent",border:"none",cursor:"pointer",textDecoration:"underline"},children:"View full audit log"})]})]}),at==="audit"&&n.jsx("div",{children:qu?n.jsx("div",{style:{textAlign:"center",padding:"40px",color:"var(--t3)"},children:"Loading audit log..."}):od.length===0?n.jsxs("div",{style:{textAlign:"center",padding:"60px",color:"var(--t3)"},children:[n.jsx("div",{style:{fontSize:"32px",marginBottom:"8px"},children:""}),n.jsx("div",{children:"No cheque postings recorded yet"}),n.jsx("button",{onClick:()=>ae("cheque-post"),style:{marginTop:"12px",padding:"8px 20px",fontSize:"13px",background:"var(--accent)",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Post Cheques"})]}):n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{background:"var(--bg)",borderBottom:"2px solid var(--border)"},children:[n.jsx("th",{style:{padding:"8px",textAlign:"left",color:"var(--t3)"},children:"#"}),n.jsx("th",{style:{padding:"8px",textAlign:"left",color:"var(--t3)"},children:"Date/Time"}),n.jsx("th",{style:{padding:"8px",textAlign:"left",color:"var(--t3)"},children:"Voucher Date"}),n.jsx("th",{style:{padding:"8px",textAlign:"center",color:"var(--t3)"},children:"Parties"}),n.jsx("th",{style:{padding:"8px",textAlign:"center",color:"var(--t3)"},children:"Cheques"}),n.jsx("th",{style:{padding:"8px",textAlign:"right",color:"var(--t3)"},children:"Amount"}),n.jsx("th",{style:{padding:"8px",textAlign:"left",color:"var(--t3)"},children:"Journal #"}),n.jsx("th",{style:{padding:"8px",textAlign:"center",color:"var(--t3)"},children:"Status"}),n.jsx("th",{style:{padding:"8px",textAlign:"left",color:"var(--t3)"},children:"Details"})]})}),n.jsx("tbody",{children:od.map((s,l)=>{const c=s.receipts||[];return n.jsxs("tr",{style:{borderTop:"1px solid var(--border)"},children:[n.jsx("td",{style:{padding:"8px",color:"var(--t3)"},children:l+1}),n.jsx("td",{style:{padding:"8px",color:"var(--t2)",fontSize:"11px",whiteSpace:"nowrap"},children:new Date(s.posted_at).toLocaleString()}),n.jsx("td",{style:{padding:"8px",fontWeight:"600",color:"var(--t1)",fontFamily:"var(--mono)"},children:s.voucher_date}),n.jsx("td",{style:{padding:"8px",textAlign:"center",color:"var(--t1)"},children:s.total_parties}),n.jsx("td",{style:{padding:"8px",textAlign:"center",fontWeight:"600",color:"var(--accent)"},children:s.total_cheques}),n.jsx("td",{style:{padding:"8px",textAlign:"right",fontFamily:"var(--mono)",fontWeight:"600",color:"var(--green)"},children:k(s.total_amount)}),n.jsx("td",{style:{padding:"8px",color:"var(--t2)",fontSize:"11px",fontFamily:"var(--mono)"},children:s.journal_voucher_number||"-"}),n.jsx("td",{style:{padding:"8px",textAlign:"center"},children:n.jsx("span",{style:{padding:"2px 8px",borderRadius:"8px",fontSize:"10px",fontWeight:"600",background:s.journal_success?"rgba(34,197,94,0.15)":"rgba(239,68,68,0.15)",color:s.journal_success?"var(--green)":"var(--red)"},children:s.journal_success?"Success":"Failed"})}),n.jsx("td",{style:{padding:"8px",fontSize:"11px",color:"var(--t3)"},children:c.map((p,g)=>{var y;return n.jsxs("span",{children:[(y=p.partyName)==null?void 0:y.split(",")[0]," (",p.chequeCount,")",g<c.length-1?", ":""]},g)})})]},s.id||l)})})]})})}),(at==="recon"||at==="all"||at==="odbc")&&n.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px",flexWrap:"wrap"},children:[n.jsx("input",{type:"text",placeholder:"Search party, bank, cheque #...",value:gs,onChange:s=>l3(s.target.value),style:{flex:1,minWidth:"200px",padding:"8px 12px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"6px",color:"var(--t1)",fontSize:"12px"}}),at==="all"&&n.jsxs("select",{value:bu,onChange:s=>d3(s.target.value),style:{padding:"8px 12px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"6px",color:"var(--t1)",fontSize:"12px"},children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"pending",children:"Pending"}),n.jsx("option",{value:"deposited",children:"Deposited"}),n.jsx("option",{value:"cleared",children:"Cleared"}),n.jsx("option",{value:"bounced",children:"Bounced"})]})]}),at==="recon"&&n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{background:"var(--bg)",borderBottom:"2px solid var(--border)"},children:[n.jsx("th",{style:{padding:"8px",textAlign:"left",color:"var(--t3)",fontWeight:"600"},children:"#"}),n.jsx("th",{style:{padding:"8px",textAlign:"left",color:"var(--t3)",fontWeight:"600"},children:"Party"}),n.jsx("th",{style:{padding:"8px",textAlign:"left",color:"var(--t3)",fontWeight:"600"},children:"Bank"}),n.jsx("th",{style:{padding:"8px",textAlign:"right",color:"var(--t3)",fontWeight:"600"},children:"Amount"}),n.jsx("th",{style:{padding:"8px",textAlign:"left",color:"var(--t3)",fontWeight:"600"},children:"Cheque #"}),n.jsx("th",{style:{padding:"8px",textAlign:"left",color:"var(--t3)",fontWeight:"600"},children:"Cheque Date"}),n.jsx("th",{style:{padding:"8px",textAlign:"center",color:"var(--t3)",fontWeight:"600"},children:"Source"}),n.jsx("th",{style:{padding:"8px",textAlign:"center",color:"var(--t3)",fontWeight:"600"},children:"Status"})]})}),n.jsxs("tbody",{children:[xa.filter(s=>{if(!gs)return!0;const l=gs.toLowerCase();return(s.party_name||"").toLowerCase().includes(l)||(s.bank_name||"").toLowerCase().includes(l)||(s.cheque_number||"").toLowerCase().includes(l)}).map((s,l)=>n.jsxs("tr",{style:{borderBottom:"1px solid var(--border)",background:l%2?"var(--bg)":"transparent"},children:[n.jsx("td",{style:{padding:"8px",color:"var(--t3)"},children:l+1}),n.jsx("td",{style:{padding:"8px",color:"var(--t1)",fontWeight:"500"},children:s.party_name}),n.jsx("td",{style:{padding:"8px",color:"var(--t2)"},children:s.bank_name||s.odbcBankName||"-"}),n.jsx("td",{style:{padding:"8px",textAlign:"right",fontFamily:"var(--mono)",fontWeight:"600",color:"var(--t1)"},children:k(s.amount)}),n.jsx("td",{style:{padding:"8px",color:"var(--t2)",fontFamily:"var(--mono)"},children:s.cheque_number||"-"}),n.jsx("td",{style:{padding:"8px",color:"var(--t2)"},children:s.cheque_date?String(s.cheque_date).replace(/(\d{4})(\d{2})(\d{2})/,"$1-$2-$3"):"-"}),n.jsx("td",{style:{padding:"8px",textAlign:"center"},children:n.jsx("span",{style:{padding:"2px 8px",borderRadius:"10px",fontSize:"10px",fontWeight:"600",background:s.source==="both"?"rgba(34,197,94,0.15)":s.source==="local"?"rgba(245,158,11,0.15)":"rgba(59,130,246,0.15)",color:s.source==="both"?"var(--green)":s.source==="local"?"var(--orange)":"var(--blue)"},children:s.source==="both"?"Both":s.source==="local"?"Local":"Tally"})}),n.jsx("td",{style:{padding:"8px",textAlign:"center"},children:n.jsx("span",{style:{padding:"2px 8px",borderRadius:"10px",fontSize:"10px",fontWeight:"600",background:s.status==="cleared"?"rgba(34,197,94,0.15)":s.status==="bounced"?"rgba(239,68,68,0.15)":s.status==="deposited"?"rgba(59,130,246,0.15)":"rgba(245,158,11,0.15)",color:s.status==="cleared"?"var(--green)":s.status==="bounced"?"var(--red)":s.status==="deposited"?"var(--blue)":"var(--orange)"},children:s.status||"unknown"})})]},l)),xa.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:8,style:{padding:"24px",textAlign:"center",color:"var(--t3)"},children:"No cheques found"})})]})]})}),at==="odbc"&&(()=>{const s=py.filter(c=>{if(!gs)return!0;const p=gs.toLowerCase();return(c.partyName||"").toLowerCase().includes(p)||(c.bankName||"").toLowerCase().includes(p)||(c.chequeNumber||"").toLowerCase().includes(p)||(c.voucherNumber||"").toLowerCase().includes(p)}),l=s.reduce((c,p)=>c+(parseFloat(p.amount)||0),0);return n.jsxs("div",{children:[n.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:n.jsxs("div",{style:{fontSize:"12px",color:"var(--t3)"},children:[s.length," vouchers from ",n.jsx("strong",{style:{color:"var(--t1)"},children:"ODBC CHq Mgmt"}),"  Total: ",n.jsx("strong",{style:{color:"var(--green)",fontFamily:"var(--mono)"},children:k(l)})]})}),n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{background:"var(--bg)",borderBottom:"2px solid var(--border)"},children:[n.jsx("th",{style:{padding:"8px",textAlign:"left",color:"var(--t3)",fontWeight:"600"},children:"#"}),n.jsx("th",{style:{padding:"8px",textAlign:"left",color:"var(--t3)",fontWeight:"600"},children:"Voucher #"}),n.jsx("th",{style:{padding:"8px",textAlign:"left",color:"var(--t3)",fontWeight:"600"},children:"Date"}),n.jsx("th",{style:{padding:"8px",textAlign:"left",color:"var(--t3)",fontWeight:"600"},children:"Party"}),n.jsx("th",{style:{padding:"8px",textAlign:"left",color:"var(--t3)",fontWeight:"600"},children:"Bank"}),n.jsx("th",{style:{padding:"8px",textAlign:"right",color:"var(--t3)",fontWeight:"600"},children:"Amount"}),n.jsx("th",{style:{padding:"8px",textAlign:"left",color:"var(--t3)",fontWeight:"600"},children:"Cheque #"}),n.jsx("th",{style:{padding:"8px",textAlign:"left",color:"var(--t3)",fontWeight:"600"},children:"Cheque Date"}),n.jsx("th",{style:{padding:"8px",textAlign:"left",color:"var(--t3)",fontWeight:"600"},children:"Narration"})]})}),n.jsxs("tbody",{children:[s.map((c,p)=>n.jsxs("tr",{style:{borderBottom:"1px solid var(--border)",background:p%2?"var(--bg)":"transparent"},children:[n.jsx("td",{style:{padding:"8px",color:"var(--t3)"},children:p+1}),n.jsx("td",{style:{padding:"8px",color:"var(--blue)",fontFamily:"var(--mono)",fontWeight:"500"},children:c.voucherNumber||"-"}),n.jsx("td",{style:{padding:"8px",color:"var(--t2)"},children:c.voucherDate?String(c.voucherDate).replace(/(\d{4})(\d{2})(\d{2})/,"$1-$2-$3"):"-"}),n.jsx("td",{style:{padding:"8px",color:"var(--t1)",fontWeight:"500"},children:c.partyName||"-"}),n.jsx("td",{style:{padding:"8px",color:"var(--t2)"},children:c.bankName||"-"}),n.jsx("td",{style:{padding:"8px",textAlign:"right",fontFamily:"var(--mono)",fontWeight:"600",color:"var(--t1)"},children:k(c.amount)}),n.jsx("td",{style:{padding:"8px",color:"var(--t2)",fontFamily:"var(--mono)"},children:c.chequeNumber||"-"}),n.jsx("td",{style:{padding:"8px",color:"var(--t2)"},children:c.chequeDate?String(c.chequeDate).replace(/(\d{4})(\d{2})(\d{2})/,"$1-$2-$3"):"-"}),n.jsx("td",{style:{padding:"8px",color:"var(--t3)",fontSize:"11px",maxWidth:"200px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:c.narration||"-"})]},c.masterId||p)),s.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:9,style:{padding:"24px",textAlign:"center",color:"var(--t3)"},children:py.length===0?"No vouchers from ODBC CHq Mgmt (Tally may be offline)":"No matching vouchers"})})]})]})})]})})(),at==="all"&&(()=>{const s=xa.filter(l=>l.source!=="odbc").filter(l=>!bu||l.status===bu).filter(l=>{if(!gs)return!0;const c=gs.toLowerCase();return(l.party_name||"").toLowerCase().includes(c)||(l.bank_name||"").toLowerCase().includes(c)});return n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{background:"var(--bg)",borderBottom:"2px solid var(--border)"},children:[n.jsx("th",{style:{padding:"8px",textAlign:"left",color:"var(--t3)",fontWeight:"600"},children:"#"}),n.jsx("th",{style:{padding:"8px",textAlign:"left",color:"var(--t3)",fontWeight:"600"},children:"Party"}),n.jsx("th",{style:{padding:"8px",textAlign:"left",color:"var(--t3)",fontWeight:"600"},children:"Bank"}),n.jsx("th",{style:{padding:"8px",textAlign:"right",color:"var(--t3)",fontWeight:"600"},children:"Amount"}),n.jsx("th",{style:{padding:"8px",textAlign:"left",color:"var(--t3)",fontWeight:"600"},children:"Cheque #"}),n.jsx("th",{style:{padding:"8px",textAlign:"left",color:"var(--t3)",fontWeight:"600"},children:"Cheque Date"}),n.jsx("th",{style:{padding:"8px",textAlign:"center",color:"var(--t3)",fontWeight:"600"},children:"Status"}),n.jsx("th",{style:{padding:"8px",textAlign:"center",color:"var(--t3)",fontWeight:"600"},children:"Synced"}),n.jsx("th",{style:{padding:"8px",textAlign:"center",color:"var(--t3)",fontWeight:"600"},children:"Actions"})]})}),n.jsxs("tbody",{children:[s.map((l,c)=>n.jsxs("tr",{style:{borderBottom:"1px solid var(--border)",background:l.status==="bounced"?"rgba(239,68,68,0.05)":l.status==="cleared"?"rgba(34,197,94,0.05)":c%2?"var(--bg)":"transparent"},children:[n.jsx("td",{style:{padding:"8px",color:"var(--t3)"},children:c+1}),n.jsx("td",{style:{padding:"8px",color:"var(--t1)",fontWeight:"500"},children:l.party_name}),n.jsx("td",{style:{padding:"8px",color:"var(--t2)"},children:l.bank_name||"-"}),n.jsx("td",{style:{padding:"8px",textAlign:"right",fontFamily:"var(--mono)",fontWeight:"600",color:"var(--t1)"},children:k(l.amount)}),n.jsx("td",{style:{padding:"8px",color:"var(--t2)",fontFamily:"var(--mono)"},children:l.cheque_number||"-"}),n.jsx("td",{style:{padding:"8px",color:"var(--t2)"},children:l.cheque_date?String(l.cheque_date).replace(/(\d{4})(\d{2})(\d{2})/,"$1-$2-$3"):"-"}),n.jsx("td",{style:{padding:"8px",textAlign:"center"},children:n.jsx("span",{style:{padding:"2px 8px",borderRadius:"10px",fontSize:"10px",fontWeight:"600",background:l.status==="cleared"?"rgba(34,197,94,0.15)":l.status==="bounced"?"rgba(239,68,68,0.15)":l.status==="deposited"?"rgba(59,130,246,0.15)":"rgba(245,158,11,0.15)",color:l.status==="cleared"?"var(--green)":l.status==="bounced"?"var(--red)":l.status==="deposited"?"var(--blue)":"var(--orange)"},children:l.status})}),n.jsx("td",{style:{padding:"8px",textAlign:"center"},children:l.matchedInODBC||l.synced_to_tally?n.jsx("span",{style:{color:"var(--green)"},children:"Yes"}):n.jsx("span",{style:{color:"var(--t3)"},children:"No"})}),n.jsxs("td",{style:{padding:"8px",textAlign:"center"},children:[l.id&&l.status==="pending"&&n.jsx("button",{onClick:()=>Bs(l.id,"deposited"),style:{padding:"3px 8px",fontSize:"10px",background:"var(--blue)",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Deposit"}),l.id&&l.status==="deposited"&&n.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[n.jsx("button",{onClick:()=>Bs(l.id,"cleared"),style:{padding:"3px 8px",fontSize:"10px",background:"var(--green)",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Clear"}),n.jsx("button",{onClick:()=>Bs(l.id,"bounced"),style:{padding:"3px 8px",fontSize:"10px",background:"var(--red)",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Bounce"})]})]})]},l.id||c)),s.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:9,style:{padding:"24px",textAlign:"center",color:"var(--t3)"},children:"No cheques found"})})]})]})})})(),at==="pending"&&(()=>{const s=new Date().toISOString().split("T")[0].replace(/-/g,""),l=xa.filter(c=>c.status==="pending"&&c.source!=="odbc");return n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[n.jsxs("div",{style:{fontSize:"13px",color:"var(--t2)"},children:[l.length," pending cheques"]}),n.jsx("button",{onClick:$C,disabled:xy,style:{padding:"6px 14px",fontSize:"12px",background:"var(--blue)",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer"},children:xy?"Syncing...":"Sync All to Tally"})]}),n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{background:"var(--bg)",borderBottom:"2px solid var(--border)"},children:[n.jsx("th",{style:{padding:"8px",textAlign:"left",color:"var(--t3)",fontWeight:"600"},children:"#"}),n.jsx("th",{style:{padding:"8px",textAlign:"left",color:"var(--t3)",fontWeight:"600"},children:"Party"}),n.jsx("th",{style:{padding:"8px",textAlign:"left",color:"var(--t3)",fontWeight:"600"},children:"Bank"}),n.jsx("th",{style:{padding:"8px",textAlign:"right",color:"var(--t3)",fontWeight:"600"},children:"Amount"}),n.jsx("th",{style:{padding:"8px",textAlign:"left",color:"var(--t3)",fontWeight:"600"},children:"Cheque #"}),n.jsx("th",{style:{padding:"8px",textAlign:"left",color:"var(--t3)",fontWeight:"600"},children:"Cheque Date"}),n.jsx("th",{style:{padding:"8px",textAlign:"center",color:"var(--t3)",fontWeight:"600"},children:"Actions"})]})}),n.jsxs("tbody",{children:[l.map((c,p)=>{const g=c.cheque_date===s,y=!c.cheque_date;return n.jsxs("tr",{style:{borderBottom:"1px solid var(--border)",background:g?"rgba(245,158,11,0.08)":p%2?"var(--bg)":"transparent"},children:[n.jsx("td",{style:{padding:"8px",color:"var(--t3)"},children:p+1}),n.jsx("td",{style:{padding:"8px",color:"var(--t1)",fontWeight:"500"},children:c.party_name}),n.jsx("td",{style:{padding:"8px",color:"var(--t2)"},children:c.bank_name||"-"}),n.jsx("td",{style:{padding:"8px",textAlign:"right",fontFamily:"var(--mono)",fontWeight:"600",color:"var(--t1)"},children:k(c.amount)}),n.jsx("td",{style:{padding:"8px",color:"var(--t2)",fontFamily:"var(--mono)"},children:c.cheque_number||"-"}),n.jsx("td",{style:{padding:"8px",color:g?"var(--orange)":"var(--t2)"},children:y?n.jsx("span",{style:{padding:"2px 6px",borderRadius:"8px",fontSize:"10px",background:"rgba(239,68,68,0.15)",color:"var(--red)"},children:"Needs Date"}):n.jsxs(n.Fragment,{children:[String(c.cheque_date).replace(/(\d{4})(\d{2})(\d{2})/,"$1-$2-$3")," ",g&&n.jsx("span",{style:{fontSize:"10px",color:"var(--orange)",fontWeight:"600"},children:" DUE TODAY"})]})}),n.jsx("td",{style:{padding:"8px",textAlign:"center"},children:n.jsx("button",{onClick:()=>Bs(c.id,"deposited"),style:{padding:"3px 10px",fontSize:"10px",background:"var(--blue)",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Mark Deposited"})})]},c.id||p)}),l.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:7,style:{padding:"24px",textAlign:"center",color:"var(--t3)"},children:"No pending cheques"})})]})]})})]})})(),at==="party"&&(()=>{const s=xa.filter(p=>p.source!=="odbc"),l={};for(const p of s){const g=p.party_name||"Unknown";l[g]||(l[g]={cheques:[],total:0,pending:0,cleared:0,bounced:0}),l[g].cheques.push(p),l[g].total+=parseFloat(p.amount)||0,(p.status==="pending"||p.status==="deposited")&&(l[g].pending+=parseFloat(p.amount)||0),p.status==="cleared"&&(l[g].cleared+=parseFloat(p.amount)||0),p.status==="bounced"&&(l[g].bounced+=parseFloat(p.amount)||0)}const c=Object.entries(l).sort((p,g)=>g[1].total-p[1].total);return n.jsxs("div",{children:[c.map(([p,g])=>n.jsxs("div",{style:{marginBottom:"4px",border:"1px solid var(--border)",borderRadius:"8px",overflow:"hidden"},children:[n.jsxs("div",{onClick:()=>c3(ju===p?null:p),style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 14px",background:"var(--card)",cursor:"pointer"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[n.jsx("span",{style:{color:"var(--t1)",fontWeight:"600",fontSize:"13px"},children:p}),n.jsxs("span",{style:{padding:"2px 8px",borderRadius:"10px",fontSize:"10px",background:"var(--bg)",color:"var(--t3)"},children:[g.cheques.length," cheques"]})]}),n.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",fontSize:"12px"},children:[g.pending>0&&n.jsxs("span",{style:{color:"var(--orange)"},children:["Pending: ",k(g.pending)]}),g.cleared>0&&n.jsxs("span",{style:{color:"var(--green)"},children:["Cleared: ",k(g.cleared)]}),g.bounced>0&&n.jsxs("span",{style:{color:"var(--red)"},children:["Bounced: ",k(g.bounced)]}),n.jsx("span",{style:{fontWeight:"600",fontFamily:"var(--mono)",color:"var(--t1)"},children:k(g.total)}),n.jsx("span",{style:{color:"var(--t3)",fontSize:"14px"},children:ju===p?"":""})]})]}),ju===p&&n.jsx("div",{style:{padding:"0"},children:n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"11px"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{background:"var(--bg)"},children:[n.jsx("th",{style:{padding:"6px 8px",textAlign:"left",color:"var(--t3)"},children:"Bank"}),n.jsx("th",{style:{padding:"6px 8px",textAlign:"right",color:"var(--t3)"},children:"Amount"}),n.jsx("th",{style:{padding:"6px 8px",textAlign:"left",color:"var(--t3)"},children:"Cheque #"}),n.jsx("th",{style:{padding:"6px 8px",textAlign:"left",color:"var(--t3)"},children:"Date"}),n.jsx("th",{style:{padding:"6px 8px",textAlign:"center",color:"var(--t3)"},children:"Status"}),n.jsx("th",{style:{padding:"6px 8px",textAlign:"center",color:"var(--t3)"},children:"Actions"})]})}),n.jsx("tbody",{children:g.cheques.map((y,S)=>n.jsxs("tr",{style:{borderTop:"1px solid var(--border)"},children:[n.jsx("td",{style:{padding:"6px 8px",color:"var(--t2)"},children:y.bank_name||"-"}),n.jsx("td",{style:{padding:"6px 8px",textAlign:"right",fontFamily:"var(--mono)",fontWeight:"600",color:"var(--t1)"},children:k(y.amount)}),n.jsx("td",{style:{padding:"6px 8px",color:"var(--t2)",fontFamily:"var(--mono)"},children:y.cheque_number||"-"}),n.jsx("td",{style:{padding:"6px 8px",color:"var(--t2)"},children:y.cheque_date?String(y.cheque_date).replace(/(\d{4})(\d{2})(\d{2})/,"$1-$2-$3"):"-"}),n.jsx("td",{style:{padding:"6px 8px",textAlign:"center"},children:n.jsx("span",{style:{padding:"2px 6px",borderRadius:"8px",fontSize:"10px",fontWeight:"600",background:y.status==="cleared"?"rgba(34,197,94,0.15)":y.status==="bounced"?"rgba(239,68,68,0.15)":y.status==="deposited"?"rgba(59,130,246,0.15)":"rgba(245,158,11,0.15)",color:y.status==="cleared"?"var(--green)":y.status==="bounced"?"var(--red)":y.status==="deposited"?"var(--blue)":"var(--orange)"},children:y.status})}),n.jsxs("td",{style:{padding:"6px 8px",textAlign:"center"},children:[y.id&&y.status==="pending"&&n.jsx("button",{onClick:()=>Bs(y.id,"deposited"),style:{padding:"2px 6px",fontSize:"10px",background:"var(--blue)",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Deposit"}),y.id&&y.status==="deposited"&&n.jsxs("div",{style:{display:"flex",gap:"3px",justifyContent:"center"},children:[n.jsx("button",{onClick:()=>Bs(y.id,"cleared"),style:{padding:"2px 6px",fontSize:"10px",background:"var(--green)",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Clear"}),n.jsx("button",{onClick:()=>Bs(y.id,"bounced"),style:{padding:"2px 6px",fontSize:"10px",background:"var(--red)",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Bounce"})]})]})]},y.id||S))})]})})]},p)),c.length===0&&n.jsx("div",{style:{textAlign:"center",padding:"40px",color:"var(--t3)"},children:"No cheques found"})]})})()]})]}),n.jsxs("div",{className:`page ${f==="cheque-post"?"active":""}`,onClick:()=>{ja(null),setCpBankDropdown(null)},children:[n.jsxs("div",{className:"sec-head",style:{marginBottom:"16px",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"8px"},children:[n.jsxs("div",{className:"sec-title",style:{fontSize:"18px"},children:["Cheque Post ",ad==="confirm"?"- Confirmation":He?"- Results":""]}),n.jsx("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:ad==="entry"&&!He&&n.jsxs(n.Fragment,{children:[n.jsx("input",{type:"date",value:Hn,onChange:s=>{W3(s.target.value),ao(s.target.value)},style:{padding:"6px 10px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"6px",color:"var(--t1)",fontSize:"12px"}}),n.jsx("span",{style:{fontSize:"11px",color:"var(--green)"},children:"Auto-saved"}),Ey>0&&n.jsxs("button",{onClick:()=>J3(!Hi),style:{fontSize:"11px",color:Hi?"var(--accent)":"var(--green)",padding:"2px 8px",background:Hi?"rgba(99,102,241,0.15)":"rgba(34,197,94,0.1)",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:"600"},children:[Ey," posted ",Hi?"(hide)":"(view)"]}),n.jsx("button",{className:"btn btn-p",style:{padding:"6px 14px",fontSize:"12px"},onClick:()=>ao(Hn),disabled:Pu,children:Pu?"Loading...":"Refresh"})]})})]}),Hi&&Mu&&Mu.length>0&&n.jsx("div",{style:{margin:"0 0 16px 0"},children:Mu.map((s,l)=>{const c=s.receipts||[],p=s.results||{},g=p.odbcResults||[],y=p.journalResult;p.summary;const S=c.map((D,P)=>{const V=g[P]||g.find(Te=>Te.partyName===D.partyName)||{},Q=D.chequeLines&&D.chequeLines.length>0?D.chequeLines:null,Me=Q?Q.reduce((Te,H)=>Te+(parseFloat(H.amount)||0),0):parseFloat(D.amount)||0;return{party:D.odbcParty||D.partyName,lines:Q,chequeCount:D.chequeCount||(Q?Q.length:0),amount:Me,odbcSuccess:V.success,odbcVoucherId:V.voucherId,odbcError:V.error}}),w=S.reduce((D,P)=>D+P.chequeCount,0),A=S.reduce((D,P)=>D+P.amount,0);let B=0;return n.jsxs("div",{style:{background:"var(--card)",border:"1px solid var(--border)",borderRadius:"10px",overflow:"hidden",marginBottom:"8px"},children:[n.jsxs("div",{style:{padding:"10px 16px",background:"var(--bg)",borderBottom:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[n.jsx("span",{style:{fontSize:"13px",fontWeight:"700",color:"var(--green)"},children:"Posted"}),n.jsx("span",{style:{fontSize:"11px",color:"var(--t3)"},children:new Date(s.posted_at).toLocaleString()})]}),n.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[n.jsxs("span",{style:{fontSize:"13px",fontWeight:"700",fontFamily:"var(--mono)",color:"var(--t1)"},children:[w," cheques | Rs ",A.toLocaleString("en-IN")]}),n.jsx("button",{onClick:()=>{const D=document.getElementById(`cp-posted-${l}`);if(D){const P=window.open("","_blank","width=900,height=700");P.document.write("<html><head><title>Cheque Post - "+Hn+"</title><style>body{font-family:Arial,sans-serif;padding:20px;font-size:12px}table{width:100%;border-collapse:collapse}th,td{border:1px solid #ccc;padding:5px 8px;text-align:left}th{background:#f5f5f5;font-weight:700}.r{text-align:right}.party-hdr{background:#e8f0fe;font-weight:700}.jrnl-box{background:#f0faf0;border:1px solid #c0e0c0;padding:10px 14px;border-radius:6px;margin-bottom:14px}.section-title{font-size:14px;font-weight:700;margin:12px 0 8px;border-bottom:1px solid #ddd;padding-bottom:4px}@media print{body{padding:10px}}</style></head><body>"+D.innerHTML+"</body></html>"),P.document.close(),P.print()}},style:{padding:"4px 10px",fontSize:"11px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"6px",color:"var(--t2)",cursor:"pointer"},children:"Print"})]})]}),n.jsxs("div",{id:`cp-posted-${l}`,style:{padding:"12px 16px"},children:[n.jsxs("div",{style:{textAlign:"center",marginBottom:"14px"},children:[n.jsx("div",{style:{fontSize:"16px",fontWeight:"700",color:"var(--t1)"},children:"Cheque Post Details"}),n.jsxs("div",{style:{fontSize:"11px",color:"var(--t3)"},children:["Date: ",Hn," | ",w," cheques | ",S.length," parties | Rs ",A.toLocaleString("en-IN")]})]}),(s.journal_voucher_number||y)&&n.jsxs("div",{className:"jrnl-box",style:{background:"rgba(34,197,94,0.06)",border:"1px solid rgba(34,197,94,0.2)",padding:"10px 14px",borderRadius:"8px",marginBottom:"14px"},children:[n.jsx("div",{style:{fontSize:"13px",fontWeight:"700",color:"var(--t1)",marginBottom:"6px"},children:"Billing Company  Journal Voucher"}),n.jsxs("div",{style:{display:"flex",gap:"16px",flexWrap:"wrap",fontSize:"12px"},children:[s.journal_voucher_number&&n.jsxs("span",{style:{fontFamily:"var(--mono)",color:"var(--accent)"},children:["Vch#: ",s.journal_voucher_number]}),n.jsx("span",{style:{color:y!=null&&y.success?"var(--green)":"var(--red)"},children:y!=null&&y.success?"Created":"Failed"})]}),n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px",marginTop:"8px"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{background:"rgba(34,197,94,0.08)"},children:[n.jsx("th",{style:{padding:"4px 8px",textAlign:"left",borderBottom:"1px solid rgba(34,197,94,0.2)",color:"var(--t3)"},children:"Ledger"}),n.jsx("th",{style:{padding:"4px 8px",textAlign:"right",borderBottom:"1px solid rgba(34,197,94,0.2)",color:"var(--t3)"},children:"Debit"}),n.jsx("th",{style:{padding:"4px 8px",textAlign:"right",borderBottom:"1px solid rgba(34,197,94,0.2)",color:"var(--t3)"},children:"Credit"})]})}),n.jsxs("tbody",{children:[n.jsxs("tr",{children:[n.jsx("td",{style:{padding:"4px 8px",color:"var(--t1)"},children:"Cheque Management"}),n.jsxs("td",{style:{padding:"4px 8px",textAlign:"right",fontFamily:"var(--mono)",color:"var(--t1)"},children:["Rs ",A.toLocaleString("en-IN")]}),n.jsx("td",{style:{padding:"4px 8px"}})]}),n.jsxs("tr",{children:[n.jsx("td",{style:{padding:"4px 8px",color:"var(--t1)"},children:"Cheque Receipt"}),n.jsx("td",{style:{padding:"4px 8px"}}),n.jsxs("td",{style:{padding:"4px 8px",textAlign:"right",fontFamily:"var(--mono)",color:"var(--t1)"},children:["Rs ",A.toLocaleString("en-IN")]})]})]})]})]}),n.jsx("div",{className:"section-title",style:{fontSize:"13px",fontWeight:"700",color:"var(--t1)",marginBottom:"8px",borderBottom:"1px solid var(--border)",paddingBottom:"4px"},children:"ODBC Cheque Entries"}),S.map((D,P)=>n.jsxs("div",{style:{marginBottom:"10px",border:"1px solid var(--border)",borderRadius:"6px",overflow:"hidden"},children:[n.jsxs("div",{className:"party-hdr",style:{padding:"6px 10px",background:"rgba(99,102,241,0.06)",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--border)"},children:[n.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[n.jsx("span",{style:{fontSize:"12px",fontWeight:"700",color:"var(--t1)"},children:D.party}),n.jsxs("span",{style:{fontSize:"11px",color:"var(--t3)"},children:[D.chequeCount," chq",D.chequeCount>1?"s":""]}),D.odbcSuccess!==void 0&&n.jsx("span",{style:{fontSize:"10px",padding:"1px 6px",borderRadius:"4px",background:D.odbcSuccess?"rgba(34,197,94,0.15)":"rgba(239,68,68,0.15)",color:D.odbcSuccess?"var(--green)":"var(--red)"},children:D.odbcSuccess?"Synced":D.odbcError||"Failed"}),D.odbcVoucherId&&n.jsxs("span",{style:{fontSize:"10px",color:"var(--t3)",fontFamily:"var(--mono)"},children:["ID: ",D.odbcVoucherId]})]}),n.jsxs("span",{style:{fontSize:"12px",fontWeight:"700",fontFamily:"var(--mono)",color:"var(--t1)"},children:["Rs ",D.amount.toLocaleString("en-IN")]})]}),(()=>{var Me,Te;const V=D.lines||D.odbcVoucherId&&((Me=Py[D.odbcVoucherId])==null?void 0:Me.lines)||null;if(V)return n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"11px"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{background:"var(--bg)"},children:[n.jsx("th",{style:{padding:"4px 8px",textAlign:"left",color:"var(--t3)",width:"30px"},children:"#"}),n.jsx("th",{style:{padding:"4px 8px",textAlign:"left",color:"var(--t3)"},children:"Bill Name"}),n.jsx("th",{style:{padding:"4px 8px",textAlign:"left",color:"var(--t3)"},children:"A/C Holder"}),n.jsx("th",{style:{padding:"4px 8px",textAlign:"left",color:"var(--t3)"},children:"BS Date"}),n.jsx("th",{style:{padding:"4px 8px",textAlign:"left",color:"var(--t3)"},children:"AD Date"}),n.jsx("th",{style:{padding:"4px 8px",textAlign:"right",color:"var(--t3)"},children:"Amount"})]})}),n.jsx("tbody",{children:V.map((H,se)=>{B++;const ze=H.chequeDate||"";return n.jsxs("tr",{style:{borderTop:se>0?"1px solid var(--border)":"none"},children:[n.jsx("td",{style:{padding:"4px 8px",color:"var(--t3)"},children:B}),n.jsx("td",{style:{padding:"4px 8px",color:"var(--accent)",fontFamily:"var(--mono)"},children:H.billName||[H.chequeNumber,H.bankName].filter(Boolean).join("/")}),n.jsx("td",{style:{padding:"4px 8px",color:"var(--t2)"},children:H.accountHolderName||""}),n.jsx("td",{style:{padding:"4px 8px",color:"var(--accent)",fontFamily:"var(--mono)",fontSize:"10px"},children:jv(ze)}),n.jsx("td",{style:{padding:"4px 8px",color:"var(--t2)",fontSize:"10px"},children:ze}),n.jsxs("td",{style:{padding:"4px 8px",textAlign:"right",fontFamily:"var(--mono)",color:"var(--t1)"},children:["Rs ",(parseFloat(H.amount)||0).toLocaleString("en-IN")]})]},se)})})]});const Q=D.odbcVoucherId&&((Te=Py[D.odbcVoucherId])==null?void 0:Te.loading);return n.jsxs("div",{style:{padding:"6px 10px",fontSize:"11px",color:"var(--t3)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsxs("span",{children:[D.chequeCount," cheque(s)  Rs ",D.amount.toLocaleString("en-IN")]}),D.odbcVoucherId&&n.jsx("button",{disabled:Q,onClick:async()=>{$u(H=>({...H,[D.odbcVoucherId]:{loading:!0,lines:null}}));try{const H=await yz(D.odbcVoucherId);$u(se=>({...se,[D.odbcVoucherId]:{loading:!1,lines:H.data.chequeLines||[]}}))}catch{$u(H=>({...H,[D.odbcVoucherId]:{loading:!1,lines:null}}))}},style:{padding:"2px 8px",fontSize:"10px",background:"var(--accent)",color:"#fff",border:"none",borderRadius:"4px",cursor:Q?"wait":"pointer"},children:Q?"Loading...":"Load Details"})]})})()]},P)),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px 10px",borderTop:"2px solid var(--border)",marginTop:"4px",fontWeight:"700",fontSize:"13px"},children:[n.jsxs("span",{style:{color:"var(--t1)"},children:["Grand Total  ",w," cheques, ",S.length," parties"]}),n.jsxs("span",{style:{fontFamily:"var(--mono)",color:"var(--t1)"},children:["Rs ",A.toLocaleString("en-IN")]})]})]})]},l)})}),ad==="entry"&&(Pu?n.jsx("div",{style:{textAlign:"center",padding:"40px",color:"var(--t3)"},children:"Fetching cheque receipts from Tally..."}):bs.length===0?n.jsxs("div",{style:{textAlign:"center",padding:"60px",color:"var(--t3)"},children:[n.jsx("div",{style:{fontSize:"32px",marginBottom:"8px"},children:""}),n.jsx("div",{children:"No cheque receipt vouchers found for this date"})]}):n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[bs.map((s,l)=>{const c=Et[s.masterId]||{odbcParty:"",chequeLines:[{bankName:"",chequeNumber:"",chequeDate:"",amount:"",accountHolderName:""}]},p=c.chequeLines.reduce((P,V)=>P+(parseFloat(V.amount)||0),0),g=s.chequeReceiptAmount-p,y=Math.abs(g)<.01,S=c.chequeLines.length>0&&c.chequeLines.every(P=>P.bankName&&P.chequeNumber&&P.amount),w=y&&c.odbcParty&&S,A=q3[s.masterId],B=M3[s.masterId]||"",D=B?_y.filter(P=>P.name.toLowerCase().includes(B.toLowerCase())):_y;return n.jsxs("div",{style:{border:`2px solid ${w?"var(--green)":c.odbcParty?"var(--border)":"var(--orange)"}`,borderRadius:"10px",overflow:"hidden",background:"var(--card)",transition:"border-color 0.3s"},children:[n.jsxs("div",{onClick:()=>U3(P=>({...P,[s.masterId]:!P[s.masterId]})),style:{padding:"10px 16px",background:"var(--bg)",borderBottom:A?"1px solid var(--border)":"none",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"8px",cursor:"pointer",userSelect:"none"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",flex:1,minWidth:0},children:[n.jsx("input",{type:"checkbox",checked:!!Vi[s.masterId],onClick:P=>P.stopPropagation(),onChange:P=>Ou(V=>({...V,[s.masterId]:P.target.checked})),disabled:!w,style:{width:"16px",height:"16px",accentColor:"var(--green)",cursor:w?"pointer":"not-allowed",opacity:w?1:.4,flexShrink:0}}),n.jsx("span",{style:{color:"var(--t3)",fontSize:"14px"},children:A?"":""}),n.jsx("span",{style:{fontSize:"14px",fontWeight:"700",color:"var(--t1)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:s.partyName}),n.jsxs("span",{style:{fontSize:"11px",color:"var(--t3)",whiteSpace:"nowrap"},children:["#",s.voucherNumber]}),c.chequeLines.length>1&&n.jsxs("span",{style:{padding:"1px 6px",borderRadius:"8px",fontSize:"10px",background:"var(--bg)",color:"var(--t3)",border:"1px solid var(--border)"},children:[c.chequeLines.length," chqs"]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[y&&n.jsx("span",{style:{padding:"2px 8px",borderRadius:"10px",fontSize:"10px",background:"rgba(34,197,94,0.15)",color:"var(--green)",fontWeight:"600"},children:"Matched"}),w&&n.jsx("span",{style:{padding:"2px 8px",borderRadius:"10px",fontSize:"10px",background:"rgba(34,197,94,0.15)",color:"var(--green)",fontWeight:"600"},children:"Ready"}),!y&&p>0&&n.jsxs("span",{style:{fontSize:"11px",color:"var(--orange)",fontFamily:"var(--mono)"},children:[k(p),"/"]}),n.jsx("span",{style:{fontSize:"16px",fontWeight:"700",fontFamily:"var(--mono)",color:"var(--accent)"},children:k(s.chequeReceiptAmount)})]})]}),A&&n.jsxs("div",{style:{padding:"10px 16px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"10px",position:"relative"},onClick:P=>P.stopPropagation(),children:[n.jsx("label",{style:{fontSize:"11px",color:"var(--t3)",fontWeight:"600",minWidth:"50px"},children:"Party:"}),c.odbcParty?n.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",gap:"8px",padding:"6px 10px",background:"rgba(34,197,94,0.08)",border:"1px solid var(--green)",borderRadius:"6px"},children:[n.jsx("span",{style:{fontSize:"12px",color:"var(--t1)",flex:1},children:c.odbcParty}),n.jsx("button",{onClick:()=>{rh(s.masterId,"odbcParty",""),Iu(P=>({...P,[s.masterId]:""}))},style:{padding:"0 4px",fontSize:"14px",background:"transparent",color:"var(--t3)",border:"none",cursor:"pointer",lineHeight:1},children:"x"})]}):n.jsxs("div",{style:{flex:1,position:"relative"},children:[n.jsx("input",{type:"text",value:B,placeholder:"Type to search ODBC party...",onChange:P=>{Iu(V=>({...V,[s.masterId]:P.target.value})),ja(s.masterId)},onFocus:()=>ja(s.masterId),onKeyDown:P=>{P.key==="Enter"&&D.length>0?(rh(s.masterId,"odbcParty",D[0].name),ja(null)):P.key==="Escape"&&ja(null)},style:{width:"100%",padding:"6px 10px",background:"var(--bg)",border:"1px solid var(--orange)",borderRadius:"6px",color:"var(--t1)",fontSize:"12px"}}),$3===s.masterId&&D.length>0&&n.jsxs("div",{style:{position:"absolute",top:"100%",left:0,right:0,maxHeight:"260px",overflow:"auto",background:"var(--card)",border:"2px solid var(--accent)",borderTop:"none",borderRadius:"0 0 8px 8px",zIndex:200,boxShadow:"0 8px 24px rgba(0,0,0,0.35)"},children:[n.jsxs("div",{style:{padding:"4px 10px",fontSize:"10px",color:"var(--t3)",background:"var(--bg)",borderBottom:"1px solid var(--border)"},children:[D.length," results - Enter to select first"]}),D.slice(0,20).map((P,V)=>n.jsx("div",{onClick:()=>{rh(s.masterId,"odbcParty",P.name),ja(null),Iu(Q=>({...Q,[s.masterId]:""}))},style:{padding:"8px 12px",fontSize:"13px",color:V===0?"var(--accent)":"var(--t1)",cursor:"pointer",borderBottom:"1px solid var(--border)",fontWeight:V===0?"700":"400",background:V===0?"rgba(99,102,241,0.1)":"transparent"},onMouseEnter:Q=>{Q.target.style.background="rgba(99,102,241,0.18)",Q.target.style.color="var(--accent)"},onMouseLeave:Q=>{Q.target.style.background=V===0?"rgba(99,102,241,0.1)":"transparent",Q.target.style.color=V===0?"var(--accent)":"var(--t1)"},children:P.name},P.name))]})]})]}),n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{background:"var(--bg)"},children:[n.jsx("th",{style:{padding:"4px 6px",textAlign:"left",color:"var(--t3)",fontWeight:"600",width:"30px"},children:"#"}),n.jsx("th",{style:{padding:"4px 6px",textAlign:"left",color:"var(--t3)",fontWeight:"600"},children:"Bill Name (chq#/bank)"}),n.jsx("th",{style:{padding:"4px 6px",textAlign:"left",color:"var(--t3)",fontWeight:"600"},children:"A/C Holder"}),n.jsx("th",{style:{padding:"4px 6px",textAlign:"left",color:"var(--t3)",fontWeight:"600",width:"90px"},children:"BS Date"}),n.jsx("th",{style:{padding:"4px 6px",textAlign:"left",color:"var(--t3)",fontWeight:"600",width:"120px"},children:"AD Date"}),n.jsx("th",{style:{padding:"4px 6px",textAlign:"right",color:"var(--t3)",fontWeight:"600",width:"110px"},children:"Amount"}),n.jsx("th",{style:{padding:"4px 6px",textAlign:"left",color:"var(--t3)",fontWeight:"600",width:"120px"},children:"Party"}),n.jsx("th",{style:{width:"30px"}})]})}),n.jsx("tbody",{children:c.chequeLines.map((P,V)=>{const Q=`${s.masterId}-${V}`,Te=P._hasSlash||!!P.bankName?`${P.chequeNumber}/${P.bankName}`:P.chequeNumber;return n.jsxs("tr",{style:{borderTop:"1px solid var(--border)"},children:[n.jsx("td",{style:{padding:"4px 6px",color:"var(--t3)"},children:V+1}),n.jsx("td",{style:{padding:"3px 4px"},children:n.jsx("input",{type:"text","data-field":"chqbank",value:Te,onChange:H=>{const se=H.target.value;if(se.includes("/")){const ze=se.indexOf("/");vd(s.masterId,V,{chequeNumber:se.substring(0,ze),bankName:se.substring(ze+1),_hasSlash:!0})}else vd(s.masterId,V,{chequeNumber:se,bankName:"",_hasSlash:!1})},onBlur:()=>{var H,se;if(P.chequeNumber&&!P.bankName&&V>0){const ze=((H=c.chequeLines[V-1])==null?void 0:H.bankName)||"",Ke=((se=c.chequeLines[V-1])==null?void 0:se.accountHolderName)||"";ze&&vd(s.masterId,V,{bankName:ze,_hasSlash:!0,accountHolderName:P.accountHolderName||Ke})}},onKeyDown:H=>{var se,ze;if(H.key==="Enter"){const Ke=V>0?c.chequeLines[V-1]:null,Cn=(Ke==null?void 0:Ke.bankName)||"",er=(Ke==null?void 0:Ke.accountHolderName)||"";P.chequeNumber&&!P.bankName&&Cn&&vd(s.masterId,V,{bankName:Cn,_hasSlash:!0,accountHolderName:P.accountHolderName||er});const Ls=P.bankName||Cn;!Ke||Ls!==Cn||V===0?(se=H.target.closest("tr").querySelector('input[data-field="holder"]'))==null||se.focus():(!P.accountHolderName&&er&&Ba(s.masterId,V,"accountHolderName",er),(ze=H.target.closest("tr").querySelector('input[data-field="bsdate"]'))==null||ze.focus())}},placeholder:"Chq# / Bank",style:{width:"100%",padding:"5px 6px",background:"var(--bg)",border:`1px solid ${P.chequeNumber&&P.bankName?"var(--border)":"var(--orange)"}`,borderRadius:"4px",color:"var(--t1)",fontSize:"12px"}})}),n.jsx("td",{style:{padding:"3px 4px"},children:n.jsx("input",{type:"text","data-field":"holder",value:P.accountHolderName,onChange:H=>Ba(s.masterId,V,"accountHolderName",H.target.value),placeholder:"A/C holder",onKeyDown:H=>{var se;H.key==="Enter"&&((se=H.target.closest("tr").querySelector('input[data-field="bsdate"]'))==null||se.focus())},style:{width:"100%",padding:"5px 6px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"4px",color:"var(--t1)",fontSize:"12px"}})}),n.jsx("td",{style:{padding:"3px 4px"},children:n.jsx("input",{type:"text","data-field":"bsdate",value:By[Q]||"",placeholder:"dd-mm",onChange:H=>K3(s.masterId,V,H.target.value),onKeyDown:H=>{var se;H.key==="Enter"&&((se=H.target.closest("tr").querySelector('input[type="number"]'))==null||se.focus())},title:"Nepali date (dd-mm or dd-mm-yyyy)",style:{width:"100%",padding:"5px 6px",background:"var(--bg)",border:`1px solid ${By[Q]?"var(--accent)":"var(--border)"}`,borderRadius:"4px",color:"var(--accent)",fontSize:"12px",fontFamily:"var(--mono)"}})}),n.jsx("td",{style:{padding:"3px 4px"},children:n.jsx("input",{type:"date",value:P.chequeDate,onChange:H=>Ba(s.masterId,V,"chequeDate",H.target.value),onKeyDown:H=>{var se;H.key==="Enter"&&((se=H.target.closest("tr").querySelector('input[type="number"]'))==null||se.focus())},style:{width:"100%",padding:"5px 6px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"4px",color:"var(--t1)",fontSize:"11px"}})}),n.jsx("td",{style:{padding:"3px 4px"},children:n.jsx("input",{type:"number",value:P.amount,onChange:H=>Ba(s.masterId,V,"amount",H.target.value),placeholder:"0",onBlur:()=>UC(s.masterId,V,s.chequeReceiptAmount),onKeyDown:H=>{H.key==="Enter"&&(H.preventDefault(),w?HC(s):V===c.chequeLines.length-1&&(bv(s.masterId),setTimeout(()=>{var ze,Ke;const se=(ze=H.target.closest("tbody"))==null?void 0:ze.querySelectorAll("tr");se!=null&&se[V+1]&&((Ke=se[V+1].querySelector("input"))==null||Ke.focus())},50)))},style:{width:"100%",padding:"5px 6px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"4px",color:"var(--t1)",fontSize:"12px",textAlign:"right",fontFamily:"var(--mono)"}})}),n.jsx("td",{style:{padding:"3px 4px"},children:n.jsx("input",{type:"text",value:P.partyOverride||"",onChange:H=>Ba(s.masterId,V,"partyOverride",H.target.value),placeholder:c.odbcParty?"= "+c.odbcParty.substring(0,12):"Party",title:P.partyOverride?`Override: ${P.partyOverride}`:`Using: ${c.odbcParty||"none"}`,style:{width:"100%",padding:"5px 6px",background:P.partyOverride?"rgba(230,81,0,0.08)":"var(--bg)",border:`1px solid ${P.partyOverride?"var(--orange)":"var(--border)"}`,borderRadius:"4px",color:P.partyOverride?"var(--orange)":"var(--t2)",fontSize:"11px"}})}),n.jsx("td",{style:{padding:"3px 4px",textAlign:"center"},children:c.chequeLines.length>1&&n.jsx("button",{onClick:()=>VC(s.masterId,V),style:{padding:"0 4px",fontSize:"14px",background:"transparent",color:"var(--red)",border:"none",cursor:"pointer",lineHeight:1},children:"x"})})]},V)})})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"8px",paddingTop:"8px",borderTop:"1px solid var(--border)"},children:[n.jsx("button",{onClick:()=>bv(s.masterId),style:{padding:"4px 12px",fontSize:"11px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"6px",color:"var(--t2)",cursor:"pointer"},children:"+ Add Line"}),n.jsxs("div",{style:{flex:1,margin:"0 12px"},children:[n.jsx("div",{style:{height:"4px",background:"var(--bg)",borderRadius:"2px",overflow:"hidden"},children:n.jsx("div",{style:{height:"100%",width:`${Math.min(100,p/s.chequeReceiptAmount*100)}%`,background:y?"var(--green)":p>s.chequeReceiptAmount?"var(--red)":"var(--orange)",borderRadius:"2px",transition:"width 0.3s"}})}),n.jsx("div",{style:{fontSize:"10px",color:y?"var(--green)":"var(--t3)",textAlign:"center",marginTop:"2px",fontFamily:"var(--mono)"},children:y?"Matched":`${k(p)} / ${k(s.chequeReceiptAmount)}`})]}),n.jsx("span",{style:{fontSize:"11px",color:w?"var(--green)":"var(--orange)",fontWeight:"600"},children:w?"Ready":c.odbcParty?S?"Match amount":"Fill fields":"Select party"})]})]})]},s.masterId)}),(()=>{const s=Object.values(Vi).filter(Boolean).length,l=s>0;return n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"12px",padding:"12px 16px",background:"var(--card)",borderRadius:"10px",border:`2px solid ${l?"var(--accent)":"var(--border)"}`,transition:"border-color 0.3s"},children:[n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:"13px",color:"var(--t2)"},children:[n.jsx("input",{type:"checkbox",checked:bs.filter(c=>{const p=Et[c.masterId],g=((p==null?void 0:p.chequeLines)||[]).reduce((S,w)=>S+(parseFloat(w.amount)||0),0),y=((p==null?void 0:p.chequeLines)||[]).length>0&&((p==null?void 0:p.chequeLines)||[]).every(S=>S.bankName&&S.chequeNumber&&S.amount);return Math.abs(c.chequeReceiptAmount-g)<.01&&(p==null?void 0:p.odbcParty)&&y}).every(c=>Vi[c.masterId]),onChange:c=>{const p=bs.filter(y=>{const S=Et[y.masterId],w=((S==null?void 0:S.chequeLines)||[]).reduce((B,D)=>B+(parseFloat(D.amount)||0),0),A=((S==null?void 0:S.chequeLines)||[]).length>0&&((S==null?void 0:S.chequeLines)||[]).every(B=>B.bankName&&B.chequeNumber&&B.amount);return Math.abs(y.chequeReceiptAmount-w)<.01&&(S==null?void 0:S.odbcParty)&&A}),g={};c.target.checked&&p.forEach(y=>{g[y.masterId]=!0}),Ou(g)},style:{width:"16px",height:"16px",accentColor:"var(--accent)"}}),"Select All Ready (",bs.filter(c=>{const p=Et[c.masterId],g=((p==null?void 0:p.chequeLines)||[]).reduce((S,w)=>S+(parseFloat(w.amount)||0),0),y=((p==null?void 0:p.chequeLines)||[]).length>0&&((p==null?void 0:p.chequeLines)||[]).every(S=>S.bankName&&S.chequeNumber&&S.amount);return Math.abs(c.chequeReceiptAmount-g)<.01&&(p==null?void 0:p.odbcParty)&&y}).length,")"]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsxs("span",{style:{fontSize:"12px",color:"var(--t3)"},children:[s," selected"]}),n.jsx("button",{onClick:()=>id("confirm"),disabled:!l,style:{padding:"10px 28px",fontSize:"14px",fontWeight:"700",background:l?"var(--accent)":"var(--bg)",color:l?"#fff":"var(--t3)",border:l?"none":"1px solid var(--border)",borderRadius:"8px",cursor:l?"pointer":"not-allowed",transition:"all 0.2s",opacity:l?1:.6},children:l?`Next (${s}) `:"Select vouchers to continue"})]})]})})()]})),ad==="confirm"&&!He&&(()=>{const s=bs.filter(p=>Vi[p.masterId]),l=[];let c=0;for(const p of s){const g=Et[p.masterId]||{odbcParty:"",chequeLines:[]};for(const y of g.chequeLines){const S=parseFloat(y.amount)||0;l.push({party:g.odbcParty||p.partyName,...y,amount:S}),c+=S}}return n.jsxs("div",{style:{marginTop:"16px"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[n.jsx("button",{onClick:()=>id("entry"),style:{padding:"6px 16px",fontSize:"12px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"6px",color:"var(--t2)",cursor:"pointer"},children:"Back to Entry"}),n.jsxs("div",{style:{fontSize:"14px",fontWeight:"700",color:"var(--t1)"},children:["Confirmation - ",s.length," parties, ",l.length," cheques"]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"10px",marginBottom:"16px"},children:[n.jsxs("div",{style:{padding:"12px",background:"var(--card)",borderRadius:"8px",border:"1px solid var(--border)",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)",marginBottom:"4px"},children:"Total Cheques"}),n.jsx("div",{style:{fontSize:"20px",fontWeight:"700",color:"var(--accent)"},children:l.length})]}),n.jsxs("div",{style:{padding:"12px",background:"var(--card)",borderRadius:"8px",border:"1px solid var(--border)",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)",marginBottom:"4px"},children:"Total Amount"}),n.jsx("div",{style:{fontSize:"20px",fontWeight:"700",color:"var(--green)"},children:k(c)})]}),n.jsxs("div",{style:{padding:"12px",background:"var(--card)",borderRadius:"8px",border:"1px solid var(--border)",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)",marginBottom:"4px"},children:"Parties"}),n.jsx("div",{style:{fontSize:"20px",fontWeight:"700",color:"var(--t1)"},children:s.length})]})]}),n.jsxs("div",{style:{background:"var(--card)",borderRadius:"10px",border:"1px solid var(--border)",overflow:"hidden",marginBottom:"16px"},children:[n.jsx("div",{style:{padding:"10px 14px",background:"var(--bg)",borderBottom:"1px solid var(--border)",fontSize:"12px",fontWeight:"700",color:"var(--t1)"},children:"ODBC CHq Mgmt - Cheque Entries"}),n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{background:"var(--bg)"},children:[n.jsx("th",{style:{padding:"6px 10px",textAlign:"left",color:"var(--t3)"},children:"#"}),n.jsx("th",{style:{padding:"6px 10px",textAlign:"left",color:"var(--t3)"},children:"Party (ODBC)"}),n.jsx("th",{style:{padding:"6px 10px",textAlign:"left",color:"var(--t3)"},children:"Bill Name"}),n.jsx("th",{style:{padding:"6px 10px",textAlign:"left",color:"var(--t3)"},children:"Cheque #"}),n.jsx("th",{style:{padding:"6px 10px",textAlign:"left",color:"var(--t3)"},children:"Bank"}),n.jsx("th",{style:{padding:"6px 10px",textAlign:"left",color:"var(--t3)"},children:"BS Date"}),n.jsx("th",{style:{padding:"6px 10px",textAlign:"right",color:"var(--t3)"},children:"Amount"})]})}),n.jsxs("tbody",{children:[l.map((p,g)=>n.jsxs("tr",{style:{borderTop:"1px solid var(--border)"},children:[n.jsx("td",{style:{padding:"6px 10px",color:"var(--t3)"},children:g+1}),n.jsx("td",{style:{padding:"6px 10px",color:"var(--t1)",fontWeight:"600"},children:p.party}),n.jsx("td",{style:{padding:"6px 10px",color:"var(--t2)",fontSize:"11px"},children:[p.chequeNumber,p.bankName].filter(Boolean).join("/")}),n.jsx("td",{style:{padding:"6px 10px",color:"var(--t1)",fontFamily:"var(--mono)"},children:p.chequeNumber}),n.jsx("td",{style:{padding:"6px 10px",color:"var(--t2)"},children:p.bankName}),n.jsx("td",{style:{padding:"6px 10px",color:"var(--accent)",fontFamily:"var(--mono)"},children:jv(p.chequeDate)}),n.jsx("td",{style:{padding:"6px 10px",textAlign:"right",fontFamily:"var(--mono)",fontWeight:"600",color:"var(--t1)"},children:k(p.amount)})]},g)),n.jsxs("tr",{style:{borderTop:"2px solid var(--border)",background:"var(--bg)"},children:[n.jsx("td",{colSpan:6,style:{padding:"8px 10px",fontWeight:"700",color:"var(--t1)",textAlign:"right"},children:"Total:"}),n.jsx("td",{style:{padding:"8px 10px",textAlign:"right",fontFamily:"var(--mono)",fontWeight:"700",fontSize:"14px",color:"var(--green)"},children:k(c)})]})]})]})]}),n.jsxs("div",{style:{background:"var(--card)",borderRadius:"10px",border:"2px solid var(--accent)",overflow:"hidden",marginBottom:"16px"},children:[n.jsx("div",{style:{padding:"10px 14px",background:"rgba(99,102,241,0.08)",borderBottom:"1px solid var(--border)",fontSize:"12px",fontWeight:"700",color:"var(--accent)"},children:"Journal Voucher - For DB (Billing Company)"}),n.jsxs("div",{style:{padding:"12px 14px"},children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",fontSize:"13px"},children:[n.jsxs("div",{style:{padding:"8px 12px",background:"rgba(239,68,68,0.06)",borderRadius:"6px",border:"1px solid rgba(239,68,68,0.15)"},children:[n.jsx("div",{style:{fontSize:"10px",color:"var(--t3)",marginBottom:"2px"},children:"DEBIT"}),n.jsx("div",{style:{fontWeight:"700",color:"var(--t1)"},children:"Cheque Management"}),n.jsx("div",{style:{fontFamily:"var(--mono)",fontWeight:"700",color:"var(--red)",fontSize:"16px"},children:k(c)})]}),n.jsxs("div",{style:{padding:"8px 12px",background:"rgba(34,197,94,0.06)",borderRadius:"6px",border:"1px solid rgba(34,197,94,0.15)"},children:[n.jsx("div",{style:{fontSize:"10px",color:"var(--t3)",marginBottom:"2px"},children:"CREDIT"}),n.jsx("div",{style:{fontWeight:"700",color:"var(--t1)"},children:"Cheque Receipt"}),n.jsx("div",{style:{fontFamily:"var(--mono)",fontWeight:"700",color:"var(--green)",fontSize:"16px"},children:k(c)})]})]}),n.jsxs("div",{style:{marginTop:"8px",fontSize:"11px",color:"var(--t3)"},children:[n.jsx("strong",{children:"Narration:"})," ",l.length," cheques - ",s.map(p=>{var y;const g=Et[p.masterId];return`${((g==null?void 0:g.odbcParty)||p.partyName).split(",")[0].trim()} (${((y=g==null?void 0:g.chequeLines)==null?void 0:y.length)||0})`}).join(", ")]}),n.jsxs("div",{style:{marginTop:"4px",fontSize:"11px",color:"var(--t3)"},children:[n.jsx("strong",{children:"Voucher #:"})," CHQ-",l.length,"chqs-",(Hn||"").replace(/-/g,"")]})]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"12px"},children:[n.jsx("button",{onClick:()=>id("entry"),style:{padding:"10px 24px",fontSize:"14px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"8px",color:"var(--t2)",cursor:"pointer"},children:"Back"}),n.jsx("button",{onClick:KC,disabled:Wu,style:{padding:"10px 32px",fontSize:"14px",fontWeight:"700",background:"var(--green)",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",opacity:Wu?.6:1},children:Wu?"Posting to Tally...":`Confirm & Post All (${l.length} cheques)`})]})]})})(),He&&n.jsx("div",{style:{marginTop:"16px"},children:n.jsxs("div",{style:{background:"var(--card)",borderRadius:"10px",border:`2px solid ${(Vv=He.summary)!=null&&Vv.journalCreated?"var(--green)":"var(--orange)"}`,padding:"20px",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"32px",marginBottom:"8px"},children:(Hv=He.summary)!=null&&Hv.journalCreated?"":"!"}),n.jsx("div",{style:{fontSize:"16px",fontWeight:"700",color:"var(--t1)",marginBottom:"8px"},children:(Kv=He.summary)!=null&&Kv.journalCreated?"All Posted Successfully":"Partial Success"}),n.jsxs("div",{style:{fontSize:"13px",color:"var(--t2)",marginBottom:"4px"},children:["ODBC: ",(Jv=He.summary)==null?void 0:Jv.successfulODBC,"/",(Yv=He.summary)==null?void 0:Yv.totalReceipts," receipts | ",(Qv=He.summary)==null?void 0:Qv.totalCheques," cheques | ",k(((Xv=He.summary)==null?void 0:Xv.totalAmount)||0)]}),He.journalResult&&n.jsxs("div",{style:{fontSize:"12px",color:He.journalResult.success?"var(--green)":"var(--red)",marginTop:"4px"},children:["Journal: ",He.journalResult.success?`Created (${He.journalResult.voucherNumber})`:`Failed: ${He.journalResult.error}`]}),((Gv=He.odbcResults)==null?void 0:Gv.some(s=>!s.success))&&n.jsx("div",{style:{marginTop:"8px",textAlign:"left",fontSize:"11px"},children:He.odbcResults.filter(s=>!s.success).map((s,l)=>n.jsxs("div",{style:{color:"var(--red)",padding:"2px 0"},children:["Failed: ",s.partyName," - ",s.error]},l))}),n.jsx("button",{onClick:()=>{Ly(null),id("entry"),Ou({}),ao(Hn)},style:{marginTop:"16px",padding:"8px 24px",fontSize:"13px",background:"var(--accent)",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"600"},children:"Done"})]})})]}),n.jsxs("div",{className:`page ${f==="xml-viewer"?"active":""}`,children:[n.jsxs("div",{className:"sec-head",style:{marginBottom:"16px",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"8px"},children:[n.jsx("div",{className:"sec-title",style:{fontSize:"18px"},children:"Tally XML Viewer"}),n.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",flexWrap:"wrap"},children:[n.jsx("input",{type:"date",value:xu,onChange:s=>q2(s.target.value),style:{padding:"6px 10px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"6px",color:"var(--t1)",fontSize:"12px"}}),n.jsx("span",{style:{color:"var(--t3)",fontSize:"12px"},children:"to"}),n.jsx("input",{type:"date",value:gu,onChange:s=>U2(s.target.value),style:{padding:"6px 10px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"6px",color:"var(--t1)",fontSize:"12px"}}),n.jsx("button",{className:"btn btn-p",style:{padding:"6px 14px",fontSize:"12px"},onClick:xv,disabled:uu,children:uu?"Fetching...":"Fetch from Tally"})]})]}),n.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px",flexWrap:"wrap",alignItems:"center"},children:[n.jsx("input",{type:"text",placeholder:"Search party, voucher no, narration...",value:ey,onChange:s=>O2(s.target.value),style:{padding:"6px 12px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"6px",color:"var(--t1)",fontSize:"12px",flex:"1",minWidth:"200px"}}),n.jsxs("select",{value:hu,onChange:s=>W2(s.target.value),style:{padding:"6px 10px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"6px",color:"var(--t1)",fontSize:"12px"},children:[n.jsx("option",{value:"",children:"All Types"}),[...new Set(Di.map(s=>s.voucherType))].sort().map(s=>n.jsxs("option",{value:s,children:[s," (",Di.filter(l=>l.voucherType===s).length,")"]},s))]}),n.jsxs("span",{style:{fontSize:"12px",color:"var(--t3)"},children:[Di.length," vouchers from Tally"]})]}),uu?n.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"var(--t3)"},children:[n.jsx("div",{style:{fontSize:"24px",marginBottom:"12px"},children:"Fetching vouchers from Tally..."}),n.jsx("div",{style:{fontSize:"13px"},children:"This may take a while for 5 months of data"})]}):Di.length===0?n.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"var(--t3)"},children:[n.jsx("div",{style:{fontSize:"40px",marginBottom:"12px"},children:""}),n.jsx("div",{style:{fontSize:"16px",marginBottom:"8px"},children:"XML Viewer"}),n.jsx("div",{style:{fontSize:"13px"},children:'Click "Fetch from Tally" to load vouchers and view their raw XML data'})]}):n.jsxs("div",{style:{display:"flex",gap:"12px",height:"calc(100vh - 220px)"},children:[n.jsx("div",{style:{width:"45%",overflowY:"auto",border:"1px solid var(--border)",borderRadius:"8px",background:"var(--card)"},children:n.jsxs("table",{className:"table",style:{fontSize:"11px"},children:[n.jsx("thead",{children:n.jsx("tr",{children:[{key:"masterId",label:"MID"},{key:"voucherType",label:"Type"},{key:"partyLedgerName",label:"Party"},{key:"voucherNumber",label:"No"},{key:"amount",label:"Amount",className:"r"},{key:"date",label:"Date"}].map(s=>n.jsxs("th",{className:s.className||"",onClick:()=>M2(l=>({field:s.key,dir:l.field===s.key&&l.dir==="desc"?"asc":"desc"})),style:{cursor:"pointer",userSelect:"none",whiteSpace:"nowrap"},children:[s.label," ",Pi.field===s.key?Pi.dir==="desc"?"":"":""]},s.key))})}),n.jsx("tbody",{children:Di.filter(s=>{const l=ey.toLowerCase(),c=!l||(s.partyLedgerName||"").toLowerCase().includes(l)||(s.partyName||"").toLowerCase().includes(l)||(s.voucherNumber||"").toLowerCase().includes(l)||(s.narration||"").toLowerCase().includes(l)||(s.masterId||"").includes(l),p=!hu||s.voucherType===hu;return c&&p}).sort((s,l)=>{const c=Pi.field;let p=s[c]||"",g=l[c]||"";return c==="masterId"||c==="amount"?(p=parseFloat(p)||0,g=parseFloat(g)||0):(p=String(p).toLowerCase(),g=String(g).toLowerCase()),p<g?Pi.dir==="asc"?-1:1:p>g?Pi.dir==="asc"?1:-1:0}).map(s=>{var p,g,y;const l=Xm===s.masterId,c=s.partyLedgerName&&s.partyName&&s.partyLedgerName!==s.partyName;return n.jsxs("tr",{onClick:()=>BC(s.masterId),style:{cursor:"pointer",background:l?"var(--blue-g)":void 0,borderLeft:l?"3px solid var(--blue)":void 0},children:[n.jsx("td",{className:"mono",style:{fontSize:"10px"},children:s.masterId}),n.jsx("td",{children:n.jsx("span",{className:`vt-badge ${(p=s.voucherType)!=null&&p.toLowerCase().includes("sales")?"sales":(g=s.voucherType)!=null&&g.toLowerCase().includes("receipt")?"receipt":(y=s.voucherType)!=null&&y.toLowerCase().includes("payment")?"payment":"journal"}`,style:{fontSize:"9px",padding:"1px 5px"},children:s.voucherType})}),n.jsxs("td",{style:{maxWidth:"180px"},children:[n.jsx("div",{style:{fontWeight:"600",fontSize:"11px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:s.partyLedgerName||"-"}),c&&n.jsxs("div",{style:{fontSize:"10px",color:"var(--green)",fontWeight:"500"},children:["PARTYNAME: ",s.partyName]})]}),n.jsx("td",{className:"mono",style:{fontSize:"10px"},children:s.voucherNumber||"-"}),n.jsx("td",{className:"r mono",style:{fontSize:"11px",fontWeight:"600"},children:k(s.amount)}),n.jsx("td",{style:{fontSize:"10px",whiteSpace:"nowrap"},children:s.date?`${s.date.slice(6,8)}/${s.date.slice(4,6)}/${s.date.slice(0,4)}`:"-"})]},s.masterId)})})]})}),n.jsx("div",{style:{width:"55%",overflowY:"auto",border:"1px solid var(--border)",borderRadius:"8px",background:"var(--card)"},children:I2?n.jsx("div",{style:{textAlign:"center",padding:"40px",color:"var(--t3)"},children:"Loading XML from Tally..."}):un?n.jsxs("div",{style:{padding:"0"},children:[n.jsxs("div",{style:{display:"flex",borderBottom:"1px solid var(--border)",position:"sticky",top:0,background:"var(--card)",zIndex:2},children:[n.jsxs("button",{onClick:()=>Gm(s=>s),style:{padding:"8px 16px",fontSize:"12px",fontWeight:"600",background:"var(--blue-g)",color:"var(--blue)",border:"none",borderBottom:"2px solid var(--blue)",cursor:"default"},children:["MasterID: ",Xm]}),n.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 8px"},children:n.jsxs("div",{style:{position:"relative",width:"100%",maxWidth:"280px"},children:[n.jsx("input",{type:"text",placeholder:"Find in XML...",value:ua,onChange:s=>ty(s.target.value),style:{width:"100%",padding:"4px 28px 4px 10px",fontSize:"11px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"4px",color:"var(--t1)",fontFamily:"var(--mono)"}}),ua&&n.jsxs(n.Fragment,{children:[n.jsx("span",{style:{position:"absolute",right:"24px",top:"50%",transform:"translateY(-50%)",fontSize:"9px",color:"var(--t3)"},children:((un==null?void 0:un.rawXml)||"").toLowerCase().split(ua.toLowerCase()).length-1}),n.jsx("button",{onClick:()=>ty(""),style:{position:"absolute",right:"4px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"var(--t3)",cursor:"pointer",fontSize:"12px",padding:"0 2px"},children:"x"})]})]})}),n.jsx("button",{onClick:()=>{un!=null&&un.rawXml&&navigator.clipboard.writeText(un.rawXml)},style:{padding:"6px 12px",fontSize:"11px",background:"transparent",color:"var(--t2)",border:"none",cursor:"pointer",whiteSpace:"nowrap"},children:"Copy XML"})]}),un.parsed&&(()=>{var p,g,y,S,w,A,B,D,P,V,Q,Me,Te,H,se,ze,Ke,Cn,er,Ls;const s=(p=un.parsed)==null?void 0:p.ENVELOPE,l=((V=(P=(D=(B=(A=(w=(S=(y=(g=s==null?void 0:s.BODY)==null?void 0:g[0])==null?void 0:y.DESC)==null?void 0:S[0])==null?void 0:w.DATA)==null?void 0:A[0])==null?void 0:B.COLLECTION)==null?void 0:D[0])==null?void 0:P.VOUCHER)==null?void 0:V[0])||((Te=(Me=(Q=s==null?void 0:s.COLLECTION)==null?void 0:Q[0])==null?void 0:Me.VOUCHER)==null?void 0:Te[0])||((Ls=(er=(Cn=(Ke=(ze=(se=(H=s==null?void 0:s.BODY)==null?void 0:H[0])==null?void 0:se.DATA)==null?void 0:ze[0])==null?void 0:Ke.COLLECTION)==null?void 0:Cn[0])==null?void 0:er.VOUCHER)==null?void 0:Ls[0])||null;if(!l)return null;const c=(et,Xt)=>{const Ie=et==null?void 0:et[Xt];return Ie?Array.isArray(Ie)?typeof Ie[0]=="object"?Ie[0]._||JSON.stringify(Ie[0]):Ie[0]:typeof Ie=="object"?Ie._||JSON.stringify(Ie):Ie:""};return n.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid var(--border)",background:"var(--bg)"},children:[n.jsx("div",{style:{fontSize:"13px",fontWeight:"700",marginBottom:"8px",color:"var(--t1)"},children:"Key Fields"}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px 16px",fontSize:"11px"},children:["PARTYLEDGERNAME","PARTYNAME","DATE","VOUCHERTYPENAME","VOUCHERNUMBER","AMOUNT","NARRATION","GUID","MASTERID","ALTERID","EFFECTIVEDATE","ALTEREDDATE","PRIORDATE","VCHSTATUSDATE"].map(et=>{const Xt=c(l,et);if(!Xt)return null;const Ie=et==="PARTYLEDGERNAME"||et==="PARTYNAME";return n.jsxs("div",{style:{display:"flex",gap:"6px",padding:"2px 0"},children:[n.jsxs("span",{style:{color:"var(--blue)",fontWeight:"600",minWidth:"140px",fontFamily:"var(--mono)",fontSize:"10px"},children:[et,":"]}),n.jsx("span",{style:{color:Ie?"var(--green)":"var(--t1)",fontWeight:Ie?"700":"400"},children:String(Xt)})]},et)})}),(()=>{const et=(l==null?void 0:l["ALLLEDGERENTRIES.LIST"])||(l==null?void 0:l["LEDGERENTRIES.LIST"])||[],Xt=Array.isArray(et)?et:[et];return Xt.length===0||!Xt[0]?null:n.jsxs("div",{style:{marginTop:"10px"},children:[n.jsxs("div",{style:{fontSize:"12px",fontWeight:"700",marginBottom:"4px",color:"var(--orange)"},children:["Ledger Entries (",Xt.length,")"]}),n.jsxs("table",{style:{width:"100%",fontSize:"11px",borderCollapse:"collapse"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{borderBottom:"1px solid var(--border)"},children:[n.jsx("th",{style:{textAlign:"left",padding:"3px 6px",color:"var(--t3)"},children:"Ledger"}),n.jsx("th",{style:{textAlign:"right",padding:"3px 6px",color:"var(--t3)"},children:"Amount"}),n.jsx("th",{style:{textAlign:"left",padding:"3px 6px",color:"var(--t3)"},children:"Deemed+"})]})}),n.jsx("tbody",{children:Xt.map((Ie,Sd)=>n.jsxs("tr",{style:{borderBottom:"1px solid var(--border)"},children:[n.jsx("td",{style:{padding:"3px 6px",fontWeight:"600"},children:c(Ie,"LEDGERNAME")}),n.jsx("td",{style:{padding:"3px 6px",textAlign:"right",fontFamily:"var(--mono)"},children:c(Ie,"AMOUNT")}),n.jsx("td",{style:{padding:"3px 6px",fontSize:"10px"},children:c(Ie,"ISDEEMEDPOSITIVE")})]},Sd))})]})]})})()]})})(),n.jsx("pre",{style:{padding:"12px 16px",margin:0,fontSize:"10px",fontFamily:"var(--mono)",color:"var(--t2)",whiteSpace:"pre-wrap",wordBreak:"break-all",lineHeight:1.5},children:(()=>{const s=un.rawXml||"No XML data";return ua?s.split(new RegExp(`(${ua.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi")).map((c,p)=>c.toLowerCase()===ua.toLowerCase()?n.jsx("mark",{style:{background:"#f59e0b",color:"#000",borderRadius:"2px",padding:"0 1px"},children:c},p):c):s})()})]}):n.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"var(--t3)"},children:[n.jsx("div",{style:{fontSize:"32px",marginBottom:"12px"},children:""}),n.jsx("div",{style:{fontSize:"14px"},children:"Click a voucher to view its XML data"}),n.jsx("div",{style:{fontSize:"12px",marginTop:"8px"},children:"Shows PARTYLEDGERNAME, PARTYNAME, all ledger entries and raw XML"})]})})]})]}),n.jsxs("div",{className:`page ${f==="cheque-vouchers"?"active":""}`,children:[n.jsxs("div",{className:"sec-head",style:{marginBottom:"16px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsxs("div",{children:[n.jsx("div",{className:"sec-title",style:{fontSize:"18px"},children:" Cheque Company Vouchers"}),(Xl==null?void 0:Xl.lastSyncedAt)&&n.jsxs("div",{style:{fontSize:"11px",color:"var(--t3)",marginTop:"4px"},children:["Last synced: ",new Date(Xl.lastSyncedAt).toLocaleString()]})]}),n.jsx("div",{style:{display:"flex",gap:"8px"},children:n.jsx("button",{className:"rush-btn",onClick:EC,disabled:Wi,style:{padding:"8px 16px",fontSize:"12px",background:Wi?"var(--bg2)":"var(--accent)",color:Wi?"var(--t3)":"#fff",border:"none",borderRadius:"var(--r)",cursor:Wi?"wait":"pointer"},children:Wi?" Syncing from Tally...":" Sync from Tally"})})]}),n.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"14px",flexWrap:"wrap",alignItems:"center"},children:[n.jsx("input",{className:"search-box",placeholder:" Search party, voucher#, bank, narration...",value:wu,onChange:s=>x3(s.target.value),style:{width:"300px"}}),n.jsxs("select",{value:Mi,onChange:s=>yy(s.target.value),style:{padding:"7px 12px",background:"var(--bg2)",border:"1px solid var(--border)",borderRadius:"var(--r)",color:"var(--t1)",fontSize:"12px",fontFamily:"var(--font)"},children:[n.jsx("option",{value:"",children:"All Voucher Types"}),[...new Set(Su.map(s=>s.voucherType).filter(Boolean))].sort().map(s=>n.jsx("option",{value:s,children:s},s))]})]}),u3?n.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"40px"},children:n.jsx("div",{className:"loading-spinner"})}):(()=>{const s=Su.filter(y=>{if(Mi&&y.voucherType!==Mi)return!1;if(!wu)return!0;const S=wu.toLowerCase();return(y.partyName||"").toLowerCase().includes(S)||(y.voucherNumber||"").toLowerCase().includes(S)||(y.bankName||"").toLowerCase().includes(S)||(y.chequeNumber||"").toLowerCase().includes(S)||(y.narration||"").toLowerCase().includes(S)}).sort((y,S)=>{const w=y[$i]||"",A=S[$i]||"";return["amount","masterId","alterId"].includes($i)?ku==="asc"?(parseFloat(w)||0)-(parseFloat(A)||0):(parseFloat(A)||0)-(parseFloat(w)||0):ku==="asc"?String(w).localeCompare(String(A)):String(A).localeCompare(String(w))}),l=s.reduce((y,S)=>y+(parseFloat(S.amount)||0),0),c={};s.forEach(y=>{c[y.voucherType||"Unknown"]=(c[y.voucherType||"Unknown"]||0)+1});const p=y=>$i===y?ku==="asc"?" ":" ":"",g=y=>{$i===y?vy(S=>S==="asc"?"desc":"asc"):(g3(y),vy("asc"))};return n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"14px",flexWrap:"wrap"},children:[n.jsxs("div",{style:{padding:"10px 16px",background:"var(--blue-g)",borderRadius:"var(--r)",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("span",{style:{fontSize:"18px"},children:""}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"10px",color:"var(--t3)",textTransform:"uppercase"},children:"Total Vouchers"}),n.jsx("div",{style:{fontSize:"16px",fontWeight:"700",color:"var(--blue)",fontFamily:"var(--mono)"},children:s.length})]})]}),n.jsxs("div",{style:{padding:"10px 16px",background:"rgba(34,197,94,0.1)",borderRadius:"var(--r)",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("span",{style:{fontSize:"18px"},children:""}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"10px",color:"var(--t3)",textTransform:"uppercase"},children:"Total Amount"}),n.jsx("div",{style:{fontSize:"16px",fontWeight:"700",color:"var(--green)",fontFamily:"var(--mono)"},children:k(l)})]})]}),Object.entries(c).map(([y,S])=>n.jsx("div",{style:{padding:"10px 16px",background:"var(--bg2)",borderRadius:"var(--r)",display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",border:Mi===y?"1px solid var(--blue)":"1px solid var(--border)"},onClick:()=>yy(Mi===y?"":y),children:n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"10px",color:"var(--t3)",textTransform:"uppercase"},children:y}),n.jsx("div",{style:{fontSize:"14px",fontWeight:"700",color:"var(--t1)",fontFamily:"var(--mono)"},children:S})]})},y))]}),n.jsx("div",{style:{overflowX:"auto",border:"1px solid var(--border)",borderRadius:"var(--r)"},children:n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{background:"var(--bg)",borderBottom:"2px solid var(--border)"},children:[n.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"var(--t3)",fontWeight:"600"},children:"#"}),n.jsxs("th",{style:{padding:"10px 8px",textAlign:"left",color:"var(--t3)",fontWeight:"600",cursor:"pointer"},onClick:()=>g("voucherNumber"),children:["Voucher #",p("voucherNumber")]}),n.jsxs("th",{style:{padding:"10px 8px",textAlign:"left",color:"var(--t3)",fontWeight:"600",cursor:"pointer"},onClick:()=>g("voucherType"),children:["Type",p("voucherType")]}),n.jsxs("th",{style:{padding:"10px 8px",textAlign:"left",color:"var(--t3)",fontWeight:"600",cursor:"pointer"},onClick:()=>g("voucherDate"),children:["Date",p("voucherDate")]}),n.jsxs("th",{style:{padding:"10px 8px",textAlign:"left",color:"var(--t3)",fontWeight:"600",cursor:"pointer"},onClick:()=>g("partyName"),children:["Party",p("partyName")]}),n.jsxs("th",{style:{padding:"10px 8px",textAlign:"right",color:"var(--t3)",fontWeight:"600",cursor:"pointer"},onClick:()=>g("amount"),children:["Amount",p("amount")]}),n.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"var(--t3)",fontWeight:"600"},children:"Receipt Mode"}),n.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"var(--t3)",fontWeight:"600"},children:"Cheque #"}),n.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"var(--t3)",fontWeight:"600"},children:"Cheque Date"}),n.jsxs("th",{style:{padding:"10px 8px",textAlign:"left",color:"var(--t3)",fontWeight:"600",cursor:"pointer"},onClick:()=>g("masterId"),children:["Master ID",p("masterId")]}),n.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"var(--t3)",fontWeight:"600"},children:"GUID"}),n.jsxs("th",{style:{padding:"10px 8px",textAlign:"left",color:"var(--t3)",fontWeight:"600",cursor:"pointer"},onClick:()=>g("alterId"),children:["Alter ID",p("alterId")]}),n.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"var(--t3)",fontWeight:"600"},children:"Narration"})]})}),n.jsxs("tbody",{children:[s.map((y,S)=>{const w=(y.ledgerEntries||[]).map(A=>A.ledger).filter(Boolean);return n.jsxs("tr",{style:{borderBottom:"1px solid var(--border)",background:S%2?"var(--bg)":"transparent"},children:[n.jsx("td",{style:{padding:"8px",color:"var(--t3)"},children:S+1}),n.jsx("td",{style:{padding:"8px",color:"var(--blue)",fontFamily:"var(--mono)",fontWeight:"500"},children:y.voucherNumber||"-"}),n.jsx("td",{style:{padding:"8px"},children:n.jsx("span",{style:{padding:"2px 8px",borderRadius:"10px",fontSize:"10px",fontWeight:"600",background:"var(--bg2)",color:"var(--t2)",border:"1px solid var(--border)"},children:y.voucherType||"-"})}),n.jsx("td",{style:{padding:"8px",color:"var(--t2)"},children:y.voucherDate?String(y.voucherDate).replace(/(\d{4})(\d{2})(\d{2})/,"$1-$2-$3"):"-"}),n.jsxs("td",{style:{padding:"8px",color:"var(--t1)",fontWeight:"500"},children:[y.partyName||"-",(()=>{const A=(y.ledgerEntries||[]).filter(B=>!B.isDebit&&B.ledger!==y.partyName).length;return A>0?n.jsxs("span",{style:{fontSize:"10px",color:"var(--orange)",marginLeft:"4px",fontWeight:"700"},children:["+",A]}):null})()]}),n.jsx("td",{style:{padding:"8px",textAlign:"right",fontFamily:"var(--mono)",fontWeight:"600",color:"var(--t1)"},children:k(y.amount)}),n.jsx("td",{style:{padding:"8px",fontSize:"10px"},children:w.length>0?n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:w.map((A,B)=>n.jsx("span",{style:{padding:"1px 6px",borderRadius:"8px",background:A==="Cash"?"rgba(34,197,94,0.15)":"rgba(59,130,246,0.1)",color:A==="Cash"?"var(--green)":"var(--blue)",fontWeight:"500",whiteSpace:"nowrap"},children:A},B))}):"-"}),n.jsx("td",{style:{padding:"8px",color:"var(--t2)",fontFamily:"var(--mono)"},children:y.chequeNumber||"-"}),n.jsx("td",{style:{padding:"8px",color:"var(--t2)"},children:y.chequeDate?String(y.chequeDate).replace(/(\d{4})(\d{2})(\d{2})/,"$1-$2-$3"):"-"}),n.jsx("td",{style:{padding:"8px",color:"var(--t3)",fontFamily:"var(--mono)",fontSize:"11px"},children:y.masterId||"-"}),n.jsx("td",{style:{padding:"8px",color:"var(--t3)",fontFamily:"var(--mono)",fontSize:"10px",maxWidth:"120px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:y.guid||"",children:y.guid?y.guid.substring(0,12)+"...":"-"}),n.jsx("td",{style:{padding:"8px",color:"var(--t3)",fontFamily:"var(--mono)",fontSize:"11px"},children:y.alterId||"-"}),n.jsx("td",{style:{padding:"8px",color:"var(--t3)",fontSize:"11px",maxWidth:"180px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:y.narration||"",children:y.narration||"-"})]},y.masterId||S)}),s.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:12,style:{padding:"30px",textAlign:"center",color:"var(--t3)"},children:Su.length===0?'No vouchers in DB. Click "Sync from Tally" to fetch.':"No matching vouchers"})})]})]})})]})})()]}),n.jsxs("div",{className:`page ${f==="collection"?"active":""}`,children:[n.jsx("div",{style:{display:"flex",gap:"4px",marginBottom:"16px",flexWrap:"wrap"},children:[["assign","Assign"],["collect","Collect"],["receivable","Receivable"],["staff","Staff"],["history","History"]].map(([s,l])=>n.jsx("button",{onClick:()=>{Cu(s),(s==="assign"||s==="collect"||s==="history")&&so(),s==="receivable"&&vv()},style:{padding:"8px 18px",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:Sr===s?"700":"500",background:Sr===s?"var(--accent)":"var(--card)",color:Sr===s?"#fff":"var(--t2)",fontSize:"13px"},children:l},s))}),Sr==="assign"&&n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center",marginBottom:"14px",flexWrap:"wrap"},children:[n.jsxs("select",{value:fa,onChange:s=>y3(s.target.value),style:{padding:"8px 12px",borderRadius:"8px",border:"1px solid var(--border)",background:"var(--card)",color:"var(--t1)",fontSize:"13px",minWidth:"180px"},children:[n.jsx("option",{value:"",children:"-- Select Staff --"}),Nu.map(s=>n.jsxs("option",{value:s.id,children:[s.name," (",s.tally_ledger_name,")"]},s.id))]}),n.jsx("button",{onClick:()=>{zu(!0),Cu("staff")},style:{padding:"8px 14px",borderRadius:"8px",border:"1px dashed var(--border)",background:"transparent",color:"var(--accent)",cursor:"pointer",fontSize:"12px"},children:"+ Add Staff"}),n.jsx("div",{style:{flex:1}}),n.jsx("input",{placeholder:"Search cheques...",value:Zl,onChange:s=>w3(s.target.value),style:{padding:"8px 12px",borderRadius:"8px",border:"1px solid var(--border)",background:"var(--card)",color:"var(--t1)",fontSize:"13px",width:"200px"}})]}),n.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"14px",fontSize:"12px",color:"var(--t3)"},children:[n.jsxs("span",{children:["Available: ",n.jsx("b",{style:{color:"var(--t1)"},children:ga.length})," cheques"]}),n.jsx("span",{children:"|"}),n.jsxs("span",{children:["Selected: ",n.jsx("b",{style:{color:"var(--accent)"},children:Lt.size})]}),n.jsx("span",{children:"|"}),n.jsxs("span",{children:["Amount: ",n.jsx("b",{style:{color:"var(--accent)"},children:k(ga.filter(s=>Lt.has(s.id)).reduce((s,l)=>s+(l.amount||0),0))})]})]}),S3?n.jsx("div",{style:{textAlign:"center",padding:"40px",color:"var(--t3)"},children:"Loading..."}):n.jsx("div",{style:{overflowX:"auto",borderRadius:"8px",border:"1px solid var(--border)"},children:n.jsxs("table",{className:"table",style:{fontSize:"12px"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{background:"var(--card)"},children:[n.jsx("th",{style:{padding:"8px",width:"30px"},children:n.jsx("input",{type:"checkbox",checked:ga.length>0&&Lt.size===ga.filter(s=>{const l=Zl.toLowerCase();return!l||(s.party_name||"").toLowerCase().includes(l)||(s.cheque_number||"").includes(l)}).length,onChange:s=>{const l=Zl.toLowerCase(),c=ga.filter(p=>!l||(p.party_name||"").toLowerCase().includes(l)||(p.cheque_number||"").includes(l));Au(s.target.checked?new Set(c.map(p=>p.id)):new Set)}})}),n.jsx("th",{style:{padding:"8px",textAlign:"left",color:"var(--t3)"},children:"Party Name"}),n.jsx("th",{style:{padding:"8px",textAlign:"right",color:"var(--t3)"},children:"Amount"}),n.jsx("th",{style:{padding:"8px",textAlign:"left",color:"var(--t3)"},children:"Cheque #"}),n.jsx("th",{style:{padding:"8px",textAlign:"left",color:"var(--t3)"},children:"Date"}),n.jsx("th",{style:{padding:"8px",textAlign:"left",color:"var(--t3)"},children:"Bank"})]})}),n.jsx("tbody",{children:(()=>{const s=Zl.toLowerCase(),l=ga.filter(c=>!s||(c.party_name||"").toLowerCase().includes(s)||(c.cheque_number||"").includes(s));return l.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:"6",style:{textAlign:"center",padding:"30px",color:"var(--t3)"},children:"No assignable cheques"})}):l.map(c=>n.jsxs("tr",{style:{borderBottom:"1px solid var(--border)",cursor:"pointer",background:Lt.has(c.id)?"rgba(99,102,241,0.08)":"transparent"},onClick:()=>{const p=new Set(Lt);p.has(c.id)?p.delete(c.id):p.add(c.id),Au(p)},children:[n.jsx("td",{style:{padding:"8px"},children:n.jsx("input",{type:"checkbox",checked:Lt.has(c.id),readOnly:!0})}),n.jsxs("td",{style:{padding:"8px"},children:[n.jsx("div",{style:{color:"var(--t1)",fontWeight:"500"},children:c.party_name}),(()=>{const p=Bu[c.party_name];return p?n.jsxs("div",{style:{fontSize:"10px",color:"var(--t3)",marginTop:"2px"},children:[p.billing_balance?n.jsxs("span",{children:["Bill: ",n.jsx("b",{style:{color:"#6366f1"},children:k(p.billing_balance)})]}):null,p.billing_balance&&p.odbc_balance?n.jsx("span",{children:" | "}):null,p.odbc_balance?n.jsxs("span",{children:["ODBC: ",n.jsx("b",{style:{color:"#0ea5e9"},children:k(p.odbc_balance)})]}):null,p.overdue_amount?n.jsxs("span",{children:[" | ",n.jsxs("b",{style:{color:"#ef4444"},children:["Due: ",k(p.overdue_amount)," (",p.overdue_count,")"]})]}):null]}):null})()]}),n.jsx("td",{style:{padding:"8px",textAlign:"right",fontWeight:"600",color:"var(--t1)"},children:k(c.amount)}),n.jsx("td",{style:{padding:"8px",color:"var(--t2)"},children:c.cheque_number||"-"}),n.jsx("td",{style:{padding:"8px",color:"var(--t2)"},children:c.cheque_date||"-"}),n.jsx("td",{style:{padding:"8px",color:"var(--t2)"},children:c.bank_name||"-"})]},c.id))})()})]})}),n.jsx("div",{style:{marginTop:"14px",display:"flex",gap:"10px",alignItems:"center"},children:n.jsx("button",{onClick:PC,disabled:!fa||Lt.size===0||ya,style:{padding:"10px 24px",borderRadius:"8px",border:"none",background:!fa||Lt.size===0?"var(--border)":"var(--accent)",color:"#fff",cursor:!fa||Lt.size===0?"not-allowed":"pointer",fontWeight:"600",fontSize:"14px"},children:ya?"Creating...":`Create Batch & Print (${Lt.size} cheques)`})})]}),Sr==="collect"&&n.jsx("div",{children:Ht?n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"14px"},children:[n.jsxs("div",{children:[n.jsxs("div",{style:{fontWeight:"700",fontSize:"16px",color:"var(--t1)"},children:["Batch #",Ht.id," - ",Ht.staff_name]}),n.jsxs("div",{style:{fontSize:"12px",color:"var(--t3)"},children:[Ht.assigned_date," | ",Ht.total_cheques," cheques | ",k(Ht.total_amount)]})]}),n.jsx("button",{onClick:()=>Ru(null),style:{padding:"6px 14px",borderRadius:"8px",border:"1px solid var(--border)",background:"var(--card)",color:"var(--t2)",cursor:"pointer",fontSize:"12px"},children:"Back"})]}),n.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"14px"},children:[n.jsx("button",{onClick:()=>{const s={};ma.forEach(l=>{s[l.id]="collected"}),td(s)},style:{padding:"6px 14px",borderRadius:"8px",border:"none",background:"#22c55e",color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"600"},children:"Mark All Collected"}),n.jsx("button",{onClick:()=>{const s={...ms};ma.forEach(l=>{s[l.id]==="pending"&&(s[l.id]="returned")}),td(s)},style:{padding:"6px 14px",borderRadius:"8px",border:"none",background:"#f59e0b",color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"600"},children:"Mark Remaining Returned"})]}),n.jsx("div",{style:{overflowX:"auto",borderRadius:"8px",border:"1px solid var(--border)"},children:n.jsxs("table",{className:"table",style:{fontSize:"12px"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{background:"var(--card)"},children:[n.jsx("th",{style:{padding:"8px",textAlign:"left",color:"var(--t3)"},children:"#"}),n.jsx("th",{style:{padding:"8px",textAlign:"left",color:"var(--t3)"},children:"Party Name"}),n.jsx("th",{style:{padding:"8px",textAlign:"right",color:"var(--t3)"},children:"Amount"}),n.jsx("th",{style:{padding:"8px",textAlign:"left",color:"var(--t3)"},children:"Cheque #"}),n.jsx("th",{style:{padding:"8px",textAlign:"left",color:"var(--t3)"},children:"Date"}),n.jsx("th",{style:{padding:"8px",textAlign:"center",color:"var(--t3)",minWidth:"120px"},children:"Status"})]})}),n.jsx("tbody",{children:ma.map((s,l)=>{const c=ms[s.id]||"pending",p=c==="collected"?"#22c55e":c==="returned"?"#f59e0b":c==="bounced"?"#ef4444":"var(--t3)";return n.jsxs("tr",{style:{borderBottom:"1px solid var(--border)",background:c==="collected"?"rgba(34,197,94,0.05)":c==="returned"?"rgba(245,158,11,0.05)":c==="bounced"?"rgba(239,68,68,0.05)":"transparent"},children:[n.jsx("td",{style:{padding:"8px",color:"var(--t3)"},children:l+1}),n.jsxs("td",{style:{padding:"8px"},children:[n.jsx("div",{style:{color:"var(--t1)",fontWeight:"500"},children:s.party_name}),(()=>{const g=Bu[s.party_name];return g?n.jsxs("div",{style:{fontSize:"10px",color:"var(--t3)",marginTop:"2px"},children:[g.billing_balance?n.jsxs("span",{children:["Bill: ",n.jsx("b",{style:{color:"#6366f1"},children:k(g.billing_balance)})]}):null,g.billing_balance&&g.odbc_balance?n.jsx("span",{children:" | "}):null,g.odbc_balance?n.jsxs("span",{children:["ODBC: ",n.jsx("b",{style:{color:"#0ea5e9"},children:k(g.odbc_balance)})]}):null,g.overdue_amount?n.jsxs("span",{children:[" | ",n.jsxs("b",{style:{color:"#ef4444"},children:["Due: ",k(g.overdue_amount)," (",g.overdue_count,")"]})]}):null]}):null})()]}),n.jsx("td",{style:{padding:"8px",textAlign:"right",fontWeight:"600",color:"var(--t1)"},children:k(s.amount)}),n.jsx("td",{style:{padding:"8px",color:"var(--t2)"},children:s.cheque_number||"-"}),n.jsx("td",{style:{padding:"8px",color:"var(--t2)"},children:s.cheque_date||"-"}),n.jsx("td",{style:{padding:"8px",textAlign:"center"},children:n.jsxs("select",{value:c,onChange:g=>td(y=>({...y,[s.id]:g.target.value})),style:{padding:"4px 8px",borderRadius:"6px",border:`1px solid ${p}`,background:"transparent",color:p,fontWeight:"600",fontSize:"12px",cursor:"pointer"},children:[n.jsx("option",{value:"pending",children:"Pending"}),n.jsx("option",{value:"collected",children:"Collected"}),n.jsx("option",{value:"returned",children:"Returned"}),n.jsx("option",{value:"bounced",children:"Bounced"})]})})]},s.id)})})]})}),(()=>{const s=ma.filter(g=>ms[g.id]==="collected"),l=ma.filter(g=>ms[g.id]==="returned"),c=ma.filter(g=>ms[g.id]==="bounced"),p=s.reduce((g,y)=>g+(y.amount||0),0);return n.jsxs("div",{style:{marginTop:"14px"},children:[n.jsxs("div",{style:{display:"flex",gap:"16px",fontSize:"13px",marginBottom:"12px",flexWrap:"wrap"},children:[n.jsxs("span",{style:{color:"#22c55e",fontWeight:"600"},children:["Collected: ",s.length," (",k(p),")"]}),n.jsxs("span",{style:{color:"#f59e0b",fontWeight:"600"},children:["Returned: ",l.length]}),n.jsxs("span",{style:{color:"#ef4444",fontWeight:"600"},children:["Bounced: ",c.length]})]}),n.jsxs("div",{style:{display:"flex",gap:"10px"},children:[n.jsx("button",{onClick:IC,disabled:ya,style:{padding:"10px 20px",borderRadius:"8px",border:"1px solid var(--border)",background:"var(--card)",color:"var(--t1)",cursor:"pointer",fontWeight:"600",fontSize:"13px"},children:ya?"Saving...":"Save Only"}),n.jsx("button",{onClick:OC,disabled:ya||s.length===0,style:{padding:"10px 20px",borderRadius:"8px",border:"none",background:s.length===0?"var(--border)":"#22c55e",color:"#fff",cursor:s.length===0?"not-allowed":"pointer",fontWeight:"600",fontSize:"13px"},children:ya?"Creating...":`Save & Create Receipt (${s.length} cheques, ${k(p)})`})]})]})})()]}):n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"12px",color:"var(--t1)"},children:"Active Batches"}),Gl.filter(s=>s.status==="assigned"||s.status==="in_progress").length===0?n.jsx("div",{style:{textAlign:"center",padding:"40px",color:"var(--t3)"},children:"No active batches. Assign cheques first."}):Gl.filter(s=>s.status==="assigned"||s.status==="in_progress").map(s=>n.jsxs("div",{onClick:()=>nh(s.id),style:{padding:"14px",marginBottom:"8px",borderRadius:"10px",border:"1px solid var(--border)",background:"var(--card)",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsxs("div",{children:[n.jsxs("div",{style:{fontWeight:"600",color:"var(--t1)",fontSize:"14px"},children:["Batch #",s.id," - ",s.staff_name]}),n.jsxs("div",{style:{fontSize:"12px",color:"var(--t3)",marginTop:"4px"},children:[s.assigned_date," | ",s.total_cheques," cheques | ",k(s.total_amount)]})]}),n.jsx("div",{style:{padding:"4px 10px",borderRadius:"6px",background:"rgba(99,102,241,0.1)",color:"var(--accent)",fontSize:"12px",fontWeight:"600"},children:s.status})]},s.id))]})}),Sr==="staff"&&n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"14px"},children:[n.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"var(--t1)"},children:"Collection Staff"}),n.jsx("button",{onClick:()=>zu(!Tu),style:{padding:"8px 16px",borderRadius:"8px",border:"none",background:"var(--accent)",color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"600"},children:Tu?"Cancel":"+ Add Staff"})]}),Tu&&n.jsxs("div",{style:{padding:"16px",borderRadius:"10px",border:"1px solid var(--border)",background:"var(--card)",marginBottom:"14px",display:"flex",gap:"10px",flexWrap:"wrap",alignItems:"flex-end"},children:[n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)",marginBottom:"4px"},children:"Name *"}),n.jsx("input",{value:Vn.name,onChange:s=>ed(l=>({...l,name:s.target.value})),placeholder:"Mini Gurung",style:{padding:"8px 12px",borderRadius:"8px",border:"1px solid var(--border)",background:"var(--bg)",color:"var(--t1)",fontSize:"13px",width:"160px"}})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)",marginBottom:"4px"},children:"Phone"}),n.jsx("input",{value:Vn.phone,onChange:s=>ed(l=>({...l,phone:s.target.value})),placeholder:"98XXXXXXXX",style:{padding:"8px 12px",borderRadius:"8px",border:"1px solid var(--border)",background:"var(--bg)",color:"var(--t1)",fontSize:"13px",width:"130px"}})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)",marginBottom:"4px"},children:"Tally Ledger Name *"}),n.jsx("input",{value:Vn.tallyLedgerName,onChange:s=>ed(l=>({...l,tallyLedgerName:s.target.value})),placeholder:"Cash By MINI Gurung",style:{padding:"8px 12px",borderRadius:"8px",border:"1px solid var(--border)",background:"var(--bg)",color:"var(--t1)",fontSize:"13px",width:"200px"}})]}),n.jsx("button",{onClick:WC,disabled:!Vn.name||!Vn.tallyLedgerName,style:{padding:"8px 18px",borderRadius:"8px",border:"none",background:"var(--accent)",color:"#fff",cursor:"pointer",fontWeight:"600",fontSize:"13px"},children:"Save"})]}),n.jsx("div",{style:{overflowX:"auto",borderRadius:"8px",border:"1px solid var(--border)"},children:n.jsxs("table",{className:"table",style:{fontSize:"12px"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{background:"var(--card)"},children:[n.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"var(--t3)"},children:"Name"}),n.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"var(--t3)"},children:"Phone"}),n.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"var(--t3)"},children:"Tally Ledger"}),n.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"var(--t3)"},children:"Status"}),n.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"var(--t3)"},children:"Actions"})]})}),n.jsx("tbody",{children:Nu.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:"5",style:{textAlign:"center",padding:"30px",color:"var(--t3)"},children:"No staff added yet"})}):Nu.map(s=>n.jsxs("tr",{style:{borderBottom:"1px solid var(--border)"},children:[n.jsx("td",{style:{padding:"10px 8px",color:"var(--t1)",fontWeight:"600"},children:s.name}),n.jsx("td",{style:{padding:"10px 8px",color:"var(--t2)"},children:s.phone||"-"}),n.jsx("td",{style:{padding:"10px 8px",color:"var(--t2)"},children:s.tally_ledger_name}),n.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:n.jsx("span",{style:{padding:"2px 8px",borderRadius:"4px",background:s.active?"rgba(34,197,94,0.1)":"rgba(239,68,68,0.1)",color:s.active?"#22c55e":"#ef4444",fontSize:"11px",fontWeight:"600"},children:s.active?"Active":"Inactive"})}),n.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:n.jsx("button",{onClick:()=>MC(s.id),style:{padding:"4px 10px",borderRadius:"6px",border:"1px solid #ef4444",background:"transparent",color:"#ef4444",cursor:"pointer",fontSize:"11px"},children:"Remove"})})]},s.id))})]})})]}),Sr==="history"&&n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"12px",color:"var(--t1)"},children:"Collection History"}),fs&&n.jsx("div",{style:{display:"flex",gap:"12px",marginBottom:"14px",flexWrap:"wrap"},children:[{label:"Total Batches",value:fs.totalBatches,color:"var(--accent)"},{label:"Active",value:fs.activeBatches,color:"#f59e0b"},{label:"Completed",value:fs.completedBatches,color:"#22c55e"},{label:"Total Collected",value:k(fs.totalCollected),color:"#22c55e"},{label:"Total Returned",value:fs.totalReturned,color:"#f59e0b"},{label:"Total Bounced",value:fs.totalBounced,color:"#ef4444"}].map((s,l)=>n.jsxs("div",{style:{padding:"10px 16px",borderRadius:"10px",border:"1px solid var(--border)",background:"var(--card)",minWidth:"120px"},children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)"},children:s.label}),n.jsx("div",{style:{fontSize:"18px",fontWeight:"700",color:s.color},children:s.value})]},l))}),n.jsx("div",{style:{overflowX:"auto",borderRadius:"8px",border:"1px solid var(--border)"},children:n.jsxs("table",{className:"table",style:{fontSize:"12px"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{background:"var(--card)"},children:[n.jsx("th",{style:{padding:"10px 8px",color:"var(--t3)"},children:"Batch"}),n.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"var(--t3)"},children:"Staff"}),n.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"var(--t3)"},children:"Date"}),n.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"var(--t3)"},children:"Cheques"}),n.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"var(--t3)"},children:"Amount"}),n.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"var(--t3)"},children:"Collected"}),n.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"var(--t3)"},children:"Returned"}),n.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"var(--t3)"},children:"Bounced"}),n.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"var(--t3)"},children:"Status"}),n.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"var(--t3)"},children:"Tally"})]})}),n.jsx("tbody",{children:Gl.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:"10",style:{textAlign:"center",padding:"30px",color:"var(--t3)"},children:"No collection history"})}):Gl.map(s=>n.jsxs("tr",{style:{borderBottom:"1px solid var(--border)",cursor:"pointer"},onClick:()=>{s.status!=="completed"&&(nh(s.id),Cu("collect"))},children:[n.jsxs("td",{style:{padding:"10px 8px",fontWeight:"600",color:"var(--accent)"},children:["#",s.id]}),n.jsx("td",{style:{padding:"10px 8px",color:"var(--t1)",fontWeight:"500"},children:s.staff_name}),n.jsx("td",{style:{padding:"10px 8px",color:"var(--t2)"},children:s.assigned_date}),n.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"var(--t1)"},children:s.total_cheques}),n.jsx("td",{style:{padding:"10px 8px",textAlign:"right",fontWeight:"600",color:"var(--t1)"},children:k(s.total_amount)}),n.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#22c55e",fontWeight:"600"},children:k(s.collected_amount)}),n.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#f59e0b"},children:s.returned_count}),n.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#ef4444"},children:s.bounced_count}),n.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:n.jsx("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"11px",fontWeight:"600",background:s.status==="completed"?"rgba(34,197,94,0.1)":"rgba(99,102,241,0.1)",color:s.status==="completed"?"#22c55e":"var(--accent)"},children:s.status})}),n.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:s.tally_synced?n.jsx("span",{style:{color:"#22c55e",fontSize:"11px",fontWeight:"600"},children:"Synced"}):s.tally_sync_error?n.jsx("span",{style:{color:"#ef4444",fontSize:"11px"},title:s.tally_sync_error,children:"Failed"}):n.jsx("span",{style:{color:"var(--t3)",fontSize:"11px"},children:"-"})})]},s.id))})]})})]}),Sr==="receivable"&&n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px",flexWrap:"wrap",gap:"8px"},children:[n.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"var(--t1)"},children:"Cheque Receivable"}),n.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[["pending","settled","all"].map(s=>n.jsx("button",{onClick:()=>A3(s),style:{padding:"5px 12px",borderRadius:"6px",border:"1px solid var(--border)",cursor:"pointer",fontSize:"12px",fontWeight:"500",background:nd===s?"var(--accent)":"var(--card)",color:nd===s?"#fff":"var(--t2)"},children:s.charAt(0).toUpperCase()+s.slice(1)},s)),n.jsx("input",{placeholder:"Search party / cheque...",value:Sy,onChange:s=>_3(s.target.value),style:{padding:"6px 12px",borderRadius:"8px",border:"1px solid var(--border)",background:"var(--card)",color:"var(--t1)",fontSize:"12px",width:"200px"}}),n.jsx("button",{onClick:DC,disabled:Lu,style:{padding:"6px 14px",borderRadius:"8px",border:"none",cursor:"pointer",background:"var(--accent)",color:"#fff",fontSize:"12px",fontWeight:"600",opacity:Lu?.6:1},children:Lu?"Syncing...":"Re-sync from Tally"})]})]}),N3?n.jsx("div",{style:{textAlign:"center",padding:"40px",color:"var(--t3)"},children:"Loading cheque receivable..."}):(()=>{const s=Sy.toLowerCase();let l=qi;nd==="pending"?l=l.filter(w=>!w.settled):nd==="settled"&&(l=l.filter(w=>w.settled)),s&&(l=l.filter(w=>w.partyName.toLowerCase().includes(s)||(w.chequeNumber||"").toLowerCase().includes(s)||(w.bankName||"").toLowerCase().includes(s)||(w.billName||"").toLowerCase().includes(s)));const c=qi.filter(w=>!w.settled),p=qi.filter(w=>w.settled),g=c.reduce((w,A)=>w+A.amount,0),y=p.reduce((w,A)=>w+A.amount,0),S=new Set(c.map(w=>w.partyName));return n.jsxs("div",{children:[n.jsx("div",{style:{display:"flex",gap:"12px",marginBottom:"14px",flexWrap:"wrap"},children:[{label:"Pending",value:`${c.length}`,sub:k(g),color:"#f59e0b"},{label:"Settled",value:`${p.length}`,sub:k(y),color:"#22c55e"},{label:"Total",value:qi.length,sub:k(g+y),color:"var(--accent)"},{label:"Parties",value:S.size,sub:"with pending",color:"var(--t1)"}].map((w,A)=>n.jsxs("div",{style:{padding:"10px 16px",borderRadius:"10px",border:"1px solid var(--border)",background:"var(--card)",minWidth:"120px"},children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)"},children:w.label}),n.jsx("div",{style:{fontSize:"16px",fontWeight:"700",color:w.color},children:w.value}),w.sub&&n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)"},children:w.sub})]},A))}),l.length===0?n.jsx("div",{style:{textAlign:"center",padding:"40px",color:"var(--t3)",background:"var(--card)",borderRadius:"8px"},children:qi.length===0?'No cheque receivable data. Click "Re-sync from Tally" to fetch ODBC vouchers.':"No results match your filter."}):n.jsxs("div",{style:{overflowX:"auto",borderRadius:"8px",border:"1px solid var(--border)"},children:[n.jsxs("table",{className:"table",style:{fontSize:"12px"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{background:"var(--card)"},children:[n.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"var(--t3)"},children:"Party Name"}),n.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"var(--t3)"},children:"Bill Ref"}),n.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"var(--t3)"},children:"Amount"}),n.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"var(--t3)"},children:"Ageing"}),n.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"var(--t3)"},children:"Status"})]})}),n.jsx("tbody",{children:l.slice(0,500).map((w,A)=>n.jsxs("tr",{style:{borderBottom:"1px solid var(--border)"},children:[n.jsx("td",{style:{padding:"8px",color:"var(--t1)",fontWeight:"500",maxWidth:"200px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:w.partyName,children:w.partyName}),n.jsx("td",{style:{padding:"8px",color:"var(--t2)",fontSize:"11px"},children:w.billName||w.voucherNumber||"-"}),n.jsx("td",{style:{padding:"8px",textAlign:"right",fontWeight:"600",color:"var(--t1)"},children:k(w.amount)}),n.jsx("td",{style:{padding:"8px",textAlign:"center",fontSize:"11px"},children:w.ageingDays>0?n.jsxs("span",{style:{padding:"2px 6px",borderRadius:"4px",fontSize:"10px",fontWeight:"600",background:w.ageingDays>90?"rgba(239,68,68,0.1)":w.ageingDays>30?"rgba(245,158,11,0.1)":"rgba(59,130,246,0.1)",color:w.ageingDays>90?"#ef4444":w.ageingDays>30?"#f59e0b":"#3b82f6"},children:[w.ageingDays,"d"]}):"-"}),n.jsx("td",{style:{padding:"8px",textAlign:"center"},children:n.jsx("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"11px",fontWeight:"600",background:w.settled?"rgba(34,197,94,0.1)":"rgba(245,158,11,0.1)",color:w.settled?"#22c55e":"#f59e0b"},children:w.settled?"Settled":"Pending"})})]},A))})]}),l.length>500&&n.jsxs("div",{style:{textAlign:"center",padding:"10px",color:"var(--t3)",fontSize:"12px"},children:["Showing 500 of ",l.length," cheques. Use search to filter."]})]})]})})()]}),wr&&n.jsx("div",{className:"collection-print-slip",style:{display:"none"},children:n.jsxs("div",{style:{padding:"20px",fontFamily:"monospace",fontSize:"12px",maxWidth:"600px",margin:"0 auto"},children:[n.jsx("div",{style:{textAlign:"center",fontWeight:"bold",fontSize:"16px",borderBottom:"2px solid #000",paddingBottom:"8px",marginBottom:"8px"},children:"CHEQUE COLLECTION SLIP"}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[n.jsxs("span",{children:["Date: ",(Zv=wr.batch)==null?void 0:Zv.assigned_date]}),n.jsxs("span",{children:["Batch #: ",(e0=wr.batch)==null?void 0:e0.id]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px",borderBottom:"1px solid #000",paddingBottom:"8px"},children:[n.jsxs("span",{children:["Staff: ",(t0=wr.staff)==null?void 0:t0.name]}),n.jsxs("span",{children:["Phone: ",((n0=wr.staff)==null?void 0:n0.phone)||"-"]})]}),n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"11px"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{borderBottom:"2px solid #000"},children:[n.jsx("th",{style:{padding:"4px",textAlign:"left"},children:"#"}),n.jsx("th",{style:{padding:"4px",textAlign:"left"},children:"Party Name"}),n.jsx("th",{style:{padding:"4px",textAlign:"right"},children:"Amount"}),n.jsx("th",{style:{padding:"4px",textAlign:"left"},children:"Chq #"}),n.jsx("th",{style:{padding:"4px",textAlign:"left"},children:"Bank"}),n.jsx("th",{style:{padding:"4px",textAlign:"right"},children:"Bill Bal"}),n.jsx("th",{style:{padding:"4px",textAlign:"right"},children:"ODBC Bal"})]})}),n.jsx("tbody",{children:(wr.items||[]).map((s,l)=>{const c=Bu[s.party_name]||{};return n.jsxs("tr",{style:{borderBottom:"1px solid #ccc"},children:[n.jsx("td",{style:{padding:"3px 4px"},children:l+1}),n.jsx("td",{style:{padding:"3px 4px"},children:s.party_name}),n.jsx("td",{style:{padding:"3px 4px",textAlign:"right"},children:Number(s.amount||0).toLocaleString("en-IN")}),n.jsx("td",{style:{padding:"3px 4px"},children:s.cheque_number||"-"}),n.jsx("td",{style:{padding:"3px 4px"},children:s.bank_name||"-"}),n.jsx("td",{style:{padding:"3px 4px",textAlign:"right"},children:c.billing_balance?Number(c.billing_balance).toLocaleString("en-IN"):"-"}),n.jsx("td",{style:{padding:"3px 4px",textAlign:"right"},children:c.odbc_balance?Number(c.odbc_balance).toLocaleString("en-IN"):"-"})]},l)})})]}),n.jsxs("div",{style:{borderTop:"2px solid #000",marginTop:"8px",paddingTop:"8px",display:"flex",justifyContent:"space-between",fontWeight:"bold"},children:[n.jsxs("span",{children:["Total: ",(wr.items||[]).length," cheques"]}),n.jsxs("span",{children:["Rs ",Number(((r0=wr.batch)==null?void 0:r0.total_amount)||0).toLocaleString("en-IN")]})]}),n.jsxs("div",{style:{marginTop:"30px",display:"flex",justifyContent:"space-between",borderTop:"1px solid #ccc",paddingTop:"8px"},children:[n.jsx("span",{children:"Staff Signature: ____________"}),n.jsx("span",{children:"Authorized By: ____________"})]})]})})]}),n.jsxs("div",{className:`page ${f==="bank-names"?"active":""}`,children:[n.jsx("div",{className:"sec-head",style:{marginBottom:"16px"},children:n.jsx("div",{className:"sec-title",style:{fontSize:"18px"},children:"Mapping Settings"})}),n.jsx("div",{style:{display:"flex",gap:"4px",marginBottom:"20px",borderBottom:"1px solid var(--border)",paddingBottom:"0"},children:[["banks","Bank Mapping"],["ledger","Ledger Mapping"],["phones","Phone  Party"]].map(([s,l])=>n.jsx("button",{onClick:()=>Vk(s),style:{padding:"10px 20px",fontSize:"13px",fontWeight:ca===s?"700":"400",color:ca===s?"var(--accent)":"var(--t2)",background:"none",border:"none",borderBottom:ca===s?"2px solid var(--accent)":"2px solid transparent",cursor:"pointer",marginBottom:"-1px",transition:"all 0.2s"},children:l},s))}),ca==="banks"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{style:{fontSize:"12px",color:"var(--t3)",marginBottom:"12px"},children:"Map bank short names (from cheque data) to full bank names."}),n.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"16px",alignItems:"center"},children:[n.jsx("input",{type:"text",placeholder:"Short name (e.g. garima)",value:_l,onChange:s=>um(s.target.value),style:{padding:"8px 12px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"6px",color:"var(--t1)",width:"200px",fontSize:"13px"},onKeyDown:s=>{var l;return s.key==="Enter"&&((l=document.getElementById("bn-full-input"))==null?void 0:l.focus())}}),n.jsx("input",{id:"bn-full-input",type:"text",placeholder:"Full name (e.g. Garima Bikas Bank)",value:Al,onChange:s=>hm(s.target.value),style:{padding:"8px 12px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"6px",color:"var(--t1)",flex:1,fontSize:"13px"},onKeyDown:s=>s.key==="Enter"&&nv()}),n.jsx("button",{className:"btn btn-p",style:{padding:"8px 16px",fontSize:"13px"},onClick:nv,disabled:!_l.trim()||!Al.trim(),children:"Add"})]}),Pk?n.jsx("div",{style:{textAlign:"center",padding:"40px",color:"var(--t3)"},children:"Loading..."}):n.jsxs("div",{className:"table-wrap",children:[n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{style:{width:"200px"},children:"Short Name"}),n.jsx("th",{children:"Full Name"}),n.jsx("th",{style:{width:"120px",textAlign:"center"},children:"Actions"})]})}),n.jsx("tbody",{children:oa.map(s=>n.jsx("tr",{children:Ik===s.id?n.jsxs(n.Fragment,{children:[n.jsx("td",{children:n.jsx("input",{type:"text",value:Up,onChange:l=>cm(l.target.value),style:{padding:"4px 8px",background:"var(--bg)",border:"1px solid var(--blue)",borderRadius:"4px",color:"var(--t1)",width:"100%",fontSize:"13px"}})}),n.jsx("td",{children:n.jsx("input",{type:"text",value:Vp,onChange:l=>pm(l.target.value),style:{padding:"4px 8px",background:"var(--bg)",border:"1px solid var(--blue)",borderRadius:"4px",color:"var(--t1)",width:"100%",fontSize:"13px"},onKeyDown:l=>l.key==="Enter"&&rv(s.id)})}),n.jsxs("td",{style:{textAlign:"center"},children:[n.jsx("button",{style:{background:"none",border:"none",cursor:"pointer",color:"var(--green)",fontSize:"14px",marginRight:"8px"},onClick:()=>rv(s.id),title:"Save",children:"Save"}),n.jsx("button",{style:{background:"none",border:"none",cursor:"pointer",color:"var(--t3)",fontSize:"14px"},onClick:()=>qp(null),title:"Cancel",children:"Cancel"})]})]}):n.jsxs(n.Fragment,{children:[n.jsx("td",{style:{fontFamily:"var(--mono)",fontWeight:"600",color:"var(--blue)"},children:s.short_name}),n.jsx("td",{children:s.full_name||n.jsx("span",{style:{color:"var(--amber)",fontStyle:"italic",fontSize:"12px"},children:"-- needs full name --"})}),n.jsxs("td",{style:{textAlign:"center"},children:[n.jsx("button",{style:{background:"none",border:"none",cursor:"pointer",color:"var(--blue)",fontSize:"14px",marginRight:"8px"},onClick:()=>{qp(s.id),cm(s.short_name),pm(s.full_name)},title:"Edit",children:"Edit"}),n.jsx("button",{style:{background:"none",border:"none",cursor:"pointer",color:"var(--red)",fontSize:"14px"},onClick:()=>CC(s.id,s.short_name),title:"Delete",children:"Del"})]})]})},s.id))})]}),oa.length===0&&n.jsx("div",{style:{textAlign:"center",padding:"30px",color:"var(--t3)"},children:"No bank names configured. Add your first bank name above."}),n.jsxs("div",{style:{marginTop:"12px",fontSize:"12px",color:"var(--t3)"},children:[oa.length," bank name",oa.length!==1?"s":"",oa.filter(s=>!s.full_name).length>0&&n.jsxs("span",{style:{color:"var(--amber)",marginLeft:"8px"},children:["(",oa.filter(s=>!s.full_name).length," need full name)"]})]})]})]}),ca==="ledger"&&n.jsxs("div",{onClick:()=>ge(null),children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[n.jsx("div",{style:{fontSize:"12px",color:"var(--t3)"},children:"Maps billing company party names to cheque company (ODBC) ledger names. Phone numbers auto-extracted from ODBC names."}),n.jsx("button",{className:"btn",style:{padding:"5px 12px",fontSize:"11px",whiteSpace:"nowrap"},onClick:async()=>{let s=0;for(const l of ds){const c=Gu(l.odbc_party);for(const p of c)try{await Hd({phone:p,partyName:l.odbc_party}),s++}catch{}}O("success","Extracted",`${s} phone(s) extracted from ODBC party names`),Rs()},children:"Extract All Phones"})]}),n.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"16px",alignItems:"center"},children:[n.jsxs("div",{style:{flex:1,position:"relative"},onClick:s=>s.stopPropagation(),children:[n.jsx("input",{type:"text",placeholder:"Search billing party...",value:qn,onChange:s=>{Ri(s.target.value),ge("new-billing")},onFocus:()=>ge("new-billing"),onBlur:()=>{setTimeout(()=>{if(qn){const s=da.filter(l=>l.toLowerCase().includes(qn.toLowerCase()));s.length===1&&Ri(s[0])}ge(s=>s==="new-billing"?null:s)},150)},onKeyDown:s=>{var l;if(s.key==="Enter"||s.key==="Tab"){const c=da.filter(p=>p.toLowerCase().includes(qn.toLowerCase()));c.length>0&&Ri(c[0]),ge(null),s.key==="Enter"&&(s.preventDefault(),(l=document.getElementById("lm-odbc-input"))==null||l.focus())}else s.key==="Escape"&&ge(null)},style:{width:"100%",padding:"8px 12px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"6px",color:"var(--t1)",fontSize:"13px"}}),Rl==="new-billing"&&qn&&(()=>{const s=da.filter(l=>l.toLowerCase().includes(qn.toLowerCase()));return s.length>0?n.jsxs("div",{style:{position:"absolute",top:"100%",left:0,right:0,maxHeight:"200px",overflow:"auto",background:"var(--card)",border:"1px solid var(--accent)",borderTop:"none",borderRadius:"0 0 6px 6px",zIndex:200,boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},children:[s.length===1&&n.jsx("div",{style:{padding:"4px 10px",fontSize:"10px",color:"var(--green)",background:"var(--bg)",borderBottom:"1px solid var(--border)"},children:"Only match  will auto-select"}),s.slice(0,15).map((l,c)=>n.jsx("div",{onClick:()=>{var p;Ri(l),ge(null),(p=document.getElementById("lm-odbc-input"))==null||p.focus()},style:{padding:"6px 12px",fontSize:"12px",cursor:"pointer",color:c===0?"var(--accent)":"var(--t1)",fontWeight:c===0?"600":"400",borderBottom:"1px solid var(--border)"},onMouseEnter:p=>p.target.style.background="rgba(99,102,241,0.15)",onMouseLeave:p=>p.target.style.background="transparent",children:l},l))]}):null})()]}),n.jsx("span",{style:{color:"var(--t3)",fontSize:"16px"},children:""}),n.jsxs("div",{style:{flex:1,position:"relative"},onClick:s=>s.stopPropagation(),children:[n.jsx("input",{id:"lm-odbc-input",type:"text",placeholder:"Search ODBC party...",value:dn,onChange:s=>{Bi(s.target.value),ge("new-odbc")},onFocus:()=>ge("new-odbc"),onBlur:()=>{setTimeout(()=>{if(dn){const s=cs.filter(l=>l.toLowerCase().includes(dn.toLowerCase()));s.length===1&&Bi(s[0])}ge(s=>s==="new-odbc"?null:s)},150)},onKeyDown:s=>{if(s.key==="Enter"||s.key==="Tab"){const l=cs.filter(c=>c.toLowerCase().includes(dn.toLowerCase()));l.length>0&&Bi(l[0]),ge(null)}else s.key==="Escape"&&ge(null)},style:{width:"100%",padding:"8px 12px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"6px",color:"var(--t1)",fontSize:"13px"}}),Rl==="new-odbc"&&dn&&(()=>{const s=cs.filter(l=>l.toLowerCase().includes(dn.toLowerCase()));return s.length>0?n.jsxs("div",{style:{position:"absolute",top:"100%",left:0,right:0,maxHeight:"200px",overflow:"auto",background:"var(--card)",border:"1px solid var(--accent)",borderTop:"none",borderRadius:"0 0 6px 6px",zIndex:200,boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},children:[s.length===1&&n.jsx("div",{style:{padding:"4px 10px",fontSize:"10px",color:"var(--green)",background:"var(--bg)",borderBottom:"1px solid var(--border)"},children:"Only match  will auto-select"}),s.slice(0,15).map((l,c)=>n.jsx("div",{onClick:()=>{Bi(l),ge(null)},style:{padding:"6px 12px",fontSize:"12px",cursor:"pointer",color:c===0?"var(--accent)":"var(--t1)",fontWeight:c===0?"600":"400",borderBottom:"1px solid var(--border)"},onMouseEnter:p=>p.target.style.background="rgba(99,102,241,0.15)",onMouseLeave:p=>p.target.style.background="transparent",children:l},l))]}):null})()]}),n.jsx("button",{className:"btn btn-p",style:{padding:"8px 16px",fontSize:"13px"},onClick:NC,disabled:!qn.trim()||!dn.trim(),children:"Add"})]}),ds.length>5&&n.jsx("input",{type:"text",placeholder:"Search mappings...",value:Ti,onChange:s=>Mk(s.target.value),style:{marginBottom:"12px",padding:"8px 12px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"6px",color:"var(--t1)",width:"300px",fontSize:"13px"}}),n.jsxs("div",{className:"table-wrap",children:[n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Billing Company Party"}),n.jsx("th",{style:{width:"40px",textAlign:"center"}}),n.jsx("th",{children:"ODBC (Cheque) Company Party"}),n.jsx("th",{style:{width:"180px"},children:"Phone"}),n.jsx("th",{style:{width:"120px",textAlign:"center"},children:"Actions"})]})}),n.jsx("tbody",{children:ds.filter(s=>!Ti||s.billing_party.toLowerCase().includes(Ti.toLowerCase())||s.odbc_party.toLowerCase().includes(Ti.toLowerCase())||(s._phones||"").includes(Ti)).map(s=>n.jsx("tr",{children:Wk===s.id?n.jsxs(n.Fragment,{children:[n.jsxs("td",{style:{position:"relative"},onClick:l=>l.stopPropagation(),children:[n.jsx("input",{type:"text",value:br,onChange:l=>{Ai(l.target.value),ge("edit-billing")},onFocus:()=>ge("edit-billing"),onBlur:()=>{setTimeout(()=>{if(br){const l=da.filter(c=>c.toLowerCase().includes(br.toLowerCase()));l.length===1&&Ai(l[0])}ge(l=>l==="edit-billing"?null:l)},150)},onKeyDown:l=>{if(l.key==="Enter"||l.key==="Tab"){const c=da.filter(p=>p.toLowerCase().includes(br.toLowerCase()));c.length>0&&Ai(c[0]),ge(null)}else l.key==="Escape"&&ge(null)},style:{padding:"4px 8px",background:"var(--bg)",border:"1px solid var(--blue)",borderRadius:"4px",color:"var(--t1)",width:"100%",fontSize:"13px"}}),Rl==="edit-billing"&&br&&(()=>{const l=da.filter(c=>c.toLowerCase().includes(br.toLowerCase()));return l.length>0?n.jsxs("div",{style:{position:"absolute",top:"100%",left:0,right:0,maxHeight:"180px",overflow:"auto",background:"var(--card)",border:"1px solid var(--accent)",borderRadius:"0 0 6px 6px",zIndex:200,boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},children:[l.length===1&&n.jsx("div",{style:{padding:"3px 10px",fontSize:"10px",color:"var(--green)",background:"var(--bg)",borderBottom:"1px solid var(--border)"},children:"Only match  will auto-select"}),l.slice(0,12).map((c,p)=>n.jsx("div",{onClick:()=>{Ai(c),ge(null)},style:{padding:"5px 10px",fontSize:"12px",cursor:"pointer",color:p===0?"var(--accent)":"var(--t1)",borderBottom:"1px solid var(--border)"},onMouseEnter:g=>g.target.style.background="rgba(99,102,241,0.15)",onMouseLeave:g=>g.target.style.background="transparent",children:c},c))]}):null})()]}),n.jsx("td",{style:{textAlign:"center",color:"var(--t3)"},children:""}),n.jsxs("td",{style:{position:"relative"},onClick:l=>l.stopPropagation(),children:[n.jsx("input",{type:"text",value:$n,onChange:l=>{la(l.target.value),ge("edit-odbc")},onFocus:()=>ge("edit-odbc"),onBlur:()=>{setTimeout(()=>{if($n){const l=cs.filter(c=>c.toLowerCase().includes($n.toLowerCase()));l.length===1&&la(l[0])}ge(l=>l==="edit-odbc"?null:l)},150)},onKeyDown:l=>{if(l.key==="Enter"){const c=cs.filter(p=>p.toLowerCase().includes($n.toLowerCase()));c.length>0&&la(c[0]),ge(null),sv(s.id)}else if(l.key==="Tab"){const c=cs.filter(p=>p.toLowerCase().includes($n.toLowerCase()));c.length>0&&la(c[0]),ge(null)}else l.key==="Escape"&&ge(null)},style:{padding:"4px 8px",background:"var(--bg)",border:"1px solid var(--blue)",borderRadius:"4px",color:"var(--t1)",width:"100%",fontSize:"13px"}}),Rl==="edit-odbc"&&$n&&(()=>{const l=cs.filter(c=>c.toLowerCase().includes($n.toLowerCase()));return l.length>0?n.jsxs("div",{style:{position:"absolute",top:"100%",left:0,right:0,maxHeight:"180px",overflow:"auto",background:"var(--card)",border:"1px solid var(--accent)",borderRadius:"0 0 6px 6px",zIndex:200,boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},children:[l.length===1&&n.jsx("div",{style:{padding:"3px 10px",fontSize:"10px",color:"var(--green)",background:"var(--bg)",borderBottom:"1px solid var(--border)"},children:"Only match  will auto-select"}),l.slice(0,12).map((c,p)=>n.jsx("div",{onClick:()=>{la(c),ge(null)},style:{padding:"5px 10px",fontSize:"12px",cursor:"pointer",color:p===0?"var(--accent)":"var(--t1)",borderBottom:"1px solid var(--border)"},onMouseEnter:g=>g.target.style.background="rgba(99,102,241,0.15)",onMouseLeave:g=>g.target.style.background="transparent",children:c},c))]}):null})()]}),n.jsx("td",{children:n.jsx("span",{style:{fontFamily:"var(--mono)",fontSize:"12px",color:"var(--t3)"},children:s._phones||""})}),n.jsxs("td",{style:{textAlign:"center"},children:[n.jsx("button",{style:{background:"none",border:"none",cursor:"pointer",color:"var(--green)",fontSize:"14px",marginRight:"8px"},onClick:()=>{ge(null),sv(s.id)},children:"Save"}),n.jsx("button",{style:{background:"none",border:"none",cursor:"pointer",color:"var(--t3)",fontSize:"14px"},onClick:()=>{Hp(null),ge(null)},children:"Cancel"})]})]}):n.jsxs(n.Fragment,{children:[n.jsx("td",{style:{fontWeight:"600"},children:s.billing_party}),n.jsx("td",{style:{textAlign:"center",color:"var(--t3)"},children:""}),n.jsx("td",{style:{fontFamily:"var(--mono)",color:"var(--blue)"},children:s.odbc_party}),n.jsx("td",{children:Uk===s.id?n.jsxs("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:[n.jsx("input",{type:"text",value:Kp,onChange:l=>xm(l.target.value),placeholder:"98xxxxx, 97xxxxx",style:{padding:"3px 6px",background:"var(--bg)",border:"1px solid var(--blue)",borderRadius:"4px",color:"var(--t1)",width:"100%",fontSize:"12px",fontFamily:"var(--mono)"},onKeyDown:l=>{l.key==="Enter"?(av(s,Kp),Bl(null)):l.key==="Escape"&&Bl(null)}}),n.jsx("button",{style:{background:"none",border:"none",cursor:"pointer",color:"var(--green)",fontSize:"12px",whiteSpace:"nowrap"},onClick:()=>{av(s,Kp),Bl(null)},children:"OK"})]}):n.jsx("div",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},onClick:()=>{Bl(s.id),xm(s._phones||"")},children:s._phones?n.jsx("span",{style:{fontFamily:"var(--mono)",fontSize:"12px",color:"var(--green)"},children:s._phones}):n.jsx("span",{style:{fontSize:"11px",color:"var(--t3)",fontStyle:"italic"},children:"+ add phone"})})}),n.jsxs("td",{style:{textAlign:"center"},children:[n.jsx("button",{style:{background:"none",border:"none",cursor:"pointer",color:"var(--blue)",fontSize:"14px",marginRight:"8px"},onClick:()=>{Hp(s.id),Ai(s.billing_party),la(s.odbc_party),ge(null)},children:"Edit"}),n.jsx("button",{style:{background:"none",border:"none",cursor:"pointer",color:"var(--red)",fontSize:"14px"},onClick:()=>_C(s.id,s.billing_party),children:"Del"})]})]})},s.id))})]}),ds.length===0&&n.jsx("div",{style:{textAlign:"center",padding:"30px",color:"var(--t3)"},children:"No ledger mappings yet. Mappings are auto-saved when you post cheques with different party names."}),n.jsxs("div",{style:{marginTop:"12px",fontSize:"12px",color:"var(--t3)"},children:[ds.length," mapping",ds.length!==1?"s":""," configured"]})]})]}),ca==="phones"&&n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"12px",color:"var(--t3)",marginBottom:"12px"},children:"Maps Fonepay initiator phone numbers to party names. Auto-saved when confirming matches. One party can have multiple phones."}),n.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"16px",alignItems:"center"},children:[n.jsx("input",{type:"text",placeholder:"Phone number",value:zl,onChange:s=>fm(s.target.value),style:{padding:"8px 12px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"6px",color:"var(--t1)",width:"180px",fontSize:"13px",fontFamily:"var(--mono)"},onKeyDown:s=>{var l;return s.key==="Enter"&&((l=document.getElementById("pm-party-input"))==null?void 0:l.focus())}}),n.jsx("span",{style:{color:"var(--t3)",fontSize:"16px"},children:""}),n.jsx("input",{id:"pm-party-input",type:"text",placeholder:"Party name",value:Ll,onChange:s=>mm(s.target.value),style:{padding:"8px 12px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"6px",color:"var(--t1)",flex:1,fontSize:"13px"},onKeyDown:s=>s.key==="Enter"&&ov()}),n.jsx("button",{className:"btn btn-p",style:{padding:"8px 16px",fontSize:"13px"},onClick:ov,disabled:!zl.trim()||!Ll.trim(),children:"Add"})]}),n.jsxs("div",{className:"table-wrap",children:[n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{style:{width:"180px"},children:"Phone"}),n.jsx("th",{children:"Party Name"}),n.jsx("th",{style:{width:"80px"},children:"Source"}),n.jsx("th",{style:{width:"80px",textAlign:"center"},children:"Actions"})]})}),n.jsx("tbody",{children:Tl.map(s=>n.jsxs("tr",{children:[n.jsx("td",{style:{fontFamily:"var(--mono)",fontWeight:"600"},children:s.phone}),n.jsx("td",{children:s.party_name}),n.jsx("td",{children:n.jsx("span",{style:{padding:"2px 6px",borderRadius:"4px",fontSize:"10px",fontWeight:"600",background:s.source==="auto"?"rgba(46,204,113,0.12)":"rgba(99,102,241,0.12)",color:s.source==="auto"?"var(--green)":"var(--accent)"},children:s.source})}),n.jsx("td",{style:{textAlign:"center"},children:n.jsx("button",{style:{background:"none",border:"none",cursor:"pointer",color:"var(--red)",fontSize:"14px"},onClick:()=>AC(s.phone),children:"Del"})})]},s.id))})]}),Tl.length===0&&n.jsx("div",{style:{textAlign:"center",padding:"30px",color:"var(--t3)"},children:"No phone mappings yet. Mappings are auto-saved when you confirm Fonepay matches."}),n.jsxs("div",{style:{marginTop:"12px",fontSize:"12px",color:"var(--t3)"},children:[Tl.length," mapping",Tl.length!==1?"s":""," configured"]})]})]})]}),n.jsxs("div",{className:`page ${f==="ledger-both"?"active":""}`,children:[n.jsxs("div",{className:"sec-head",style:{marginBottom:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("div",{className:"sec-title",style:{fontSize:"18px"},children:"Ledger (Both)  Combined Customer View"}),n.jsxs("div",{style:{display:"flex",gap:"8px"},children:[n.jsx("button",{className:"btn btn-p",style:{padding:"6px 14px",fontSize:"12px"},onClick:th,disabled:Eu,children:Eu?"Loading...":"Refresh"}),n.jsx("button",{className:"btn btn-o",style:{padding:"6px 14px",fontSize:"12px"},onClick:()=>{const s=window.open("","_blank"),l=Fu.toLowerCase(),c=rd.filter(p=>!(vs!=="all"&&p.type!==vs||l&&!(p.billing_party||"").toLowerCase().includes(l)&&!(p.odbc_party||"").toLowerCase().includes(l)&&!(p.group||"").toLowerCase().includes(l)));s.document.write(`<html><head><title>Ledger (Both) - Collection Sheet</title><style>
                      body { font-family: Arial, sans-serif; margin: 20px; font-size: 12px; }
                      h2 { margin-bottom: 4px; } .sub { color: #666; margin-bottom: 12px; }
                      table { width: 100%; border-collapse: collapse; } th, td { border: 1px solid #ccc; padding: 5px 8px; text-align: left; }
                      th { background: #f0f0f0; font-weight: 700; } .r { text-align: right; font-family: monospace; }
                      .overdue { color: red; font-weight: 700; } .total-row { font-weight: 700; background: #f5f5f5; }
                    </style></head><body>
                    <h2>Ledger (Both)  Collection Sheet</h2>
                    <div class="sub">${new Date().toLocaleDateString("en-IN")} | ${c.length} parties${vs!=="all"?" (filtered: "+vs+")":""}</div>
                    <table><thead><tr><th>#</th><th>Billing Party</th><th>Group</th><th>ODBC Party</th><th class="r">Billing Bal</th><th class="r">Cheque Total</th><th class="r">Cheque Overdue</th><th class="r">Grand Total</th></tr></thead><tbody>
                    ${c.map((p,g)=>`<tr>
                      <td>${g+1}</td>
                      <td>${p.billing_party||"-"}</td>
                      <td>${p.group||"-"}</td>
                      <td>${p.odbc_party||"-"}</td>
                      <td class="r">${p.billing_balance?k(p.billing_balance):"-"}</td>
                      <td class="r">${p.cheque_total?k(p.cheque_total):"-"}</td>
                      <td class="r ${p.cheque_overdue>0?"overdue":""}">${p.cheque_overdue?k(p.cheque_overdue):"-"}</td>
                      <td class="r">${k(p.billing_balance+p.cheque_total)}</td>
                    </tr>`).join("")}
                    <tr class="total-row"><td colspan="4">TOTAL (${c.length} parties)</td>
                      <td class="r">${k(c.reduce((p,g)=>p+g.billing_balance,0))}</td>
                      <td class="r">${k(c.reduce((p,g)=>p+g.cheque_total,0))}</td>
                      <td class="r overdue">${k(c.reduce((p,g)=>p+g.cheque_overdue,0))}</td>
                      <td class="r">${k(c.reduce((p,g)=>p+g.billing_balance+g.cheque_total,0))}</td>
                    </tr></tbody></table></body></html>`),s.document.close(),s.print()},children:"Print"})]})]}),ys&&n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"12px",marginBottom:"16px"},children:[n.jsxs("div",{style:{padding:"14px",background:"var(--blue-g, rgba(59,130,246,0.1))",borderRadius:"12px",border:"1px solid var(--blue)"},children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Billing Total"}),n.jsx("div",{style:{fontSize:"22px",fontWeight:"700",color:"var(--blue)",fontFamily:"var(--mono)",marginTop:"4px"},children:k(ys.total_billing)})]}),n.jsxs("div",{style:{padding:"14px",background:"var(--card)",borderRadius:"12px",border:"1px solid var(--border)"},children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Cheque Total"}),n.jsx("div",{style:{fontSize:"22px",fontWeight:"700",color:"var(--cyan, #06b6d4)",fontFamily:"var(--mono)",marginTop:"4px"},children:k(ys.total_cheque)})]}),n.jsxs("div",{style:{padding:"14px",background:"var(--red-g, rgba(239,68,68,0.1))",borderRadius:"12px",border:"1px solid var(--red)"},children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Cheque Overdue"}),n.jsx("div",{style:{fontSize:"22px",fontWeight:"700",color:"var(--red)",fontFamily:"var(--mono)",marginTop:"4px"},children:k(ys.total_cheque_overdue)})]}),n.jsxs("div",{style:{padding:"14px",background:"var(--card)",borderRadius:"12px",border:"1px solid var(--border)"},children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Parties"}),n.jsxs("div",{style:{fontSize:"14px",fontWeight:"600",color:"var(--t1)",marginTop:"6px"},children:[n.jsxs("span",{style:{color:"var(--green)"},children:[ys.mapped_count," mapped"]}),"  ",n.jsxs("span",{style:{color:"var(--blue)"},children:[ys.billing_only_count," billing"]}),"  ",n.jsxs("span",{style:{color:"var(--cyan, #06b6d4)"},children:[ys.cheque_only_count," cheque"]})]})]})]}),n.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"16px",alignItems:"center",flexWrap:"wrap"},children:[n.jsx("input",{type:"text",placeholder:"Search party name...",value:Fu,onChange:s=>T3(s.target.value),style:{padding:"8px 12px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"6px",color:"var(--t1)",width:"260px",fontSize:"13px"}}),n.jsx("div",{style:{display:"flex",gap:"4px"},children:[["all","All"],["both","Mapped"],["billing","Billing Only"],["cheque","Cheque Only"]].map(([s,l])=>n.jsx("button",{className:`btn ${vs===s?"btn-p":"btn-o"}`,style:{padding:"6px 12px",fontSize:"11px"},onClick:()=>L3(s),children:l},s))}),n.jsxs("select",{value:kr,onChange:s=>z3(s.target.value),style:{padding:"7px 10px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"6px",color:"var(--t1)",fontSize:"12px"},children:[n.jsx("option",{value:"total",children:"Sort: Grand Total"}),n.jsx("option",{value:"billing_balance",children:"Sort: Billing Balance"}),n.jsx("option",{value:"cheque_total",children:"Sort: Cheque Total"}),n.jsx("option",{value:"cheque_overdue",children:"Sort: Cheque Overdue"}),n.jsx("option",{value:"billing_party",children:"Sort: Name (Billing)"}),n.jsx("option",{value:"group",children:"Sort: Group"}),n.jsx("option",{value:"odbc_party",children:"Sort: Name (ODBC)"})]}),n.jsx("div",{style:{marginLeft:"auto",display:"flex",gap:"6px"},children:sd?n.jsxs(n.Fragment,{children:[n.jsxs("span",{style:{fontSize:"12px",color:"var(--t2)",alignSelf:"center"},children:[Object.values(ba).filter(Boolean).length," selected"]}),n.jsx("button",{className:"btn btn-p",style:{padding:"6px 14px",fontSize:"12px"},onClick:FC,disabled:Cy||Object.values(ba).filter(Boolean).length===0,children:Cy?"Saving...":"Save All"}),n.jsx("button",{className:"btn btn-o",style:{padding:"6px 14px",fontSize:"12px"},onClick:()=>{Du(!1),Ui({})},children:"Cancel"})]}):n.jsx("button",{className:"btn btn-o",style:{padding:"6px 14px",fontSize:"12px"},onClick:()=>Du(!0),disabled:rd.length===0,children:"Bulk Map"})})]}),Eu?n.jsx("div",{style:{textAlign:"center",padding:"40px",color:"var(--t3)"},children:"Loading from Tally..."}):n.jsxs("div",{className:"table-wrap",children:[n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{style:{width:"40px"},children:"#"}),n.jsx("th",{children:"Billing Party"}),n.jsx("th",{children:"Group"}),n.jsx("th",{children:"ODBC Party"}),n.jsx("th",{style:{textAlign:"right"},children:"Billing Bal"}),n.jsx("th",{style:{textAlign:"right"},children:"Cheque Total"}),n.jsx("th",{style:{textAlign:"right"},children:"Cheque Overdue"}),n.jsx("th",{style:{textAlign:"right"},children:"Grand Total"})]})}),n.jsx("tbody",{children:(()=>{const s=Fu.toLowerCase();let l=rd.filter(c=>!(vs!=="all"&&c.type!==vs||s&&!(c.billing_party||"").toLowerCase().includes(s)&&!(c.odbc_party||"").toLowerCase().includes(s)&&!(c.group||"").toLowerCase().includes(s)));return l.sort((c,p)=>kr==="total"?p.billing_balance+p.cheque_total-(c.billing_balance+c.cheque_total):kr==="billing_balance"?p.billing_balance-c.billing_balance:kr==="cheque_total"?p.cheque_total-c.cheque_total:kr==="cheque_overdue"?p.cheque_overdue-c.cheque_overdue:kr==="billing_party"?(c.billing_party||"").localeCompare(p.billing_party||""):kr==="group"?(c.group||"").localeCompare(p.group||""):kr==="odbc_party"?(c.odbc_party||"").localeCompare(p.odbc_party||""):0),l.map((c,p)=>{const g=c.billing_party||c.odbc_party||p,y=c.type==="billing"?`billing:${c.billing_party}`:c.type==="cheque"?`cheque:${c.odbc_party}`:null,S={width:"100%",padding:"4px 6px",fontSize:"12px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"4px",color:"var(--t1)"};return n.jsxs("tr",{style:{background:c.type==="both"?"var(--green-g, rgba(34,197,94,0.05))":sd&&y&&ba[y]?"rgba(59,130,246,0.06)":void 0},children:[n.jsx("td",{style:{color:"var(--t3)",fontSize:"11px"},children:p+1}),n.jsx("td",{children:sd&&c.type==="cheque"?n.jsxs("select",{value:ba[y]||"",onChange:w=>Ui(A=>({...A,[y]:w.target.value})),style:S,children:[n.jsx("option",{value:"",children:" select billing party "}),E3.map(w=>n.jsx("option",{value:w,children:w},w))]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{style:{fontWeight:"600"},children:c.billing_party||n.jsx("span",{style:{color:"var(--t3)"},children:""})}),c.type!=="both"&&n.jsx("span",{style:{fontSize:"10px",padding:"1px 6px",borderRadius:"3px",background:c.type==="billing"?"var(--blue-g, rgba(59,130,246,0.15))":"var(--cyan-g, rgba(6,182,212,0.15))",color:c.type==="billing"?"var(--blue)":"var(--cyan, #06b6d4)"},children:c.type==="billing"?"billing only":"cheque only"})]})}),n.jsx("td",{style:{fontSize:"11px",color:"var(--t3)"},children:c.group||""}),n.jsx("td",{children:sd&&c.type==="billing"?n.jsxs("select",{value:ba[y]||"",onChange:w=>Ui(A=>({...A,[y]:w.target.value})),style:S,children:[n.jsx("option",{value:"",children:" select ODBC party "}),D3.map(w=>n.jsx("option",{value:w,children:w},w))]}):n.jsx("span",{style:{color:c.odbc_party?"var(--t1)":"var(--t3)"},children:c.odbc_party||""})}),n.jsx("td",{style:{textAlign:"right",fontFamily:"var(--mono)",fontWeight:c.billing_balance>0?"600":"400",color:c.billing_balance>0?"var(--t1)":"var(--t3)"},children:c.billing_balance>0?k(c.billing_balance):""}),n.jsx("td",{style:{textAlign:"right",fontFamily:"var(--mono)",fontWeight:c.cheque_total>0?"600":"400",color:c.cheque_total>0?"var(--t1)":"var(--t3)"},children:c.cheque_total>0?k(c.cheque_total):""}),n.jsxs("td",{style:{textAlign:"right",fontFamily:"var(--mono)",fontWeight:c.cheque_overdue>0?"700":"400",color:c.cheque_overdue>0?"var(--red)":"var(--t3)"},children:[c.cheque_overdue>0?k(c.cheque_overdue):"",c.cheque_overdue_count>0&&n.jsxs("span",{style:{fontSize:"10px",color:"var(--red)",marginLeft:"4px"},children:["(",c.cheque_overdue_count,")"]})]}),n.jsx("td",{style:{textAlign:"right",fontFamily:"var(--mono)",fontWeight:"700",fontSize:"13px"},children:k(c.billing_balance+c.cheque_total)})]},g)})})()})]}),rd.length===0&&n.jsx("div",{style:{textAlign:"center",padding:"30px",color:"var(--t3)"},children:'No data. Click "Refresh" to fetch from Tally.'})]})]}),n.jsxs("div",{className:`page ${f==="data-completeness"?"active":""}`,children:[n.jsxs("div",{className:"sec-head",style:{marginBottom:"16px"},children:[n.jsx("div",{className:"sec-title",style:{fontSize:"18px"},children:" Data Quality Tracking"}),n.jsx("button",{className:"btn btn-p",style:{padding:"6px 14px",fontSize:"11px"},onClick:()=>{Fl(!0),Yp(null),Mb().then(s=>Yp(s.data)).catch(()=>{}).finally(()=>Fl(!1))},disabled:Qp,children:Qp?" Loading...":" Refresh"})]}),Qp&&!El&&n.jsx("div",{style:{textAlign:"center",padding:"40px",color:"var(--t3)"},children:"Loading completeness data..."}),El&&(()=>{const s=El,l=p=>p>=90?"var(--green)":p>=75?"var(--amber)":p>=60?"#F59E0B":"var(--red)",c=p=>n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("div",{style:{width:"80px",height:"6px",background:"var(--bg3)",borderRadius:"3px",overflow:"hidden"},children:n.jsx("div",{style:{width:`${p}%`,height:"100%",background:l(p),borderRadius:"3px",transition:"width .3s"}})}),n.jsxs("span",{style:{fontSize:"11px",fontWeight:"700",color:l(p),fontFamily:"var(--mono)",minWidth:"32px"},children:[p,"%"]})]});return n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"12px",marginBottom:"20px"},children:[n.jsxs("div",{className:"s-card",style:{padding:"16px",textAlign:"center"},children:[n.jsxs("div",{style:{fontSize:"36px",fontWeight:"800",color:l(s.overallScore),fontFamily:"var(--mono)"},children:[s.overallScore,"%"]}),n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)",marginTop:"4px"},children:"Overall Score"})]}),n.jsxs("div",{className:"s-card",style:{padding:"16px",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"36px",fontWeight:"800",color:"var(--blue)",fontFamily:"var(--mono)"},children:s.totalComponents}),n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)",marginTop:"4px"},children:"Components Tracked"})]}),n.jsxs("div",{className:"s-card",style:{padding:"16px",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"36px",fontWeight:"800",color:"var(--green)",fontFamily:"var(--mono)"},children:s.categories.length}),n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)",marginTop:"4px"},children:"Categories"})]}),n.jsxs("div",{className:"s-card",style:{padding:"16px",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"var(--t2)"},children:new Date(s.lastUpdated).toLocaleString()}),n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)",marginTop:"4px"},children:"Last Checked"})]})]}),n.jsxs("div",{className:"s-card",style:{marginBottom:"12px",overflow:"hidden"},children:[n.jsxs("div",{onClick:()=>us(p=>({...p,dbstats:!p.dbstats})),style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 18px",cursor:"pointer",userSelect:"none"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[n.jsx("span",{style:{fontSize:"10px",color:"var(--t3)",transition:"transform .2s",transform:jr.dbstats?"rotate(90deg)":"rotate(0deg)",display:"inline-block"},children:""}),n.jsx("span",{style:{fontSize:"13px",fontWeight:"700",color:"var(--t1)"},children:"Database Stats"})]}),n.jsx("div",{style:{display:"flex",gap:"12px",fontSize:"11px"},children:[["Bills",s.dbStats.totalBills],["ODBC",s.dbStats.odbcVouchers],["Fonepay",s.dbStats.fonepayTxns],["RBB",s.dbStats.rbbTxns]].map(([p,g])=>n.jsxs("span",{style:{color:"var(--t3)"},children:[p,": ",n.jsx("span",{style:{fontWeight:"700",color:"var(--t1)",fontFamily:"var(--mono)"},children:(g||0).toLocaleString()})]},p))})]}),jr.dbstats&&n.jsxs("div",{style:{padding:"0 18px 14px"},children:[n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:"8px",fontSize:"11px"},children:[["Bills (Active)",s.dbStats.totalBills,"var(--blue)"],["Bills (Deleted)",s.dbStats.deletedBills,"var(--red)"],["ODBC Vouchers",s.dbStats.odbcVouchers,"var(--amber)"],["With Timestamp",s.dbStats.withTimestamp,"var(--green)"],["With Action",s.dbStats.withAction,"var(--green)"],["With Entered By",s.dbStats.withEnteredBy,"var(--green)"],["Audited",s.dbStats.withAuditStatus,"var(--purple)"],["Critical Flagged",s.dbStats.withCriticalFlag,"var(--red)"],["Parties",s.dbStats.totalParties,"var(--blue)"],["Stock Items",s.dbStats.totalStockItems,"var(--blue)"],["Fonepay Txns",s.dbStats.fonepayTxns,"var(--green)"],["Fonepay Linked",s.dbStats.fonepayLinked,"var(--green)"],["RBB Txns",s.dbStats.rbbTxns,"var(--blue)"],["Cheques",s.dbStats.totalCheques,"var(--amber)"],["Outstanding",s.dbStats.outstandingBills,"var(--amber)"],["Change Log",s.dbStats.changeLogEntries,"var(--purple)"],["Phone Maps",s.dbStats.phoneMappings,"var(--green)"],["Ledger Maps",s.dbStats.ledgerMappings,"var(--green)"],["Collection Batches",s.dbStats.collectionBatches,"var(--blue)"]].map(([p,g,y])=>n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"6px 10px",background:"var(--bg3)",borderRadius:"6px"},children:[n.jsx("span",{style:{color:"var(--t3)"},children:p}),n.jsx("span",{style:{fontWeight:"700",fontFamily:"var(--mono)",color:y},children:(g||0).toLocaleString()})]},p))}),s.actionBreakdown&&Object.keys(s.actionBreakdown).length>0&&n.jsxs("div",{style:{marginTop:"12px",padding:"10px",background:"var(--bg3)",borderRadius:"6px"},children:[n.jsx("div",{style:{fontSize:"10px",fontWeight:"700",color:"var(--t3)",textTransform:"uppercase",marginBottom:"8px"},children:"Voucher Action Breakdown"}),n.jsx("div",{style:{display:"flex",gap:"16px",fontSize:"12px"},children:Object.entries(s.actionBreakdown).map(([p,g])=>n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"10px",fontWeight:"700",background:p==="Create"?"var(--green-g)":p==="Alter"?"var(--amber-g)":"var(--blue-g)",color:p==="Create"?"var(--green)":p==="Alter"?"var(--amber)":"var(--blue)"},children:p}),n.jsx("span",{style:{fontWeight:"700",fontFamily:"var(--mono)"},children:g.toLocaleString()})]},p))})]})]})]}),n.jsxs("div",{className:"s-card",style:{marginBottom:"12px",overflow:"hidden"},children:[n.jsx("div",{onClick:()=>us(p=>({...p,summary:!p.summary})),style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 18px",cursor:"pointer",userSelect:"none"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[n.jsx("span",{style:{fontSize:"10px",color:"var(--t3)",transition:"transform .2s",transform:jr.summary?"rotate(90deg)":"rotate(0deg)",display:"inline-block"},children:""}),n.jsx("span",{style:{fontSize:"13px",fontWeight:"700",color:"var(--t1)"},children:"Category Summary"}),n.jsxs("span",{style:{fontSize:"10px",color:"var(--t3)",fontFamily:"var(--mono)"},children:[s.categorySummary.length," categories"]})]})}),jr.summary&&n.jsx("div",{style:{padding:"0 18px 14px"},children:n.jsxs("table",{style:{width:"100%",fontSize:"12px",borderCollapse:"collapse"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{borderBottom:"1px solid var(--border)"},children:[n.jsx("th",{style:{textAlign:"left",padding:"6px 8px",color:"var(--t3)",fontWeight:"600",fontSize:"10px",textTransform:"uppercase"},children:"Category"}),n.jsx("th",{style:{textAlign:"center",padding:"6px 8px",color:"var(--t3)",fontWeight:"600",fontSize:"10px",textTransform:"uppercase"},children:"Components"}),n.jsx("th",{style:{textAlign:"left",padding:"6px 8px",color:"var(--t3)",fontWeight:"600",fontSize:"10px",textTransform:"uppercase",width:"180px"},children:"Score"})]})}),n.jsx("tbody",{children:s.categorySummary.map((p,g)=>n.jsxs("tr",{style:{borderBottom:"1px solid var(--border)",cursor:"pointer"},onClick:()=>us(y=>({...y,[g]:!y[g]})),children:[n.jsxs("td",{style:{padding:"8px",fontWeight:"600",color:"var(--t1)"},children:[n.jsx("span",{style:{fontSize:"9px",color:"var(--t3)",marginRight:"6px"},children:jr[g]?"":""}),p.name]}),n.jsx("td",{style:{padding:"8px",textAlign:"center",fontFamily:"var(--mono)",color:"var(--t2)"},children:p.components}),n.jsx("td",{style:{padding:"8px"},children:c(p.avgScore)})]},g))})]})})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:"8px",gap:"6px"},children:[n.jsx("button",{style:{background:"none",border:"1px solid var(--border)",borderRadius:"6px",padding:"4px 10px",fontSize:"10px",color:"var(--t3)",cursor:"pointer",fontFamily:"var(--font)"},onClick:()=>{const p={};s.categories.forEach((g,y)=>p[y]=!0),us(p)},children:"Expand All"}),n.jsx("button",{style:{background:"none",border:"1px solid var(--border)",borderRadius:"6px",padding:"4px 10px",fontSize:"10px",color:"var(--t3)",cursor:"pointer",fontFamily:"var(--font)"},onClick:()=>us({}),children:"Collapse All"})]}),s.categories.map((p,g)=>{const y=Math.round(p.components.reduce((w,A)=>w+A.score,0)/p.components.length),S=jr[g];return n.jsxs("div",{className:"s-card",style:{marginBottom:"8px",overflow:"hidden"},children:[n.jsxs("div",{onClick:()=>us(w=>({...w,[g]:!w[g]})),style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 18px",cursor:"pointer",userSelect:"none"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[n.jsx("span",{style:{fontSize:"10px",color:"var(--t3)",transition:"transform .2s",transform:S?"rotate(90deg)":"rotate(0deg)",display:"inline-block"},children:""}),n.jsx("span",{style:{fontSize:"13px",fontWeight:"700",color:"var(--t1)"},children:p.name}),n.jsxs("span",{style:{fontSize:"10px",color:"var(--t3)",fontFamily:"var(--mono)"},children:[p.components.length," items"]})]}),c(y)]}),S&&n.jsx("div",{style:{padding:"0 18px 14px"},children:n.jsxs("table",{style:{width:"100%",fontSize:"11px",borderCollapse:"collapse"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{borderBottom:"1px solid var(--border)"},children:[n.jsx("th",{style:{textAlign:"left",padding:"5px 6px",color:"var(--t3)",fontWeight:"600",fontSize:"9px",textTransform:"uppercase"},children:"Component"}),n.jsx("th",{style:{textAlign:"left",padding:"5px 6px",color:"var(--t3)",fontWeight:"600",fontSize:"9px",textTransform:"uppercase"},children:"Source"}),n.jsx("th",{style:{textAlign:"left",padding:"5px 6px",color:"var(--t3)",fontWeight:"600",fontSize:"9px",textTransform:"uppercase"},children:"Method"}),n.jsx("th",{style:{textAlign:"left",padding:"5px 6px",color:"var(--t3)",fontWeight:"600",fontSize:"9px",textTransform:"uppercase"},children:"Refresh"}),n.jsx("th",{style:{textAlign:"left",padding:"5px 6px",color:"var(--t3)",fontWeight:"600",fontSize:"9px",textTransform:"uppercase",width:"140px"},children:"Score"}),n.jsx("th",{style:{textAlign:"left",padding:"5px 6px",color:"var(--t3)",fontWeight:"600",fontSize:"9px",textTransform:"uppercase"},children:"Detail"})]})}),n.jsx("tbody",{children:p.components.map((w,A)=>n.jsxs("tr",{style:{borderBottom:"1px solid var(--border)"},children:[n.jsx("td",{style:{padding:"6px",fontWeight:"600",color:"var(--t1)"},children:w.name}),n.jsx("td",{style:{padding:"6px",color:"var(--t2)",fontSize:"10px"},children:w.source}),n.jsx("td",{style:{padding:"6px",color:"var(--t3)",fontSize:"10px",fontFamily:"var(--mono)",maxWidth:"200px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:w.method,children:w.method}),n.jsx("td",{style:{padding:"6px",color:"var(--t3)",fontSize:"10px"},children:w.refresh}),n.jsx("td",{style:{padding:"6px"},children:c(w.score)}),n.jsxs("td",{style:{padding:"6px",color:"var(--t2)",fontSize:"10px"},children:[w.count!==null&&w.count!==void 0&&n.jsx("span",{style:{fontFamily:"var(--mono)",color:"var(--blue)",fontWeight:"600",marginRight:"6px"},children:w.count.toLocaleString()}),w.detail]})]},A))})]})})]},g)}),n.jsxs("div",{className:"s-card",style:{marginBottom:"20px",overflow:"hidden"},children:[n.jsxs("div",{onClick:()=>us(p=>({...p,priorities:!p.priorities})),style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 18px",cursor:"pointer",userSelect:"none"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[n.jsx("span",{style:{fontSize:"10px",color:"var(--t3)",transition:"transform .2s",transform:jr.priorities?"rotate(90deg)":"rotate(0deg)",display:"inline-block"},children:""}),n.jsx("span",{style:{fontSize:"13px",fontWeight:"700",color:"var(--t1)"},children:"Priority Improvements"}),n.jsxs("span",{style:{fontSize:"10px",color:"var(--t3)",fontFamily:"var(--mono)"},children:[s.priorityImprovements.length," items"]})]}),n.jsx("div",{style:{display:"flex",gap:"6px"},children:["HIGH","MED","LOW"].map(p=>{const g=s.priorityImprovements.filter(y=>y.priority===p).length;return g>0?n.jsxs("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"9px",fontWeight:"700",background:p==="HIGH"?"var(--red-g)":p==="MED"?"var(--amber-g)":"var(--blue-g)",color:p==="HIGH"?"var(--red)":p==="MED"?"var(--amber)":"var(--blue)"},children:[g," ",p]},p):null})})]}),jr.priorities&&n.jsx("div",{style:{padding:"0 18px 14px"},children:n.jsxs("table",{style:{width:"100%",fontSize:"11px",borderCollapse:"collapse"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{borderBottom:"1px solid var(--border)"},children:[n.jsx("th",{style:{textAlign:"left",padding:"5px 6px",color:"var(--t3)",fontWeight:"600",fontSize:"9px",textTransform:"uppercase",width:"60px"},children:"Priority"}),n.jsx("th",{style:{textAlign:"left",padding:"5px 6px",color:"var(--t3)",fontWeight:"600",fontSize:"9px",textTransform:"uppercase"},children:"Improvement"}),n.jsx("th",{style:{textAlign:"center",padding:"5px 6px",color:"var(--t3)",fontWeight:"600",fontSize:"9px",textTransform:"uppercase",width:"80px"},children:"Current"}),n.jsx("th",{style:{textAlign:"center",padding:"5px 6px",color:"var(--t3)",fontWeight:"600",fontSize:"9px",textTransform:"uppercase",width:"80px"},children:"Target"})]})}),n.jsx("tbody",{children:s.priorityImprovements.map((p,g)=>n.jsxs("tr",{style:{borderBottom:"1px solid var(--border)"},children:[n.jsx("td",{style:{padding:"6px"},children:n.jsx("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"9px",fontWeight:"700",background:p.priority==="HIGH"?"var(--red-g)":p.priority==="MED"?"var(--amber-g)":"var(--blue-g)",color:p.priority==="HIGH"?"var(--red)":p.priority==="MED"?"var(--amber)":"var(--blue)"},children:p.priority})}),n.jsx("td",{style:{padding:"6px",color:"var(--t1)",fontWeight:"500"},children:p.item}),n.jsx("td",{style:{padding:"6px",textAlign:"center"},children:c(p.current)}),n.jsx("td",{style:{padding:"6px",textAlign:"center"},children:c(p.target)})]},g))})]})})]})]})})()]}),n.jsxs("div",{className:`page ${f==="ledger-hierarchy"?"active":""}`,children:[n.jsxs("div",{className:"sec-head",style:{marginBottom:"16px"},children:[n.jsx("div",{className:"sec-title",style:{fontSize:"18px"},children:"Ledger Hierarchy"}),n.jsx("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:n.jsx("button",{className:"btn btn-p",style:{padding:"6px 14px",fontSize:"11px"},onClick:()=>Xu(zt),disabled:Xp||!zt,children:Xp?"Syncing...":"Refresh"})})]}),Dl.length>0&&n.jsx("div",{style:{display:"flex",gap:"0",marginBottom:"16px",borderBottom:"2px solid var(--border)",overflowX:"auto"},children:Dl.map(s=>n.jsxs("div",{onClick:()=>jC(s),style:{padding:"10px 20px",cursor:"pointer",fontSize:"13px",fontWeight:zt===s?700:400,color:zt===s?"var(--acc)":"var(--muted)",borderBottom:zt===s?"3px solid var(--acc)":"3px solid transparent",marginBottom:"-2px",whiteSpace:"nowrap",transition:"all 0.2s"},children:[s,hs[s]&&n.jsxs("span",{style:{fontSize:"10px",marginLeft:"6px",opacity:.6},children:["(",(hs[s].ledgers||[]).length,")"]})]},s))}),Qk&&Dl.length===0?n.jsx("div",{style:{textAlign:"center",padding:"40px",color:"var(--muted)"},children:"Loading companies from Tally..."}):Xp&&!hs[zt]?n.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"var(--muted)"},children:["Syncing ",zt,"..."]}):hs[zt]?(()=>{const s=hs[zt],l=s.ledgers||[],c=s.groups||[];let p=l;if(Gp){const B=Gp.toLowerCase();p=l.filter(D=>D.name.toLowerCase().includes(B)||(D.parent||"").toLowerCase().includes(B)||(D.hierarchy_path||"").toLowerCase().includes(B))}Pl&&(p=p.filter(B=>B.parent===Pl||(B.hierarchy_path||"").includes(Pl)));const g={};for(const B of p){const D=B.parent||"Ungrouped";g[D]||(g[D]=[]),g[D].push(B)}const y=Object.keys(g).sort(),S=p.filter(B=>B.balance_type==="Dr").reduce((B,D)=>B+(D.abs_balance||0),0),w=p.filter(B=>B.balance_type==="Cr").reduce((B,D)=>B+(D.abs_balance||0),0),A=[...new Set(l.map(B=>B.parent).filter(Boolean))].sort();return n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"10px",marginBottom:"16px"},children:[n.jsxs("div",{className:"s-card",style:{padding:"12px",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"20px",fontWeight:700,color:"var(--acc)"},children:l.length}),n.jsx("div",{style:{fontSize:"11px",color:"var(--muted)"},children:"Total Ledgers"})]}),n.jsxs("div",{className:"s-card",style:{padding:"12px",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"20px",fontWeight:700,color:"var(--acc)"},children:c.length}),n.jsx("div",{style:{fontSize:"11px",color:"var(--muted)"},children:"Account Groups"})]}),n.jsxs("div",{className:"s-card",style:{padding:"12px",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"20px",fontWeight:700,color:"#4caf50"},children:k(S)}),n.jsx("div",{style:{fontSize:"11px",color:"var(--muted)"},children:"Total Dr"})]}),n.jsxs("div",{className:"s-card",style:{padding:"12px",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"20px",fontWeight:700,color:"#f44336"},children:k(w)}),n.jsx("div",{style:{fontSize:"11px",color:"var(--muted)"},children:"Total Cr"})]})]}),n.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"14px",flexWrap:"wrap"},children:[n.jsx("input",{type:"text",placeholder:"Search ledger name, group...",value:Gp,onChange:B=>wm(B.target.value),className:"input",style:{flex:1,minWidth:"200px",padding:"8px 12px",fontSize:"12px"}}),n.jsxs("select",{value:Pl,onChange:B=>km(B.target.value),className:"input",style:{minWidth:"180px",padding:"8px 12px",fontSize:"12px"},children:[n.jsxs("option",{value:"",children:["All Groups (",l.length,")"]}),A.map(B=>n.jsxs("option",{value:B,children:[B," (",l.filter(D=>D.parent===B).length,")"]},B))]}),n.jsxs("div",{style:{fontSize:"11px",color:"var(--muted)",alignSelf:"center"},children:["Showing ",p.length," of ",l.length]})]}),y.map(B=>{var Te;const D=g[B],P=Xk[B]!==!1,V=D.filter(H=>H.balance_type==="Dr").reduce((H,se)=>H+(se.abs_balance||0),0),Q=D.filter(H=>H.balance_type==="Cr").reduce((H,se)=>H+(se.abs_balance||0),0),Me=((Te=D[0])==null?void 0:Te.hierarchy_path)||B;return n.jsxs("div",{className:"s-card",style:{marginBottom:"8px",padding:0,overflow:"hidden"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 14px",cursor:"pointer",background:"var(--bg2)",borderBottom:P?"1px solid var(--border)":"none"},onClick:()=>Cm(H=>({...H,[B]:!P})),children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("span",{style:{fontSize:"10px",color:"var(--muted)"},children:P?"":""}),n.jsx("span",{style:{fontWeight:600,fontSize:"13px"},children:B}),n.jsx("span",{style:{fontSize:"11px",color:"var(--muted)",background:"var(--bg)",padding:"1px 8px",borderRadius:"10px"},children:D.length})]}),n.jsxs("div",{style:{display:"flex",gap:"16px",fontSize:"11px"},children:[n.jsx("span",{style:{color:"var(--muted)",fontSize:"10px",maxWidth:"300px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Me}),V>0&&n.jsxs("span",{style:{color:"#4caf50"},children:["Dr: ",k(V)]}),Q>0&&n.jsxs("span",{style:{color:"#f44336"},children:["Cr: ",k(Q)]})]})]}),P&&n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:n.jsxs("table",{className:"tbl",style:{fontSize:"11px",width:"100%"},children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{style:{textAlign:"left",padding:"6px 10px"},children:"Ledger Name"}),n.jsx("th",{style:{textAlign:"right",padding:"6px 10px",width:"120px"},children:"Closing Balance"}),n.jsx("th",{style:{textAlign:"center",padding:"6px 10px",width:"50px"},children:"Dr/Cr"}),n.jsx("th",{style:{textAlign:"right",padding:"6px 10px",width:"120px"},children:"Opening Balance"})]})}),n.jsx("tbody",{children:D.sort((H,se)=>(se.abs_balance||0)-(H.abs_balance||0)).map((H,se)=>n.jsxs("tr",{style:{borderBottom:"1px solid var(--border)"},children:[n.jsx("td",{style:{padding:"5px 10px"},children:n.jsx("span",{onClick:ze=>{ze.stopPropagation(),SC(H.name,zt)},style:{cursor:"pointer",color:"var(--acc)",textDecoration:"underline",textDecorationStyle:"dotted"},children:H.name})}),n.jsx("td",{style:{padding:"5px 10px",textAlign:"right",fontWeight:600},children:k(H.abs_balance||0)}),n.jsx("td",{style:{padding:"5px 10px",textAlign:"center"},children:n.jsx("span",{style:{color:H.balance_type==="Dr"?"#4caf50":"#f44336",fontWeight:600,fontSize:"10px"},children:H.balance_type})}),n.jsx("td",{style:{padding:"5px 10px",textAlign:"right",color:"var(--muted)"},children:k(Math.abs(H.opening_balance||0))})]},se))})]})})]},B)})]})})():zt?n.jsx("div",{style:{textAlign:"center",padding:"40px",color:"var(--muted)"},children:"Select a company tab above to load ledgers."}):n.jsx("div",{style:{textAlign:"center",padding:"40px",color:"var(--muted)"},children:"No companies found. Make sure Tally is connected."}),Z&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",zIndex:9999,display:"flex",justifyContent:"center",alignItems:"center"},onClick:()=>Ei(null),children:n.jsxs("div",{style:{background:"var(--card)",borderRadius:"12px",width:"90%",maxWidth:"700px",maxHeight:"85vh",overflow:"auto",padding:"24px",boxShadow:"0 8px 32px rgba(0,0,0,0.3)"},onClick:s=>s.stopPropagation(),children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},children:[n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"18px",fontWeight:700},children:Z.name}),n.jsxs("div",{style:{fontSize:"12px",color:"var(--muted)"},children:[Z.parent," ",Z.company?`| ${Z.company}`:""]})]}),n.jsx("button",{onClick:()=>Ei(null),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer",color:"var(--muted)",padding:"0 4px"},children:"x"})]}),Z.loading?n.jsx("div",{style:{textAlign:"center",padding:"40px",color:"var(--muted)"},children:"Fetching details from Tally..."}):Z.error?n.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#f44336"},children:Z.error}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"10px",marginBottom:"16px"},children:[n.jsxs("div",{className:"s-card",style:{padding:"10px",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"18px",fontWeight:700,color:Z.balance_type==="Dr"?"#4caf50":"#f44336"},children:k(Z.abs_balance||0)}),n.jsxs("div",{style:{fontSize:"10px",color:"var(--muted)"},children:["Closing (",Z.balance_type,")"]})]}),n.jsxs("div",{className:"s-card",style:{padding:"10px",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"18px",fontWeight:700,color:"var(--text)"},children:k(Math.abs(Z.opening_balance||0))}),n.jsxs("div",{style:{fontSize:"10px",color:"var(--muted)"},children:["Opening (",(Z.opening_balance||0)>=0?"Dr":"Cr",")"]})]}),Z.credit_limit>0&&n.jsxs("div",{className:"s-card",style:{padding:"10px",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"18px",fontWeight:700},children:k(Z.credit_limit)}),n.jsx("div",{style:{fontSize:"10px",color:"var(--muted)"},children:"Credit Limit"})]}),Z.bill_count>0&&n.jsxs("div",{className:"s-card",style:{padding:"10px",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"18px",fontWeight:700,color:"var(--acc)"},children:Z.bill_count}),n.jsx("div",{style:{fontSize:"10px",color:"var(--muted)"},children:"Bills"})]})]}),(Z.address||Z.phone||Z.email||Z.gstin||Z.pan)&&n.jsxs("div",{className:"s-card",style:{padding:"12px",marginBottom:"16px"},children:[n.jsx("div",{style:{fontSize:"12px",fontWeight:600,marginBottom:"8px"},children:"Contact & Tax Info"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"6px",fontSize:"11px"},children:[Z.address&&n.jsxs("div",{children:[n.jsx("span",{style:{color:"var(--muted)"},children:"Address:"})," ",Z.address]}),Z.state&&n.jsxs("div",{children:[n.jsx("span",{style:{color:"var(--muted)"},children:"State:"})," ",Z.state]}),Z.phone&&n.jsxs("div",{children:[n.jsx("span",{style:{color:"var(--muted)"},children:"Phone:"})," ",Z.phone]}),Z.contact&&n.jsxs("div",{children:[n.jsx("span",{style:{color:"var(--muted)"},children:"Contact:"})," ",Z.contact]}),Z.email&&n.jsxs("div",{children:[n.jsx("span",{style:{color:"var(--muted)"},children:"Email:"})," ",Z.email]}),Z.gstin&&n.jsxs("div",{children:[n.jsx("span",{style:{color:"var(--muted)"},children:"GSTIN:"})," ",Z.gstin]}),Z.gst_type&&n.jsxs("div",{children:[n.jsx("span",{style:{color:"var(--muted)"},children:"GST Type:"})," ",Z.gst_type]}),Z.pan&&n.jsxs("div",{children:[n.jsx("span",{style:{color:"var(--muted)"},children:"PAN:"})," ",Z.pan]}),Z.credit_days>0&&n.jsxs("div",{children:[n.jsx("span",{style:{color:"var(--muted)"},children:"Credit Days:"})," ",Z.credit_days]})]})]}),Z.bills&&Z.bills.length>0&&n.jsxs("div",{children:[n.jsxs("div",{style:{fontSize:"12px",fontWeight:600,marginBottom:"8px"},children:["Outstanding Bills (",Z.bills.length,")"]}),n.jsx("div",{style:{maxHeight:"300px",overflowY:"auto",border:"1px solid var(--border)",borderRadius:"8px"},children:n.jsxs("table",{className:"tbl",style:{fontSize:"11px",width:"100%"},children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{style:{textAlign:"left",padding:"6px 10px"},children:"Bill Name"}),n.jsx("th",{style:{textAlign:"left",padding:"6px 10px",width:"90px"},children:"Date"}),n.jsx("th",{style:{textAlign:"right",padding:"6px 10px",width:"110px"},children:"Balance"}),n.jsx("th",{style:{textAlign:"center",padding:"6px 10px",width:"45px"},children:"Dr/Cr"}),n.jsx("th",{style:{textAlign:"left",padding:"6px 10px",width:"90px"},children:"Due Date"})]})}),n.jsx("tbody",{children:Z.bills.sort((s,l)=>(l.abs_balance||0)-(s.abs_balance||0)).map((s,l)=>n.jsxs("tr",{style:{borderBottom:"1px solid var(--border)"},children:[n.jsx("td",{style:{padding:"5px 10px"},children:s.name}),n.jsx("td",{style:{padding:"5px 10px",color:"var(--muted)"},children:s.date||"-"}),n.jsx("td",{style:{padding:"5px 10px",textAlign:"right",fontWeight:600},children:k(s.abs_balance)}),n.jsx("td",{style:{padding:"5px 10px",textAlign:"center"},children:n.jsx("span",{style:{color:s.balance_type==="Dr"?"#4caf50":"#f44336",fontWeight:600,fontSize:"10px"},children:s.balance_type})}),n.jsx("td",{style:{padding:"5px 10px",color:"var(--muted)"},children:s.credit_period||"-"})]},l))})]})})]}),(!Z.bills||Z.bills.length===0)&&!Z.address&&!Z.phone&&!Z.gstin&&n.jsx("div",{style:{textAlign:"center",padding:"20px",color:"var(--muted)",fontSize:"12px"},children:"No additional details available for this ledger."})]})]})})]}),n.jsxs("div",{className:`page ${f==="ledger-account"?"active":""}`,children:[n.jsx("div",{className:"sec-head la-no-print",style:{marginBottom:"16px"},children:n.jsx("div",{className:"sec-title",style:{fontSize:"18px"},children:" Ledger Account"})}),n.jsxs("div",{className:"la-no-print",style:{display:"flex",gap:"10px",marginBottom:"16px",flexWrap:"wrap",alignItems:"flex-end"},children:[n.jsxs("div",{style:{flex:1,minWidth:"200px",position:"relative"},ref:ik,children:[n.jsx("label",{style:{fontSize:"11px",fontWeight:"600",color:"var(--t3)",display:"block",marginBottom:"4px"},children:"Ledger Name"}),n.jsx("input",{type:"text",placeholder:"Search party name...",value:$,onChange:s=>GC(s.target.value),onKeyDown:s=>{s.key==="Enter"&&$.trim()&&(na(!1),sh($.trim())),s.key==="Escape"&&na(!1)},onFocus:()=>{gp.length>0&&na(!0)},style:{width:"100%",padding:"8px 12px",fontSize:"13px",border:"1px solid var(--border)",borderRadius:"8px",background:"var(--bg)",color:"var(--t1)",boxSizing:"border-box"}}),ak&&gp.length>0&&n.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,zIndex:100,background:"var(--card)",border:"1px solid var(--border)",borderRadius:"0 0 8px 8px",maxHeight:"250px",overflowY:"auto",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},children:gp.map((s,l)=>n.jsxs("div",{style:{padding:"8px 12px",fontSize:"13px",color:"var(--t1)",cursor:"pointer",borderBottom:"1px solid var(--border)"},onMouseDown:()=>ZC(s.name),onMouseEnter:c=>c.target.style.background="var(--bg)",onMouseLeave:c=>c.target.style.background="transparent",children:[s.name,s.parent&&n.jsxs("span",{style:{fontSize:"11px",color:"var(--t3)",marginLeft:"8px"},children:["(",s.parent,")"]})]},l))})]}),n.jsxs("div",{children:[n.jsx("label",{style:{fontSize:"11px",fontWeight:"600",color:"var(--t3)",display:"block",marginBottom:"4px"},children:"From"}),n.jsx("input",{type:"date",value:xi,onChange:s=>rk(s.target.value),style:{padding:"8px 10px",fontSize:"13px",border:"1px solid var(--border)",borderRadius:"8px",background:"var(--bg)",color:"var(--t1)"}})]}),n.jsxs("div",{children:[n.jsx("label",{style:{fontSize:"11px",fontWeight:"600",color:"var(--t3)",display:"block",marginBottom:"4px"},children:"To"}),n.jsx("input",{type:"date",value:gi,onChange:s=>sk(s.target.value),style:{padding:"8px 10px",fontSize:"13px",border:"1px solid var(--border)",borderRadius:"8px",background:"var(--bg)",color:"var(--t1)"}})]}),n.jsx("button",{className:"btn btn-p",style:{padding:"8px 16px",fontSize:"13px"},onClick:()=>$.trim()&&sh($.trim()),disabled:Ve||!$.trim(),children:Ve?"Loading...":"View"})]}),on&&n.jsx("div",{className:"la-no-print",style:{background:"#fef2f2",color:"#dc2626",padding:"10px 14px",borderRadius:"8px",fontSize:"13px",marginBottom:"12px"},children:on}),Ve&&n.jsx("div",{style:{textAlign:"center",padding:"40px",color:"var(--t3)"},children:"Loading ledger transactions..."}),G&&!Ve&&n.jsxs("div",{className:"la-print-area",children:[n.jsxs("div",{className:"la-print-header",style:{display:"none"},children:[n.jsx("div",{className:"la-print-title",children:G.ledgerName}),n.jsxs("div",{className:"la-print-subtitle",children:["Group: ",G.parent,xi||gi?` | Period: ${xi||"Start"} to ${gi||"Today"}`:""]})]}),n.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"16px",flexWrap:"wrap"},children:[n.jsxs("div",{className:"la-no-print",style:{background:"var(--card)",borderRadius:"10px",padding:"14px 20px",flex:1,minWidth:"150px"},children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)",fontWeight:"600"},children:"Ledger"}),n.jsx("div",{style:{fontSize:"16px",fontWeight:"700",color:"var(--t1)",marginTop:"2px"},children:G.ledgerName}),n.jsxs("div",{style:{fontSize:"11px",color:"var(--t3)"},children:["Group: ",G.parent]})]}),n.jsxs("div",{className:"la-no-print",style:{background:"var(--card)",borderRadius:"10px",padding:"14px 20px",textAlign:"center",minWidth:"120px"},children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)",fontWeight:"600"},children:"Opening Balance"}),n.jsxs("div",{style:{fontSize:"16px",fontWeight:"700",color:G.openingBalance>=0?"var(--blue)":"var(--green)",marginTop:"2px"},children:[k(G.openingBalance)," ",G.openingBalance>=0?"Dr":"Cr"]})]}),n.jsxs("div",{className:"la-no-print",style:{background:"var(--card)",borderRadius:"10px",padding:"14px 20px",textAlign:"center",minWidth:"120px"},children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)",fontWeight:"600"},children:"Closing Balance"}),n.jsxs("div",{style:{fontSize:"16px",fontWeight:"700",color:G.closingBalance>=0?"var(--blue)":"var(--green)",marginTop:"2px"},children:[k(G.closingBalance)," ",G.closingBalance>=0?"Dr":"Cr"]})]}),n.jsxs("div",{className:"la-no-print",style:{background:"var(--card)",borderRadius:"10px",padding:"14px 20px",textAlign:"center",minWidth:"100px"},children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)",fontWeight:"600"},children:"Transactions"}),n.jsx("div",{style:{fontSize:"16px",fontWeight:"700",color:"var(--t1)",marginTop:"2px"},children:G.transactionCount})]}),n.jsx("button",{className:"btn la-no-print",style:{padding:"10px 16px",fontSize:"13px",background:"var(--card)",border:"1px solid var(--border)",borderRadius:"10px",color:"var(--t1)",cursor:"pointer",alignSelf:"center"},onClick:()=>window.print(),children:" Print"})]}),n.jsx("div",{style:{background:"var(--card)",borderRadius:"10px",overflow:"hidden"},children:n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{background:"var(--bg)",borderBottom:"2px solid var(--border)"},children:[n.jsx("th",{style:{padding:"10px 12px",textAlign:"left",fontWeight:"600",color:"var(--t2)"},children:"Date"}),n.jsx("th",{style:{padding:"10px 12px",textAlign:"left",fontWeight:"600",color:"var(--t2)"},children:"Particulars"}),n.jsx("th",{style:{padding:"10px 12px",textAlign:"left",fontWeight:"600",color:"var(--t2)"},children:"Vch Type"}),n.jsx("th",{style:{padding:"10px 12px",textAlign:"left",fontWeight:"600",color:"var(--t2)"},children:"Vch No."}),n.jsx("th",{style:{padding:"10px 12px",textAlign:"right",fontWeight:"600",color:"var(--t2)"},children:"Debit"}),n.jsx("th",{style:{padding:"10px 12px",textAlign:"right",fontWeight:"600",color:"var(--t2)"},children:"Credit"}),n.jsx("th",{style:{padding:"10px 12px",textAlign:"right",fontWeight:"600",color:"var(--t2)"},children:"Balance"})]})}),n.jsxs("tbody",{children:[n.jsxs("tr",{style:{borderBottom:"1px solid var(--border)",background:"var(--bg)"},children:[n.jsx("td",{style:{padding:"8px 12px",color:"var(--t3)",fontStyle:"italic"}}),n.jsx("td",{style:{padding:"8px 12px",fontWeight:"600",color:"var(--t1)"},colSpan:3,children:"Opening Balance"}),n.jsx("td",{style:{padding:"8px 12px",textAlign:"right",fontWeight:"600",color:"var(--blue)"},children:G.openingBalance>0?k(G.openingBalance):""}),n.jsx("td",{style:{padding:"8px 12px",textAlign:"right",fontWeight:"600",color:"var(--green)"},children:G.openingBalance<0?k(G.openingBalance):""}),n.jsxs("td",{style:{padding:"8px 12px",textAlign:"right",fontWeight:"600",fontFamily:"var(--mono)",color:"var(--t1)"},children:[k(G.openingBalance)," ",G.openingBalance>=0?"Dr":"Cr"]})]}),G.transactions.map((s,l)=>{const c=s.date,p=c?`${c.substring(6,8)}/${c.substring(4,6)}/${c.substring(0,4)}`:"";return n.jsxs("tr",{style:{borderBottom:"1px solid var(--border)",cursor:s.masterId?"pointer":"default"},onClick:()=>s.masterId&&eN(s.masterId),className:s.masterId?"la-clickable-row":"",children:[n.jsx("td",{style:{padding:"8px 12px",color:"var(--t2)",whiteSpace:"nowrap"},children:p}),n.jsx("td",{style:{padding:"8px 12px",color:"var(--t1)",maxWidth:"250px",overflow:"hidden",textOverflow:"ellipsis"},title:s.narration||s.particulars,children:s.particulars}),n.jsx("td",{style:{padding:"8px 12px",color:"var(--t2)"},children:s.voucherType}),n.jsx("td",{style:{padding:"8px 12px",color:"var(--t2)",fontFamily:"var(--mono)",fontSize:"11px"},children:s.voucherNumber}),n.jsx("td",{style:{padding:"8px 12px",textAlign:"right",fontFamily:"var(--mono)",color:s.debit>0?"var(--blue)":"var(--t3)"},children:s.debit>0?k(s.debit):""}),n.jsx("td",{style:{padding:"8px 12px",textAlign:"right",fontFamily:"var(--mono)",color:s.credit>0?"var(--green)":"var(--t3)"},children:s.credit>0?k(s.credit):""}),n.jsxs("td",{style:{padding:"8px 12px",textAlign:"right",fontFamily:"var(--mono)",fontWeight:"600",color:"var(--t1)",whiteSpace:"nowrap"},children:[k(s.runningBalance)," ",s.runningBalance>=0?"Dr":"Cr"]})]},l)}),n.jsxs("tr",{style:{borderTop:"2px solid var(--border)",background:"var(--bg)"},children:[n.jsx("td",{style:{padding:"10px 12px"}}),n.jsx("td",{style:{padding:"10px 12px",fontWeight:"700",color:"var(--t1)"},colSpan:3,children:"Closing Balance"}),n.jsx("td",{style:{padding:"10px 12px",textAlign:"right",fontWeight:"700",fontFamily:"var(--mono)",color:"var(--blue)"},children:G.closingBalance>0?k(G.closingBalance):""}),n.jsx("td",{style:{padding:"10px 12px",textAlign:"right",fontWeight:"700",fontFamily:"var(--mono)",color:"var(--green)"},children:G.closingBalance<0?k(G.closingBalance):""}),n.jsxs("td",{style:{padding:"10px 12px",textAlign:"right",fontWeight:"700",fontFamily:"var(--mono)",color:"var(--t1)"},children:[k(G.closingBalance)," ",G.closingBalance>=0?"Dr":"Cr"]})]})]})]})}),G.transactions.length>0&&(()=>{const s=G.transactions.reduce((l,c)=>({dr:l.dr+c.debit,cr:l.cr+c.credit}),{dr:0,cr:0});return n.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"12px",justifyContent:"flex-end"},children:[n.jsxs("div",{style:{background:"var(--blue-g)",borderRadius:"8px",padding:"10px 16px",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--blue)",fontWeight:"600"},children:"Total Debit"}),n.jsx("div",{style:{fontSize:"15px",fontWeight:"700",color:"var(--blue)"},children:k(s.dr)})]}),n.jsxs("div",{style:{background:"#dcfce7",borderRadius:"8px",padding:"10px 16px",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--green)",fontWeight:"600"},children:"Total Credit"}),n.jsx("div",{style:{fontSize:"15px",fontWeight:"700",color:"var(--green)"},children:k(s.cr)})]})]})})()]}),!G&&!Ve&&!on&&n.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"var(--t3)"},children:[n.jsx("div",{style:{fontSize:"40px",marginBottom:"12px"},children:""}),n.jsx("div",{style:{fontSize:"14px",fontWeight:"600"},children:"Ledger Account View"}),n.jsx("div",{style:{fontSize:"12px",marginTop:"4px"},children:"Type a ledger name above and press Enter to view transactions"})]}),(ur||hf)&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.6)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},onClick:()=>{cl(null),pl(!1)},children:n.jsxs("div",{style:{background:"var(--card)",borderRadius:"12px",maxWidth:"700px",width:"100%",maxHeight:"80vh",overflow:"auto",padding:"24px",position:"relative"},onClick:s=>s.stopPropagation(),children:[n.jsx("button",{style:{position:"absolute",top:"12px",right:"12px",background:"none",border:"none",fontSize:"20px",cursor:"pointer",color:"var(--t3)",lineHeight:1},onClick:()=>{cl(null),pl(!1)},children:""}),hf&&n.jsx("div",{style:{textAlign:"center",padding:"40px",color:"var(--t3)"},children:"Loading voucher details..."}),ur&&ur.error&&n.jsxs("div",{style:{color:"#dc2626",padding:"20px"},children:["Error: ",ur.error]}),ur&&!ur.error&&(()=>{var w,A;const s=ur.voucher||ur,l=((w=s==null?void 0:s.ALLLEDGERENTRIES)==null?void 0:w.LIST)||(s==null?void 0:s.ledgerEntries)||[],c=((A=s==null?void 0:s.ALLINVENTORYENTRIES)==null?void 0:A.LIST)||(s==null?void 0:s.inventoryEntries)||[],p=Array.isArray(l)?l:[l],g=Array.isArray(c)?c:c?[c]:[],y=(s==null?void 0:s.DATE)||(s==null?void 0:s.date)||"",S=y?`${y.substring(6,8)}/${y.substring(4,6)}/${y.substring(0,4)}`:"";return n.jsxs("div",{children:[n.jsxs("div",{style:{fontSize:"16px",fontWeight:"700",color:"var(--t1)",marginBottom:"4px"},children:[(s==null?void 0:s.VOUCHERTYPENAME)||(s==null?void 0:s.voucherTypeName)||"Voucher"," #",(s==null?void 0:s.VOUCHERNUMBER)||(s==null?void 0:s.voucherNumber)||""]}),n.jsxs("div",{style:{fontSize:"12px",color:"var(--t3)",marginBottom:"16px"},children:["Date: ",S,s!=null&&s.NARRATION||s!=null&&s.narration?` | ${s.NARRATION||s.narration}`:""]}),p.length>0&&n.jsxs("div",{style:{marginBottom:"16px"},children:[n.jsx("div",{style:{fontSize:"13px",fontWeight:"600",color:"var(--t2)",marginBottom:"8px"},children:"Ledger Entries"}),n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{borderBottom:"2px solid var(--border)"},children:[n.jsx("th",{style:{padding:"8px 10px",textAlign:"left",color:"var(--t3)"},children:"Ledger"}),n.jsx("th",{style:{padding:"8px 10px",textAlign:"right",color:"var(--t3)"},children:"Debit"}),n.jsx("th",{style:{padding:"8px 10px",textAlign:"right",color:"var(--t3)"},children:"Credit"})]})}),n.jsx("tbody",{children:p.map((B,D)=>{const P=parseFloat((B==null?void 0:B.AMOUNT)||(B==null?void 0:B.amount)||0);return n.jsxs("tr",{style:{borderBottom:"1px solid var(--border)"},children:[n.jsx("td",{style:{padding:"6px 10px",color:"var(--t1)"},children:(B==null?void 0:B.LEDGERNAME)||(B==null?void 0:B.ledgerName)||"-"}),n.jsx("td",{style:{padding:"6px 10px",textAlign:"right",fontFamily:"var(--mono)",color:"var(--blue)"},children:P<0?k(Math.abs(P)):""}),n.jsx("td",{style:{padding:"6px 10px",textAlign:"right",fontFamily:"var(--mono)",color:"var(--green)"},children:P>0?k(P):""})]},D)})})]})]}),g.length>0&&n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"13px",fontWeight:"600",color:"var(--t2)",marginBottom:"8px"},children:"Inventory Entries"}),n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{borderBottom:"2px solid var(--border)"},children:[n.jsx("th",{style:{padding:"8px 10px",textAlign:"left",color:"var(--t3)"},children:"Item"}),n.jsx("th",{style:{padding:"8px 10px",textAlign:"right",color:"var(--t3)"},children:"Qty"}),n.jsx("th",{style:{padding:"8px 10px",textAlign:"right",color:"var(--t3)"},children:"Rate"}),n.jsx("th",{style:{padding:"8px 10px",textAlign:"right",color:"var(--t3)"},children:"Amount"})]})}),n.jsx("tbody",{children:g.map((B,D)=>{const P=(B==null?void 0:B.ACTUALQTY)||(B==null?void 0:B.BILLEDQTY)||(B==null?void 0:B.actualQty)||(B==null?void 0:B.billedQty)||"",V=(B==null?void 0:B.RATE)||(B==null?void 0:B.rate)||"",Q=(B==null?void 0:B.AMOUNT)||(B==null?void 0:B.amount)||"";return n.jsxs("tr",{style:{borderBottom:"1px solid var(--border)"},children:[n.jsx("td",{style:{padding:"6px 10px",color:"var(--t1)"},children:(B==null?void 0:B.STOCKITEMNAME)||(B==null?void 0:B.stockItemName)||"-"}),n.jsx("td",{style:{padding:"6px 10px",textAlign:"right",fontFamily:"var(--mono)",color:"var(--t2)"},children:P}),n.jsx("td",{style:{padding:"6px 10px",textAlign:"right",fontFamily:"var(--mono)",color:"var(--t2)"},children:V}),n.jsx("td",{style:{padding:"6px 10px",textAlign:"right",fontFamily:"var(--mono)",color:"var(--t1)"},children:k(Math.abs(parseFloat(Q)||0))})]},D)})})]})]})]})})()]})})]}),n.jsxs("div",{className:`page ${f==="eod-recon"?"active":""}`,children:[n.jsxs("div",{className:"sec-head",style:{marginBottom:"16px",flexWrap:"wrap",gap:"8px"},children:[n.jsx("div",{className:"sec-title",style:{fontSize:"18px"},children:"EOD Reconciliation"}),n.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[n.jsx("input",{type:"date",value:ps.length===8?`${ps.slice(0,4)}-${ps.slice(4,6)}-${ps.slice(6,8)}`:ps,onChange:s=>{const l=s.target.value.replace(/-/g,"");Hk(l),ym(null),ro(l)},style:{padding:"6px 10px",fontSize:"12px",border:"1px solid var(--border)",borderRadius:"6px",background:"var(--bg)",color:"var(--t1)"}}),n.jsx("button",{className:"btn btn-p",style:{padding:"6px 14px",fontSize:"11px"},onClick:()=>ro(),disabled:Li,children:Li?"Loading...":"Refresh"})]})]}),Li&&!zi&&n.jsx("div",{style:{textAlign:"center",padding:"40px",color:"var(--t3)"},children:"Loading reconciliation data..."}),zi&&(()=>{var c,p,g,y,S,w,A,B,D,P,V,Q,Me,Te,H,se,ze,Ke,Cn,er,Ls,et,Xt,Ie,Sd,x0,g0,f0,m0,y0,v0,b0,j0,S0,w0,k0,C0,N0,_0,A0,R0,B0,T0,z0,L0,E0,F0,D0,P0,I0,O0,W0,M0,$0,q0;const s=zi,l=q=>k(q);return n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("div",{style:{fontSize:"13px",fontWeight:"700",color:"var(--t2)",marginBottom:"10px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Sales Summary"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"10px"},children:[Object.entries(((c=s.billing)==null?void 0:c.sales)||{}).map(([q,ie])=>n.jsxs("div",{className:"s-card",style:{padding:"14px",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"18px",fontWeight:"800",color:"var(--blue)",fontFamily:"var(--mono)"},children:l(ie.total)}),n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)",marginTop:"4px"},children:q}),n.jsxs("div",{style:{fontSize:"10px",color:"var(--t4)"},children:[ie.count," bill",ie.count!==1?"s":""]})]},q)),n.jsxs("div",{className:"s-card",style:{padding:"14px",textAlign:"center",background:"var(--bg3)"},children:[n.jsx("div",{style:{fontSize:"18px",fontWeight:"800",color:"var(--t1)",fontFamily:"var(--mono)"},children:l(((p=s.billing)==null?void 0:p.totalSales)||0)}),n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)",marginTop:"4px"},children:"Total Sales"}),n.jsxs("div",{style:{fontSize:"10px",color:"var(--t4)"},children:[((g=s.billing)==null?void 0:g.salesCount)||0," bills"]})]})]})]}),n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("div",{style:{fontSize:"13px",fontWeight:"700",color:"var(--t2)",marginBottom:"10px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Payments Received (Billing)"}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"10px"},children:Object.entries(((y=s.billing)==null?void 0:y.receipts)||{}).filter(([,q])=>q>0).map(([q,ie])=>n.jsxs("div",{className:"s-card",style:{padding:"14px",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"18px",fontWeight:"800",color:"var(--green)",fontFamily:"var(--mono)"},children:l(ie)}),n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)",marginTop:"4px"},children:q})]},q))}),n.jsxs("div",{style:{marginTop:"8px",display:"flex",gap:"16px",fontSize:"12px",color:"var(--t3)"},children:[n.jsxs("span",{children:["Total: ",n.jsx("strong",{style:{color:"var(--green)"},children:l(((S=s.billing)==null?void 0:S.totalReceipts)||0)})]}),n.jsxs("span",{children:[((w=s.billing)==null?void 0:w.receiptCount)||0," receipt",(((A=s.billing)==null?void 0:A.receiptCount)||0)!==1?"s":""]})]})]}),n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("div",{style:{fontSize:"13px",fontWeight:"700",color:"var(--t2)",marginBottom:"10px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Reconciliation Checks"}),n.jsxs("div",{style:{display:"grid",gap:"8px"},children:[(()=>{var ie;const q=(ie=s.checks)==null?void 0:ie.qrVsFonepay;return!q||q.system===0&&q.external===0?null:n.jsxs("div",{className:"s-card",style:{padding:"12px 16px",borderLeft:`3px solid ${q.match?"var(--green)":"var(--red)"}`,display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"8px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("span",{style:{fontSize:"16px"},children:q.match?"":""}),n.jsx("span",{style:{fontSize:"13px",fontWeight:"600",color:"var(--t1)"},children:"QR vs Fonepay Portal"})]}),n.jsxs("div",{style:{display:"flex",gap:"16px",fontSize:"12px"},children:[n.jsxs("span",{style:{color:"var(--t3)"},children:["Tally QR: ",n.jsx("strong",{style:{color:"var(--t1)"},children:l(q.system)})]}),n.jsxs("span",{style:{color:"var(--t3)"},children:["Portal: ",n.jsx("strong",{style:{color:"var(--t1)"},children:l(q.external)})]}),!q.match&&n.jsxs("span",{style:{color:"var(--red)",fontWeight:"700"},children:["Diff: ",l(q.diff)]})]})]})})(),(()=>{var ie;const q=(ie=s.checks)==null?void 0:ie.fonepayVsRbb;return!q||q.system===0&&q.external===0?null:n.jsxs("div",{className:"s-card",style:{padding:"12px 16px",borderLeft:`3px solid ${q.match?"var(--green)":"var(--red)"}`},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"8px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("span",{style:{fontSize:"16px"},children:q.match?"":""}),n.jsx("span",{style:{fontSize:"13px",fontWeight:"600",color:"var(--t1)"},children:"Fonepay vs RBB Settlement"})]}),n.jsxs("div",{style:{display:"flex",gap:"16px",fontSize:"12px"},children:[n.jsxs("span",{style:{color:"var(--t3)"},children:["Portal: ",n.jsx("strong",{style:{color:"var(--t1)"},children:l(q.system)})]}),n.jsxs("span",{style:{color:"var(--t3)"},children:["RBB: ",n.jsx("strong",{style:{color:"var(--t1)"},children:l(q.external)})]}),!q.match&&n.jsxs("span",{style:{color:"var(--red)",fontWeight:"700"},children:["Diff: ",l(q.diff)]})]})]}),q.externalDetail&&n.jsxs("div",{style:{fontSize:"10px",color:"var(--t4)",marginTop:"6px",paddingLeft:"28px"},children:["ESEWASTLMT: ",l(q.externalDetail.esewastlmt)," + FONEPAY: ",l(q.externalDetail.fonepay)]}),q.note&&n.jsx("div",{style:{fontSize:"11px",color:"var(--amber)",marginTop:"4px",paddingLeft:"28px"},children:q.note})]})})(),((D=(B=s.checks)==null?void 0:B.esewa)==null?void 0:D.system)>0&&n.jsxs("div",{className:"s-card",style:{padding:"12px 16px",borderLeft:"3px solid var(--t4)",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"8px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("span",{style:{fontSize:"14px",color:"var(--t3)"},children:"i"}),n.jsx("span",{style:{fontSize:"13px",fontWeight:"600",color:"var(--t1)"},children:"Esewa (Direct Personal)"})]}),n.jsx("span",{style:{fontSize:"14px",fontWeight:"700",color:"var(--t1)",fontFamily:"var(--mono)"},children:l(s.checks.esewa.system)})]}),((V=(P=s.checks)==null?void 0:P.bankDeposit)==null?void 0:V.system)>0&&n.jsxs("div",{className:"s-card",style:{padding:"12px 16px",borderLeft:"3px solid var(--t4)",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"8px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("span",{style:{fontSize:"14px",color:"var(--t3)"},children:"i"}),n.jsx("span",{style:{fontSize:"13px",fontWeight:"600",color:"var(--t1)"},children:"Bank Deposit"})]}),n.jsx("span",{style:{fontSize:"14px",fontWeight:"700",color:"var(--t1)",fontFamily:"var(--mono)"},children:l(s.checks.bankDeposit.system)})]}),!((Me=(Q=s.checks)==null?void 0:Q.qrVsFonepay)!=null&&Me.system)&&!((H=(Te=s.checks)==null?void 0:Te.qrVsFonepay)!=null&&H.external)&&!((ze=(se=s.checks)==null?void 0:se.fonepayVsRbb)!=null&&ze.system)&&!((Cn=(Ke=s.checks)==null?void 0:Ke.fonepayVsRbb)!=null&&Cn.external)&&!((Ls=(er=s.checks)==null?void 0:er.esewa)!=null&&Ls.system)&&!((Xt=(et=s.checks)==null?void 0:et.bankDeposit)!=null&&Xt.system)&&n.jsx("div",{style:{fontSize:"12px",color:"var(--t4)",padding:"10px"},children:"No QR/Esewa/Bank data for this date"})]})]}),s.sflVsReceipt&&s.sflVsReceipt.totalSflBills>0&&n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("div",{style:{fontSize:"13px",fontWeight:"700",color:"var(--t2)",marginBottom:"10px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"SFL vs Receipt Status"}),n.jsxs("div",{className:"s-card",style:{padding:"14px"},children:[n.jsxs("div",{style:{display:"flex",gap:"16px",fontSize:"12px",marginBottom:"10px",flexWrap:"wrap"},children:[n.jsxs("span",{style:{color:"var(--t3)"},children:["Bills with SFL: ",n.jsx("strong",{style:{color:"var(--t1)"},children:s.sflVsReceipt.totalSflBills})]}),n.jsxs("span",{style:{color:"var(--t3)"},children:["Receipts: ",n.jsx("strong",{style:{color:"var(--t1)"},children:s.sflVsReceipt.totalDashReceipts})]}),n.jsxs("span",{style:{color:"var(--t3)"},children:["Matched: ",n.jsx("strong",{style:{color:"var(--green)"},children:s.sflVsReceipt.matched})]})]}),((Ie=s.sflVsReceipt.sflOnly)==null?void 0:Ie.length)>0&&n.jsxs("div",{style:{marginBottom:"10px"},children:[n.jsxs("div",{style:{fontSize:"11px",fontWeight:"700",color:"var(--red)",marginBottom:"6px"},children:["No Receipt Created (",s.sflVsReceipt.sflOnly.length," bills)"]}),s.sflVsReceipt.sflOnly.slice(0,15).map((q,ie)=>n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"3px 0",fontSize:"11px",borderBottom:"1px solid var(--border)"},children:[n.jsx("span",{style:{color:"var(--t2)"},children:q.party_name}),n.jsxs("div",{style:{display:"flex",gap:"8px"},children:[n.jsxs("span",{style:{color:"var(--t3)",fontFamily:"var(--mono)",fontSize:"10px"},children:["#",q.voucher_number]}),n.jsx("span",{style:{fontWeight:"600",color:"var(--red)",fontFamily:"var(--mono)"},children:l(q.udf_payment_total)})]})]},ie)),s.sflVsReceipt.sflOnly.length>15&&n.jsxs("div",{style:{fontSize:"10px",color:"var(--t4)",marginTop:"4px"},children:["+",s.sflVsReceipt.sflOnly.length-15," more"]})]}),((Sd=s.sflVsReceipt.amountMismatch)==null?void 0:Sd.length)>0&&n.jsxs("div",{style:{marginBottom:"10px"},children:[n.jsxs("div",{style:{fontSize:"11px",fontWeight:"700",color:"var(--amber)",marginBottom:"6px"},children:["Amount Mismatch (",s.sflVsReceipt.amountMismatch.length,")"]}),s.sflVsReceipt.amountMismatch.map((q,ie)=>n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"3px 0",fontSize:"11px",borderBottom:"1px solid var(--border)"},children:[n.jsx("span",{style:{color:"var(--t2)"},children:q.party_name}),n.jsxs("div",{style:{display:"flex",gap:"8px"},children:[n.jsxs("span",{style:{color:"var(--t3)"},children:["SFL: ",l(q.sfl_amount)]}),n.jsxs("span",{style:{color:"var(--t3)"},children:["Rcpt: ",l(q.receipt_amount)]}),n.jsxs("span",{style:{fontWeight:"600",color:"var(--amber)",fontFamily:"var(--mono)"},children:["Diff: ",l(q.diff)]})]})]},ie))]}),((x0=s.sflVsReceipt.sflOnly)==null?void 0:x0.length)===0&&((g0=s.sflVsReceipt.amountMismatch)==null?void 0:g0.length)===0&&n.jsx("div",{style:{fontSize:"12px",color:"var(--green)",fontWeight:"600"},children:"All paid bills have matching receipts"})]})]}),n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("div",{style:{fontSize:"13px",fontWeight:"700",color:"var(--t2)",marginBottom:"10px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Counter Cash"}),n.jsxs("div",{className:"s-card",style:{padding:"16px"},children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"12px",marginBottom:"12px"},children:[((f0=s.combinedCash)==null?void 0:f0.billingCashTeller1)>0&&n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)"},children:"Cash Teller 1"}),n.jsx("div",{style:{fontSize:"16px",fontWeight:"700",color:"var(--t1)",fontFamily:"var(--mono)"},children:l(s.combinedCash.billingCashTeller1)})]}),((m0=s.combinedCash)==null?void 0:m0.billingCashTeller2)>0&&n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)"},children:"Cash Teller 2"}),n.jsx("div",{style:{fontSize:"16px",fontWeight:"700",color:"var(--t1)",fontFamily:"var(--mono)"},children:l(s.combinedCash.billingCashTeller2)})]}),((y0=s.combinedCash)==null?void 0:y0.odbcCash)>0&&n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)"},children:"ODBC Cash"}),n.jsx("div",{style:{fontSize:"16px",fontWeight:"700",color:"var(--t1)",fontFamily:"var(--mono)"},children:l(s.combinedCash.odbcCash)})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)"},children:"Total Expected"}),n.jsx("div",{style:{fontSize:"18px",fontWeight:"800",color:"var(--blue)",fontFamily:"var(--mono)"},children:l(((v0=s.combinedCash)==null?void 0:v0.totalExpectedCash)||0)})]})]}),n.jsxs("div",{style:{borderTop:"1px solid var(--border)",paddingTop:"12px",display:"flex",gap:"10px",alignItems:"center",flexWrap:"wrap"},children:[n.jsx("span",{style:{fontSize:"12px",color:"var(--t3)"},children:"Actual Cash:"}),n.jsx("input",{type:"number",value:Jp,onChange:q=>Kk(q.target.value),placeholder:"Enter count",style:{width:"140px",padding:"8px 10px",fontSize:"13px",border:"1px solid var(--border)",borderRadius:"6px",background:"var(--bg)",color:"var(--t1)",fontFamily:"var(--mono)"}}),Jp!==""&&(()=>{var U0;const q=parseFloat(Jp)-(((U0=s.combinedCash)==null?void 0:U0.totalExpectedCash)||0),ie=Math.abs(q)<1;return n.jsx("span",{style:{fontSize:"13px",fontWeight:"700",color:ie?"var(--green)":"var(--red)"},children:ie?" Match":` Diff: ${q>0?"+":""}${l(Math.abs(q))}`})})()]})]})]}),((j0=(b0=s.billing)==null?void 0:b0.discountDetails)==null?void 0:j0.length)>0&&n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsxs("div",{style:{fontSize:"13px",fontWeight:"700",color:"var(--t2)",marginBottom:"10px",textTransform:"uppercase",letterSpacing:"0.5px"},children:["Discounts (",l(s.billing.discountDetails.reduce((q,ie)=>q+(ie.amount||0),0)),"  ",s.billing.discountDetails.length," voucher",s.billing.discountDetails.length!==1?"s":"",")"]}),n.jsx("div",{className:"s-card",style:{padding:"12px"},children:n.jsxs("table",{style:{width:"100%",fontSize:"12px",borderCollapse:"collapse"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{color:"var(--t3)",borderBottom:"1px solid var(--border)"},children:[n.jsx("th",{style:{textAlign:"left",padding:"6px 8px",fontWeight:"600"},children:"Party"}),n.jsx("th",{style:{textAlign:"right",padding:"6px 8px",fontWeight:"600"},children:"Amount"}),n.jsx("th",{style:{textAlign:"left",padding:"6px 8px",fontWeight:"600"},children:"Voucher"})]})}),n.jsx("tbody",{children:s.billing.discountDetails.map((q,ie)=>n.jsxs("tr",{style:{borderBottom:"1px solid var(--border)"},children:[n.jsx("td",{style:{padding:"6px 8px",color:"var(--t1)"},children:q.party_name}),n.jsx("td",{style:{padding:"6px 8px",textAlign:"right",color:"var(--red)",fontWeight:"600",fontFamily:"var(--mono)"},children:l(q.amount)}),n.jsx("td",{style:{padding:"6px 8px",color:"var(--t3)",fontFamily:"var(--mono)"},children:q.voucher_number})]},ie))})]})})]}),(((w0=(S0=s.cheques)==null?void 0:S0.dueToday)==null?void 0:w0.length)>0||((C0=(k0=s.cheques)==null?void 0:k0.overdue)==null?void 0:C0.length)>0||((_0=(N0=s.cheques)==null?void 0:N0.depositedToday)==null?void 0:_0.length)>0)&&n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("div",{style:{fontSize:"13px",fontWeight:"700",color:"var(--t2)",marginBottom:"10px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Cheques"}),n.jsxs("div",{className:"s-card",style:{padding:"12px"},children:[((A0=s.cheques.dueToday)==null?void 0:A0.length)>0&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{fontSize:"11px",fontWeight:"700",color:"var(--amber)",marginBottom:"6px"},children:["Due Today (",s.cheques.dueToday.length,")"]}),s.cheques.dueToday.map((q,ie)=>n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 0",borderBottom:"1px solid var(--border)",fontSize:"12px"},children:[n.jsx("span",{style:{color:"var(--t1)"},children:q.party_name}),n.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[n.jsx("span",{style:{color:"var(--t3)",fontFamily:"var(--mono)",fontSize:"10px"},children:q.cheque_number||""}),n.jsx("span",{style:{fontWeight:"700",fontFamily:"var(--mono)",color:"var(--amber)"},children:l(q.amount)}),n.jsx("span",{style:{fontSize:"10px",padding:"2px 6px",borderRadius:"4px",background:q.status==="deposited"?"rgba(76,175,80,0.15)":q.status==="pending"?"rgba(255,193,7,0.15)":"rgba(244,67,54,0.15)",color:q.status==="deposited"?"var(--green)":q.status==="pending"?"var(--amber)":"var(--red)"},children:q.status})]})]},ie))]}),((R0=s.cheques.overdue)==null?void 0:R0.length)>0&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{fontSize:"11px",fontWeight:"700",color:"var(--red)",marginTop:"12px",marginBottom:"6px"},children:["Overdue (",s.cheques.overdue.length,")  ",l(s.cheques.overdue.reduce((q,ie)=>q+(ie.amount||0),0))]}),s.cheques.overdue.slice(0,10).map((q,ie)=>n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 0",fontSize:"11px",color:"var(--t3)"},children:[n.jsx("span",{children:q.party_name}),n.jsxs("div",{style:{display:"flex",gap:"8px"},children:[n.jsx("span",{style:{fontFamily:"var(--mono)"},children:q.cheque_date}),n.jsx("span",{style:{fontWeight:"600",color:"var(--red)",fontFamily:"var(--mono)"},children:l(q.amount)})]})]},ie)),s.cheques.overdue.length>10&&n.jsxs("div",{style:{fontSize:"10px",color:"var(--t4)",marginTop:"4px"},children:["+",s.cheques.overdue.length-10," more"]})]}),((B0=s.cheques.depositedToday)==null?void 0:B0.length)>0&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{fontSize:"11px",fontWeight:"700",color:"var(--green)",marginTop:"12px",marginBottom:"6px"},children:["Deposited Today (",s.cheques.depositedToday.length,")"]}),s.cheques.depositedToday.map((q,ie)=>n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0",fontSize:"11px"},children:[n.jsx("span",{style:{color:"var(--t2)"},children:q.party_name}),n.jsx("span",{style:{fontWeight:"600",color:"var(--green)",fontFamily:"var(--mono)"},children:l(q.amount)})]},ie))]})]})]}),((T0=s.odbc)==null?void 0:T0.voucherCount)>0&&n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsxs("div",{style:{fontSize:"13px",fontWeight:"700",color:"var(--t2)",marginBottom:"10px",textTransform:"uppercase",letterSpacing:"0.5px"},children:["ODBC Activity (",s.odbc.voucherCount," voucher",s.odbc.voucherCount!==1?"s":"",")"]}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"10px"},children:Object.entries(((z0=s.odbc)==null?void 0:z0.receipts)||{}).filter(([,q])=>q>0).map(([q,ie])=>n.jsxs("div",{className:"s-card",style:{padding:"14px",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"16px",fontWeight:"700",color:"var(--purple, #9C27B0)",fontFamily:"var(--mono)"},children:l(ie)}),n.jsx("div",{style:{fontSize:"11px",color:"var(--t3)",marginTop:"4px"},children:q})]},q))}),s.odbc.totalReceipts>0&&n.jsxs("div",{style:{marginTop:"8px",fontSize:"12px",color:"var(--t3)"},children:["Total: ",n.jsx("strong",{style:{color:"var(--purple, #9C27B0)"},children:l(s.odbc.totalReceipts)})]})]}),((L0=s.fonepay)==null?void 0:L0.count)>0&&n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsxs("div",{style:{fontSize:"13px",fontWeight:"700",color:"var(--t2)",marginBottom:"10px",textTransform:"uppercase",letterSpacing:"0.5px"},children:["Fonepay Transactions (",s.fonepay.count,")  ",l(s.fonepay.total)]}),n.jsx("div",{className:"s-card",style:{padding:"12px",maxHeight:"200px",overflowY:"auto"},children:s.fonepay.transactions.map((q,ie)=>n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0",borderBottom:"1px solid var(--border)",fontSize:"11px"},children:[n.jsx("span",{style:{color:"var(--t2)"},children:q.description||q.issuer_name||q.transaction_id}),n.jsx("span",{style:{fontWeight:"600",color:"var(--green)",fontFamily:"var(--mono)"},children:l(q.amount)})]},ie))})]}),(((E0=s.fonepayLedger)==null?void 0:E0.totalCredits)>0||((F0=s.fonepayLedger)==null?void 0:F0.totalDebits)>0)&&n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("div",{style:{fontSize:"13px",fontWeight:"700",color:"var(--t2)",marginBottom:"10px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Fonepay Settlement Ledger"}),n.jsxs("div",{className:"s-card",style:{padding:"14px"},children:[n.jsxs("div",{style:{display:"flex",gap:"16px",marginBottom:"12px",flexWrap:"wrap"},children:[n.jsxs("div",{style:{flex:1,minWidth:"120px",textAlign:"center",padding:"8px",background:"rgba(76,175,80,0.08)",borderRadius:"6px"},children:[n.jsx("div",{style:{fontSize:"10px",color:"var(--t3)",textTransform:"uppercase"},children:"Collected (Cr)"}),n.jsx("div",{style:{fontSize:"16px",fontWeight:"800",color:"var(--green)",fontFamily:"var(--mono)"},children:l(s.fonepayLedger.totalCredits)}),n.jsxs("div",{style:{fontSize:"9px",color:"var(--t4)"},children:[((D0=s.fonepayLedger.credits)==null?void 0:D0.length)||0," txn"]})]}),n.jsxs("div",{style:{flex:1,minWidth:"120px",textAlign:"center",padding:"8px",background:"rgba(244,67,54,0.08)",borderRadius:"6px"},children:[n.jsx("div",{style:{fontSize:"10px",color:"var(--t3)",textTransform:"uppercase"},children:"Settled to RBB (Dr)"}),n.jsx("div",{style:{fontSize:"16px",fontWeight:"800",color:"var(--red)",fontFamily:"var(--mono)"},children:l(s.fonepayLedger.totalDebits)}),n.jsxs("div",{style:{fontSize:"9px",color:"var(--t4)"},children:[((P0=s.fonepayLedger.debits)==null?void 0:P0.length)||0," settlement",(((I0=s.fonepayLedger.debits)==null?void 0:I0.length)||0)!==1?"s":""]})]}),n.jsxs("div",{style:{flex:1,minWidth:"120px",textAlign:"center",padding:"8px",background:Math.abs(s.fonepayLedger.balance)<1?"rgba(76,175,80,0.08)":"rgba(255,193,7,0.08)",borderRadius:"6px"},children:[n.jsx("div",{style:{fontSize:"10px",color:"var(--t3)",textTransform:"uppercase"},children:"Balance"}),n.jsx("div",{style:{fontSize:"16px",fontWeight:"800",color:Math.abs(s.fonepayLedger.balance)<1?"var(--green)":"var(--amber)",fontFamily:"var(--mono)"},children:Math.abs(s.fonepayLedger.balance)<1?"Settled":s.fonepayLedger.balance>0?`+${l(s.fonepayLedger.balance)}`:l(s.fonepayLedger.balance)}),n.jsx("div",{style:{fontSize:"9px",color:"var(--t4)"},children:Math.abs(s.fonepayLedger.balance)<1?"All settled":s.fonepayLedger.balance>0?"Pending settlement":"RBB got more than portal"})]})]}),((O0=s.fonepayLedger.debits)==null?void 0:O0.length)>0&&n.jsxs("div",{style:{marginBottom:"10px"},children:[n.jsx("div",{style:{fontSize:"10px",fontWeight:"700",color:"var(--red)",marginBottom:"4px",textTransform:"uppercase"},children:"Debit  Settled to RBB"}),n.jsxs("table",{style:{width:"100%",fontSize:"11px",borderCollapse:"collapse"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{color:"var(--t4)",borderBottom:"1px solid var(--border)"},children:[n.jsx("th",{style:{textAlign:"left",padding:"4px 6px",fontWeight:"600"},children:"Description"}),n.jsx("th",{style:{textAlign:"left",padding:"4px 6px",fontWeight:"600",width:"70px"},children:"Type"}),n.jsx("th",{style:{textAlign:"right",padding:"4px 6px",fontWeight:"600",width:"90px"},children:"Amount"})]})}),n.jsx("tbody",{children:s.fonepayLedger.debits.map((q,ie)=>n.jsxs("tr",{style:{borderBottom:"1px solid var(--border)"},children:[n.jsx("td",{style:{padding:"4px 6px",color:"var(--t2)",maxWidth:"200px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:q.description}),n.jsx("td",{style:{padding:"4px 6px",color:"var(--t4)",fontSize:"9px"},children:q.type}),n.jsx("td",{style:{padding:"4px 6px",textAlign:"right",fontWeight:"600",color:"var(--red)",fontFamily:"var(--mono)"},children:l(q.amount)})]},ie))})]})]}),((W0=s.fonepayLedger.credits)==null?void 0:W0.length)>0&&n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"10px",fontWeight:"700",color:"var(--green)",marginBottom:"4px",textTransform:"uppercase"},children:"Credit  Fonepay Collections"}),n.jsx("div",{style:{maxHeight:"150px",overflowY:"auto"},children:n.jsxs("table",{style:{width:"100%",fontSize:"11px",borderCollapse:"collapse"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{color:"var(--t4)",borderBottom:"1px solid var(--border)"},children:[n.jsx("th",{style:{textAlign:"left",padding:"4px 6px",fontWeight:"600"},children:"Description"}),n.jsx("th",{style:{textAlign:"left",padding:"4px 6px",fontWeight:"600",width:"70px"},children:"Issuer"}),n.jsx("th",{style:{textAlign:"right",padding:"4px 6px",fontWeight:"600",width:"90px"},children:"Amount"})]})}),n.jsx("tbody",{children:s.fonepayLedger.credits.map((q,ie)=>n.jsxs("tr",{style:{borderBottom:"1px solid var(--border)"},children:[n.jsx("td",{style:{padding:"4px 6px",color:"var(--t2)",maxWidth:"200px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:q.description}),n.jsx("td",{style:{padding:"4px 6px",color:"var(--t4)",fontSize:"9px"},children:q.issuer}),n.jsx("td",{style:{padding:"4px 6px",textAlign:"right",fontWeight:"600",color:"var(--green)",fontFamily:"var(--mono)"},children:l(q.amount)})]},ie))})]})})]})]})]}),(((M0=s.rbb)==null?void 0:M0.creditCount)>0||(($0=s.rbb)==null?void 0:$0.debitCount)>0)&&n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("div",{style:{fontSize:"13px",fontWeight:"700",color:"var(--t2)",marginBottom:"10px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"RBB Bank Activity"}),n.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"8px",flexWrap:"wrap"},children:[s.rbb.fonepaySettlementTotal>0&&n.jsxs("div",{className:"s-card",style:{padding:"10px 14px"},children:[n.jsx("div",{style:{fontSize:"10px",color:"var(--t3)"},children:"Fonepay Settlement (Total)"}),n.jsx("div",{style:{fontSize:"14px",fontWeight:"700",color:"var(--green)",fontFamily:"var(--mono)"},children:l(s.rbb.fonepaySettlementTotal)}),n.jsxs("div",{style:{fontSize:"9px",color:"var(--t4)"},children:["ESEWASTLMT: ",l(s.rbb.esewaSettlements)," + FONEPAY: ",l(s.rbb.fonepaySettlements)]})]}),s.rbb.otherCredits>0&&n.jsxs("div",{className:"s-card",style:{padding:"10px 14px"},children:[n.jsx("div",{style:{fontSize:"10px",color:"var(--t3)"},children:"Other Credits"}),n.jsx("div",{style:{fontSize:"14px",fontWeight:"700",color:"var(--green)",fontFamily:"var(--mono)"},children:l(s.rbb.otherCredits)})]}),s.rbb.totalDebits>0&&n.jsxs("div",{className:"s-card",style:{padding:"10px 14px"},children:[n.jsxs("div",{style:{fontSize:"10px",color:"var(--t3)"},children:["Debits (",s.rbb.debitCount,")"]}),n.jsx("div",{style:{fontSize:"14px",fontWeight:"700",color:"var(--red)",fontFamily:"var(--mono)"},children:l(s.rbb.totalDebits)})]})]}),((q0=s.rbb.debits)==null?void 0:q0.length)>0&&n.jsxs("div",{className:"s-card",style:{padding:"10px",maxHeight:"120px",overflowY:"auto"},children:[n.jsx("div",{style:{fontSize:"10px",fontWeight:"600",color:"var(--t3)",marginBottom:"4px"},children:"Debit Details"}),s.rbb.debits.map((q,ie)=>n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"3px 0",fontSize:"10px",borderBottom:"1px solid var(--border)"},children:[n.jsx("span",{style:{color:"var(--t3)",flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",marginRight:"8px"},children:q.description}),n.jsx("span",{style:{fontWeight:"600",color:"var(--red)",fontFamily:"var(--mono)",flexShrink:0},children:l(q.debit)})]},ie))]})]})]})})(),!Li&&!zi&&n.jsx("div",{style:{textAlign:"center",padding:"40px"},children:n.jsx("button",{className:"btn btn-p",onClick:()=>ro(),style:{padding:"10px 24px",fontSize:"13px"},children:"Load EOD Data"})})]}),n.jsxs("div",{className:`page ${f==="settings"?"active":""}`,children:[n.jsx("div",{className:"sec-head",style:{marginBottom:"16px"},children:n.jsx("div",{className:"sec-title",style:{fontSize:"18px"},children:" Settings"})}),n.jsxs("div",{className:"settings-grid",children:[n.jsxs("div",{className:"s-card",children:[n.jsx("div",{className:"s-card-h",children:" Tally Connection"}),n.jsxs("div",{className:"s-card-b",children:[n.jsxs("div",{className:"s-row",children:[n.jsxs("div",{children:[n.jsx("div",{className:"s-name",children:"Tally Host"}),n.jsx("div",{className:"s-desc",children:"192.168.1.251:9900"})]}),n.jsxs("span",{style:{color:Pe?"var(--green)":"var(--red)",fontSize:"12px",fontWeight:"600"},children:[" ",Pe?"Connected":"Disconnected"]})]}),n.jsxs("div",{className:"s-row",children:[n.jsxs("div",{children:[n.jsx("div",{className:"s-name",children:"Auto Sync Service"}),n.jsx("div",{className:"s-desc",children:ji?"Running - syncs every 30s":"Stopped"})]}),n.jsx("button",{className:`btn ${ji?"btn-o":"btn-p"}`,style:{padding:"5px 12px",fontSize:"11px"},onClick:ji?bC:vC,disabled:If,children:If?"":ji?" Stop":" Start"})]}),n.jsxs("div",{className:"s-row",children:[n.jsxs("div",{children:[n.jsx("div",{className:"s-name",children:"Manual Sync"}),n.jsx("div",{className:"s-desc",children:"Trigger immediate sync with Tally"})]}),n.jsx("button",{className:"btn btn-p",style:{padding:"5px 12px",fontSize:"11px"},onClick:ev,disabled:ml,children:ml?" Syncing...":" Sync Now"})]}),n.jsxs("div",{className:"s-row",children:[n.jsxs("div",{children:[n.jsx("div",{className:"s-name",children:"Sync Deleted"}),n.jsx("div",{className:"s-desc",children:"Remove vouchers deleted in Tally"})]}),n.jsx("button",{className:"btn btn-o",style:{padding:"5px 12px",fontSize:"11px"},onClick:tv,disabled:yl||!Pe,children:yl?" Checking...":" Sync Deleted"})]})]})]}),n.jsxs("div",{className:"s-card",children:[n.jsx("div",{className:"s-card-h",children:" Tally Companies"}),n.jsxs("div",{className:"s-card-b",children:[n.jsxs("div",{className:"s-row",style:{flexDirection:"column",alignItems:"flex-start",gap:"8px"},children:[n.jsxs("div",{children:[n.jsx("div",{className:"s-name",children:"Billing Company"}),n.jsx("div",{className:"s-desc",children:"Main billing company name in Tally (e.g., For DB)"})]}),n.jsx("input",{type:"text",value:Sn.billing_company||"For DB",onChange:s=>Pn(l=>({...l,billing_company:s.target.value})),onBlur:()=>Rr(),placeholder:"For DB",style:{width:"100%",padding:"10px 12px",fontSize:"14px",border:"1px solid var(--border)",borderRadius:"8px",background:"var(--bg)",color:"var(--t1)"}})]}),n.jsxs("div",{className:"s-row",style:{flexDirection:"column",alignItems:"flex-start",gap:"8px"},children:[n.jsxs("div",{children:[n.jsx("div",{className:"s-name",children:"ODBC Cheque Company"}),n.jsx("div",{className:"s-desc",children:"Cheque management company name in Tally (e.g., ODBC CHq Mgmt)"})]}),n.jsx("input",{type:"text",value:Sn.odbc_company||"ODBC CHq Mgmt",onChange:s=>Pn(l=>({...l,odbc_company:s.target.value})),onBlur:()=>Rr(),placeholder:"ODBC CHq Mgmt",style:{width:"100%",padding:"10px 12px",fontSize:"14px",border:"1px solid var(--border)",borderRadius:"8px",background:"var(--bg)",color:"var(--t1)"}})]})]})]}),n.jsxs("div",{className:"s-card",children:[n.jsx("div",{className:"s-card-h",children:" Appearance"}),n.jsx("div",{className:"s-card-b",children:n.jsxs("div",{className:"s-row",children:[n.jsxs("div",{children:[n.jsx("div",{className:"s-name",children:"Theme Mode"}),n.jsx("div",{className:"s-desc",children:N?"Dark mode active":"Light mode active"})]}),n.jsxs("div",{className:"mode-tog",children:[n.jsx("button",{className:N?"active":"",onClick:()=>R(!0),children:" Dark"}),n.jsx("button",{className:N?"":"active",onClick:()=>R(!1),children:" Light"})]})]})})]}),n.jsxs("div",{className:"s-card",children:[n.jsx("div",{className:"s-card-h",children:" Notifications"}),n.jsxs("div",{className:"s-card-b",children:[n.jsxs("div",{className:"s-row",children:[n.jsxs("div",{children:[n.jsx("div",{className:"s-name",children:"New Bill Alert"}),n.jsx("div",{className:"s-desc",children:"Sound + Toast on new bill"})]}),n.jsx("div",{className:"toggle on"})]}),n.jsxs("div",{className:"s-row",children:[n.jsxs("div",{children:[n.jsx("div",{className:"s-name",children:"Unpaid Warning"}),n.jsx("div",{className:"s-desc",children:"Alert after 15 min unpaid"})]}),n.jsx("div",{className:"toggle on"})]})]})]}),n.jsxs("div",{className:"s-card",children:[n.jsx("div",{className:"s-card-h",children:" Invoice Settings"}),n.jsxs("div",{className:"s-card-b",children:[n.jsxs("div",{className:"s-row",style:{flexDirection:"column",alignItems:"flex-start",gap:"8px"},children:[n.jsxs("div",{children:[n.jsx("div",{className:"s-name",children:"Agent/Staff Ledger Group"}),n.jsx("div",{className:"s-desc",children:"Tally ledger group for Num Packages field"})]}),n.jsx("input",{type:"text",value:Sn.agent_ledger_group||"Agent Agents",onChange:s=>Pn(l=>({...l,agent_ledger_group:s.target.value})),onBlur:()=>Rr(),placeholder:"Agent Agents",style:{width:"100%",padding:"10px 12px",fontSize:"14px",border:"1px solid var(--border)",borderRadius:"8px",background:"var(--bg)",color:"var(--t1)"}})]}),n.jsxs("div",{className:"s-row",style:{flexDirection:"column",alignItems:"flex-start",gap:"8px"},children:[n.jsxs("div",{children:[n.jsx("div",{className:"s-name",children:"Default Sales Ledger"}),n.jsx("div",{className:"s-desc",children:"Ledger for sales transactions"})]}),n.jsx("input",{type:"text",value:Sn.sales_ledger||"1 Sales A/c",onChange:s=>Pn(l=>({...l,sales_ledger:s.target.value})),onBlur:()=>Rr(),placeholder:"1 Sales A/c",style:{width:"100%",padding:"10px 12px",fontSize:"14px",border:"1px solid var(--border)",borderRadius:"8px",background:"var(--bg)",color:"var(--t1)"}})]}),n.jsxs("div",{className:"s-row",style:{flexDirection:"column",alignItems:"flex-start",gap:"8px"},children:[n.jsxs("div",{children:[n.jsx("div",{className:"s-name",children:"Default Godown"}),n.jsx("div",{className:"s-desc",children:"Default inventory location"})]}),n.jsx("input",{type:"text",value:Sn.default_godown||"Main Location",onChange:s=>Pn(l=>({...l,default_godown:s.target.value})),onBlur:()=>Rr(),placeholder:"Main Location",style:{width:"100%",padding:"10px 12px",fontSize:"14px",border:"1px solid var(--border)",borderRadius:"8px",background:"var(--bg)",color:"var(--t1)"}})]})]})]}),n.jsxs("div",{className:"s-card",children:[n.jsx("div",{className:"s-card-h",children:" Business Info (Print/Email)"}),n.jsx("div",{className:"s-card-b",children:[{key:"business_name",label:"Business Name",placeholder:"Your Business Name"},{key:"business_address",label:"Address",placeholder:"City, District"},{key:"business_phone",label:"Phone",placeholder:"01-XXXXXXX"},{key:"business_pan",label:"PAN/VAT No.",placeholder:"000000000"}].map(s=>n.jsxs("div",{className:"s-row",style:{flexDirection:"column",alignItems:"flex-start",gap:"6px"},children:[n.jsx("div",{className:"s-name",children:s.label}),n.jsx("input",{type:"text",value:Sn[s.key]||"",onChange:l=>Pn(c=>({...c,[s.key]:l.target.value})),onBlur:()=>Rr(),placeholder:s.placeholder,style:{width:"100%",padding:"10px 12px",fontSize:"14px",border:"1px solid var(--border)",borderRadius:"8px",background:"var(--bg)",color:"var(--t1)"}})]},s.key))})]}),n.jsxs("div",{className:"s-card",children:[n.jsx("div",{className:"s-card-h",children:" Email / SMTP Settings"}),n.jsxs("div",{className:"s-card-b",children:[[{key:"smtp_host",label:"SMTP Host",placeholder:"smtp.gmail.com"},{key:"smtp_port",label:"SMTP Port",placeholder:"587"},{key:"smtp_user",label:"Username",placeholder:"you@example.com"},{key:"smtp_pass",label:"Password",placeholder:"********",type:"password"},{key:"smtp_from_name",label:"From Name",placeholder:"Your Business"},{key:"smtp_from_email",label:"From Email",placeholder:"billing@example.com"}].map(s=>n.jsxs("div",{className:"s-row",style:{flexDirection:"column",alignItems:"flex-start",gap:"6px"},children:[n.jsx("div",{className:"s-name",children:s.label}),n.jsx("input",{type:s.type||"text",value:Sn[s.key]||"",onChange:l=>Pn(c=>({...c,[s.key]:l.target.value})),onBlur:()=>Rr(),placeholder:s.placeholder,style:{width:"100%",padding:"10px 12px",fontSize:"14px",border:"1px solid var(--border)",borderRadius:"8px",background:"var(--bg)",color:"var(--t1)"}})]},s.key)),n.jsx("div",{className:"s-row",style:{flexDirection:"column",alignItems:"flex-start",gap:"8px"},children:n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"13px",color:"var(--t2)"},children:[n.jsx("input",{type:"checkbox",checked:Sn.smtp_secure==="true",onChange:s=>{const l=s.target.checked?"true":"false";Pn(c=>({...c,smtp_secure:l})),setTimeout(()=>Rr(),100)}}),"Use SSL/TLS (port 465)"]})}),n.jsxs("div",{className:"s-row",style:{flexDirection:"column",gap:"8px"},children:[n.jsx("button",{onClick:nN,disabled:ws,style:{width:"100%",padding:"10px",background:ws?"var(--bg4)":"var(--blue)",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",cursor:ws?"not-allowed":"pointer"},children:ws?" Testing...":" Test SMTP Connection"}),n.jsxs("div",{style:{display:"flex",gap:"8px"},children:[n.jsx("input",{type:"email",value:ks,onChange:s=>tC(s.target.value),placeholder:"test@example.com",style:{flex:1,padding:"10px 12px",fontSize:"13px",border:"1px solid var(--border)",borderRadius:"8px",background:"var(--bg)",color:"var(--t1)"}}),n.jsx("button",{onClick:rN,disabled:ws||!ks,style:{padding:"10px 16px",background:ws||!ks?"var(--bg4)":"var(--green)",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",cursor:ws||!ks?"not-allowed":"pointer",whiteSpace:"nowrap"},children:" Send Test"})]}),ka&&n.jsx("div",{style:{padding:"10px",borderRadius:"8px",fontSize:"12px",background:ka.success?"var(--green-g, rgba(76,175,80,0.1))":"var(--red-g, rgba(244,67,54,0.1))",color:ka.success?"var(--green)":"var(--red)"},children:ka.success?ka.message||"Success!":ka.error})]})]})]}),n.jsxs("div",{className:"s-card",children:[n.jsx("div",{className:"s-card-h",children:" Voucher Lock (EOD)"}),n.jsx("div",{className:"s-card-b",children:ht?n.jsx("div",{style:{textAlign:"center",padding:"20px",color:"var(--t3)"},children:"Loading lock status..."}):pe?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"s-row",children:[n.jsxs("div",{children:[n.jsx("div",{className:"s-name",children:"For DB"}),n.jsxs("div",{className:"s-desc",children:[((s0=pe.forDB)==null?void 0:s0.locked)||0," / ",((a0=pe.forDB)==null?void 0:a0.totalVouchers)||0," vouchers locked"]})]}),n.jsx("span",{style:{padding:"4px 10px",borderRadius:"12px",fontSize:"11px",fontWeight:"700",background:((i0=pe.forDB)==null?void 0:i0.locked)>0?"var(--green-g, rgba(76,175,80,0.15))":"var(--bg3)",color:((o0=pe.forDB)==null?void 0:o0.locked)>0?"var(--green)":"var(--t3)"},children:((l0=pe.forDB)==null?void 0:l0.locked)>0?" Locked":" Open"})]}),n.jsxs("div",{className:"s-row",children:[n.jsxs("div",{children:[n.jsx("div",{className:"s-name",children:"ODBC CHq Mgmt"}),n.jsxs("div",{className:"s-desc",children:[((d0=pe.odbc)==null?void 0:d0.locked)||0," / ",((c0=pe.odbc)==null?void 0:c0.totalVouchers)||0," vouchers locked"]})]}),n.jsx("span",{style:{padding:"4px 10px",borderRadius:"12px",fontSize:"11px",fontWeight:"700",background:((p0=pe.odbc)==null?void 0:p0.locked)>0?"var(--green-g, rgba(76,175,80,0.15))":"var(--bg3)",color:((u0=pe.odbc)==null?void 0:u0.locked)>0?"var(--green)":"var(--t3)"},children:((h0=pe.odbc)==null?void 0:h0.locked)>0?" Locked":" Open"})]}),n.jsx("div",{style:{borderTop:"1px solid var(--border)",margin:"12px 0",paddingTop:"12px"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[n.jsx("div",{style:{fontSize:"12px",fontWeight:"600",color:"var(--t2)"},children:"Company:"}),n.jsxs("select",{value:xt,onChange:s=>Sp(s.target.value),style:{padding:"6px 10px",fontSize:"12px",borderRadius:"6px",border:"1px solid var(--border)",background:"var(--bg)",color:"var(--t1)"},children:[n.jsx("option",{value:(pe==null?void 0:pe.defaultCompany)||"FOR DB",children:(pe==null?void 0:pe.defaultCompany)||"FOR DB"}),n.jsx("option",{value:"ODBC CHq Mgmt",children:"ODBC CHq Mgmt"}),n.jsx("option",{value:"both",children:"Both Companies"})]})]})}),n.jsxs("div",{style:{borderTop:"1px solid var(--border)",margin:"12px 0",paddingTop:"12px"},children:[n.jsx("div",{style:{fontSize:"12px",fontWeight:"600",color:"var(--t2)",marginBottom:"8px"},children:"Lock Vouchers"}),n.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[n.jsx("span",{style:{fontSize:"12px",color:"var(--t3)",whiteSpace:"nowrap"},children:"Up to:"}),n.jsx("input",{type:"date",value:jp,onChange:s=>xk(s.target.value),style:{flex:1,padding:"8px 10px",fontSize:"13px",border:"1px solid var(--border)",borderRadius:"8px",background:"var(--bg)",color:"var(--t1)"}}),n.jsx("button",{onClick:async()=>{var s,l,c;if(confirm(`Lock all vouchers up to ${jp} in "${xt}"? This will prevent editing/deleting in Tally.`)){wn(!0);try{const p=await Fb({date:jp,company:xt});p.data.success?O("success","Vouchers Locked",`Locked ${p.data.totalLocked} vouchers in "${xt}"`):O("error","Lock Failed",((s=p.data.errors)==null?void 0:s.join(", "))||p.data.message||"0 vouchers locked"),Ra()}catch(p){O("error","Lock Failed",((c=(l=p.response)==null?void 0:l.data)==null?void 0:c.error)||p.message),wn(!1)}}},disabled:ht,style:{padding:"8px 16px",background:ht?"var(--bg4)":"var(--red)",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",cursor:ht?"not-allowed":"pointer",whiteSpace:"nowrap",fontSize:"13px"},children:" Lock"})]})]}),n.jsxs("div",{style:{borderTop:"1px solid var(--border)",margin:"12px 0",paddingTop:"12px"},children:[n.jsx("div",{style:{fontSize:"12px",fontWeight:"600",color:"var(--t2)",marginBottom:"8px"},children:"Unlock Vouchers"}),n.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",flexWrap:"wrap"},children:[n.jsx("input",{type:"date",value:es,onChange:s=>gk(s.target.value),placeholder:"From",style:{flex:1,minWidth:"120px",padding:"8px 10px",fontSize:"13px",border:"1px solid var(--border)",borderRadius:"8px",background:"var(--bg)",color:"var(--t1)"}}),n.jsx("span",{style:{fontSize:"12px",color:"var(--t3)"},children:"to"}),n.jsx("input",{type:"date",value:ts,onChange:s=>fk(s.target.value),placeholder:"To",style:{flex:1,minWidth:"120px",padding:"8px 10px",fontSize:"13px",border:"1px solid var(--border)",borderRadius:"8px",background:"var(--bg)",color:"var(--t1)"}}),n.jsx("button",{onClick:async()=>{var s,l,c;if(!es||!ts){O("error","Error","Select both from and to dates");return}if(confirm(`Unlock vouchers from ${es} to ${ts} in "${xt}"?`)){wn(!0);try{const p=await Db({fromDate:es,toDate:ts,company:xt});p.data.success?O("success","Vouchers Unlocked",`Unlocked ${p.data.totalUnlocked} vouchers in "${xt}"`):O("error","Unlock Failed",((s=p.data.errors)==null?void 0:s.join(", "))||p.data.message||"0 vouchers unlocked"),Ra()}catch(p){O("error","Unlock Failed",((c=(l=p.response)==null?void 0:l.data)==null?void 0:c.error)||p.message),wn(!1)}}},disabled:ht||!es||!ts,style:{padding:"8px 16px",background:ht||!es||!ts?"var(--bg4)":"var(--green)",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",cursor:ht||!es||!ts?"not-allowed":"pointer",whiteSpace:"nowrap",fontSize:"13px"},children:" Unlock"})]})]}),n.jsxs("div",{style:{borderTop:"1px solid var(--border)",margin:"12px 0",paddingTop:"12px"},children:[n.jsxs("div",{className:"s-row",children:[n.jsxs("div",{children:[n.jsx("div",{className:"s-name",children:"Auto-Lock (EOD)"}),n.jsx("div",{className:"s-desc",children:"Automatically lock vouchers daily"})]}),n.jsxs("label",{style:{position:"relative",width:"44px",height:"24px",cursor:"pointer"},children:[n.jsx("input",{type:"checkbox",checked:pe.autoEnabled,onChange:async s=>{try{await Pb({enabled:s.target.checked,time:pe.autoTime||"18:00"}),Ra(),O("success","Auto-Lock",s.target.checked?"Enabled":"Disabled")}catch(l){O("error","Error",l.message)}},style:{opacity:0,width:0,height:0}}),n.jsx("span",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:pe.autoEnabled?"var(--blue)":"var(--bg4)",borderRadius:"12px",transition:"0.3s"},children:n.jsx("span",{style:{position:"absolute",top:"2px",left:pe.autoEnabled?"22px":"2px",width:"20px",height:"20px",background:"white",borderRadius:"50%",transition:"0.3s"}})})]})]}),pe.autoEnabled&&n.jsxs("div",{className:"s-row",style:{flexDirection:"column",alignItems:"flex-start",gap:"6px"},children:[n.jsx("div",{className:"s-name",children:"Lock Time"}),n.jsx("input",{type:"time",value:pe.autoTime||"18:00",onChange:async s=>{try{await Pb({enabled:!0,time:s.target.value}),Ra()}catch(l){O("error","Error",l.message)}},style:{padding:"8px 10px",fontSize:"13px",border:"1px solid var(--border)",borderRadius:"8px",background:"var(--bg)",color:"var(--t1)"}})]})]}),pe.lastAction&&n.jsx("div",{style:{borderTop:"1px solid var(--border)",margin:"12px 0",paddingTop:"12px"},children:n.jsxs("div",{style:{fontSize:"11px",color:"var(--t3)"},children:["Last: ",pe.lastAction.action==="lock"?" Locked":pe.lastAction.action==="unlock"?" Unlocked":" Auto-locked"," ",pe.lastAction.totalLocked||pe.lastAction.totalUnlocked||0," vouchers"," ","on ",new Date(pe.lastAction.timestamp).toLocaleString()]})})]}):n.jsx("div",{style:{textAlign:"center",padding:"20px"},children:n.jsx("button",{onClick:Ra,style:{padding:"10px 20px",background:"var(--blue)",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",cursor:"pointer"},children:"Load Lock Status"})})})]}),(e==null?void 0:e.role)==="admin"&&n.jsxs("div",{className:"s-card",children:[n.jsx("div",{className:"s-card-h",children:" Role Permissions"}),n.jsxs("div",{className:"s-card-b",children:[n.jsxs("div",{className:"s-row",style:{flexDirection:"column",alignItems:"flex-start",gap:"8px"},children:[n.jsxs("div",{children:[n.jsx("div",{className:"s-name",children:"Configure Page Visibility"}),n.jsx("div",{className:"s-desc",children:"Select a role and toggle which pages are visible"})]}),n.jsx("div",{style:{display:"flex",gap:"8px",width:"100%"},children:["cashier","manager","admin"].map(s=>n.jsx("button",{className:`btn ${re===s?"btn-p":"btn-o"}`,style:{padding:"5px 14px",fontSize:"12px",textTransform:"capitalize",flex:1},onClick:()=>{Re(s),QC(s)},children:s},s))})]}),Ue?n.jsx("div",{style:{textAlign:"center",padding:"12px",color:"var(--t3)"},children:"Loading..."}):n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto",marginTop:"8px"},children:Object.entries(Hh).map(([s,l])=>n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 0",borderBottom:"1px solid var(--border)"},children:[n.jsx("span",{style:{fontSize:"12px",color:"var(--t1)"},children:l}),n.jsxs("label",{style:{position:"relative",display:"inline-block",width:"36px",height:"20px",cursor:"pointer"},children:[n.jsx("input",{type:"checkbox",checked:De[s]!==void 0?De[s]:!0,onChange:c=>Qe(p=>({...p,[s]:c.target.checked})),style:{opacity:0,width:0,height:0}}),n.jsx("span",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,borderRadius:"10px",transition:"0.2s",background:De[s]===void 0||De[s]?"var(--green)":"var(--border)"},children:n.jsx("span",{style:{position:"absolute",height:"16px",width:"16px",left:De[s]===void 0||De[s]?"18px":"2px",bottom:"2px",background:"#fff",borderRadius:"50%",transition:"0.2s"}})})]})]},s))}),n.jsx("button",{className:"btn btn-p",style:{width:"100%",marginTop:"12px",padding:"8px",fontSize:"13px"},onClick:XC,disabled:Be,children:Be?"Saving...":"Save Permissions"})]})]}),n.jsxs("div",{className:"s-card",children:[n.jsx("div",{className:"s-card-h",children:" Dashboard Info"}),n.jsxs("div",{className:"s-card-b",children:[n.jsxs("div",{className:"s-row",children:[n.jsxs("div",{children:[n.jsx("div",{className:"s-name",children:"Total Bills Today"}),n.jsx("div",{className:"s-desc",children:"Synced from Tally"})]}),n.jsx("span",{style:{fontFamily:"var(--mono)",fontSize:"14px",fontWeight:"700"},children:Bt.billCount})]}),n.jsxs("div",{className:"s-row",children:[n.jsxs("div",{children:[n.jsx("div",{className:"s-name",children:"Today's Sales"}),n.jsx("div",{className:"s-desc",children:"Total amount"})]}),n.jsx("span",{style:{fontFamily:"var(--mono)",fontSize:"14px",fontWeight:"700",color:"var(--blue)"},children:k(Bt.totalSales)})]}),n.jsxs("div",{className:"s-row",children:[n.jsxs("div",{children:[n.jsx("div",{className:"s-name",children:"Pending Amount"}),n.jsx("div",{className:"s-desc",children:"Outstanding balance"})]}),n.jsx("span",{style:{fontFamily:"var(--mono)",fontSize:"14px",fontWeight:"700",color:"var(--red)"},children:k(Bt.pendingAmount)})]})]})]})]})]})]})}),n.jsx("div",{className:`overlay ${Jn.open?"open":""}`,onClick:bd,children:n.jsxs("div",{className:"modal",onClick:s=>s.stopPropagation(),children:[n.jsxs("div",{className:"m-head",children:[n.jsx("h3",{children:" Record Payment"}),n.jsx("button",{className:"m-close",onClick:bd,children:""})]}),Jn.bill&&(()=>{const s=Math.abs(Jn.bill.pending_amount||Jn.bill.amount),l=Yt>=s,c=Math.max(0,s-Yt);return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"m-body",children:[n.jsxs("div",{className:"m-bill",children:[n.jsxs("div",{children:[n.jsx("div",{className:"party",children:Jn.bill.party_name}),n.jsxs("div",{className:"inv",children:[Jn.bill.voucher_number,"  ",Jn.bill.voucher_type]})]}),n.jsx("div",{className:"total",children:k(s)})]}),n.jsxs("div",{style:{display:"flex",gap:"8px",margin:"12px 0"},children:[n.jsx("button",{className:"btn btn-o",style:{flex:1,color:"var(--green)"},onClick:()=>Ji({cashTeller1:String(s),cashTeller2:"",chequeReceipt:"",qrCode:"",discount:"",bankDeposit:"",esewa:""}),children:"Full Payment"}),n.jsx("button",{className:"btn btn-o",style:{flex:1},onClick:()=>Ji({cashTeller1:"",cashTeller2:"",chequeReceipt:"",qrCode:"",discount:"",bankDeposit:"",esewa:""}),children:"Clear All"})]}),n.jsx("div",{style:{fontSize:"13px",fontWeight:"600",color:"var(--t2)",marginBottom:"8px"},children:"Payment Breakdown (SFL Fields)"}),[{key:"cashTeller1",label:"Cash Teller 1",icon:"",sfl:"SFL1"},{key:"cashTeller2",label:"Cash Teller 2",icon:"",sfl:"SFL2"},{key:"chequeReceipt",label:"Cheque Receipt",icon:"",sfl:"SFL3"},{key:"qrCode",label:"Q/R Code",icon:"",sfl:"SFL4"},{key:"discount",label:"Discount",icon:"",sfl:"SFL5"},{key:"bankDeposit",label:"Bank Deposit",icon:"",sfl:"SFL6"},{key:"esewa",label:"Esewa",icon:"",sfl:"SFL7"}].map(p=>n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"6px 0",borderBottom:"1px solid var(--bg3, rgba(255,255,255,0.05))"},children:[n.jsx("span",{style:{fontSize:"16px",width:"24px",textAlign:"center"},children:p.icon}),n.jsx("div",{style:{flex:1},children:n.jsxs("div",{style:{fontSize:"12px",color:"var(--t3)"},children:[p.label," ",n.jsxs("span",{style:{opacity:.5},children:["(",p.sfl,")"]})]})}),n.jsx("input",{type:"number",inputMode:"decimal",value:Yn[p.key],onChange:g=>Ji(y=>({...y,[p.key]:g.target.value})),placeholder:"0",style:{width:"120px",padding:"8px 10px",textAlign:"right",fontFamily:"var(--mono)",fontSize:"14px",fontWeight:"600",border:"1px solid var(--border)",borderRadius:"6px",background:"var(--bg)",color:"var(--t1)"}})]},p.key)),n.jsxs("div",{style:{margin:"12px 0",padding:"12px",background:"var(--bg2, rgba(255,255,255,0.03))",borderRadius:"8px",fontSize:"13px"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px"},children:[n.jsx("span",{style:{color:"var(--t3)"},children:"Bill Amount:"}),n.jsx("span",{style:{fontWeight:"600"},children:k(s)})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px"},children:[n.jsx("span",{style:{color:"var(--t3)"},children:"Total Payment:"}),n.jsx("span",{style:{fontWeight:"600",color:Yt>0?"var(--green)":"var(--t3)"},children:k(Yt)})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid var(--border)",paddingTop:"6px"},children:[n.jsx("span",{style:{fontWeight:"700"},children:"Balance After:"}),n.jsx("span",{style:{fontWeight:"700",color:c>0?"var(--amber)":"var(--green)"},children:k(c)})]})]}),Yt>0&&n.jsxs("div",{style:{padding:"10px",borderRadius:"8px",textAlign:"center",fontSize:"13px",fontWeight:"600",background:l?"var(--green-g, rgba(76,175,80,0.1))":"var(--amber-g, rgba(255,152,0,0.1))",color:l?"var(--green)":"var(--amber)"},children:["Will update to: ",n.jsx("strong",{children:l?"Sales":"Credit Sales"}),l?" (Full Payment)":" (Partial Payment)"]})]}),n.jsxs("div",{className:"m-foot",children:[n.jsx("button",{className:"btn btn-o",onClick:bd,children:"Cancel"}),n.jsx("button",{className:"btn-confirm",onClick:uN,disabled:ld||Yt<=0,style:{background:ld||Yt<=0?"var(--bg4)":l?"var(--green)":"var(--amber)",cursor:ld||Yt<=0?"not-allowed":"pointer"},children:ld?" Processing...":` Complete (${k(Yt)})`})]})]})})()]})}),n.jsx("div",{className:`overlay ${bt.open?"open":""}`,onClick:ah,children:n.jsxs("div",{className:"modal",style:{maxWidth:"800px",width:"95%"},onClick:s=>s.stopPropagation(),children:[n.jsxs("div",{className:"m-head",children:[n.jsxs("h3",{children:[" Bill Items ",Yi&&n.jsx("span",{style:{color:"var(--amber)",fontSize:"12px"},children:"(unsaved changes)"})]}),n.jsx("button",{className:"m-close",onClick:ah,children:""})]}),bt.bill&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"m-body",style:{maxHeight:"70vh",overflowY:"auto"},children:[n.jsxs("div",{className:"m-bill",style:{marginBottom:"16px"},children:[n.jsxs("div",{children:[n.jsx("div",{className:"party",children:bt.bill.party_name}),n.jsxs("div",{className:"inv",children:[bt.bill.voucher_number,"  ",bt.bill.voucher_type]})]}),n.jsx("div",{className:"total",children:Yi?n.jsx("span",{style:{color:"var(--amber)"},children:k(Jt.reduce((s,l)=>s+(l.amount||0),0))}):k(bt.bill.amount)})]}),n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsxs("div",{style:{fontWeight:"600",marginBottom:"12px",color:"var(--t1)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsxs("span",{children:["Items (",Jt.length,")"]}),Yi&&n.jsx("span",{style:{fontSize:"12px",color:"var(--amber)"},children:' Click "Save All Changes" to sync to Tally'})]}),bt.loading?n.jsx("div",{style:{textAlign:"center",padding:"20px",color:"var(--t3)"},children:"Loading items..."}):Jt.length>0?n.jsx("div",{style:{background:"var(--bg3)",borderRadius:"8px",overflow:"hidden"},children:n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"13px"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{background:"var(--bg4)",color:"var(--t2)"},children:[n.jsx("th",{style:{padding:"10px 8px",textAlign:"left",width:"30px"},children:"#"}),n.jsx("th",{style:{padding:"10px 8px",textAlign:"left"},children:"Item"}),n.jsx("th",{style:{padding:"10px 8px",textAlign:"right",width:"80px"},children:"Qty"}),n.jsx("th",{style:{padding:"10px 8px",textAlign:"right",width:"100px"},children:"Rate"}),n.jsx("th",{style:{padding:"10px 8px",textAlign:"right",width:"100px"},children:"Amount"}),n.jsx("th",{style:{padding:"10px 8px",textAlign:"center",width:"80px"},children:"Actions"})]})}),n.jsx("tbody",{children:Jt.map((s,l)=>n.jsxs("tr",{style:{borderBottom:"1px solid var(--bg4)"},children:[n.jsx("td",{style:{padding:"8px",color:"var(--t3)"},children:l+1}),n.jsx("td",{style:{padding:"8px",color:"var(--t1)"},children:s.stockItem}),n.jsx("td",{style:{padding:"8px"},children:n.jsx("input",{type:"number",min:"1",value:s.quantity,onChange:c=>kv(l,"quantity",c.target.value),style:{width:"60px",padding:"4px 6px",border:"1px solid var(--bg4)",borderRadius:"4px",background:"var(--bg2)",color:"var(--t1)",textAlign:"right"}})}),n.jsx("td",{style:{padding:"8px"},children:n.jsx("input",{type:"number",min:"0",step:"0.01",value:s.rate,onChange:c=>kv(l,"rate",c.target.value),style:{width:"80px",padding:"4px 6px",border:"1px solid var(--bg4)",borderRadius:"4px",background:"var(--bg2)",color:"var(--t1)",textAlign:"right"}})}),n.jsx("td",{style:{padding:"8px",textAlign:"right",color:"var(--green)",fontWeight:"600"},children:k(s.amount||0)}),n.jsx("td",{style:{padding:"8px",textAlign:"center"},children:n.jsx("button",{onClick:()=>iN(l),style:{padding:"4px 8px",background:"var(--red-g)",color:"var(--red)",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},title:"Delete item",children:""})})]},l))}),n.jsx("tfoot",{children:n.jsxs("tr",{style:{background:"var(--bg4)"},children:[n.jsx("td",{colSpan:"4",style:{padding:"10px 8px",textAlign:"right",fontWeight:"600",color:"var(--t1)"},children:"Total:"}),n.jsx("td",{style:{padding:"10px 8px",textAlign:"right",fontWeight:"700",color:"var(--amber)"},children:k(Jt.reduce((s,l)=>s+(parseFloat(l.amount)||0),0))}),n.jsx("td",{})]})})]})}):n.jsx("div",{style:{textAlign:"center",padding:"20px",color:"var(--t3)",background:"var(--bg3)",borderRadius:"8px"},children:"No items - add items below"})]}),n.jsxs("div",{style:{background:"var(--blue-g)",padding:"16px",borderRadius:"8px",border:"1px solid var(--blue)"},children:[n.jsx("div",{style:{fontWeight:"600",marginBottom:"12px",color:"var(--blue)"},children:" Add New Item"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr auto",gap:"12px",alignItems:"end"},children:[n.jsxs("div",{className:"field",style:{margin:0,position:"relative"},children:[n.jsx("label",{style:{fontSize:"11px",color:"var(--t3)"},children:"Stock Item"}),n.jsx("input",{type:"text",placeholder:"Search item...",value:Z3,onChange:s=>sN(s.target.value),onFocus:()=>Vu.length>0&&dd(!0),style:{width:"100%"}}),eC&&Vu.length>0&&n.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"var(--bg2)",border:"1px solid var(--bg4)",borderRadius:"6px",maxHeight:"200px",overflowY:"auto",zIndex:100,boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},children:Vu.map((s,l)=>n.jsxs("div",{onClick:()=>aN(s),style:{padding:"10px 12px",cursor:"pointer",borderBottom:"1px solid var(--bg4)",fontSize:"13px"},onMouseEnter:c=>c.target.style.background="var(--bg3)",onMouseLeave:c=>c.target.style.background="transparent",children:[n.jsx("div",{style:{color:"var(--t1)"},children:s.name}),s.rate&&n.jsxs("div",{style:{fontSize:"11px",color:"var(--t3)"},children:["Rate: ",k(s.rate)]})]},l))})]}),n.jsxs("div",{className:"field",style:{margin:0},children:[n.jsx("label",{style:{fontSize:"11px",color:"var(--t3)"},children:"Qty"}),n.jsx("input",{type:"number",min:"1",value:ke.quantity,onChange:s=>js(l=>({...l,quantity:s.target.value})),style:{width:"100%"}})]}),n.jsxs("div",{className:"field",style:{margin:0},children:[n.jsx("label",{style:{fontSize:"11px",color:"var(--t3)"},children:"Rate"}),n.jsx("input",{type:"number",min:"0",step:"0.01",value:ke.rate,onChange:s=>js(l=>({...l,rate:s.target.value})),style:{width:"100%"}})]}),n.jsx("button",{onClick:oN,disabled:!ke.stockItem||!ke.quantity||!ke.rate,style:{padding:"10px 16px",background:!ke.stockItem||!ke.quantity||!ke.rate?"var(--bg4)":"var(--green)",color:"white",border:"none",borderRadius:"6px",cursor:!ke.stockItem||!ke.quantity||!ke.rate?"not-allowed":"pointer",fontWeight:"600",fontSize:"13px"},children:" Add"})]}),ke.quantity&&ke.rate&&n.jsxs("div",{style:{marginTop:"8px",fontSize:"12px",color:"var(--t2)"},children:["Amount: ",n.jsx("strong",{style:{color:"var(--green)"},children:k(ke.quantity*ke.rate)})]})]})]}),n.jsxs("div",{className:"m-foot",style:{display:"flex",justifyContent:"space-between",gap:"12px",flexWrap:"wrap"},children:[n.jsxs("div",{style:{display:"flex",gap:"8px"},children:[n.jsx("button",{className:"btn btn-o",onClick:ah,children:"Cancel"}),n.jsx("button",{className:"btn btn-o",style:{color:"var(--cyan, #00bcd4)"},onClick:()=>bt.bill&&ih(bt.bill),disabled:Jt.length===0,children:" Print"}),n.jsx("button",{className:"btn btn-o",style:{color:"var(--purple, #9c27b0)"},onClick:()=>{bt.bill&&(Xi(""),Xn({open:!0,billId:bt.bill.id,sending:!1}))},disabled:Jt.length===0,children:" Email"})]}),n.jsx("button",{onClick:lN,disabled:cd||Jt.length===0,style:{padding:"12px 24px",background:cd||Jt.length===0?"var(--bg4)":Yi?"var(--amber)":"var(--green)",color:"white",border:"none",borderRadius:"8px",cursor:cd||Jt.length===0?"not-allowed":"pointer",fontWeight:"600",fontSize:"14px"},children:cd?" Saving...":" Save All Changes to Tally"})]})]})]})}),n.jsx("div",{className:`overlay ${Qn.open?"open":""}`,onClick:()=>!Qn.sending&&Xn({open:!1,billId:null,sending:!1}),children:n.jsxs("div",{className:"modal",style:{maxWidth:"400px"},onClick:s=>s.stopPropagation(),children:[n.jsxs("div",{className:"m-head",children:[n.jsx("h3",{children:" Email Bill"}),n.jsx("button",{className:"m-close",onClick:()=>Xn({open:!1,billId:null,sending:!1}),children:""})]}),n.jsx("div",{className:"m-body",style:{padding:"20px"},children:n.jsxs("div",{style:{marginBottom:"16px"},children:[n.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"600",marginBottom:"6px",color:"var(--t2)"},children:"Recipient Email"}),n.jsx("input",{type:"email",value:Ss,onChange:s=>Xi(s.target.value),placeholder:"party@example.com",disabled:Qn.sending,style:{width:"100%",padding:"10px 12px",fontSize:"14px",border:"1px solid var(--border)",borderRadius:"8px",background:"var(--bg)",color:"var(--t1)"},onKeyDown:s=>s.key==="Enter"&&wv()})]})}),n.jsxs("div",{className:"m-foot",style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[n.jsx("button",{className:"btn btn-o",onClick:()=>Xn({open:!1,billId:null,sending:!1}),children:"Cancel"}),n.jsx("button",{onClick:wv,disabled:Qn.sending||!Ss,style:{padding:"10px 20px",background:Qn.sending||!Ss?"var(--bg4)":"var(--blue)",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",cursor:Qn.sending||!Ss?"not-allowed":"pointer"},children:Qn.sending?" Sending...":" Send Email"})]})]})})]})}function Xz({bill:e,onPay:t}){const r=e.payment_status||"pending",a=e.dispatch_status||"pending";return n.jsxs("div",{className:`bill-card ${r}`,children:[n.jsxs("div",{className:"bill-top",children:[n.jsxs("div",{children:[n.jsx("div",{className:"bill-party",children:e.party_name}),n.jsx("div",{className:"bill-inv",children:e.voucher_number})]}),n.jsx("div",{children:n.jsx("div",{className:"bill-amt",children:k(e.amount)})})]}),n.jsxs("div",{className:"bill-meta",children:[n.jsxs("span",{children:[" ",ag(e.voucher_date)]}),n.jsxs("span",{children:[" ",e.voucher_type]}),e.item_count&&n.jsxs("span",{children:[" ",e.item_count," items"]})]}),n.jsxs("div",{className:"bill-bot",children:[n.jsxs("span",{className:`badge-s ${r}`,children:[" ",r.toUpperCase()]}),n.jsx("span",{className:`badge-d ${a}`,children:a.replace("_"," ")}),n.jsxs("div",{className:"bill-acts",children:[r!=="paid"&&n.jsx("button",{className:"bill-act pay",onClick:t,children:""}),n.jsx("button",{className:"bill-act",children:""})]})]})]})}function Kd({title:e,color:t,items:r,onMove:a,moveLabel:i,moveStyle:o,faded:d}){return n.jsxs("div",{className:"kanban-col",children:[n.jsxs("div",{className:"kanban-head",children:[n.jsxs("div",{className:"kanban-title",children:[n.jsx("span",{className:`dot ${t}`}),e]}),n.jsx("span",{className:"kanban-cnt",children:r.length})]}),n.jsxs("div",{className:"kanban-body",children:[r.map(u=>n.jsxs("div",{className:"k-item",style:d?{opacity:.55}:{},children:[n.jsxs("div",{className:"k-top",children:[n.jsx("span",{className:"k-party",children:u.party_name}),n.jsx("span",{className:"k-amt",children:k(u.amount)})]}),n.jsxs("div",{className:"k-inv",children:[u.voucher_number,"  ",u.payment_status]}),a&&n.jsx("button",{className:"k-move",style:o,onClick:()=>a(u.id),children:i})]},u.id)),r.length===0&&n.jsx("div",{style:{color:"var(--t3)",fontSize:"11px",textAlign:"center",padding:"20px"},children:"No items"})]})]})}function Gz({sack:e,onUpdateStatus:t}){var a;const r={collecting:"collecting",ready:"ready",dispatched:"dispatched"};return n.jsxs("div",{className:"sack",children:[n.jsxs("div",{className:"sack-head",children:[n.jsx("div",{className:"sack-party",children:e.party_name||"Unknown Party"}),n.jsx("span",{className:`sack-st ${r[e.status]||"collecting"}`,children:e.status||"Collecting"})]}),n.jsxs("div",{className:"sack-body",children:[n.jsx("div",{className:"sack-label",children:"Bills"}),(a=e.items)==null?void 0:a.map((i,o)=>n.jsxs("div",{className:"sack-bag",children:[n.jsxs("div",{className:"src",children:[" ",i.voucher_number||i.invoice_number]}),n.jsxs("span",{className:"bag-cnt",children:[i.bag_count||1," bag"]})]},o)),n.jsxs("div",{className:"sack-total",children:[n.jsx("span",{children:"Total Bags"}),n.jsxs("span",{style:{color:"var(--blue)"},children:[(Array.isArray(e.items)?e.items:[]).reduce((i,o)=>i+(o.bag_count||1),0)||0," bags  1 sack"]})]})]}),n.jsxs("div",{className:"sack-acts",children:[e.status!=="dispatched"&&n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"sack-btn",children:"Add Bag"}),n.jsx("button",{className:"sack-btn pri",onClick:()=>t(e.status==="collecting"?"ready":"dispatched"),children:e.status==="collecting"?"All Collected ":" Dispatch Sack"})]}),e.status==="dispatched"&&n.jsx("button",{className:"sack-btn",style:{opacity:.5,cursor:"default"},children:"Dispatched "})]})]})}function Zz(){const{i18n:e}=i6();return x.useEffect(()=>{const t=localStorage.getItem("language");t&&e.changeLanguage(t)},[]),n.jsx(Qz,{})}const ne=e=>typeof e=="string",yo=()=>{let e,t;const r=new Promise((a,i)=>{e=a,t=i});return r.resolve=e,r.reject=t,r},qb=e=>e==null?"":""+e,eL=(e,t,r)=>{e.forEach(a=>{t[a]&&(r[a]=t[a])})},tL=/###/g,Ub=e=>e&&e.indexOf("###")>-1?e.replace(tL,"."):e,Vb=e=>!e||ne(e),Fo=(e,t,r)=>{const a=ne(t)?t.split("."):t;let i=0;for(;i<a.length-1;){if(Vb(e))return{};const o=Ub(a[i]);!e[o]&&r&&(e[o]=new r),Object.prototype.hasOwnProperty.call(e,o)?e=e[o]:e={},++i}return Vb(e)?{}:{obj:e,k:Ub(a[i])}},Hb=(e,t,r)=>{const{obj:a,k:i}=Fo(e,t,Object);if(a!==void 0||t.length===1){a[i]=r;return}let o=t[t.length-1],d=t.slice(0,t.length-1),u=Fo(e,d,Object);for(;u.obj===void 0&&d.length;)o=`${d[d.length-1]}.${o}`,d=d.slice(0,d.length-1),u=Fo(e,d,Object),u&&u.obj&&typeof u.obj[`${u.k}.${o}`]<"u"&&(u.obj=void 0);u.obj[`${u.k}.${o}`]=r},nL=(e,t,r,a)=>{const{obj:i,k:o}=Fo(e,t,Object);i[o]=i[o]||[],i[o].push(r)},Mc=(e,t)=>{const{obj:r,k:a}=Fo(e,t);if(r)return r[a]},rL=(e,t,r)=>{const a=Mc(e,r);return a!==void 0?a:Mc(t,r)},tk=(e,t,r)=>{for(const a in t)a!=="__proto__"&&a!=="constructor"&&(a in e?ne(e[a])||e[a]instanceof String||ne(t[a])||t[a]instanceof String?r&&(e[a]=t[a]):tk(e[a],t[a],r):e[a]=t[a]);return e},Ea=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var sL={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const aL=e=>ne(e)?e.replace(/[&<>"'\/]/g,t=>sL[t]):e;class iL{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const r=this.regExpMap.get(t);if(r!==void 0)return r;const a=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,a),this.regExpQueue.push(t),a}}const oL=[" ",",","?","!",";"],lL=new iL(20),dL=(e,t,r)=>{t=t||"",r=r||"";const a=oL.filter(d=>t.indexOf(d)<0&&r.indexOf(d)<0);if(a.length===0)return!0;const i=lL.getRegExp(`(${a.map(d=>d==="?"?"\\?":d).join("|")})`);let o=!i.test(e);if(!o){const d=e.indexOf(r);d>0&&!i.test(e.substring(0,d))&&(o=!0)}return o},ig=function(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!e)return;if(e[t])return e[t];const a=t.split(r);let i=e;for(let o=0;o<a.length;){if(!i||typeof i!="object")return;let d,u="";for(let h=o;h<a.length;++h)if(h!==o&&(u+=r),u+=a[h],d=i[u],d!==void 0){if(["string","number","boolean"].indexOf(typeof d)>-1&&h<a.length-1)continue;o+=h-o+1;break}i=d}return i},$c=e=>e&&e.replace("_","-"),cL={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console&&console[e]&&console[e].apply(console,t)}};class qc{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(t,r)}init(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=r.prefix||"i18next:",this.logger=t||cL,this.options=r,this.debug=r.debug}log(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return this.forward(r,"log","",!0)}warn(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return this.forward(r,"warn","",!0)}error(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return this.forward(r,"error","")}deprecate(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return this.forward(r,"warn","WARNING DEPRECATED: ",!0)}forward(t,r,a,i){return i&&!this.debug?null:(ne(t[0])&&(t[0]=`${a}${this.prefix} ${t[0]}`),this.logger[r](t))}create(t){return new qc(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new qc(this.logger,t)}}var Bn=new qc;class xp{constructor(){this.observers={}}on(t,r){return t.split(" ").forEach(a=>{this.observers[a]||(this.observers[a]=new Map);const i=this.observers[a].get(r)||0;this.observers[a].set(r,i+1)}),this}off(t,r){if(this.observers[t]){if(!r){delete this.observers[t];return}this.observers[t].delete(r)}}emit(t){for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];this.observers[t]&&Array.from(this.observers[t].entries()).forEach(d=>{let[u,h]=d;for(let m=0;m<h;m++)u(...a)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(d=>{let[u,h]=d;for(let m=0;m<h;m++)u.apply(u,[t,...a])})}}class Kb extends xp{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=t||{},this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const r=this.options.ns.indexOf(t);r>-1&&this.options.ns.splice(r,1)}getResource(t,r,a){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,d=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let u;t.indexOf(".")>-1?u=t.split("."):(u=[t,r],a&&(Array.isArray(a)?u.push(...a):ne(a)&&o?u.push(...a.split(o)):u.push(a)));const h=Mc(this.data,u);return!h&&!r&&!a&&t.indexOf(".")>-1&&(t=u[0],r=u[1],a=u.slice(2).join(".")),h||!d||!ne(a)?h:ig(this.data&&this.data[t]&&this.data[t][r],a,o)}addResource(t,r,a,i){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const d=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let u=[t,r];a&&(u=u.concat(d?a.split(d):a)),t.indexOf(".")>-1&&(u=t.split("."),i=r,r=u[1]),this.addNamespaces(r),Hb(this.data,u,i),o.silent||this.emit("added",t,r,a,i)}addResources(t,r,a){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const o in a)(ne(a[o])||Array.isArray(a[o]))&&this.addResource(t,r,o,a[o],{silent:!0});i.silent||this.emit("added",t,r,a)}addResourceBundle(t,r,a,i,o){let d=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},u=[t,r];t.indexOf(".")>-1&&(u=t.split("."),i=a,a=r,r=u[1]),this.addNamespaces(r);let h=Mc(this.data,u)||{};d.skipCopy||(a=JSON.parse(JSON.stringify(a))),i?tk(h,a,o):h={...h,...a},Hb(this.data,u,h),d.silent||this.emit("added",t,r,a)}removeResourceBundle(t,r){this.hasResourceBundle(t,r)&&delete this.data[t][r],this.removeNamespaces(r),this.emit("removed",t,r)}hasResourceBundle(t,r){return this.getResource(t,r)!==void 0}getResourceBundle(t,r){return r||(r=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(t,r)}:this.getResource(t,r)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const r=this.getDataByLanguage(t);return!!(r&&Object.keys(r)||[]).find(i=>r[i]&&Object.keys(r[i]).length>0)}toJSON(){return this.data}}var nk={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,r,a,i){return e.forEach(o=>{this.processors[o]&&(t=this.processors[o].process(t,r,a,i))}),t}};const Jb={};class Uc extends xp{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),eL(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Bn.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(t==null)return!1;const a=this.resolve(t,r);return a&&a.res!==void 0}extractFromKey(t,r){let a=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;a===void 0&&(a=":");const i=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let o=r.ns||this.options.defaultNS||[];const d=a&&t.indexOf(a)>-1,u=!this.options.userDefinedKeySeparator&&!r.keySeparator&&!this.options.userDefinedNsSeparator&&!r.nsSeparator&&!dL(t,a,i);if(d&&!u){const h=t.match(this.interpolator.nestingRegexp);if(h&&h.length>0)return{key:t,namespaces:ne(o)?[o]:o};const m=t.split(a);(a!==i||a===i&&this.options.ns.indexOf(m[0])>-1)&&(o=m.shift()),t=m.join(i)}return{key:t,namespaces:ne(o)?[o]:o}}translate(t,r,a){if(typeof r!="object"&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),typeof r=="object"&&(r={...r}),r||(r={}),t==null)return"";Array.isArray(t)||(t=[String(t)]);const i=r.returnDetails!==void 0?r.returnDetails:this.options.returnDetails,o=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,{key:d,namespaces:u}=this.extractFromKey(t[t.length-1],r),h=u[u.length-1],m=r.lng||this.language,f=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(m&&m.toLowerCase()==="cimode"){if(f){const z=r.nsSeparator||this.options.nsSeparator;return i?{res:`${h}${z}${d}`,usedKey:d,exactUsedKey:d,usedLng:m,usedNS:h,usedParams:this.getUsedParamsDetails(r)}:`${h}${z}${d}`}return i?{res:d,usedKey:d,exactUsedKey:d,usedLng:m,usedNS:h,usedParams:this.getUsedParamsDetails(r)}:d}const b=this.resolve(t,r);let v=b&&b.res;const T=b&&b.usedKey||d,N=b&&b.exactUsedKey||d,R=Object.prototype.toString.apply(v),F=["[object Number]","[object Function]","[object RegExp]"],C=r.joinArrays!==void 0?r.joinArrays:this.options.joinArrays,j=!this.i18nFormat||this.i18nFormat.handleAsObject,_=!ne(v)&&typeof v!="boolean"&&typeof v!="number";if(j&&v&&_&&F.indexOf(R)<0&&!(ne(C)&&Array.isArray(v))){if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const z=this.options.returnedObjectHandler?this.options.returnedObjectHandler(T,v,{...r,ns:u}):`key '${d} (${this.language})' returned an object instead of string.`;return i?(b.res=z,b.usedParams=this.getUsedParamsDetails(r),b):z}if(o){const z=Array.isArray(v),I=z?[]:{},M=z?N:T;for(const W in v)if(Object.prototype.hasOwnProperty.call(v,W)){const K=`${M}${o}${W}`;I[W]=this.translate(K,{...r,joinArrays:!1,ns:u}),I[W]===K&&(I[W]=v[W])}v=I}}else if(j&&ne(C)&&Array.isArray(v))v=v.join(C),v&&(v=this.extendTranslation(v,t,r,a));else{let z=!1,I=!1;const M=r.count!==void 0&&!ne(r.count),W=Uc.hasDefaultValue(r),K=M?this.pluralResolver.getSuffix(m,r.count,r):"",xe=r.ordinal&&M?this.pluralResolver.getSuffix(m,r.count,{ordinal:!1}):"",re=M&&!r.ordinal&&r.count===0&&this.pluralResolver.shouldUseIntlApi(),Re=re&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${K}`]||r[`defaultValue${xe}`]||r.defaultValue;!this.isValidLookup(v)&&W&&(z=!0,v=Re),this.isValidLookup(v)||(I=!0,v=d);const Qe=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&I?void 0:v,Ue=W&&Re!==v&&this.options.updateMissing;if(I||z||Ue){if(this.logger.log(Ue?"updateKey":"missingKey",m,h,d,Ue?Re:v),o){const $=this.resolve(d,{...r,keySeparator:!1});$&&$.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let Rt=[];const Be=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Be&&Be[0])for(let $=0;$<Be.length;$++)Rt.push(Be[$]);else this.options.saveMissingTo==="all"?Rt=this.languageUtils.toResolveHierarchy(r.lng||this.language):Rt.push(r.lng||this.language);const Ut=($,X,te)=>{const ce=W&&te!==v?te:Qe;this.options.missingKeyHandler?this.options.missingKeyHandler($,h,X,ce,Ue,r):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing($,h,X,ce,Ue,r),this.emit("missingKey",$,h,X,v)};this.options.saveMissing&&(this.options.saveMissingPlurals&&M?Rt.forEach($=>{const X=this.pluralResolver.getSuffixes($,r);re&&r[`defaultValue${this.options.pluralSeparator}zero`]&&X.indexOf(`${this.options.pluralSeparator}zero`)<0&&X.push(`${this.options.pluralSeparator}zero`),X.forEach(te=>{Ut([$],d+te,r[`defaultValue${te}`]||Re)})}):Ut(Rt,d,Re))}v=this.extendTranslation(v,t,r,b,a),I&&v===d&&this.options.appendNamespaceToMissingKey&&(v=`${h}:${d}`),(I||z)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?v=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${h}:${d}`:d,z?v:void 0):v=this.options.parseMissingKeyHandler(v))}return i?(b.res=v,b.usedParams=this.getUsedParamsDetails(r),b):v}extendTranslation(t,r,a,i,o){var d=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...a},a.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!a.skipInterpolation){a.interpolation&&this.interpolator.init({...a,interpolation:{...this.options.interpolation,...a.interpolation}});const m=ne(t)&&(a&&a.interpolation&&a.interpolation.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let f;if(m){const v=t.match(this.interpolator.nestingRegexp);f=v&&v.length}let b=a.replace&&!ne(a.replace)?a.replace:a;if(this.options.interpolation.defaultVariables&&(b={...this.options.interpolation.defaultVariables,...b}),t=this.interpolator.interpolate(t,b,a.lng||this.language||i.usedLng,a),m){const v=t.match(this.interpolator.nestingRegexp),T=v&&v.length;f<T&&(a.nest=!1)}!a.lng&&this.options.compatibilityAPI!=="v1"&&i&&i.res&&(a.lng=this.language||i.usedLng),a.nest!==!1&&(t=this.interpolator.nest(t,function(){for(var v=arguments.length,T=new Array(v),N=0;N<v;N++)T[N]=arguments[N];return o&&o[0]===T[0]&&!a.context?(d.logger.warn(`It seems you are nesting recursively key: ${T[0]} in key: ${r[0]}`),null):d.translate(...T,r)},a)),a.interpolation&&this.interpolator.reset()}const u=a.postProcess||this.options.postProcess,h=ne(u)?[u]:u;return t!=null&&h&&h.length&&a.applyPostProcessor!==!1&&(t=nk.handle(h,t,r,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(a)},...a}:a,this)),t}resolve(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a,i,o,d,u;return ne(t)&&(t=[t]),t.forEach(h=>{if(this.isValidLookup(a))return;const m=this.extractFromKey(h,r),f=m.key;i=f;let b=m.namespaces;this.options.fallbackNS&&(b=b.concat(this.options.fallbackNS));const v=r.count!==void 0&&!ne(r.count),T=v&&!r.ordinal&&r.count===0&&this.pluralResolver.shouldUseIntlApi(),N=r.context!==void 0&&(ne(r.context)||typeof r.context=="number")&&r.context!=="",R=r.lngs?r.lngs:this.languageUtils.toResolveHierarchy(r.lng||this.language,r.fallbackLng);b.forEach(F=>{this.isValidLookup(a)||(u=F,!Jb[`${R[0]}-${F}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(u)&&(Jb[`${R[0]}-${F}`]=!0,this.logger.warn(`key "${i}" for languages "${R.join(", ")}" won't get resolved as namespace "${u}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),R.forEach(C=>{if(this.isValidLookup(a))return;d=C;const j=[f];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(j,f,C,F,r);else{let z;v&&(z=this.pluralResolver.getSuffix(C,r.count,r));const I=`${this.options.pluralSeparator}zero`,M=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(v&&(j.push(f+z),r.ordinal&&z.indexOf(M)===0&&j.push(f+z.replace(M,this.options.pluralSeparator)),T&&j.push(f+I)),N){const W=`${f}${this.options.contextSeparator}${r.context}`;j.push(W),v&&(j.push(W+z),r.ordinal&&z.indexOf(M)===0&&j.push(W+z.replace(M,this.options.pluralSeparator)),T&&j.push(W+I))}}let _;for(;_=j.pop();)this.isValidLookup(a)||(o=_,a=this.getResource(C,F,_,r))}))})}),{res:a,usedKey:i,exactUsedKey:o,usedLng:d,usedNS:u}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,r,a){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,r,a,i):this.resourceStore.getResource(t,r,a,i)}getUsedParamsDetails(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],a=t.replace&&!ne(t.replace);let i=a?t.replace:t;if(a&&typeof t.count<"u"&&(i.count=t.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!a){i={...i};for(const o of r)delete i[o]}return i}static hasDefaultValue(t){const r="defaultValue";for(const a in t)if(Object.prototype.hasOwnProperty.call(t,a)&&r===a.substring(0,r.length)&&t[a]!==void 0)return!0;return!1}}const Jh=e=>e.charAt(0).toUpperCase()+e.slice(1);class Yb{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Bn.create("languageUtils")}getScriptPartFromCode(t){if(t=$c(t),!t||t.indexOf("-")<0)return null;const r=t.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}getLanguagePartFromCode(t){if(t=$c(t),!t||t.indexOf("-")<0)return t;const r=t.split("-");return this.formatLanguageCode(r[0])}formatLanguageCode(t){if(ne(t)&&t.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let i=Intl.getCanonicalLocales(t)[0];if(i&&this.options.lowerCaseLng&&(i=i.toLowerCase()),i)return i}catch{}const r=["hans","hant","latn","cyrl","cans","mong","arab"];let a=t.split("-");return this.options.lowerCaseLng?a=a.map(i=>i.toLowerCase()):a.length===2?(a[0]=a[0].toLowerCase(),a[1]=a[1].toUpperCase(),r.indexOf(a[1].toLowerCase())>-1&&(a[1]=Jh(a[1].toLowerCase()))):a.length===3&&(a[0]=a[0].toLowerCase(),a[1].length===2&&(a[1]=a[1].toUpperCase()),a[0]!=="sgn"&&a[2].length===2&&(a[2]=a[2].toUpperCase()),r.indexOf(a[1].toLowerCase())>-1&&(a[1]=Jh(a[1].toLowerCase())),r.indexOf(a[2].toLowerCase())>-1&&(a[2]=Jh(a[2].toLowerCase()))),a.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let r;return t.forEach(a=>{if(r)return;const i=this.formatLanguageCode(a);(!this.options.supportedLngs||this.isSupportedCode(i))&&(r=i)}),!r&&this.options.supportedLngs&&t.forEach(a=>{if(r)return;const i=this.getLanguagePartFromCode(a);if(this.isSupportedCode(i))return r=i;r=this.options.supportedLngs.find(o=>{if(o===i)return o;if(!(o.indexOf("-")<0&&i.indexOf("-")<0)&&(o.indexOf("-")>0&&i.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===i||o.indexOf(i)===0&&i.length>1))return o})}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}getFallbackCodes(t,r){if(!t)return[];if(typeof t=="function"&&(t=t(r)),ne(t)&&(t=[t]),Array.isArray(t))return t;if(!r)return t.default||[];let a=t[r];return a||(a=t[this.getScriptPartFromCode(r)]),a||(a=t[this.formatLanguageCode(r)]),a||(a=t[this.getLanguagePartFromCode(r)]),a||(a=t.default),a||[]}toResolveHierarchy(t,r){const a=this.getFallbackCodes(r||this.options.fallbackLng||[],t),i=[],o=d=>{d&&(this.isSupportedCode(d)?i.push(d):this.logger.warn(`rejecting language code not found in supportedLngs: ${d}`))};return ne(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(t))):ne(t)&&o(this.formatLanguageCode(t)),a.forEach(d=>{i.indexOf(d)<0&&o(this.formatLanguageCode(d))}),i}}let pL=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],uL={1:e=>+(e>1),2:e=>+(e!=1),3:e=>0,4:e=>e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2,5:e=>e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5,6:e=>e==1?0:e>=2&&e<=4?1:2,7:e=>e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2,8:e=>e==1?0:e==2?1:e!=8&&e!=11?2:3,9:e=>+(e>=2),10:e=>e==1?0:e==2?1:e<7?2:e<11?3:4,11:e=>e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3,12:e=>+(e%10!=1||e%100==11),13:e=>+(e!==0),14:e=>e==1?0:e==2?1:e==3?2:3,15:e=>e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2,16:e=>e%10==1&&e%100!=11?0:e!==0?1:2,17:e=>e==1||e%10==1&&e%100!=11?0:1,18:e=>e==0?0:e==1?1:2,19:e=>e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3,20:e=>e==1?0:e==0||e%100>0&&e%100<20?1:2,21:e=>e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0,22:e=>e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3};const hL=["v1","v2","v3"],xL=["v4"],Qb={zero:0,one:1,two:2,few:3,many:4,other:5},gL=()=>{const e={};return pL.forEach(t=>{t.lngs.forEach(r=>{e[r]={numbers:t.nr,plurals:uL[t.fc]}})}),e};class fL{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=t,this.options=r,this.logger=Bn.create("pluralResolver"),(!this.options.compatibilityJSON||xL.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=gL(),this.pluralRulesCache={}}addRule(t,r){this.rules[t]=r}clearCache(){this.pluralRulesCache={}}getRule(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi()){const a=$c(t==="dev"?"en":t),i=r.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:a,type:i});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let d;try{d=new Intl.PluralRules(a,{type:i})}catch{if(!t.match(/-|_/))return;const h=this.languageUtils.getLanguagePartFromCode(t);d=this.getRule(h,r)}return this.pluralRulesCache[o]=d,d}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}needsPlural(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=this.getRule(t,r);return this.shouldUseIntlApi()?a&&a.resolvedOptions().pluralCategories.length>1:a&&a.numbers.length>1}getPluralFormsOfKey(t,r){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,a).map(i=>`${r}${i}`)}getSuffixes(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=this.getRule(t,r);return a?this.shouldUseIntlApi()?a.resolvedOptions().pluralCategories.sort((i,o)=>Qb[i]-Qb[o]).map(i=>`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i}`):a.numbers.map(i=>this.getSuffix(t,i,r)):[]}getSuffix(t,r){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=this.getRule(t,a);return i?this.shouldUseIntlApi()?`${this.options.prepend}${a.ordinal?`ordinal${this.options.prepend}`:""}${i.select(r)}`:this.getSuffixRetroCompatible(i,r):(this.logger.warn(`no plural rule found for: ${t}`),"")}getSuffixRetroCompatible(t,r){const a=t.noAbs?t.plurals(r):t.plurals(Math.abs(r));let i=t.numbers[a];this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1&&(i===2?i="plural":i===1&&(i=""));const o=()=>this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString();return this.options.compatibilityJSON==="v1"?i===1?"":typeof i=="number"?`_plural_${i.toString()}`:o():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1?o():this.options.prepend&&a.toString()?this.options.prepend+a.toString():a.toString()}shouldUseIntlApi(){return!hL.includes(this.options.compatibilityJSON)}}const Xb=function(e,t,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=rL(e,t,r);return!o&&i&&ne(r)&&(o=ig(e,r,a),o===void 0&&(o=ig(t,r,a))),o},Yh=e=>e.replace(/\$/g,"$$$$");class mL{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Bn.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||(r=>r),this.init(t)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});const{escape:r,escapeValue:a,useRawValueToEscape:i,prefix:o,prefixEscaped:d,suffix:u,suffixEscaped:h,formatSeparator:m,unescapeSuffix:f,unescapePrefix:b,nestingPrefix:v,nestingPrefixEscaped:T,nestingSuffix:N,nestingSuffixEscaped:R,nestingOptionsSeparator:F,maxReplaces:C,alwaysFormat:j}=t.interpolation;this.escape=r!==void 0?r:aL,this.escapeValue=a!==void 0?a:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=o?Ea(o):d||"{{",this.suffix=u?Ea(u):h||"}}",this.formatSeparator=m||",",this.unescapePrefix=f?"":b||"-",this.unescapeSuffix=this.unescapePrefix?"":f||"",this.nestingPrefix=v?Ea(v):T||Ea("$t("),this.nestingSuffix=N?Ea(N):R||Ea(")"),this.nestingOptionsSeparator=F||",",this.maxReplaces=C||1e3,this.alwaysFormat=j!==void 0?j:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(r,a)=>r&&r.source===a?(r.lastIndex=0,r):new RegExp(a,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(t,r,a,i){let o,d,u;const h=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},m=T=>{if(T.indexOf(this.formatSeparator)<0){const C=Xb(r,h,T,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(C,void 0,a,{...i,...r,interpolationkey:T}):C}const N=T.split(this.formatSeparator),R=N.shift().trim(),F=N.join(this.formatSeparator).trim();return this.format(Xb(r,h,R,this.options.keySeparator,this.options.ignoreJSONStructure),F,a,{...i,...r,interpolationkey:R})};this.resetRegExp();const f=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,b=i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:T=>Yh(T)},{regex:this.regexp,safeValue:T=>this.escapeValue?Yh(this.escape(T)):Yh(T)}].forEach(T=>{for(u=0;o=T.regex.exec(t);){const N=o[1].trim();if(d=m(N),d===void 0)if(typeof f=="function"){const F=f(t,o,i);d=ne(F)?F:""}else if(i&&Object.prototype.hasOwnProperty.call(i,N))d="";else if(b){d=o[0];continue}else this.logger.warn(`missed to pass in variable ${N} for interpolating ${t}`),d="";else!ne(d)&&!this.useRawValueToEscape&&(d=qb(d));const R=T.safeValue(d);if(t=t.replace(o[0],R),b?(T.regex.lastIndex+=d.length,T.regex.lastIndex-=o[0].length):T.regex.lastIndex=0,u++,u>=this.maxReplaces)break}}),t}nest(t,r){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,o,d;const u=(h,m)=>{const f=this.nestingOptionsSeparator;if(h.indexOf(f)<0)return h;const b=h.split(new RegExp(`${f}[ ]*{`));let v=`{${b[1]}`;h=b[0],v=this.interpolate(v,d);const T=v.match(/'/g),N=v.match(/"/g);(T&&T.length%2===0&&!N||N.length%2!==0)&&(v=v.replace(/'/g,'"'));try{d=JSON.parse(v),m&&(d={...m,...d})}catch(R){return this.logger.warn(`failed parsing options string in nesting for key ${h}`,R),`${h}${f}${v}`}return d.defaultValue&&d.defaultValue.indexOf(this.prefix)>-1&&delete d.defaultValue,h};for(;i=this.nestingRegexp.exec(t);){let h=[];d={...a},d=d.replace&&!ne(d.replace)?d.replace:d,d.applyPostProcessor=!1,delete d.defaultValue;let m=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const f=i[1].split(this.formatSeparator).map(b=>b.trim());i[1]=f.shift(),h=f,m=!0}if(o=r(u.call(this,i[1].trim(),d),d),o&&i[0]===t&&!ne(o))return o;ne(o)||(o=qb(o)),o||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${t}`),o=""),m&&(o=h.reduce((f,b)=>this.format(f,b,a.lng,{...a,interpolationkey:i[1].trim()}),o.trim())),t=t.replace(i[0],o),this.regexp.lastIndex=0}return t}}const yL=e=>{let t=e.toLowerCase().trim();const r={};if(e.indexOf("(")>-1){const a=e.split("(");t=a[0].toLowerCase().trim();const i=a[1].substring(0,a[1].length-1);t==="currency"&&i.indexOf(":")<0?r.currency||(r.currency=i.trim()):t==="relativetime"&&i.indexOf(":")<0?r.range||(r.range=i.trim()):i.split(";").forEach(d=>{if(d){const[u,...h]=d.split(":"),m=h.join(":").trim().replace(/^'+|'+$/g,""),f=u.trim();r[f]||(r[f]=m),m==="false"&&(r[f]=!1),m==="true"&&(r[f]=!0),isNaN(m)||(r[f]=parseInt(m,10))}})}return{formatName:t,formatOptions:r}},Fa=e=>{const t={};return(r,a,i)=>{let o=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(o={...o,[i.interpolationkey]:void 0});const d=a+JSON.stringify(o);let u=t[d];return u||(u=e($c(a),i),t[d]=u),u(r)}};class vL{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Bn.create("formatter"),this.options=t,this.formats={number:Fa((r,a)=>{const i=new Intl.NumberFormat(r,{...a});return o=>i.format(o)}),currency:Fa((r,a)=>{const i=new Intl.NumberFormat(r,{...a,style:"currency"});return o=>i.format(o)}),datetime:Fa((r,a)=>{const i=new Intl.DateTimeFormat(r,{...a});return o=>i.format(o)}),relativetime:Fa((r,a)=>{const i=new Intl.RelativeTimeFormat(r,{...a});return o=>i.format(o,a.range||"day")}),list:Fa((r,a)=>{const i=new Intl.ListFormat(r,{...a});return o=>i.format(o)})},this.init(t)}init(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=r.interpolation.formatSeparator||","}add(t,r){this.formats[t.toLowerCase().trim()]=r}addCached(t,r){this.formats[t.toLowerCase().trim()]=Fa(r)}format(t,r,a){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const o=r.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(u=>u.indexOf(")")>-1)){const u=o.findIndex(h=>h.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,u)].join(this.formatSeparator)}return o.reduce((u,h)=>{const{formatName:m,formatOptions:f}=yL(h);if(this.formats[m]){let b=u;try{const v=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},T=v.locale||v.lng||i.locale||i.lng||a;b=this.formats[m](u,T,{...f,...i,...v})}catch(v){this.logger.warn(v)}return b}else this.logger.warn(`there was no format function for ${m}`);return u},t)}}const bL=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)};class jL extends xp{constructor(t,r,a){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=t,this.store=r,this.services=a,this.languageUtils=a.languageUtils,this.options=i,this.logger=Bn.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(a,i.backend,i)}queueLoad(t,r,a,i){const o={},d={},u={},h={};return t.forEach(m=>{let f=!0;r.forEach(b=>{const v=`${m}|${b}`;!a.reload&&this.store.hasResourceBundle(m,b)?this.state[v]=2:this.state[v]<0||(this.state[v]===1?d[v]===void 0&&(d[v]=!0):(this.state[v]=1,f=!1,d[v]===void 0&&(d[v]=!0),o[v]===void 0&&(o[v]=!0),h[b]===void 0&&(h[b]=!0)))}),f||(u[m]=!0)}),(Object.keys(o).length||Object.keys(d).length)&&this.queue.push({pending:d,pendingCount:Object.keys(d).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(o),pending:Object.keys(d),toLoadLanguages:Object.keys(u),toLoadNamespaces:Object.keys(h)}}loaded(t,r,a){const i=t.split("|"),o=i[0],d=i[1];r&&this.emit("failedLoading",o,d,r),!r&&a&&this.store.addResourceBundle(o,d,a,void 0,void 0,{skipCopy:!0}),this.state[t]=r?-1:2,r&&a&&(this.state[t]=0);const u={};this.queue.forEach(h=>{nL(h.loaded,[o],d),bL(h,t),r&&h.errors.push(r),h.pendingCount===0&&!h.done&&(Object.keys(h.loaded).forEach(m=>{u[m]||(u[m]={});const f=h.loaded[m];f.length&&f.forEach(b=>{u[m][b]===void 0&&(u[m][b]=!0)})}),h.done=!0,h.errors.length?h.callback(h.errors):h.callback())}),this.emit("loaded",u),this.queue=this.queue.filter(h=>!h.done)}read(t,r,a){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,d=arguments.length>5?arguments[5]:void 0;if(!t.length)return d(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:r,fcName:a,tried:i,wait:o,callback:d});return}this.readingCalls++;const u=(m,f)=>{if(this.readingCalls--,this.waitingReads.length>0){const b=this.waitingReads.shift();this.read(b.lng,b.ns,b.fcName,b.tried,b.wait,b.callback)}if(m&&f&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,t,r,a,i+1,o*2,d)},o);return}d(m,f)},h=this.backend[a].bind(this.backend);if(h.length===2){try{const m=h(t,r);m&&typeof m.then=="function"?m.then(f=>u(null,f)).catch(u):u(null,m)}catch(m){u(m)}return}return h(t,r,u)}prepareLoading(t,r){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();ne(t)&&(t=this.languageUtils.toResolveHierarchy(t)),ne(r)&&(r=[r]);const o=this.queueLoad(t,r,a,i);if(!o.toLoad.length)return o.pending.length||i(),null;o.toLoad.forEach(d=>{this.loadOne(d)})}load(t,r,a){this.prepareLoading(t,r,{},a)}reload(t,r,a){this.prepareLoading(t,r,{reload:!0},a)}loadOne(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const a=t.split("|"),i=a[0],o=a[1];this.read(i,o,"read",void 0,void 0,(d,u)=>{d&&this.logger.warn(`${r}loading namespace ${o} for language ${i} failed`,d),!d&&u&&this.logger.log(`${r}loaded namespace ${o} for language ${i}`,u),this.loaded(t,d,u)})}saveMissing(t,r,a,i,o){let d=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},u=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(r)){this.logger.warn(`did not save key "${a}" as the namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(a==null||a==="")){if(this.backend&&this.backend.create){const h={...d,isUpdate:o},m=this.backend.create.bind(this.backend);if(m.length<6)try{let f;m.length===5?f=m(t,r,a,i,h):f=m(t,r,a,i),f&&typeof f.then=="function"?f.then(b=>u(null,b)).catch(u):u(null,f)}catch(f){u(f)}else m(t,r,a,i,u,h)}!t||!t[0]||this.store.addResource(t[0],r,a,i)}}}const Gb=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]=="object"&&(t=e[1]),ne(e[1])&&(t.defaultValue=e[1]),ne(e[2])&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const r=e[3]||e[2];Object.keys(r).forEach(a=>{t[a]=r[a]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),Zb=e=>(ne(e.ns)&&(e.ns=[e.ns]),ne(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),ne(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e),Jd=()=>{},SL=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(r=>{typeof e[r]=="function"&&(e[r]=e[r].bind(e))})};class Zo extends xp{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(super(),this.options=Zb(t),this.services={},this.logger=Bn,this.modules={external:[]},SL(this),r&&!this.isInitialized&&!t.isClone){if(!this.options.initImmediate)return this.init(t,r),this;setTimeout(()=>{this.init(t,r)},0)}}init(){var t=this;let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof r=="function"&&(a=r,r={}),!r.defaultNS&&r.defaultNS!==!1&&r.ns&&(ne(r.ns)?r.defaultNS=r.ns:r.ns.indexOf("translation")<0&&(r.defaultNS=r.ns[0]));const i=Gb();this.options={...i,...this.options,...Zb(r)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...i.interpolation,...this.options.interpolation}),r.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=r.keySeparator),r.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=r.nsSeparator);const o=f=>f?typeof f=="function"?new f:f:null;if(!this.options.isClone){this.modules.logger?Bn.init(o(this.modules.logger),this.options):Bn.init(null,this.options);let f;this.modules.formatter?f=this.modules.formatter:typeof Intl<"u"&&(f=vL);const b=new Yb(this.options);this.store=new Kb(this.options.resources,this.options);const v=this.services;v.logger=Bn,v.resourceStore=this.store,v.languageUtils=b,v.pluralResolver=new fL(b,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),f&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(v.formatter=o(f),v.formatter.init(v,this.options),this.options.interpolation.format=v.formatter.format.bind(v.formatter)),v.interpolator=new mL(this.options),v.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},v.backendConnector=new jL(o(this.modules.backend),v.resourceStore,v,this.options),v.backendConnector.on("*",function(T){for(var N=arguments.length,R=new Array(N>1?N-1:0),F=1;F<N;F++)R[F-1]=arguments[F];t.emit(T,...R)}),this.modules.languageDetector&&(v.languageDetector=o(this.modules.languageDetector),v.languageDetector.init&&v.languageDetector.init(v,this.options.detection,this.options)),this.modules.i18nFormat&&(v.i18nFormat=o(this.modules.i18nFormat),v.i18nFormat.init&&v.i18nFormat.init(this)),this.translator=new Uc(this.services,this.options),this.translator.on("*",function(T){for(var N=arguments.length,R=new Array(N>1?N-1:0),F=1;F<N;F++)R[F-1]=arguments[F];t.emit(T,...R)}),this.modules.external.forEach(T=>{T.init&&T.init(this)})}if(this.format=this.options.interpolation.format,a||(a=Jd),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const f=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);f.length>0&&f[0]!=="dev"&&(this.options.lng=f[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(f=>{this[f]=function(){return t.store[f](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(f=>{this[f]=function(){return t.store[f](...arguments),t}});const h=yo(),m=()=>{const f=(b,v)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),h.resolve(v),a(b,v)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return f(null,this.t.bind(this));this.changeLanguage(this.options.lng,f)};return this.options.resources||!this.options.initImmediate?m():setTimeout(m,0),h}loadResources(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Jd;const i=ne(t)?t:this.language;if(typeof t=="function"&&(a=t),!this.options.resources||this.options.partialBundledLanguages){if(i&&i.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return a();const o=[],d=u=>{if(!u||u==="cimode")return;this.services.languageUtils.toResolveHierarchy(u).forEach(m=>{m!=="cimode"&&o.indexOf(m)<0&&o.push(m)})};i?d(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(h=>d(h)),this.options.preload&&this.options.preload.forEach(u=>d(u)),this.services.backendConnector.load(o,this.options.ns,u=>{!u&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),a(u)})}else a(null)}reloadResources(t,r,a){const i=yo();return typeof t=="function"&&(a=t,t=void 0),typeof r=="function"&&(a=r,r=void 0),t||(t=this.languages),r||(r=this.options.ns),a||(a=Jd),this.services.backendConnector.reload(t,r,o=>{i.resolve(),a(o)}),i}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&nk.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1))for(let r=0;r<this.languages.length;r++){const a=this.languages[r];if(!(["cimode","dev"].indexOf(a)>-1)&&this.store.hasLanguageSomeTranslations(a)){this.resolvedLanguage=a;break}}}changeLanguage(t,r){var a=this;this.isLanguageChangingTo=t;const i=yo();this.emit("languageChanging",t);const o=h=>{this.language=h,this.languages=this.services.languageUtils.toResolveHierarchy(h),this.resolvedLanguage=void 0,this.setResolvedLanguage(h)},d=(h,m)=>{m?(o(m),this.translator.changeLanguage(m),this.isLanguageChangingTo=void 0,this.emit("languageChanged",m),this.logger.log("languageChanged",m)):this.isLanguageChangingTo=void 0,i.resolve(function(){return a.t(...arguments)}),r&&r(h,function(){return a.t(...arguments)})},u=h=>{!t&&!h&&this.services.languageDetector&&(h=[]);const m=ne(h)?h:this.services.languageUtils.getBestMatchFromCodes(h);m&&(this.language||o(m),this.translator.language||this.translator.changeLanguage(m),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(m)),this.loadResources(m,f=>{d(f,m)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?u(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(u):this.services.languageDetector.detect(u):u(t),i}getFixedT(t,r,a){var i=this;const o=function(d,u){let h;if(typeof u!="object"){for(var m=arguments.length,f=new Array(m>2?m-2:0),b=2;b<m;b++)f[b-2]=arguments[b];h=i.options.overloadTranslationOptionHandler([d,u].concat(f))}else h={...u};h.lng=h.lng||o.lng,h.lngs=h.lngs||o.lngs,h.ns=h.ns||o.ns,h.keyPrefix!==""&&(h.keyPrefix=h.keyPrefix||a||o.keyPrefix);const v=i.options.keySeparator||".";let T;return h.keyPrefix&&Array.isArray(d)?T=d.map(N=>`${h.keyPrefix}${v}${N}`):T=h.keyPrefix?`${h.keyPrefix}${v}${d}`:d,i.t(T,h)};return ne(t)?o.lng=t:o.lngs=t,o.ns=r,o.keyPrefix=a,o}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const a=r.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(a.toLowerCase()==="cimode")return!0;const d=(u,h)=>{const m=this.services.backendConnector.state[`${u}|${h}`];return m===-1||m===0||m===2};if(r.precheck){const u=r.precheck(this,d);if(u!==void 0)return u}return!!(this.hasResourceBundle(a,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||d(a,t)&&(!i||d(o,t)))}loadNamespaces(t,r){const a=yo();return this.options.ns?(ne(t)&&(t=[t]),t.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{a.resolve(),r&&r(i)}),a):(r&&r(),Promise.resolve())}loadLanguages(t,r){const a=yo();ne(t)&&(t=[t]);const i=this.options.preload||[],o=t.filter(d=>i.indexOf(d)<0&&this.services.languageUtils.isSupportedCode(d));return o.length?(this.options.preload=i.concat(o),this.loadResources(d=>{a.resolve(),r&&r(d)}),a):(r&&r(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!t)return"rtl";const r=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],a=this.services&&this.services.languageUtils||new Yb(Gb());return r.indexOf(a.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return new Zo(t,r)}cloneInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Jd;const a=t.forkResourceStore;a&&delete t.forkResourceStore;const i={...this.options,...t,isClone:!0},o=new Zo(i);return(t.debug!==void 0||t.prefix!==void 0)&&(o.logger=o.logger.clone(t)),["store","services","language"].forEach(u=>{o[u]=this[u]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},a&&(o.store=new Kb(this.store.data,i),o.services.resourceStore=o.store),o.translator=new Uc(o.services,i),o.translator.on("*",function(u){for(var h=arguments.length,m=new Array(h>1?h-1:0),f=1;f<h;f++)m[f-1]=arguments[f];o.emit(u,...m)}),o.init(i,r),o.translator.options=i,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const ut=Zo.createInstance();ut.createInstance=Zo.createInstance;ut.createInstance;ut.dir;ut.init;ut.loadResources;ut.reloadResources;ut.use;ut.changeLanguage;ut.getFixedT;ut.t;ut.exists;ut.setDefaultNamespace;ut.hasLoadedNamespace;ut.loadNamespaces;ut.loadLanguages;const wL={title:"Wholesale Dashboard",subtitle:"Tally Prime Integration"},kL={dashboard:"Dashboard",bills:"Bills",daybook:"Daybook",sacks:"Sacks",settings:"Settings"},CL={totalSales:"Total Sales",totalReceived:"Received",pending:"Pending",billsToday:"Bills Today",pendingBills:"Pending Bills",recentBills:"Recent Bills",dispatchQueue:"Dispatch Queue"},NL={invoiceNo:"Invoice No",date:"Date",party:"Party Name",amount:"Amount",status:"Status",paymentStatus:"Payment",dispatchStatus:"Dispatch",actions:"Actions",receivePayment:"Receive Payment",viewDetails:"View Details",markReady:"Mark Ready",markDispatched:"Dispatched",customerTaken:"Customer Taken"},_L={title:"Receive Payment",amount:"Amount",mode:"Payment Mode",cash:"Cash",bank:"Bank",fullPayment:"Full Payment",partialPayment:"Partial Payment",confirm:"Confirm Payment",cancel:"Cancel",success:"Payment recorded successfully",error:"Failed to record payment"},AL={title:"Columnar Daybook",partyName:"Party Name",voucherType:"Voucher Type",debit:"Debit (Dr)",credit:"Credit (Cr)",balance:"Balance",total:"Total",partySummary:"Party Summary",filterByType:"Filter by Type"},RL={title:"Sack Tracking",newSack:"New Sack",sackNumber:"Sack No",customer:"Customer",items:"Items",status:"Status",packing:"Packing",ready:"Ready",dispatched:"Dispatched",addBill:"Add Bill",addExternal:"Add External Item",externalVendor:"Vendor Name",externalAmount:"Amount"},BL={pending:"Pending",partial:"Partial",paid:"Paid",created:"Created",ready:"Ready",dispatched:"Dispatched",customer_taken:"Customer Taken"},TL={connected:"Connected to Tally",disconnected:"Tally Disconnected",syncing:"Syncing...",lastSync:"Last sync",error:"Sync Error"},zL={search:"Search",filter:"Filter",refresh:"Refresh",save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",view:"View",loading:"Loading...",noData:"No data available",currency:""},LL={newBill:"New Bill Created",paymentReceived:"Payment Received",largeBill:"Large Bill Alert"},EL={app:wL,nav:kL,dashboard:CL,bills:NL,payment:_L,daybook:AL,sacks:RL,status:BL,sync:TL,common:zL,notifications:LL},FL={title:" ",subtitle:"  "},DL={dashboard:"",bills:"",daybook:" ",sacks:"",settings:""},PL={totalSales:" ",totalReceived:"",pending:"",billsToday:" ",pendingBills:" ",recentBills:" ",dispatchQueue:" "},IL={invoiceNo:" ",date:"",party:" ",amount:"",status:"",paymentStatus:"",dispatchStatus:"",actions:"",receivePayment:" ",viewDetails:" ",markReady:" ",markDispatched:"",customerTaken:" "},OL={title:"  ",amount:"",mode:" ",cash:"",bank:"",fullPayment:" ",partialPayment:" ",confirm:"  ",cancel:" ",success:"   ",error:"   "},WL={title:"  ",partyName:" ",voucherType:" ",debit:" (Dr)",credit:" (Cr)",balance:"",total:"",partySummary:" ",filterByType:"  "},ML={title:" ",newSack:" ",sackNumber:" ",customer:"",items:"",status:"",packing:"",ready:"",dispatched:"",addBill:" ",addExternal:"  ",externalVendor:" ",externalAmount:""},$L={pending:"",partial:"",paid:" ",created:"",ready:"",dispatched:"",customer_taken:" "},qL={connected:" ",disconnected:" ",syncing:" ...",lastSync:" ",error:" "},UL={search:"",filter:"",refresh:"",save:" ",cancel:" ",delete:"",edit:"",view:"",loading:" ...",noData:"  ",currency:""},VL={newBill:"  ",paymentReceived:"  ",largeBill:"  "},HL={app:FL,nav:DL,dashboard:PL,bills:IL,payment:OL,daybook:WL,sacks:ML,status:$L,sync:qL,common:UL,notifications:VL};ut.use(t6).init({resources:{en:{translation:EL},ne:{translation:HL}},lng:localStorage.getItem("language")||"en",fallbackLng:"en",interpolation:{escapeValue:!1}});const uf=(e,t,r)=>{try{navigator.sendBeacon("/api/log/error",JSON.stringify({message:e,stack:t,url:r||window.location.href,timestamp:new Date().toISOString()}))}catch{}};window.onerror=(e,t,r,a,i)=>{uf(`${e} (${t}:${r}:${a})`,(i==null?void 0:i.stack)||"",t)};window.onunhandledrejection=e=>{const t=e.reason;uf((t==null?void 0:t.message)||String(t),(t==null?void 0:t.stack)||"","")};const KL=console.error;console.error=(...e)=>{KL.apply(console,e);const t=e.map(r=>{if(r instanceof Error)return`${r.message}
${r.stack}`;if(typeof r=="object")try{return JSON.stringify(r)}catch{return String(r)}return String(r)}).join(" ");uf(t,"","")};Qh.createRoot(document.getElementById("root")).render(n.jsx(vo.StrictMode,{children:n.jsx(Zz,{})}));
